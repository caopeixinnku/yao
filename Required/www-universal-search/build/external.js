webpackJsonp([1],[function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(283),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(36),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";var r=n(298).default,i=n(301).default,o=n(305).default;e.default=function(){function t(t,e){o(t,e),t.__proto__=e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=r(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(i?i(e,n):t(e,n))}}(),e.__esModule=!0},function(t,e,n){"use strict";function r(t,e){var n=e.decorators,r=e.properties;if(n)for(var i=0,a=n.length;i<a;++i)t=n[i](t)||t;if(r)for(var s=0,u=r.length;s<u;++s){var c=r[s],l=c.static?t:t.prototype,f=new o.default(l,c,t),h=c.decorators;if(h)for(var d=0,p=h.length;d<p;++d)h[d](f);f.finish()}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(311),o=function(t){return t&&t.__esModule?t:{default:t}}(i)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=r(i);e.default=function(){return function(t){var e=t.name,n="_"+e,r=t.init;if(r)t.add(n,{configurable:!0,enumerable:!1,writable:!0,value:l});else if(t.ref[n]===l)return;var i=t.ref.definedObservables;t.ref.hasOwnProperty("definedObservables")||(i=i?(0,o.default)({},i):{},t.add("definedObservables",{configurable:!0,enumerable:!1,writable:!0,value:i})),i[e]=!0,t.define({configurable:!0,enumerable:!1,get:function(){s.default.active&&u(this,e);var t=this[n];return t===l&&(t=this[n]=r.call(this)),t},set:function(t){var i=this[n];i===l&&(i=this[n]=r.call(this)),i!==t&&(this[n]=t,c(this,e,t,i))}})}};var a=n(55),s=r(a),u=s.default.recordEvent,c=s.default.recordChange,l={defaultValue:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(2),o=r(i),a=n(333),s=r(a);e.default=function t(e,n,r){null===e&&(e=Function.prototype);var i=(0,s.default)(e,n);if(void 0===i){var a=(0,o.default)(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){this.name=t,this.signal=new s.default}function o(t,e,n){return function(r){var o=t(r)||r,a=e.hot;if(a){var s="component"+n,u=a.data&&a.data[s];a.accept(),a.dispose(function(t){return t[s]=u}),u?(u.instance=o,c.default.push(function(){return u.signal.triggerNoArgs()})):u=new i(n),o.hotReloader=u}return o}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(45),s=r(a),u=n(154),c=r(u)},function(t,e,n){"use strict";function r(t,e,n){switch(n){case"events":return t?t.concat(e):[].concat(e)}return e}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){return function(n){t&&(n.prototype._xrayClassName=t),e&&(0,o.default)(n.prototype,e,r)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){h=t}function o(){return h}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=r(a),u=n(1),c=r(u);e.setCacheState=i,e.getCacheState=o;var l=n(221),f=r(l),h=!0,d={render:function(){},init:function(){},dispose:function(){},move:function(){},reuse:function(){}},p=0,_=function(){function t(){(0,s.default)(this,t)}return(0,c.default)(t,null,[{key:"make",value:function(e){if(!e.firstChild)return console.warn("Template didn't provide a first child method, so we cannot use it. Switching to EmptyTemplate.",e),t.EmptyTemplate;e.lastChild||(e.lastChild=e.firstChild);var n=++p,r=!1!==e.cache,i=(0,f.default)(e,d),o=i.render,a=i.init,s=i.dispose,u=i.move,c=i.reuse,l=i.prepare,_={};return i.render=function(t,e){++t.depth,o(t,e),a(t,e),--t.depth},i.dispose=function(t,e){if(e.$_disposed)throw new Error("Invalid dispose on disposed template.");var n=t.parentNode,r=t.nextNode;s(t,e),e.$_disposed=!0,t.parentNode=n,t.nextNode=r},i.reuse=function(t,e){if(!e.$_disposed)throw new Error("Invalid reuse on live template.");e.$_disposed=!1;var n=t.parentNode,r=t.nextNode;++t.depth,c(t,e),a(t,e),--t.depth,t.parentNode=n,t.nextNode=r},i.cache=function(t,e){var i=t.parentNode,o=t.nextNode;e.$_disposed||(e.$_disposed=!0,s(t,e)),e.$_cache||(t.parentNode=e.$_cache=t.makeFragment(),t.nextNode=null,u(t,e),h&&r&&t.templates.put(n,e)),t.parentNode=i,t.nextNode=o},i.run=function(t,e){if(!e.$_cache)return++t.depth,o(t,e),a(t,e),void--t.depth;t.pushNode(e.$_cache),e.$_cache=null,e.$_disposed=!1;var n=t.parentNode,r=t.nextNode;++t.depth,c(t,e),a(t,e),--t.depth,t.parentNode=n,t.nextNode=r},i.make=function(t){if(_[t.id]||(l&&l(t),_[t.id]=!0,h&&r&&t.templates.init(n)),h&&r){var e=t.templates.take(n);if(e)return e}return{template:i,$_cache:null,$_disposed:!1}},i.releaseCache=function(t){t.templates.removeAll(n)},i}}]),t}();e.default=_,_.EmptyTemplate=_.make({render:function(t,e){e.comment=t.pushCommentNode("empty template")},move:function(t,e){t.pushNode(e.comment)},firstChild:function(t,e){return e.comment}})},function(t,e,n){(function(e,n,r){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(e){t.exports=e()}(function(){var t,i,o;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var u;try{throw new Error}catch(t){u=t}var c=t("./schedule"),l=t("./queue"),f=t("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,a,void 0,l,h),c._then(s,u,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){return n(t,this.pop()).apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),u=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(u){var c=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(c,u)}else if("function"==typeof f){var h=o(f).call(c,u);if(h===a)return h;if(h)return o(n).call(c,u)}else if(r.isObject(u)){for(var d=i(f),p=0;p<d.length;++p){var _=d[p];if(f[_]!=u[_])continue t}return o(n).call(c,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+F.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?F.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function u(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function p(){this._trace=new I(this._peekContext())}function _(t,e){if(U(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);F.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),F.notEnumerableProp(t,"__stackCleaned__",!0)}}}function v(t,e,n,r,i){if(void 0===t&&null!==e&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),u=w(s),c=u.length-1;c>=0;--c){var l=u[c];if(!V.test(l)){var f=l.match(H);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0)for(var h=u[0],c=0;c<s.length;++c)if(s[c]===h){c>0&&(a="\n"+s[c-1]);break}}var d="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(d,!0,e)}}function m(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),y(n)}function y(t,e,r){if(at.warnings){var i,o=new B(t);if(e)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=C(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||S(o,"",!0)}}function g(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function A(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var u=r[s];if(e[i]!==u)break;e.pop(),i--}e=r}}function w(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||z.test(r),o=i&&rt(r);i&&!o&&(W&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function E(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||z.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?E(t):["    (No stack trace)"],{message:n,stack:w(e)}}function S(t,e,n){if("undefined"!=typeof console){var r;if(F.isObject(t)){var i=t.stack;r=e+Y(i,t)}else r=e+String(t);"function"==typeof P?P(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function k(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){j.throwLater(t)}"unhandledRejection"===t?et(t,n,r)||i||S(n,"Unhandled rejection "):et(t,r)}function L(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():F.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+T(e)+">, no stack trace)"}function T(t){return t.length<41?t:t.substr(0,38)+"..."}function x(){return"function"==typeof ot}function R(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function O(t,e){if(x()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u){var c=R(i[u]);if(c){n=c.fileName,a=c.line;break}}for(var u=0;u<o.length;++u){var c=R(o[u]);if(c){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(rt=function(t){if($.test(t))return!0;var e=R(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function I(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,I),e>32&&this.uncycle()}var D,N,P,M=n._getDomain,j=n._async,B=t("./errors").Warning,F=t("./util"),U=F.canAttachTrace,$=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,V=/\((?:timers\.js):\d+:\d+\)/,H=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,Y=null,W=!1,q=!(0==F.env("BLUEBIRD_DEBUG")),X=!(0==F.env("BLUEBIRD_WARNINGS")||!q&&!F.env("BLUEBIRD_WARNINGS")),G=!(0==F.env("BLUEBIRD_LONG_STACK_TRACES")||!q&&!F.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=F.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),j.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",D,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",N,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return y(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=M();N="function"==typeof t?null===e?t:F.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=M();D="function"==typeof t?null===e?t:F.domainBind(e,t):void 0};var J=function(){};n.longStackTraces=function(){if(j.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&x()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;at.longStackTraces=!0,J=function(){if(j.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),j.enableTrampoline(),at.longStackTraces=!1},n.prototype._captureStackTrace=p,n.prototype._attachExtraTrace=_,r.activateLongStackTraces(),j.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return at.longStackTraces&&x()};var Q=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return F.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!F.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return F.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!F.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),F.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!F.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Z=function(){return F.isNode?function(){return e.emit.apply(e,arguments)}:F.global?function(t){var e="on"+t.toLowerCase(),n=F.global[e];return!!n&&(n.apply(F.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},et=function(t){var e=!1;try{e=Z.apply(null,arguments)}catch(t){j.throwLater(t),e=!0}var n=!1;try{n=Q(t,tt[t].apply(null,arguments))}catch(t){j.throwLater(t),n=!0}return n||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&J()),"warnings"in t){var e=t.warnings;at.warnings=!!e,K=at.warnings,F.isObject(e)&&"wForgottenReturn"in e&&(K=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(j.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=u,n.prototype._setOnCancel=c,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,nt=f,at.cancellation=!0}"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,n.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var nt=h,rt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;F.inherits(I,Error),r.CapturedTrace=I,I.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;s<t-1?(u._parent=e[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},I.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(w(i.stack.split("\n"))),i=i._parent;A(r),b(r),F.notEnumerableProp(t,"stack",g(n,r)),F.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():L(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=t,Y=e;var n=Error.captureStackTrace;return rt=function(t){return $.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,Y=e,W=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(Y=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?L(e):e.toString()},null):(z=t,Y=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(P=function(t){console.warn(t)},F.isNode&&e.stderr.isTTY?P=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:F.isNode||"string"!=typeof(new Error).stack||(P=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&n.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return d},checkForgottenReturns:v,setBounds:O,warn:y,deprecated:m,CapturedTrace:I,fireDomEvent:Q,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"==typeof r?r:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(t){if(!(this instanceof i))return new i(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,a,s=t("./es5"),u=s.freeze,c=t("./util"),l=c.inherits,f=c.notEnumerableProp,h=r("Warning","warning"),d=r("CancellationError","cancellation error"),p=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<v.length;++m)"function"==typeof Array.prototype[v[m]]&&(_.prototype[v[m]]=Array.prototype[v[m]]);s.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var y=0;_.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},l(i,Error);var g=Error.__BluebirdErrorTypes__;g||(g=u({CancellationError:d,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:_}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return a}},h=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:h,keys:s,names:s,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return u.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return f.e=t,f}function u(t){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),t);if(void 0!==c){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof e){if(null!=this.cancelPromise){if(h._isCancelled()){var d=new l("late cancellation observer");return r._attachExtraTrace(d),f.e=d,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var c=t("./util"),l=e.CancellationError,f=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(t);if(r._popContext(),a===h){r._pushContext();var s=e.reject(h.e);return r._popContext(),s}var u=i(a,r);if(u instanceof e)return u}return null}function u(t,n,i,o){if(a.cancellation()){var s=new e(r),u=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),l=c.TypeError,f=t("./util"),h=f.errorObj,d=f.tryCatch,p=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),t=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=d(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&null===(o=s(o,this._yieldHandlers,this._promise)))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));p.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function u(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(t,n,a,o).promise()}var c=e._getDomain,l=t("./util"),f=l.tryCatch,h=l.errorObj,d=e._async;l.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(n=-1*n-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var c=this._promise,l=this._callback,d=c._boundValue();c._pushContext();var p=f(l).call(d,t,n,o),_=c._popContext();if(a.checkForgottenReturns(p,_,null!==s?"Promise.filter":"Promise.map",c),p===h)return this._reject(p.e),!0;var v=i(p,this._promise);if(v instanceof e){v=v._target();var m=v._bitField;if(0==(50397184&m))return u>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(v._reason()),!0):(this._cancel(),!0);p=v._value()}r[n]=p}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=a.isArray(c)?s(t).apply(l,c):s(t).call(l,c)}else u=s(t)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,u=t("./errors"),c=u.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===u&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===u&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===u&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function r(){}function i(t,e){if("function"!=typeof e)throw new g("expecting a function but got "+p.classString(e));if(t.constructor!==o)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==A&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function u(t){var e=new o(A);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},h=function(t){return o.reject(new g(t))},d={},p=t("./util");c=p.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},p.notEnumerableProp(o,"_getDomain",c);var _=t("./es5"),v=t("./async"),m=new v;_.defineProperty(o,"_async",{value:m});var y=t("./errors"),g=o.TypeError=y.TypeError;o.RangeError=y.RangeError;var b=o.CancellationError=y.CancellationError;o.TimeoutError=y.TimeoutError,o.OperationalError=y.OperationalError,o.RejectionError=y.OperationalError,o.AggregateError=y.AggregateError;var A=function(){},w={},E={},C=t("./thenables")(o,A),S=t("./promise_array")(o,A,C,h,r),k=t("./context")(o),L=k.create,T=t("./debuggability")(o,k),x=(T.CapturedTrace,t("./finally")(o,C)),R=t("./catch_filter")(E),O=t("./nodeback"),I=p.errorObj,D=p.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!p.isObject(o))return h("expecting an object but got A catch statement predicate "+p.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,R(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(T.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+p.classString(t);arguments.length>1&&(n+=", "+p.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?h("expecting a function but got "+p.classString(t)):this.all()._then(t,void 0,void 0,w,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new S(this).promise()},o.prototype.error=function(t){return this.caught(p.originatesFromRejection,t)},o.getNewLibraryCopy=n.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(A);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=D(t)(O(e,n));return r===I&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new S(t).promise()},o.cast=function(t){var e=C(t);return e instanceof o||(e=new o(A),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(A);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+p.classString(t));return m.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var a=void 0!==i,s=a?i:new o(A),u=this._target(),l=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=c();if(0!=(50397184&l)){var h,d,_=u._settlePromiseCtx;0!=(33554432&l)?(d=u._rejectionHandler0,h=t):0!=(16777216&l)?(d=u._fulfillmentHandler0,h=e,u._unsetRejectionIsUnhandled()):(_=u._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),u._attachExtraTrace(d),h=e),m.invoke(_,u,{handler:null===f?h:"function"==typeof h&&p.domainBind(f,h),promise:s,receiver:r,value:d})}else u._addCallbacks(t,e,s,r,f);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==d)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=d),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=d),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:p.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:p.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:p.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=C(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0==(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var u=new b("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},o.prototype._rejectCallback=function(t,e,n){var r=p.ensureErrorObject(t),i=r===t;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+p.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){r._pushContext();var o;e===w?n&&"number"==typeof n.length?o=D(t).apply(this._boundValue(),n):(o=I,o.e=new g("cannot .spread() a non-array: "+p.classString(n))):o=D(t).call(e,n);var a=r._popContext();i=r._bitField,0==(65536&i)&&(o===E?r._reject(n):o===I?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var a=t instanceof o,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof x&&n.isFinallyHandler()?(n.cancelPromise=t,D(e).call(n,i)===I&&t._reject(I.e)):e===f?t._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(t):a||t instanceof S?t._cancel():n.cancel()):"function"==typeof e?a?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(u&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():m.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return m.fatalError(t,p.isNode);(65535&e)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){return T.deprecated("Promise.defer","new Promise"),{promise:new o(A),resolve:a,reject:s}},p.notEnumerableProp(o,"_makeSelfResolutionError",l),t("./method")(o,A,C,h,T),t("./bind")(o,A,C,T),t("./cancel")(o,S,h,T),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,S,C,A,m,c),o.Promise=o,o.version="3.4.6",t("./map.js")(o,S,h,C,A,T),t("./call_get.js")(o),t("./using.js")(o,h,C,L,A,T),t("./timers.js")(o,A,T),t("./generators.js")(o,h,A,C,r,T),t("./nodeify.js")(o),t("./promisify.js")(o,A),t("./props.js")(o,S,C,h),t("./race.js")(o,A,C,h),t("./reduce.js")(o,S,h,C,A,T),t("./settle.js")(o,S,T),t("./some.js")(o,S,h),t("./filter.js")(o,A),t("./each.js")(o,A),t("./any.js")(o),p.toFastProperties(o),p.toFastProperties(o.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new o(A)),T.setBounds(v.firstLineError,p.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=t("./util");u.isArray;return u.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){s=s._target();var c=s._bitField;if(this._values=s,0==(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(null===(s=u.asArray(s))){var l=i("expecting an array or an iterable object but got "+u.classString(s)).reason();return void this._promise._rejectCallback(l,!1)}if(0===s.length)return void(-5===o?this._resolveEmptyArray():this._resolve(a(o)));this._iterate(s)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var u=r(t[s],i);u instanceof e?(u=u._target(),a=u._bitField):a=null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!A.test(t)}function i(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,n){var r=d.getDataPropertyOrDefault(t,e+n,g);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,n,r){for(var s=d.inheritedDataKeys(t),u=[],c=0;c<s.length;++c){var l=s[c],f=t[l],h=r===w||w(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,h)||u.push(l,f)}return a(u,e,n),u}function u(t,r,i,o,a,s){function u(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof l&&this!==c?this[l]:t,u=p(o,s);try{a.apply(i,_(arguments,u))}catch(t){o._rejectCallback(v(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),d.notEnumerableProp(u,"__isPromisified__",!0),u}function c(t,e,n,r,i){for(var o=new RegExp(E(e)+"$"),a=s(t,e,o,n),u=0,c=a.length;u<c;u+=2){var l=a[u],f=a[u+1],p=l+e;if(r===C)t[p]=C(l,h,l,f,e,i);else{var _=r(f,function(){return C(l,h,l,f,e,i)});d.notEnumerableProp(_,"__isPromisified__",!0),t[p]=_}}return d.toFastProperties(t),t}function l(t,e,n){return C(t,e,void 0,t,null,n)}var f,h={},d=t("./util"),p=t("./nodeback"),_=d.withAppended,v=d.maybeWrapAsError,m=d.canEvaluate,y=t("./errors").TypeError,g={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],A=new RegExp("^(?:"+b.join("|")+")$"),w=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},E=function(t){return t.replace(/([$])/,"\\$")},C=m?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new y("expecting a function but got "+d.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,a=l(t,n,o);return d.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var i=e.filter;"function"!=typeof i&&(i=w);var o=e.promisifier;if("function"!=typeof o&&(o=C),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=d.inheritedDataKeys(t),s=0;s<a.length;++s){var u=t[a[s]];"constructor"!==a[s]&&d.isClass(u)&&(c(u.prototype,r,i,o,n),c(u,r,i,o,n))}return c(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function a(t){var n,a=r(t);return c(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=t("./util"),c=u.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new s,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=h(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,r(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return s(u);if(null===(t=a.asArray(t)))return i("expecting an array or an iterable object but got "+a.classString(t));var c=new e(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,h=0,d=t.length;h<d;++h){var p=t[h];(void 0!==p||h in t)&&e.cast(p)._then(l,f,void 0,c,null)}return c}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=h();this._fn=null===a?n:d.domainBind(a,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+d.classString(e)):new s(t,e,n,i).promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=p(n._fn);r._pushContext();var o;(o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,d=t("./util"),p=d.tryCatch;d.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=n.setImmediate,f=e.nextTick;a=s.isRecentNode?function(t){l.call(n,t)}:function(t){f.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();a=function(t){h.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:u:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),i()}}();i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection;t("./util").inherits(i,n),i.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,u=t("./errors").AggregateError,c=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(a(t)){var u=new e(n);return t._then(u._fulfill,u._reject,void 0,u,null),u}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return c.e=t,c}}function a(t){try{return f.call(t,"_promise0")}catch(t){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,h=u.tryCatch(r).call(t,o,a);return f=!1,s&&h===c&&(s._rejectCallback(h.e,!0,!0),s=null),l}var u=t("./util"),c=u.errorObj,l=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),u=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(c,null,null,t,void 0),r.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(n),s=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new u("operation timed out"):new u(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,u=new i(setTimeout(function(){n.isPending()&&f(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,u,void 0),n._setOnCancel(u)):n=this._then(o,a,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,n){function i(){if(a>=c)return l._fulfill();var o=u(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(t){return s(t)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,c=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function h(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function d(t){this.length=t,this.promise=null,this[t-1]=null}var p=t("./util"),_=t("./errors").TypeError,v=t("./util").inherits,m=p.errorObj,y=p.tryCatch,g={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(f,l),f.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},d.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+p.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var u=new d(t),f=0;f<t;++f){var _=o[f];if(l.isDisposer(_)){var v=_;_=_.promise(),_._setDisposable(v)}else{var g=r(_);g instanceof e&&(_=g._then(h,null,null,{resources:u,index:f},void 0))}u[f]=_}for(var b=new Array(u.length),f=0;f<b.length;++f)b[f]=e.resolve(u[f]).reflect();var A=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return m.e=n.error(),m;if(!n.isFulfilled())return void A.cancel();t[e]=n.value()}w._pushContext(),i=y(i);var r=s?i.apply(void 0,t):i(t),o=w._popContext();return a.checkForgottenReturns(r,o,"Promise.using",w),r}),w=A.lastly(function(){var t=new e.PromiseInspection(A);return c(u,t)});return u.promise=w,w._setOnCancel(u),w},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";function o(){try{var t=O;return O=null,t.apply(this,arguments)}catch(t){return R.e=t,R}}function a(t){return O=t,o}function s(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function u(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return s(t)?new Error(y(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!T.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(t,e,r),t}function d(t){throw t}function p(t){try{if("function"==typeof t){var e=T.names(t.prototype),n=T.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=P.test(t+"")&&T.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function _(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function v(t){return M.test(t)}function m(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(t){return"[no string representation]"}}function g(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{h(t,"isOperational",!0)}catch(t){}}function A(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function w(t){return g(t)&&T.propertyIsWritable(t,"stack")}function E(t){return{}.toString.call(t)}function C(t,e,n){for(var r=T.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{T.defineProperty(e,o,T.getDescriptor(t,o))}catch(t){}}}function S(t,n){return U?e.env[t]:n}function k(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function L(t,e){return t.bind(e)}var T=t("./es5"),x="undefined"==typeof navigator,R={e:{}},O,I="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,D=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},N=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(T.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var u=Object.getOwnPropertyDescriptor(t,s);null!=u&&null==u.get&&null==u.set&&r.push(s)}}t=T.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),P=/this\s*\.\s*\S+\s*=/,M=/^[a-z$_][a-z$_0-9]*$/i,j=function(){return"stack"in new Error?function(t){return w(t)?t:new Error(y(t))}:function(t){if(w(t))return t;try{throw new Error(y(t))}catch(t){return t}}}(),B=function(t){return T.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};B=function(t){return T.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?F(t):null}}var U=void 0!==e&&"[object process]"===E(e).toLowerCase(),$={isClass:p,isIdentifier:v,inheritedDataKeys:N,getDataPropertyOrDefault:f,thrower:d,isArray:T.isArray,asArray:B,notEnumerableProp:h,isPrimitive:s,isObject:u,isError:g,canEvaluate:x,errorObj:R,tryCatch:a,inherits:D,withAppended:l,maybeWrapAsError:c,toFastProperties:_,filledRange:m,toString:y,canAttachTrace:w,ensureErrorObject:j,originatesFromRejection:A,markAsOriginatingFromRejection:b,classString:E,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:U,env:S,global:I,getNativePromise:k,domainBind:L};$.isRecentNode=$.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),$.isNode&&$.toFastProperties(e);try{throw new Error}catch(t){$.lastLineError=t}r.exports=$},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,n(131),n(43),n(278).setImmediate)},function(t,e,n){(function(t,r){var i;(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function f(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function d(t,e){return!!(null==t?0:t.length)&&C(t,e,0)>-1}function p(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function _(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function m(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function y(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t){return t.split("")}function A(t){return t.match(Ue)||[]}function w(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function E(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function C(t,e,n){return e===e?J(t,e,n):E(t,k,n)}function S(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function k(t){return t!==t}function L(t,e){var n=null==t?0:t.length;return n?I(t,e)/n:Pt}function T(t){return function(e){return null==e?it:e[t]}}function x(t){return function(e){return null==t?it:t[e]}}function R(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function O(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function I(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function D(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function N(t,e){return _(e,function(e){return[e,t[e]]})}function P(t){return function(e){return t(e)}}function M(t,e){return _(e,function(e){return t[e]})}function j(t,e){return t.has(e)}function B(t,e){for(var n=-1,r=t.length;++n<r&&C(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&C(e,t[n],0)>-1;);return n}function U(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function $(t){return"\\"+Tn[t]}function V(t,e){return null==t?it:t[e]}function H(t){return gn.test(t)}function z(t){return bn.test(t)}function Y(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function q(t,e){return function(n){return t(e(n))}}function X(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==lt||(t[n]=lt,o[i++]=n)}return o}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Q(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Z(t){return H(t)?et(t):Yn(t)}function tt(t){return H(t)?nt(t):b(t)}function et(t){for(var e=mn.lastIndex=0;mn.test(t);)++e;return e}function nt(t){return t.match(mn)||[]}function rt(t){return t.match(yn)||[]}var it,ot=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ut="__lodash_hash_undefined__",ct=500,lt="__lodash_placeholder__",ft=1,ht=2,dt=4,pt=1,_t=2,vt=1,mt=2,yt=4,gt=8,bt=16,At=32,wt=64,Et=128,Ct=256,St=512,kt=30,Lt="...",Tt=800,xt=16,Rt=1,Ot=2,It=1/0,Dt=9007199254740991,Nt=1.7976931348623157e308,Pt=NaN,Mt=4294967295,jt=Mt-1,Bt=Mt>>>1,Ft=[["ary",Et],["bind",vt],["bindKey",mt],["curry",gt],["curryRight",bt],["flip",St],["partial",At],["partialRight",wt],["rearg",Ct]],Ut="[object Arguments]",$t="[object Array]",Vt="[object AsyncFunction]",Ht="[object Boolean]",zt="[object Date]",Yt="[object DOMException]",Wt="[object Error]",qt="[object Function]",Xt="[object GeneratorFunction]",Gt="[object Map]",Kt="[object Number]",Jt="[object Null]",Qt="[object Object]",Zt="[object Proxy]",te="[object RegExp]",ee="[object Set]",ne="[object String]",re="[object Symbol]",ie="[object Undefined]",oe="[object WeakMap]",ae="[object WeakSet]",se="[object ArrayBuffer]",ue="[object DataView]",ce="[object Float32Array]",le="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",de="[object Int32Array]",pe="[object Uint8Array]",_e="[object Uint8ClampedArray]",ve="[object Uint16Array]",me="[object Uint32Array]",ye=/\b__p \+= '';/g,ge=/\b(__p \+=) '' \+/g,be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ae=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,Ee=RegExp(Ae.source),Ce=RegExp(we.source),Se=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xe=/^\w*$/,Re=/^\./,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,De=RegExp(Ie.source),Ne=/^\s+|\s+$/g,Pe=/^\s+/,Me=/\s+$/,je=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$e=/\\(\\)?/g,Ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,He=/\w*$/,ze=/^[-+]0x[0-9a-f]+$/i,Ye=/^0b[01]+$/i,We=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="["+Ze+"]",en="["+Qe+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Ze+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",un="[A-Z\\xc0-\\xd6\\xd8-\\xde]",cn="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",an,sn].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*",hn="[\\ufe0e\\ufe0f]?"+ln+fn,dn="(?:"+["[\\u2700-\\u27bf]",an,sn].join("|")+")"+hn,pn="(?:"+["[^\\ud800-\\udfff]"+en+"?",en,an,sn,"[\\ud800-\\udfff]"].join("|")+")",_n=RegExp("['’]","g"),vn=RegExp(en,"g"),mn=RegExp(on+"(?="+on+")|"+pn+hn,"g"),yn=RegExp([un+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tn,un,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tn,un+cn,"$"].join("|")+")",un+"?"+cn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",un+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",dn].join("|"),"g"),gn=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,An=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wn=-1,En={};En[ce]=En[le]=En[fe]=En[he]=En[de]=En[pe]=En[_e]=En[ve]=En[me]=!0,En[Ut]=En[$t]=En[se]=En[Ht]=En[ue]=En[zt]=En[Wt]=En[qt]=En[Gt]=En[Kt]=En[Qt]=En[te]=En[ee]=En[ne]=En[oe]=!1;var Cn={};Cn[Ut]=Cn[$t]=Cn[se]=Cn[ue]=Cn[Ht]=Cn[zt]=Cn[ce]=Cn[le]=Cn[fe]=Cn[he]=Cn[de]=Cn[Gt]=Cn[Kt]=Cn[Qt]=Cn[te]=Cn[ee]=Cn[ne]=Cn[re]=Cn[pe]=Cn[_e]=Cn[ve]=Cn[me]=!0,Cn[Wt]=Cn[qt]=Cn[oe]=!1;var Sn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ln={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xn=parseFloat,Rn=parseInt,On="object"==typeof t&&t&&t.Object===Object&&t,In="object"==typeof self&&self&&self.Object===Object&&self,Dn=On||In||Function("return this")(),Nn="object"==typeof e&&e&&!e.nodeType&&e,Pn=Nn&&"object"==typeof r&&r&&!r.nodeType&&r,Mn=Pn&&Pn.exports===Nn,jn=Mn&&On.process,Bn=function(){try{return jn&&jn.binding&&jn.binding("util")}catch(t){}}(),Fn=Bn&&Bn.isArrayBuffer,Un=Bn&&Bn.isDate,$n=Bn&&Bn.isMap,Vn=Bn&&Bn.isRegExp,Hn=Bn&&Bn.isSet,zn=Bn&&Bn.isTypedArray,Yn=T("length"),Wn=x(Sn),qn=x(kn),Xn=x(Ln),Gn=function t(e){function n(t){if(ou(t)&&!mh(t)&&!(t instanceof b)){if(t instanceof i)return t;if(vl.call(t,"__wrapped__"))return na(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function b(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mt,this.__views__=[]}function x(){var t=new b(this.__wrapped__);return t.__actions__=ji(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ji(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ji(this.__views__),t}function J(){if(this.__filtered__){var t=new b(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=mh(t),r=e<0,i=n?t.length:0,o=Lo(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=Wl(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return yi(t,this.__actions__);var p=[];t:for(;u--&&h<d;){c+=e;for(var _=-1,v=t[c];++_<f;){var m=l[_],y=m.iteratee,g=m.type,b=y(v);if(g==Ot)v=b;else if(!b){if(g==Rt)continue t;break t}}p[h++]=v}return p}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ue(){this.__data__=nf?nf(null):{},this.size=0}function Qe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(nf){var n=e[t];return n===ut?it:n}return vl.call(e,t)?e[t]:it}function tn(t){var e=this.__data__;return nf?e[t]!==it:vl.call(e,t)}function en(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nf&&e===it?ut:e,this}function nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rn(){this.__data__=[],this.size=0}function on(t){var e=this.__data__,n=Kn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Rl.call(e,n,1),--this.size,!0)}function an(t){var e=this.__data__,n=Kn(e,t);return n<0?it:e[n][1]}function sn(t){return Kn(this.__data__,t)>-1}function un(t,e){var n=this.__data__,r=Kn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ln(){this.size=0,this.__data__={hash:new nt,map:new(Ql||nn),string:new nt}}function fn(t){var e=Eo(this,t).delete(t);return this.size-=e?1:0,e}function hn(t){return Eo(this,t).get(t)}function dn(t){return Eo(this,t).has(t)}function pn(t,e){var n=Eo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function mn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new cn;++e<n;)this.add(t[e])}function yn(t){return this.__data__.set(t,ut),this}function gn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new nn(t);this.size=e.size}function Sn(){this.__data__=new nn,this.size=0}function kn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Ln(t){return this.__data__.get(t)}function Tn(t){return this.__data__.has(t)}function On(t,e){var n=this.__data__;if(n instanceof nn){var r=n.__data__;if(!Ql||r.length<ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new cn(r)}return n.set(t,e),this.size=n.size,this}function In(t,e){var n=mh(t),r=!n&&vh(t),i=!n&&!r&&gh(t),o=!n&&!r&&!i&&Ch(t),a=n||r||i||o,s=a?D(t.length,cl):[],u=s.length;for(var c in t)!e&&!vl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Po(c,u))||s.push(c);return s}function Nn(t){var e=t.length;return e?t[Zr(0,e-1)]:it}function Pn(t,e){return Qo(ji(t),nr(e,0,t.length))}function jn(t){return Qo(ji(t))}function Bn(t,e,n){(n===it||Ys(t[e],n))&&(n!==it||e in t)||tr(t,e,n)}function Yn(t,e,n){var r=t[e];vl.call(t,e)&&Ys(r,n)&&(n!==it||e in t)||tr(t,e,n)}function Kn(t,e){for(var n=t.length;n--;)if(Ys(t[n][0],e))return n;return-1}function Jn(t,e,n,r){return _f(t,function(t,i,o){e(r,t,n(t),o)}),r}function Qn(t,e){return t&&Bi(e,Uu(e),t)}function Zn(t,e){return t&&Bi(e,$u(e),t)}function tr(t,e,n){"__proto__"==e&&Nl?Nl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function er(t,e){for(var n=-1,r=e.length,i=nl(r),o=null==t;++n<r;)i[n]=o?it:ju(t,e[n]);return i}function nr(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function rr(t,e,n,r,i,o){var a,s=e&ft,u=e&ht,l=e&dt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!iu(t))return t;var f=mh(t);if(f){if(a=Ro(t),!s)return ji(t,a)}else{var h=Lf(t),d=h==qt||h==Xt;if(gh(t))return Si(t,s);if(h==Qt||h==Ut||d&&!i){if(a=u||d?{}:Oo(t),!s)return u?Ui(t,Zn(a,t)):Fi(t,Qn(a,t))}else{if(!Cn[h])return i?t:{};a=Io(t,h,rr,s)}}o||(o=new bn);var p=o.get(t);if(p)return p;o.set(t,a);var _=l?u?go:yo:u?$u:Uu,v=f?it:_(t);return c(v||t,function(r,i){v&&(i=r,r=t[i]),Yn(a,i,rr(r,e,n,i,t,o))}),a}function ir(t){var e=Uu(t);return function(n){return or(n,t,e)}}function or(t,e,n){var r=n.length;if(null==t)return!r;for(t=sl(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function ar(t,e,n){if("function"!=typeof t)throw new ll(st);return Rf(function(){t.apply(it,n)},e)}function sr(t,e,n,r){var i=-1,o=d,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=_(e,P(n))),r?(o=p,a=!1):e.length>=ot&&(o=j,a=!1,e=new mn(e));t:for(;++i<s;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f===f){for(var h=c;h--;)if(e[h]===f)continue t;u.push(l)}else o(e,f,r)||u.push(l)}return u}function ur(t,e){var n=!0;return _f(t,function(t,r,i){return n=!!e(t,r,i)}),n}function cr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!vu(a):n(a,s)))var s=a,u=o}return u}function lr(t,e,n,r){var i=t.length;for(n=wu(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:wu(r),r<0&&(r+=i),r=n>r?0:Eu(r);n<r;)t[n++]=e;return t}function fr(t,e){var n=[];return _f(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function hr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=No),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?hr(s,e-1,n,r,i):v(i,s):r||(i[i.length]=s)}return i}function dr(t,e){return t&&mf(t,e,Uu)}function pr(t,e){return t&&yf(t,e,Uu)}function _r(t,e){return h(e,function(e){return eu(t[e])})}function vr(t,e){e=Ei(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Zo(e[n++])];return n&&n==r?t:it}function mr(t,e,n){var r=e(t);return mh(t)?r:v(r,n(t))}function yr(t){return null==t?t===it?ie:Jt:Dl&&Dl in sl(t)?ko(t):Wo(t)}function gr(t,e){return t>e}function br(t,e){return null!=t&&vl.call(t,e)}function Ar(t,e){return null!=t&&e in sl(t)}function wr(t,e,n){return t>=Wl(e,n)&&t<Yl(e,n)}function Er(t,e,n){for(var r=n?p:d,i=t[0].length,o=t.length,a=o,s=nl(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=_(l,P(e))),u=Wl(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new mn(a&&l):it}l=t[0];var f=-1,h=s[0];t:for(;++f<i&&c.length<u;){var v=l[f],m=e?e(v):v;if(v=n||0!==v?v:0,!(h?j(h,m):r(c,m,n))){for(a=o;--a;){var y=s[a];if(!(y?j(y,m):r(t[a],m,n)))continue t}h&&h.push(m),c.push(v)}}return c}function Cr(t,e,n,r){return dr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Sr(t,e,n){e=Ei(e,t),t=Xo(t,e);var r=null==t?t:t[Zo(Aa(e))];return null==r?it:s(r,t,n)}function kr(t){return ou(t)&&yr(t)==Ut}function Lr(t){return ou(t)&&yr(t)==se}function Tr(t){return ou(t)&&yr(t)==zt}function xr(t,e,n,r,i){return t===e||(null==t||null==e||!ou(t)&&!ou(e)?t!==t&&e!==e:Rr(t,e,n,r,xr,i))}function Rr(t,e,n,r,i,o){var a=mh(t),s=mh(e),u=a?$t:Lf(t),c=s?$t:Lf(e);u=u==Ut?Qt:u,c=c==Ut?Qt:c;var l=u==Qt,f=c==Qt,h=u==c;if(h&&gh(t)){if(!gh(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new bn),a||Ch(t)?po(t,e,n,r,i,o):_o(t,e,u,n,r,i,o);if(!(n&pt)){var d=l&&vl.call(t,"__wrapped__"),p=f&&vl.call(e,"__wrapped__");if(d||p){var _=d?t.value():t,v=p?e.value():e;return o||(o=new bn),i(_,v,n,r,o)}}return!!h&&(o||(o=new bn),vo(t,e,n,r,i,o))}function Or(t){return ou(t)&&Lf(t)==Gt}function Ir(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=sl(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===it&&!(u in t))return!1}else{var f=new bn;if(r)var h=r(c,l,u,t,e,f);if(!(h===it?xr(l,c,pt|_t,r,f):h))return!1}}return!0}function Dr(t){return!(!iu(t)||Uo(t))&&(eu(t)?wl:We).test(ta(t))}function Nr(t){return ou(t)&&yr(t)==te}function Pr(t){return ou(t)&&Lf(t)==ee}function Mr(t){return ou(t)&&ru(t.length)&&!!En[yr(t)]}function jr(t){return"function"==typeof t?t:null==t?Rc:"object"==typeof t?mh(t)?Hr(t[0],t[1]):Vr(t):Bc(t)}function Br(t){if(!$o(t))return zl(t);var e=[];for(var n in sl(t))vl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t){if(!iu(t))return Yo(t);var e=$o(t),n=[];for(var r in t)("constructor"!=r||!e&&vl.call(t,r))&&n.push(r);return n}function Ur(t,e){return t<e}function $r(t,e){var n=-1,r=Ws(t)?nl(t.length):[];return _f(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Vr(t){var e=Co(t);return 1==e.length&&e[0][2]?Ho(e[0][0],e[0][1]):function(n){return n===t||Ir(n,t,e)}}function Hr(t,e){return jo(t)&&Vo(e)?Ho(Zo(t),e):function(n){var r=ju(n,t);return r===it&&r===e?Fu(n,t):xr(e,r,pt|_t)}}function zr(t,e,n,r,i){t!==e&&mf(e,function(o,a){if(iu(o))i||(i=new bn),Yr(t,e,a,n,zr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):it;s===it&&(s=o),Bn(t,a,s)}},$u)}function Yr(t,e,n,r,i,o,a){var s=t[n],u=e[n],c=a.get(u);if(c)return void Bn(t,n,c);var l=o?o(s,u,n+"",t,e,a):it,f=l===it;if(f){var h=mh(u),d=!h&&gh(u),p=!h&&!d&&Ch(u);l=u,h||d||p?mh(s)?l=s:qs(s)?l=ji(s):d?(f=!1,l=Si(u,!0)):p?(f=!1,l=Ii(u,!0)):l=[]:du(u)||vh(u)?(l=s,vh(s)?l=Su(s):(!iu(s)||r&&eu(s))&&(l=Oo(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),Bn(t,n,l)}function Wr(t,e){var n=t.length;if(n)return e+=e<0?n:0,Po(e,n)?t[e]:it}function qr(t,e,n){var r=-1;return e=_(e.length?e:[Rc],P(wo())),O($r(t,function(t,n,i){return{criteria:_(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Ni(t,e,n)})}function Xr(t,e){return Gr(t,e,function(e,n){return Fu(t,n)})}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=vr(t,a);n(s,a)&&oi(o,Ei(a,t),s)}return o}function Kr(t){return function(e){return vr(e,t)}}function Jr(t,e,n,r){var i=r?S:C,o=-1,a=e.length,s=t;for(t===e&&(e=ji(e)),n&&(s=_(t,P(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Rl.call(s,u,1),Rl.call(t,u,1);return t}function Qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Po(i)?Rl.call(t,i,1):_i(t,i)}}return t}function Zr(t,e){return t+Fl(Gl()*(e-t+1))}function ti(t,e,n,r){for(var i=-1,o=Yl(Bl((e-t)/(n||1)),0),a=nl(o);o--;)a[r?o:++i]=t,t+=n;return a}function ei(t,e){var n="";if(!t||e<1||e>Dt)return n;do{e%2&&(n+=t),(e=Fl(e/2))&&(t+=t)}while(e);return n}function ni(t,e){return Of(qo(t,e,Rc),t+"")}function ri(t){return Nn(Zu(t))}function ii(t,e){var n=Zu(t);return Qo(n,nr(e,0,n.length))}function oi(t,e,n,r){if(!iu(t))return t;e=Ei(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Zo(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):it,c===it&&(c=iu(l)?l:Po(e[i+1])?[]:{})}Yn(s,u,c),s=s[u]}return t}function ai(t){return Qo(Zu(t))}function si(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=nl(i);++r<i;)o[r]=t[r+e];return o}function ui(t,e){var n;return _f(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ci(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Bt){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!vu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return li(t,e,Rc,n)}function li(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=vu(e),c=e===it;i<o;){var l=Fl((i+o)/2),f=n(t[l]),h=f!==it,d=null===f,p=f===f,_=vu(f);if(a)var v=r||p;else v=c?p&&(r||h):s?p&&h&&(r||!d):u?p&&h&&!d&&(r||!_):!d&&!_&&(r?f<=e:f<e);v?i=l+1:o=l}return Wl(o,jt)}function fi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ys(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function hi(t){return"number"==typeof t?t:vu(t)?Pt:+t}function di(t){if("string"==typeof t)return t;if(mh(t))return _(t,di)+"";if(vu(t))return df?df.call(t):"";var e=t+"";return"0"==e&&1/t==-It?"-0":e}function pi(t,e,n){var r=-1,i=d,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=p;else if(o>=ot){var c=e?null:Ef(t);if(c)return G(c);a=!1,i=j,u=new mn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function _i(t,e){return e=Ei(e,t),null==(t=Xo(t,e))||delete t[Zo(Aa(e))]}function vi(t,e,n,r){return oi(t,e,n(vr(t,e)),r)}function mi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?si(t,r?0:o,r?o+1:i):si(t,r?o+1:0,r?i:o)}function yi(t,e){var n=t;return n instanceof b&&(n=n.value()),m(e,function(t,e){return e.func.apply(e.thisArg,v([t],e.args))},n)}function gi(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=nl(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=sr(o[i]||a,t[s],e,n));return pi(hr(o,1),e,n)}function bi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function Ai(t){return qs(t)?t:[]}function wi(t){return"function"==typeof t?t:Rc}function Ei(t,e){return mh(t)?t:jo(t,e)?[t]:If(Lu(t))}function Ci(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:si(t,e,n)}function Si(t,e){if(e)return t.slice();var n=t.length,r=kl?kl(n):new t.constructor(n);return t.copy(r),r}function ki(t){var e=new t.constructor(t.byteLength);return new Sl(e).set(new Sl(t)),e}function Li(t,e){var n=e?ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ti(t,e,n){return m(e?n(W(t),ft):W(t),o,new t.constructor)}function xi(t){var e=new t.constructor(t.source,He.exec(t));return e.lastIndex=t.lastIndex,e}function Ri(t,e,n){return m(e?n(G(t),ft):G(t),a,new t.constructor)}function Oi(t){return hf?sl(hf.call(t)):{}}function Ii(t,e){var n=e?ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Di(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=vu(t),a=e!==it,s=null===e,u=e===e,c=vu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Ni(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Di(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function Pi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Yl(o-a,0),l=nl(u+c),f=!r;++s<u;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Mi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=Yl(o-s,0),f=nl(l+c),h=!r;++i<l;)f[i]=t[i];for(var d=i;++u<c;)f[d+u]=e[u];for(;++a<s;)(h||i<o)&&(f[d+n[a]]=t[i++]);return f}function ji(t,e){var n=-1,r=t.length;for(e||(e=nl(r));++n<r;)e[n]=t[n];return e}function Bi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?tr(n,s,u):Yn(n,s,u)}return n}function Fi(t,e){return Bi(t,Sf(t),e)}function Ui(t,e){return Bi(t,kf(t),e)}function $i(t,e){return function(n,r){var i=mh(n)?u:Jn,o=e?e():{};return i(n,t,wo(r,2),o)}}function Vi(t){return ni(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&Mo(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=sl(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Hi(t,e){return function(n,r){if(null==n)return n;if(!Ws(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=sl(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function zi(t){return function(e,n,r){for(var i=-1,o=sl(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Yi(t,e,n){function r(){return(this&&this!==Dn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&vt,o=Xi(t);return r}function Wi(t){return function(e){e=Lu(e);var n=H(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Ci(n,1).join(""):e.slice(1);return r[t]()+i}}function qi(t){return function(e){return m(Sc(oc(e).replace(_n,"")),t,"")}}function Xi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=pf(t.prototype),r=t.apply(n,e);return iu(r)?r:n}}function Gi(t,e,n){function r(){for(var o=arguments.length,a=nl(o),u=o,c=Ao(r);u--;)a[u]=arguments[u];var l=o<3&&a[0]!==c&&a[o-1]!==c?[]:X(a,c);return(o-=l.length)<n?ao(t,e,Qi,r.placeholder,it,a,l,it,it,n-o):s(this&&this!==Dn&&this instanceof r?i:t,this,a)}var i=Xi(t);return r}function Ki(t){return function(e,n,r){var i=sl(e);if(!Ws(e)){var o=wo(n,3);e=Uu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function Ji(t){return mo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new ll(st);if(o&&!s&&"wrapper"==bo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=bo(a),c="wrapper"==u?Cf(a):it;s=c&&Fo(c[0])&&c[1]==(Et|gt|At|Ct)&&!c[4].length&&1==c[9]?s[bo(c[0])].apply(s,c[3]):1==a.length&&Fo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&mh(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Qi(t,e,n,r,i,o,a,s,u,c){function l(){for(var m=arguments.length,y=nl(m),g=m;g--;)y[g]=arguments[g];if(p)var b=Ao(l),A=U(y,b);if(r&&(y=Pi(y,r,i,p)),o&&(y=Mi(y,o,a,p)),m-=A,p&&m<c){var w=X(y,b);return ao(t,e,Qi,l.placeholder,n,y,w,s,u,c-m)}var E=h?n:this,C=d?E[t]:t;return m=y.length,s?y=Go(y,s):_&&m>1&&y.reverse(),f&&u<m&&(y.length=u),this&&this!==Dn&&this instanceof l&&(C=v||Xi(C)),C.apply(E,y)}var f=e&Et,h=e&vt,d=e&mt,p=e&(gt|bt),_=e&St,v=d?it:Xi(t);return l}function Zi(t,e){return function(n,r){return Cr(n,t,e(r),{})}}function to(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=hi(n),r=hi(r)),i=t(n,r)}return i}}function eo(t){return mo(function(e){return e=_(e,P(wo())),ni(function(n){var r=this;return t(e,function(t){return s(t,r,n)})})})}function no(t,e){e=e===it?" ":di(e);var n=e.length;if(n<2)return n?ei(e,t):e;var r=ei(e,Bl(t/Z(e)));return H(e)?Ci(tt(r),0,t).join(""):r.slice(0,t)}function ro(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,l=r.length,f=nl(l+u),h=this&&this!==Dn&&this instanceof i?a:t;++c<l;)f[c]=r[c];for(;u--;)f[c++]=arguments[++e];return s(h,o?n:this,f)}var o=e&vt,a=Xi(t);return i}function io(t){return function(e,n,r){return r&&"number"!=typeof r&&Mo(e,n,r)&&(n=r=it),e=Au(e),n===it?(n=e,e=0):n=Au(n),r=r===it?e<n?1:-1:Au(r),ti(e,n,r,t)}}function oo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Cu(e),n=Cu(n)),t(e,n)}}function ao(t,e,n,r,i,o,a,s,u,c){var l=e&gt,f=l?a:it,h=l?it:a,d=l?o:it,p=l?it:o;e|=l?At:wt,(e&=~(l?wt:At))&yt||(e&=~(vt|mt));var _=[t,e,i,d,f,p,h,s,u,c],v=n.apply(it,_);return Fo(t)&&xf(v,_),v.placeholder=r,Ko(v,t,e)}function so(t){var e=al[t];return function(t,n){if(t=Cu(t),n=null==n?0:Wl(wu(n),292)){var r=(Lu(t)+"e").split("e");return r=(Lu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function uo(t){return function(e){var n=Lf(e);return n==Gt?W(e):n==ee?K(e):N(e,t(e))}}function co(t,e,n,r,i,o,a,s){var u=e&mt;if(!u&&"function"!=typeof t)throw new ll(st);var c=r?r.length:0;if(c||(e&=~(At|wt),r=i=it),a=a===it?a:Yl(wu(a),0),s=s===it?s:wu(s),c-=i?i.length:0,e&wt){var l=r,f=i;r=i=it}var h=u?it:Cf(t),d=[t,e,n,r,i,l,f,o,a,s];if(h&&zo(d,h),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===it?u?0:t.length:Yl(d[9]-c,0),!s&&e&(gt|bt)&&(e&=~(gt|bt)),e&&e!=vt)p=e==gt||e==bt?Gi(t,e,s):e!=At&&e!=(vt|At)||i.length?Qi.apply(it,d):ro(t,e,n,r);else var p=Yi(t,e,n);return Ko((h?gf:xf)(p,d),t,e)}function lo(t,e,n,r){return t===it||Ys(t,dl[n])&&!vl.call(r,n)?e:t}function fo(t,e,n,r,i,o){return iu(t)&&iu(e)&&(o.set(e,t),zr(t,e,it,fo,o),o.delete(e)),t}function ho(t){return du(t)?it:t}function po(t,e,n,r,i,o){var a=n&pt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,f=!0,h=n&_t?new mn:it;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],p=e[l];if(r)var _=a?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(_!==it){if(_)continue;f=!1;break}if(h){if(!g(e,function(t,e){if(!j(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)})){f=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function _o(t,e,n,r,i,o,a){switch(n){case ue:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case se:return!(t.byteLength!=e.byteLength||!o(new Sl(t),new Sl(e)));case Ht:case zt:case Kt:return Ys(+t,+e);case Wt:return t.name==e.name&&t.message==e.message;case te:case ne:return t==e+"";case Gt:var s=W;case ee:var u=r&pt;if(s||(s=G),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=_t,a.set(t,e);var l=po(s(t),s(e),r,i,o,a);return a.delete(t),l;case re:if(hf)return hf.call(t)==hf.call(e)}return!1}function vo(t,e,n,r,i,o){var a=n&pt,s=yo(t),u=s.length;if(u!=yo(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:vl.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){l=s[c];var p=t[l],_=e[l];if(r)var v=a?r(_,p,l,e,t,o):r(p,_,l,t,e,o);if(!(v===it?p===_||i(p,_,n,r,o):v)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(h=!1)}return o.delete(t),o.delete(e),h}function mo(t){return Of(qo(t,it,da),t+"")}function yo(t){return mr(t,Uu,Sf)}function go(t){return mr(t,$u,kf)}function bo(t){for(var e=t.name+"",n=of[e],r=vl.call(of,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Ao(t){return(vl.call(n,"placeholder")?n:t).placeholder}function wo(){var t=n.iteratee||Oc;return t=t===Oc?jr:t,arguments.length?t(arguments[0],arguments[1]):t}function Eo(t,e){var n=t.__data__;return Bo(e)?n["string"==typeof e?"string":"hash"]:n.map}function Co(t){for(var e=Uu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Vo(i)]}return e}function So(t,e){var n=V(t,e);return Dr(n)?n:it}function ko(t){var e=vl.call(t,Dl),n=t[Dl];try{t[Dl]=it;var r=!0}catch(t){}var i=gl.call(t);return r&&(e?t[Dl]=n:delete t[Dl]),i}function Lo(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Wl(e,t+a);break;case"takeRight":t=Yl(t,e-a)}}return{start:t,end:e}}function To(t){var e=t.match(Be);return e?e[1].split(Fe):[]}function xo(t,e,n){e=Ei(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Zo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ru(i)&&Po(a,i)&&(mh(t)||vh(t))}function Ro(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&vl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Oo(t){return"function"!=typeof t.constructor||$o(t)?{}:pf(Ll(t))}function Io(t,e,n,r){var i=t.constructor;switch(e){case se:return ki(t);case Ht:case zt:return new i(+t);case ue:return Li(t,r);case ce:case le:case fe:case he:case de:case pe:case _e:case ve:case me:return Ii(t,r);case Gt:return Ti(t,r,n);case Kt:case ne:return new i(t);case te:return xi(t);case ee:return Ri(t,r,n);case re:return Oi(t)}}function Do(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(je,"{\n/* [wrapped with "+e+"] */\n")}function No(t){return mh(t)||vh(t)||!!(Ol&&t&&t[Ol])}function Po(t,e){return!!(e=null==e?Dt:e)&&("number"==typeof t||Xe.test(t))&&t>-1&&t%1==0&&t<e}function Mo(t,e,n){if(!iu(n))return!1;var r=typeof e;return!!("number"==r?Ws(n)&&Po(e,n.length):"string"==r&&e in n)&&Ys(n[e],t)}function jo(t,e){if(mh(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!vu(t))||(xe.test(t)||!Te.test(t)||null!=e&&t in sl(e))}function Bo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Fo(t){var e=bo(t),r=n[e];if("function"!=typeof r||!(e in b.prototype))return!1;if(t===r)return!0;var i=Cf(r);return!!i&&t===i[0]}function Uo(t){return!!yl&&yl in t}function $o(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||dl)}function Vo(t){return t===t&&!iu(t)}function Ho(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in sl(n)))}}function zo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(vt|mt|Et),a=r==Et&&n==gt||r==Et&&n==Ct&&t[7].length<=e[8]||r==(Et|Ct)&&e[7].length<=e[8]&&n==gt;if(!o&&!a)return t;r&vt&&(t[2]=e[2],i|=n&vt?0:yt);var s=e[3];if(s){var u=t[3];t[3]=u?Pi(u,s,e[4]):s,t[4]=u?X(t[3],lt):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Mi(u,s,e[6]):s,t[6]=u?X(t[5],lt):e[6]),s=e[7],s&&(t[7]=s),r&Et&&(t[8]=null==t[8]?e[8]:Wl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Yo(t){var e=[];if(null!=t)for(var n in sl(t))e.push(n);return e}function Wo(t){return gl.call(t)}function qo(t,e,n){return e=Yl(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Yl(r.length-e,0),a=nl(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=nl(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),s(t,this,u)}}function Xo(t,e){return e.length<2?t:vr(t,si(e,0,-1))}function Go(t,e){for(var n=t.length,r=Wl(e.length,n),i=ji(t);r--;){var o=e[r];t[r]=Po(o,n)?i[o]:it}return t}function Ko(t,e,n){var r=e+"";return Of(t,Do(r,ea(To(r),n)))}function Jo(t){var e=0,n=0;return function(){var r=ql(),i=xt-(r-n);if(n=r,i>0){if(++e>=Tt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function Qo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=Zr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Zo(t){if("string"==typeof t||vu(t))return t;var e=t+"";return"0"==e&&1/t==-It?"-0":e}function ta(t){if(null!=t){try{return _l.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ea(t,e){return c(Ft,function(n){var r="_."+n[0];e&n[1]&&!d(t,r)&&t.push(r)}),t.sort()}function na(t){if(t instanceof b)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=ji(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ra(t,e,n){e=(n?Mo(t,e,n):e===it)?1:Yl(wu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=nl(Bl(r/e));i<r;)a[o++]=si(t,i,i+=e);return a}function ia(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function oa(){var t=arguments.length;if(!t)return[];for(var e=nl(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return v(mh(n)?ji(n):[n],hr(e,1))}function aa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:wu(e),si(t,e<0?0:e,r)):[]}function sa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:wu(e),e=r-e,si(t,0,e<0?0:e)):[]}function ua(t,e){return t&&t.length?mi(t,wo(e,3),!0,!0):[]}function ca(t,e){return t&&t.length?mi(t,wo(e,3),!0):[]}function la(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Mo(t,e,n)&&(n=0,r=i),lr(t,e,n,r)):[]}function fa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:wu(n);return i<0&&(i=Yl(r+i,0)),E(t,wo(e,3),i)}function ha(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=wu(n),i=n<0?Yl(r+i,0):Wl(i,r-1)),E(t,wo(e,3),i,!0)}function da(t){return(null==t?0:t.length)?hr(t,1):[]}function pa(t){return(null==t?0:t.length)?hr(t,It):[]}function _a(t,e){return(null==t?0:t.length)?(e=e===it?1:wu(e),hr(t,e)):[]}function va(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ma(t){return t&&t.length?t[0]:it}function ya(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:wu(n);return i<0&&(i=Yl(r+i,0)),C(t,e,i)}function ga(t){return(null==t?0:t.length)?si(t,0,-1):[]}function ba(t,e){return null==t?"":Hl.call(t,e)}function Aa(t){var e=null==t?0:t.length;return e?t[e-1]:it}function wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=wu(n),i=i<0?Yl(r+i,0):Wl(i,r-1)),e===e?Q(t,e,i):E(t,k,i,!0)}function Ea(t,e){return t&&t.length?Wr(t,wu(e)):it}function Ca(t,e){return t&&t.length&&e&&e.length?Jr(t,e):t}function Sa(t,e,n){return t&&t.length&&e&&e.length?Jr(t,e,wo(n,2)):t}function ka(t,e,n){return t&&t.length&&e&&e.length?Jr(t,e,it,n):t}function La(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=wo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Qr(t,i),n}function Ta(t){return null==t?t:Kl.call(t)}function xa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Mo(t,e,n)?(e=0,n=r):(e=null==e?0:wu(e),n=n===it?r:wu(n)),si(t,e,n)):[]}function Ra(t,e){return ci(t,e)}function Oa(t,e,n){return li(t,e,wo(n,2))}function Ia(t,e){var n=null==t?0:t.length;if(n){var r=ci(t,e);if(r<n&&Ys(t[r],e))return r}return-1}function Da(t,e){return ci(t,e,!0)}function Na(t,e,n){return li(t,e,wo(n,2),!0)}function Pa(t,e){if(null==t?0:t.length){var n=ci(t,e,!0)-1;if(Ys(t[n],e))return n}return-1}function Ma(t){return t&&t.length?fi(t):[]}function ja(t,e){return t&&t.length?fi(t,wo(e,2)):[]}function Ba(t){var e=null==t?0:t.length;return e?si(t,1,e):[]}function Fa(t,e,n){return t&&t.length?(e=n||e===it?1:wu(e),si(t,0,e<0?0:e)):[]}function Ua(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:wu(e),e=r-e,si(t,e<0?0:e,r)):[]}function $a(t,e){return t&&t.length?mi(t,wo(e,3),!1,!0):[]}function Va(t,e){return t&&t.length?mi(t,wo(e,3)):[]}function Ha(t){return t&&t.length?pi(t):[]}function za(t,e){return t&&t.length?pi(t,wo(e,2)):[]}function Ya(t,e){return e="function"==typeof e?e:it,t&&t.length?pi(t,it,e):[]}function Wa(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){if(qs(t))return e=Yl(t.length,e),!0}),D(e,function(e){return _(t,T(e))})}function qa(t,e){if(!t||!t.length)return[];var n=Wa(t);return null==e?n:_(n,function(t){return s(e,it,t)})}function Xa(t,e){return bi(t||[],e||[],Yn)}function Ga(t,e){return bi(t||[],e||[],oi)}function Ka(t){var e=n(t);return e.__chain__=!0,e}function Ja(t,e){return e(t),t}function Qa(t,e){return e(t)}function Za(){return Ka(this)}function ts(){return new i(this.value(),this.__chain__)}function es(){this.__values__===it&&(this.__values__=bu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?it:this.__values__[this.__index__++]}}function ns(){return this}function rs(t){for(var e,n=this;n instanceof r;){var i=na(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function is(){var t=this.__wrapped__;if(t instanceof b){var e=t;return this.__actions__.length&&(e=new b(this)),e=e.reverse(),e.__actions__.push({func:Qa,args:[Ta],thisArg:it}),new i(e,this.__chain__)}return this.thru(Ta)}function os(){return yi(this.__wrapped__,this.__actions__)}function as(t,e,n){var r=mh(t)?f:ur;return n&&Mo(t,e,n)&&(e=it),r(t,wo(e,3))}function ss(t,e){return(mh(t)?h:fr)(t,wo(e,3))}function us(t,e){return hr(ps(t,e),1)}function cs(t,e){return hr(ps(t,e),It)}function ls(t,e,n){return n=n===it?1:wu(n),hr(ps(t,e),n)}function fs(t,e){return(mh(t)?c:_f)(t,wo(e,3))}function hs(t,e){return(mh(t)?l:vf)(t,wo(e,3))}function ds(t,e,n,r){t=Ws(t)?t:Zu(t),n=n&&!r?wu(n):0;var i=t.length;return n<0&&(n=Yl(i+n,0)),_u(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&C(t,e,n)>-1}function ps(t,e){return(mh(t)?_:$r)(t,wo(e,3))}function _s(t,e,n,r){return null==t?[]:(mh(e)||(e=null==e?[]:[e]),n=r?it:n,mh(n)||(n=null==n?[]:[n]),qr(t,e,n))}function vs(t,e,n){var r=mh(t)?m:R,i=arguments.length<3;return r(t,wo(e,4),n,i,_f)}function ms(t,e,n){var r=mh(t)?y:R,i=arguments.length<3;return r(t,wo(e,4),n,i,vf)}function ys(t,e){return(mh(t)?h:fr)(t,Is(wo(e,3)))}function gs(t){return(mh(t)?Nn:ri)(t)}function bs(t,e,n){return e=(n?Mo(t,e,n):e===it)?1:wu(e),(mh(t)?Pn:ii)(t,e)}function As(t){return(mh(t)?jn:ai)(t)}function ws(t){if(null==t)return 0;if(Ws(t))return _u(t)?Z(t):t.length;var e=Lf(t);return e==Gt||e==ee?t.size:Br(t).length}function Es(t,e,n){var r=mh(t)?g:ui;return n&&Mo(t,e,n)&&(e=it),r(t,wo(e,3))}function Cs(t,e){if("function"!=typeof e)throw new ll(st);return t=wu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ss(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,co(t,Et,it,it,it,it,e)}function ks(t,e){var n;if("function"!=typeof e)throw new ll(st);return t=wu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Ls(t,e,n){e=n?it:e;var r=co(t,gt,it,it,it,it,it,e);return r.placeholder=Ls.placeholder,r}function Ts(t,e,n){e=n?it:e;var r=co(t,bt,it,it,it,it,it,e);return r.placeholder=Ts.placeholder,r}function xs(t,e,n){function r(e){var n=h,r=d;return h=d=it,y=e,_=t.apply(r,n)}function i(t){return y=t,v=Rf(s,e),g?r(t):_}function o(t){var n=t-m,r=t-y,i=e-n;return b?Wl(i,p-r):i}function a(t){var n=t-m,r=t-y;return m===it||n>=e||n<0||b&&r>=p}function s(){var t=oh();if(a(t))return u(t);v=Rf(s,o(t))}function u(t){return v=it,A&&h?r(t):(h=d=it,_)}function c(){v!==it&&wf(v),y=0,h=m=d=v=it}function l(){return v===it?_:u(oh())}function f(){var t=oh(),n=a(t);if(h=arguments,d=this,m=t,n){if(v===it)return i(m);if(b)return v=Rf(s,e),r(m)}return v===it&&(v=Rf(s,e)),_}var h,d,p,_,v,m,y=0,g=!1,b=!1,A=!0;if("function"!=typeof t)throw new ll(st);return e=Cu(e)||0,iu(n)&&(g=!!n.leading,b="maxWait"in n,p=b?Yl(Cu(n.maxWait)||0,e):p,A="trailing"in n?!!n.trailing:A),f.cancel=c,f.flush=l,f}function Rs(t){return co(t,St)}function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ll(st);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Os.Cache||cn),n}function Is(t){if("function"!=typeof t)throw new ll(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ds(t){return ks(2,t)}function Ns(t,e){if("function"!=typeof t)throw new ll(st);return e=e===it?e:wu(e),ni(t,e)}function Ps(t,e){if("function"!=typeof t)throw new ll(st);return e=null==e?0:Yl(wu(e),0),ni(function(n){var r=n[e],i=Ci(n,0,e);return r&&v(i,r),s(t,this,i)})}function Ms(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ll(st);return iu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xs(t,e,{leading:r,maxWait:e,trailing:i})}function js(t){return Ss(t,1)}function Bs(t,e){return fh(wi(e),t)}function Fs(){if(!arguments.length)return[];var t=arguments[0];return mh(t)?t:[t]}function Us(t){return rr(t,dt)}function $s(t,e){return e="function"==typeof e?e:it,rr(t,dt,e)}function Vs(t){return rr(t,ft|dt)}function Hs(t,e){return e="function"==typeof e?e:it,rr(t,ft|dt,e)}function zs(t,e){return null==e||or(t,e,Uu(e))}function Ys(t,e){return t===e||t!==t&&e!==e}function Ws(t){return null!=t&&ru(t.length)&&!eu(t)}function qs(t){return ou(t)&&Ws(t)}function Xs(t){return!0===t||!1===t||ou(t)&&yr(t)==Ht}function Gs(t){return ou(t)&&1===t.nodeType&&!du(t)}function Ks(t){if(null==t)return!0;if(Ws(t)&&(mh(t)||"string"==typeof t||"function"==typeof t.splice||gh(t)||Ch(t)||vh(t)))return!t.length;var e=Lf(t);if(e==Gt||e==ee)return!t.size;if($o(t))return!Br(t).length;for(var n in t)if(vl.call(t,n))return!1;return!0}function Js(t,e){return xr(t,e)}function Qs(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?xr(t,e,it,n):!!r}function Zs(t){if(!ou(t))return!1;var e=yr(t);return e==Wt||e==Yt||"string"==typeof t.message&&"string"==typeof t.name&&!du(t)}function tu(t){return"number"==typeof t&&Vl(t)}function eu(t){if(!iu(t))return!1;var e=yr(t);return e==qt||e==Xt||e==Vt||e==Zt}function nu(t){return"number"==typeof t&&t==wu(t)}function ru(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Dt}function iu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ou(t){return null!=t&&"object"==typeof t}function au(t,e){return t===e||Ir(t,e,Co(e))}function su(t,e,n){return n="function"==typeof n?n:it,Ir(t,e,Co(e),n)}function uu(t){return hu(t)&&t!=+t}function cu(t){if(Tf(t))throw new il(at);return Dr(t)}function lu(t){return null===t}function fu(t){return null==t}function hu(t){return"number"==typeof t||ou(t)&&yr(t)==Kt}function du(t){if(!ou(t)||yr(t)!=Qt)return!1;var e=Ll(t);if(null===e)return!0;var n=vl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&_l.call(n)==bl}function pu(t){return nu(t)&&t>=-Dt&&t<=Dt}function _u(t){return"string"==typeof t||!mh(t)&&ou(t)&&yr(t)==ne}function vu(t){return"symbol"==typeof t||ou(t)&&yr(t)==re}function mu(t){return t===it}function yu(t){return ou(t)&&Lf(t)==oe}function gu(t){return ou(t)&&yr(t)==ae}function bu(t){if(!t)return[];if(Ws(t))return _u(t)?tt(t):ji(t);if(Il&&t[Il])return Y(t[Il]());var e=Lf(t);return(e==Gt?W:e==ee?G:Zu)(t)}function Au(t){if(!t)return 0===t?t:0;if((t=Cu(t))===It||t===-It){return(t<0?-1:1)*Nt}return t===t?t:0}function wu(t){var e=Au(t),n=e%1;return e===e?n?e-n:e:0}function Eu(t){return t?nr(wu(t),0,Mt):0}function Cu(t){if("number"==typeof t)return t;if(vu(t))return Pt;if(iu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=iu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ne,"");var n=Ye.test(t);return n||qe.test(t)?Rn(t.slice(2),n?2:8):ze.test(t)?Pt:+t}function Su(t){return Bi(t,$u(t))}function ku(t){return t?nr(wu(t),-Dt,Dt):0===t?t:0}function Lu(t){return null==t?"":di(t)}function Tu(t,e){var n=pf(t);return null==e?n:Qn(n,e)}function xu(t,e){return w(t,wo(e,3),dr)}function Ru(t,e){return w(t,wo(e,3),pr)}function Ou(t,e){return null==t?t:mf(t,wo(e,3),$u)}function Iu(t,e){return null==t?t:yf(t,wo(e,3),$u)}function Du(t,e){return t&&dr(t,wo(e,3))}function Nu(t,e){return t&&pr(t,wo(e,3))}function Pu(t){return null==t?[]:_r(t,Uu(t))}function Mu(t){return null==t?[]:_r(t,$u(t))}function ju(t,e,n){var r=null==t?it:vr(t,e);return r===it?n:r}function Bu(t,e){return null!=t&&xo(t,e,br)}function Fu(t,e){return null!=t&&xo(t,e,Ar)}function Uu(t){return Ws(t)?In(t):Br(t)}function $u(t){return Ws(t)?In(t,!0):Fr(t)}function Vu(t,e){var n={};return e=wo(e,3),dr(t,function(t,r,i){tr(n,e(t,r,i),t)}),n}function Hu(t,e){var n={};return e=wo(e,3),dr(t,function(t,r,i){tr(n,r,e(t,r,i))}),n}function zu(t,e){return Yu(t,Is(wo(e)))}function Yu(t,e){if(null==t)return{};var n=_(go(t),function(t){return[t]});return e=wo(e),Gr(t,n,function(t,n){return e(t,n[0])})}function Wu(t,e,n){e=Ei(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[Zo(e[r])];o===it&&(r=i,o=n),t=eu(o)?o.call(t):o}return t}function qu(t,e,n){return null==t?t:oi(t,e,n)}function Xu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:oi(t,e,n,r)}function Gu(t,e,n){var r=mh(t),i=r||gh(t)||Ch(t);if(e=wo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:iu(t)&&eu(o)?pf(Ll(t)):{}}return(i?c:dr)(t,function(t,r,i){return e(n,t,r,i)}),n}function Ku(t,e){return null==t||_i(t,e)}function Ju(t,e,n){return null==t?t:vi(t,e,wi(n))}function Qu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:vi(t,e,wi(n),r)}function Zu(t){return null==t?[]:M(t,Uu(t))}function tc(t){return null==t?[]:M(t,$u(t))}function ec(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=Cu(n),n=n===n?n:0),e!==it&&(e=Cu(e),e=e===e?e:0),nr(Cu(t),e,n)}function nc(t,e,n){return e=Au(e),n===it?(n=e,e=0):n=Au(n),t=Cu(t),wr(t,e,n)}function rc(t,e,n){if(n&&"boolean"!=typeof n&&Mo(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=Au(t),e===it?(e=t,t=0):e=Au(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Gl();return Wl(t+i*(e-t+xn("1e-"+((i+"").length-1))),e)}return Zr(t,e)}function ic(t){return Kh(Lu(t).toLowerCase())}function oc(t){return(t=Lu(t))&&t.replace(Ge,Wn).replace(vn,"")}function ac(t,e,n){t=Lu(t),e=di(e);var r=t.length;n=n===it?r:nr(wu(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function sc(t){return t=Lu(t),t&&Ce.test(t)?t.replace(we,qn):t}function uc(t){return t=Lu(t),t&&De.test(t)?t.replace(Ie,"\\$&"):t}function cc(t,e,n){t=Lu(t),e=wu(e);var r=e?Z(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return no(Fl(i),n)+t+no(Bl(i),n)}function lc(t,e,n){t=Lu(t),e=wu(e);var r=e?Z(t):0;return e&&r<e?t+no(e-r,n):t}function fc(t,e,n){t=Lu(t),e=wu(e);var r=e?Z(t):0;return e&&r<e?no(e-r,n)+t:t}function hc(t,e,n){return n||null==e?e=0:e&&(e=+e),Xl(Lu(t).replace(Pe,""),e||0)}function dc(t,e,n){return e=(n?Mo(t,e,n):e===it)?1:wu(e),ei(Lu(t),e)}function pc(){var t=arguments,e=Lu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function _c(t,e,n){return n&&"number"!=typeof n&&Mo(t,e,n)&&(e=n=it),(n=n===it?Mt:n>>>0)?(t=Lu(t),t&&("string"==typeof e||null!=e&&!wh(e))&&!(e=di(e))&&H(t)?Ci(tt(t),0,n):t.split(e,n)):[]}function vc(t,e,n){return t=Lu(t),n=null==n?0:nr(wu(n),0,t.length),e=di(e),t.slice(n,n+e.length)==e}function mc(t,e,r){var i=n.templateSettings;r&&Mo(t,e,r)&&(e=it),t=Lu(t),e=xh({},e,i,lo);var o,a,s=xh({},e.imports,i.imports,lo),u=Uu(s),c=M(s,u),l=0,f=e.interpolate||Ke,h="__p += '",d=ul((e.escape||Ke).source+"|"+f.source+"|"+(f===Le?Ve:Ke).source+"|"+(e.evaluate||Ke).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++wn+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),h+=t.slice(l,u).replace(Je,$),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var _=e.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ye,""):h).replace(ge,"$1").replace(be,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Jh(function(){return ol(u,p+"return "+h).apply(it,c)});if(v.source=h,Zs(v))throw v;return v}function yc(t){return Lu(t).toLowerCase()}function gc(t){return Lu(t).toUpperCase()}function bc(t,e,n){if((t=Lu(t))&&(n||e===it))return t.replace(Ne,"");if(!t||!(e=di(e)))return t;var r=tt(t),i=tt(e);return Ci(r,B(r,i),F(r,i)+1).join("")}function Ac(t,e,n){if((t=Lu(t))&&(n||e===it))return t.replace(Me,"");if(!t||!(e=di(e)))return t;var r=tt(t);return Ci(r,0,F(r,tt(e))+1).join("")}function wc(t,e,n){if((t=Lu(t))&&(n||e===it))return t.replace(Pe,"");if(!t||!(e=di(e)))return t;var r=tt(t);return Ci(r,B(r,tt(e))).join("")}function Ec(t,e){var n=kt,r=Lt;if(iu(e)){var i="separator"in e?e.separator:i;n="length"in e?wu(e.length):n,r="omission"in e?di(e.omission):r}t=Lu(t);var o=t.length;if(H(t)){var a=tt(t);o=a.length}if(n>=o)return t;var s=n-Z(r);if(s<1)return r;var u=a?Ci(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),wh(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=ul(i.source,Lu(He.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===it?s:f)}}else if(t.indexOf(di(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r}function Cc(t){return t=Lu(t),t&&Ee.test(t)?t.replace(Ae,Xn):t}function Sc(t,e,n){return t=Lu(t),e=n?it:e,e===it?z(t)?rt(t):A(t):t.match(e)||[]}function kc(t){var e=null==t?0:t.length,n=wo();return t=e?_(t,function(t){if("function"!=typeof t[1])throw new ll(st);return[n(t[0]),t[1]]}):[],ni(function(n){for(var r=-1;++r<e;){var i=t[r];if(s(i[0],this,n))return s(i[1],this,n)}})}function Lc(t){return ir(rr(t,ft))}function Tc(t){return function(){return t}}function xc(t,e){return null==t||t!==t?e:t}function Rc(t){return t}function Oc(t){return jr("function"==typeof t?t:rr(t,ft))}function Ic(t){return Vr(rr(t,ft))}function Dc(t,e){return Hr(t,rr(e,ft))}function Nc(t,e,n){var r=Uu(e),i=_r(e,r);null!=n||iu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Uu(e)));var o=!(iu(n)&&"chain"in n&&!n.chain),a=eu(t);return c(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=ji(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,v([this.value()],arguments))})}),t}function Pc(){return Dn._===this&&(Dn._=Al),this}function Mc(){}function jc(t){return t=wu(t),ni(function(e){return Wr(e,t)})}function Bc(t){return jo(t)?T(Zo(t)):Kr(t)}function Fc(t){return function(e){return null==t?it:vr(t,e)}}function Uc(){return[]}function $c(){return!1}function Vc(){return{}}function Hc(){return""}function zc(){return!0}function Yc(t,e){if((t=wu(t))<1||t>Dt)return[];var n=Mt,r=Wl(t,Mt);e=wo(e),t-=Mt;for(var i=D(r,e);++n<t;)e(n);return i}function Wc(t){return mh(t)?_(t,Zo):vu(t)?[t]:ji(If(Lu(t)))}function qc(t){var e=++ml;return Lu(t)+e}function Xc(t){return t&&t.length?cr(t,Rc,gr):it}function Gc(t,e){return t&&t.length?cr(t,wo(e,2),gr):it}function Kc(t){return L(t,Rc)}function Jc(t,e){return L(t,wo(e,2))}function Qc(t){return t&&t.length?cr(t,Rc,Ur):it}function Zc(t,e){return t&&t.length?cr(t,wo(e,2),Ur):it}function tl(t){return t&&t.length?I(t,Rc):0}function el(t,e){return t&&t.length?I(t,wo(e,2)):0}e=null==e?Dn:Gn.defaults(Dn.Object(),e,Gn.pick(Dn,An));var nl=e.Array,rl=e.Date,il=e.Error,ol=e.Function,al=e.Math,sl=e.Object,ul=e.RegExp,cl=e.String,ll=e.TypeError,fl=nl.prototype,hl=ol.prototype,dl=sl.prototype,pl=e["__core-js_shared__"],_l=hl.toString,vl=dl.hasOwnProperty,ml=0,yl=function(){var t=/[^.]+$/.exec(pl&&pl.keys&&pl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gl=dl.toString,bl=_l.call(sl),Al=Dn._,wl=ul("^"+_l.call(vl).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),El=Mn?e.Buffer:it,Cl=e.Symbol,Sl=e.Uint8Array,kl=El?El.allocUnsafe:it,Ll=q(sl.getPrototypeOf,sl),Tl=sl.create,xl=dl.propertyIsEnumerable,Rl=fl.splice,Ol=Cl?Cl.isConcatSpreadable:it,Il=Cl?Cl.iterator:it,Dl=Cl?Cl.toStringTag:it,Nl=function(){try{var t=So(sl,"defineProperty");return t({},"",{}),t}catch(t){}}(),Pl=e.clearTimeout!==Dn.clearTimeout&&e.clearTimeout,Ml=rl&&rl.now!==Dn.Date.now&&rl.now,jl=e.setTimeout!==Dn.setTimeout&&e.setTimeout,Bl=al.ceil,Fl=al.floor,Ul=sl.getOwnPropertySymbols,$l=El?El.isBuffer:it,Vl=e.isFinite,Hl=fl.join,zl=q(sl.keys,sl),Yl=al.max,Wl=al.min,ql=rl.now,Xl=e.parseInt,Gl=al.random,Kl=fl.reverse,Jl=So(e,"DataView"),Ql=So(e,"Map"),Zl=So(e,"Promise"),tf=So(e,"Set"),ef=So(e,"WeakMap"),nf=So(sl,"create"),rf=ef&&new ef,of={},af=ta(Jl),sf=ta(Ql),uf=ta(Zl),cf=ta(tf),lf=ta(ef),ff=Cl?Cl.prototype:it,hf=ff?ff.valueOf:it,df=ff?ff.toString:it,pf=function(){function t(){}return function(e){if(!iu(e))return{};if(Tl)return Tl(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Se,evaluate:ke,interpolate:Le,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=pf(r.prototype),i.prototype.constructor=i,b.prototype=pf(r.prototype),b.prototype.constructor=b,nt.prototype.clear=Ue,nt.prototype.delete=Qe,nt.prototype.get=Ze,nt.prototype.has=tn,nt.prototype.set=en,nn.prototype.clear=rn,nn.prototype.delete=on,nn.prototype.get=an,nn.prototype.has=sn,nn.prototype.set=un,cn.prototype.clear=ln,cn.prototype.delete=fn,cn.prototype.get=hn,cn.prototype.has=dn,cn.prototype.set=pn,mn.prototype.add=mn.prototype.push=yn,mn.prototype.has=gn,bn.prototype.clear=Sn,bn.prototype.delete=kn,bn.prototype.get=Ln,bn.prototype.has=Tn,bn.prototype.set=On;var _f=Hi(dr),vf=Hi(pr,!0),mf=zi(),yf=zi(!0),gf=rf?function(t,e){return rf.set(t,e),t}:Rc,bf=Nl?function(t,e){return Nl(t,"toString",{configurable:!0,enumerable:!1,value:Tc(e),writable:!0})}:Rc,Af=ni,wf=Pl||function(t){return Dn.clearTimeout(t)},Ef=tf&&1/G(new tf([,-0]))[1]==It?function(t){return new tf(t)}:Mc,Cf=rf?function(t){return rf.get(t)}:Mc,Sf=Ul?function(t){return null==t?[]:(t=sl(t),h(Ul(t),function(e){return xl.call(t,e)}))}:Uc,kf=Ul?function(t){for(var e=[];t;)v(e,Sf(t)),t=Ll(t);return e}:Uc,Lf=yr;(Jl&&Lf(new Jl(new ArrayBuffer(1)))!=ue||Ql&&Lf(new Ql)!=Gt||Zl&&"[object Promise]"!=Lf(Zl.resolve())||tf&&Lf(new tf)!=ee||ef&&Lf(new ef)!=oe)&&(Lf=function(t){var e=yr(t),n=e==Qt?t.constructor:it,r=n?ta(n):"";if(r)switch(r){case af:return ue;case sf:return Gt;case uf:return"[object Promise]";case cf:return ee;case lf:return oe}return e});var Tf=pl?eu:$c,xf=Jo(gf),Rf=jl||function(t,e){return Dn.setTimeout(t,e)},Of=Jo(bf),If=function(t){var e=Os(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Re.test(t)&&e.push(""),t.replace(Oe,function(t,n,r,i){e.push(r?i.replace($e,"$1"):n||t)}),e}),Df=ni(function(t,e){return qs(t)?sr(t,hr(e,1,qs,!0)):[]}),Nf=ni(function(t,e){var n=Aa(e);return qs(n)&&(n=it),qs(t)?sr(t,hr(e,1,qs,!0),wo(n,2)):[]}),Pf=ni(function(t,e){var n=Aa(e);return qs(n)&&(n=it),qs(t)?sr(t,hr(e,1,qs,!0),it,n):[]}),Mf=ni(function(t){var e=_(t,Ai);return e.length&&e[0]===t[0]?Er(e):[]}),jf=ni(function(t){var e=Aa(t),n=_(t,Ai);return e===Aa(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Er(n,wo(e,2)):[]}),Bf=ni(function(t){var e=Aa(t),n=_(t,Ai);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Er(n,it,e):[]}),Ff=ni(Ca),Uf=mo(function(t,e){var n=null==t?0:t.length,r=er(t,e);return Qr(t,_(e,function(t){return Po(t,n)?+t:t}).sort(Di)),r}),$f=ni(function(t){return pi(hr(t,1,qs,!0))}),Vf=ni(function(t){var e=Aa(t);return qs(e)&&(e=it),pi(hr(t,1,qs,!0),wo(e,2))}),Hf=ni(function(t){var e=Aa(t);return e="function"==typeof e?e:it,pi(hr(t,1,qs,!0),it,e)}),zf=ni(function(t,e){return qs(t)?sr(t,e):[]}),Yf=ni(function(t){return gi(h(t,qs))}),Wf=ni(function(t){var e=Aa(t);return qs(e)&&(e=it),gi(h(t,qs),wo(e,2))}),qf=ni(function(t){var e=Aa(t);return e="function"==typeof e?e:it,gi(h(t,qs),it,e)}),Xf=ni(Wa),Gf=ni(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,qa(t,n)}),Kf=mo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return er(e,t)};return!(e>1||this.__actions__.length)&&r instanceof b&&Po(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Qa,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),Jf=$i(function(t,e,n){vl.call(t,n)?++t[n]:tr(t,n,1)}),Qf=Ki(fa),Zf=Ki(ha),th=$i(function(t,e,n){vl.call(t,n)?t[n].push(e):tr(t,n,[e])}),eh=ni(function(t,e,n){var r=-1,i="function"==typeof e,o=Ws(t)?nl(t.length):[];return _f(t,function(t){o[++r]=i?s(e,t,n):Sr(t,e,n)}),o}),nh=$i(function(t,e,n){tr(t,n,e)}),rh=$i(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ih=ni(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Mo(t,e[0],e[1])?e=[]:n>2&&Mo(e[0],e[1],e[2])&&(e=[e[0]]),qr(t,hr(e,1),[])}),oh=Ml||function(){return Dn.Date.now()},ah=ni(function(t,e,n){var r=vt;if(n.length){var i=X(n,Ao(ah));r|=At}return co(t,r,e,n,i)}),sh=ni(function(t,e,n){var r=vt|mt;if(n.length){var i=X(n,Ao(sh));r|=At}return co(e,r,t,n,i)}),uh=ni(function(t,e){return ar(t,1,e)}),ch=ni(function(t,e,n){return ar(t,Cu(e)||0,n)});Os.Cache=cn;var lh=Af(function(t,e){e=1==e.length&&mh(e[0])?_(e[0],P(wo())):_(hr(e,1),P(wo()));var n=e.length;return ni(function(r){for(var i=-1,o=Wl(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return s(t,this,r)})}),fh=ni(function(t,e){var n=X(e,Ao(fh));return co(t,At,it,e,n)}),hh=ni(function(t,e){var n=X(e,Ao(hh));return co(t,wt,it,e,n)}),dh=mo(function(t,e){return co(t,Ct,it,it,it,e)}),ph=oo(gr),_h=oo(function(t,e){return t>=e}),vh=kr(function(){return arguments}())?kr:function(t){return ou(t)&&vl.call(t,"callee")&&!xl.call(t,"callee")},mh=nl.isArray,yh=Fn?P(Fn):Lr,gh=$l||$c,bh=Un?P(Un):Tr,Ah=$n?P($n):Or,wh=Vn?P(Vn):Nr,Eh=Hn?P(Hn):Pr,Ch=zn?P(zn):Mr,Sh=oo(Ur),kh=oo(function(t,e){return t<=e}),Lh=Vi(function(t,e){if($o(e)||Ws(e))return void Bi(e,Uu(e),t);for(var n in e)vl.call(e,n)&&Yn(t,n,e[n])}),Th=Vi(function(t,e){Bi(e,$u(e),t)}),xh=Vi(function(t,e,n,r){Bi(e,$u(e),t,r)}),Rh=Vi(function(t,e,n,r){Bi(e,Uu(e),t,r)}),Oh=mo(er),Ih=ni(function(t){return t.push(it,lo),s(xh,it,t)}),Dh=ni(function(t){return t.push(it,fo),s(Bh,it,t)}),Nh=Zi(function(t,e,n){t[e]=n},Tc(Rc)),Ph=Zi(function(t,e,n){vl.call(t,e)?t[e].push(n):t[e]=[n]},wo),Mh=ni(Sr),jh=Vi(function(t,e,n){zr(t,e,n)}),Bh=Vi(function(t,e,n,r){zr(t,e,n,r)}),Fh=mo(function(t,e){var n={};if(null==t)return n;var r=!1;e=_(e,function(e){return e=Ei(e,t),r||(r=e.length>1),e}),Bi(t,go(t),n),r&&(n=rr(n,ft|ht|dt,ho));for(var i=e.length;i--;)_i(n,e[i]);return n}),Uh=mo(function(t,e){return null==t?{}:Xr(t,e)}),$h=uo(Uu),Vh=uo($u),Hh=qi(function(t,e,n){return e=e.toLowerCase(),t+(n?ic(e):e)}),zh=qi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yh=qi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Wh=Wi("toLowerCase"),qh=qi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xh=qi(function(t,e,n){return t+(n?" ":"")+Kh(e)}),Gh=qi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Kh=Wi("toUpperCase"),Jh=ni(function(t,e){try{return s(t,it,e)}catch(t){return Zs(t)?t:new il(t)}}),Qh=mo(function(t,e){return c(e,function(e){e=Zo(e),tr(t,e,ah(t[e],t))}),t}),Zh=Ji(),td=Ji(!0),ed=ni(function(t,e){return function(n){return Sr(n,t,e)}}),nd=ni(function(t,e){return function(n){return Sr(t,n,e)}}),rd=eo(_),id=eo(f),od=eo(g),ad=io(),sd=io(!0),ud=to(function(t,e){return t+e},0),cd=so("ceil"),ld=to(function(t,e){return t/e},1),fd=so("floor"),hd=to(function(t,e){return t*e},1),dd=so("round"),pd=to(function(t,e){return t-e},0);return n.after=Cs,n.ary=Ss,n.assign=Lh,n.assignIn=Th,n.assignInWith=xh,n.assignWith=Rh,n.at=Oh,n.before=ks,n.bind=ah,n.bindAll=Qh,n.bindKey=sh,n.castArray=Fs,n.chain=Ka,n.chunk=ra,n.compact=ia,n.concat=oa,n.cond=kc,n.conforms=Lc,n.constant=Tc,n.countBy=Jf,n.create=Tu,n.curry=Ls,n.curryRight=Ts,n.debounce=xs,n.defaults=Ih,n.defaultsDeep=Dh,n.defer=uh,n.delay=ch,n.difference=Df,n.differenceBy=Nf,n.differenceWith=Pf,n.drop=aa,n.dropRight=sa,n.dropRightWhile=ua,n.dropWhile=ca,n.fill=la,n.filter=ss,n.flatMap=us,n.flatMapDeep=cs,n.flatMapDepth=ls,n.flatten=da,n.flattenDeep=pa,n.flattenDepth=_a,n.flip=Rs,n.flow=Zh,n.flowRight=td,n.fromPairs=va,n.functions=Pu,n.functionsIn=Mu,n.groupBy=th,n.initial=ga,n.intersection=Mf,n.intersectionBy=jf,n.intersectionWith=Bf,n.invert=Nh,n.invertBy=Ph,n.invokeMap=eh,n.iteratee=Oc,n.keyBy=nh,n.keys=Uu,n.keysIn=$u,n.map=ps,n.mapKeys=Vu,n.mapValues=Hu,n.matches=Ic,n.matchesProperty=Dc,n.memoize=Os,n.merge=jh,n.mergeWith=Bh,n.method=ed,n.methodOf=nd,n.mixin=Nc,n.negate=Is,n.nthArg=jc,n.omit=Fh,n.omitBy=zu,n.once=Ds,n.orderBy=_s,n.over=rd,n.overArgs=lh,n.overEvery=id,n.overSome=od,n.partial=fh,n.partialRight=hh,n.partition=rh,n.pick=Uh,n.pickBy=Yu,n.property=Bc,n.propertyOf=Fc,n.pull=Ff,n.pullAll=Ca,n.pullAllBy=Sa,n.pullAllWith=ka,n.pullAt=Uf,n.range=ad,n.rangeRight=sd,n.rearg=dh,n.reject=ys,n.remove=La,n.rest=Ns,n.reverse=Ta,n.sampleSize=bs,n.set=qu,n.setWith=Xu,n.shuffle=As,n.slice=xa,n.sortBy=ih,n.sortedUniq=Ma,n.sortedUniqBy=ja,n.split=_c,n.spread=Ps,n.tail=Ba,n.take=Fa,n.takeRight=Ua,n.takeRightWhile=$a,n.takeWhile=Va,n.tap=Ja,n.throttle=Ms,n.thru=Qa,n.toArray=bu,n.toPairs=$h,n.toPairsIn=Vh,n.toPath=Wc,n.toPlainObject=Su,n.transform=Gu,n.unary=js,n.union=$f,n.unionBy=Vf,n.unionWith=Hf,n.uniq=Ha,n.uniqBy=za,n.uniqWith=Ya,n.unset=Ku,n.unzip=Wa,n.unzipWith=qa,n.update=Ju,n.updateWith=Qu,n.values=Zu,n.valuesIn=tc,n.without=zf,n.words=Sc,n.wrap=Bs,n.xor=Yf,n.xorBy=Wf,n.xorWith=qf,n.zip=Xf,n.zipObject=Xa,n.zipObjectDeep=Ga,n.zipWith=Gf,n.entries=$h,n.entriesIn=Vh,n.extend=Th,n.extendWith=xh,Nc(n,n),n.add=ud,n.attempt=Jh,n.camelCase=Hh,n.capitalize=ic,n.ceil=cd,n.clamp=ec,n.clone=Us,n.cloneDeep=Vs,n.cloneDeepWith=Hs,n.cloneWith=$s,n.conformsTo=zs,n.deburr=oc,n.defaultTo=xc,n.divide=ld,n.endsWith=ac,n.eq=Ys,n.escape=sc,n.escapeRegExp=uc,n.every=as,n.find=Qf,n.findIndex=fa,n.findKey=xu,n.findLast=Zf,n.findLastIndex=ha,n.findLastKey=Ru,n.floor=fd,n.forEach=fs,n.forEachRight=hs,n.forIn=Ou,n.forInRight=Iu,n.forOwn=Du,n.forOwnRight=Nu,n.get=ju,n.gt=ph,n.gte=_h,n.has=Bu,n.hasIn=Fu,n.head=ma,n.identity=Rc,n.includes=ds,n.indexOf=ya,n.inRange=nc,n.invoke=Mh,n.isArguments=vh,n.isArray=mh,n.isArrayBuffer=yh,n.isArrayLike=Ws,n.isArrayLikeObject=qs,n.isBoolean=Xs,n.isBuffer=gh,n.isDate=bh,n.isElement=Gs,n.isEmpty=Ks,n.isEqual=Js,n.isEqualWith=Qs,n.isError=Zs,n.isFinite=tu,n.isFunction=eu,n.isInteger=nu,n.isLength=ru,n.isMap=Ah,n.isMatch=au,n.isMatchWith=su,n.isNaN=uu,n.isNative=cu,n.isNil=fu,n.isNull=lu,n.isNumber=hu,n.isObject=iu,n.isObjectLike=ou,n.isPlainObject=du,n.isRegExp=wh,n.isSafeInteger=pu,n.isSet=Eh,n.isString=_u,n.isSymbol=vu,n.isTypedArray=Ch,n.isUndefined=mu,n.isWeakMap=yu,n.isWeakSet=gu,n.join=ba,n.kebabCase=zh,n.last=Aa,n.lastIndexOf=wa,n.lowerCase=Yh,n.lowerFirst=Wh,n.lt=Sh,n.lte=kh,n.max=Xc,n.maxBy=Gc,n.mean=Kc,n.meanBy=Jc,n.min=Qc,n.minBy=Zc,n.stubArray=Uc,n.stubFalse=$c,n.stubObject=Vc,n.stubString=Hc,n.stubTrue=zc,n.multiply=hd,n.nth=Ea,n.noConflict=Pc,n.noop=Mc,n.now=oh,n.pad=cc,n.padEnd=lc,n.padStart=fc,n.parseInt=hc,n.random=rc,n.reduce=vs,n.reduceRight=ms,n.repeat=dc,n.replace=pc,n.result=Wu,n.round=dd,n.runInContext=t,n.sample=gs,n.size=ws,n.snakeCase=qh,n.some=Es,n.sortedIndex=Ra,n.sortedIndexBy=Oa,n.sortedIndexOf=Ia,n.sortedLastIndex=Da,n.sortedLastIndexBy=Na,n.sortedLastIndexOf=Pa,n.startCase=Xh,n.startsWith=vc,n.subtract=pd,n.sum=tl,n.sumBy=el,n.template=mc,n.times=Yc,n.toFinite=Au,n.toInteger=wu,n.toLength=Eu,n.toLower=yc,n.toNumber=Cu,n.toSafeInteger=ku,n.toString=Lu,n.toUpper=gc,n.trim=bc,n.trimEnd=Ac,n.trimStart=wc,n.truncate=Ec,n.unescape=Cc,n.uniqueId=qc,n.upperCase=Gh,n.upperFirst=Kh,n.each=fs,n.eachRight=hs,n.first=ma,Nc(n,function(){var t={};return dr(n,function(e,r){vl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),c(["drop","take"],function(t,e){b.prototype[t]=function(n){n=n===it?1:Yl(wu(n),0);var r=this.__filtered__&&!e?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Wl(n,r.__takeCount__):r.__views__.push({size:Wl(n,Mt),type:t+(r.__dir__<0?"Right":"")}),r},b.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Rt||3==n;b.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:wo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");b.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");b.prototype[t]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Rc)},b.prototype.find=function(t){return this.filter(t).head()},b.prototype.findLast=function(t){return this.reverse().find(t)},b.prototype.invokeMap=ni(function(t,e){return"function"==typeof t?new b(this):this.map(function(n){return Sr(n,t,e)})}),b.prototype.reject=function(t){return this.filter(Is(wo(t)))},b.prototype.slice=function(t,e){t=wu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new b(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=wu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},b.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},b.prototype.toArray=function(){return this.take(Mt)},dr(b.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof b,l=u[0],f=c||mh(e),h=function(t){var e=a.apply(n,v([t],u));return o&&d?e[0]:e};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var d=this.__chain__,p=!!this.__actions__.length,_=s&&!d,m=c&&!p;if(!s&&f){e=m?e:new b(this);var y=t.apply(e,u);return y.__actions__.push({func:Qa,args:[h],thisArg:it}),new i(y,d)}return _&&m?t.apply(this,u):(y=this.thru(h),_?o?y.value()[0]:y.value():y)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var e=fl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(mh(n)?n:[],t)}return this[r](function(n){return e.apply(mh(n)?n:[],t)})}}),dr(b.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(of[i]||(of[i]=[])).push({name:e,func:r})}}),of[Qi(it,mt).name]=[{name:"wrapper",func:it}],b.prototype.clone=x,b.prototype.reverse=J,b.prototype.value=et,n.prototype.at=Kf,n.prototype.chain=Za,n.prototype.commit=ts,n.prototype.next=es,n.prototype.plant=rs,n.prototype.reverse=is,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=os,n.prototype.first=n.prototype.head,Il&&(n.prototype[Il]=ns),n}();Dn._=Gn,(i=function(){return Gn}.call(e,n,e,r))!==it&&(r.exports=i)}).call(this)}).call(e,n(43),n(6)(t))},,function(t,e,n){"use strict";function r(t){return i.push(t)-1}Object.defineProperty(e,"__esModule",{value:!0}),e.register=r;var i=e.templates=[]},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),o=r(i),a=n(34),s=r(a),u=n(36),c=r(u),l=n(2),f=r(l),h=n(0),d=r(h),p=n(1),_=r(p),v=n(3),m=r(v),y=n(4),g=r(y),b=n(11),A=r(b),w=n(27),E=r(w),C=n(101),S=r(C),k=n(220),L=r(k),T=n(221),x=r(T),R=n(371),O=r(R),I=/^on-/,D=function(){},N=null,P={},M=function(t){function e(){(0,d.default)(this,e);var t=(0,m.default)(this,(e.__proto__||(0,f.default)(e)).call(this));if(N){var n=N,r=n.scope,i=n.factory,o=n.data,a=n.spreads;o.$_component=t,t.scope=r,t.$_depth=i.depth,t.$_factory=i,t.$_view=o,a&&e.attachSpreads(o,N.definedAttributes,a,t)}return t}return(0,g.default)(e,t),(0,_.default)(e,[{key:"attached",value:function(){}},{key:"detached",value:function(){}},{key:"_getChildTemplate",value:function(t){if(this.childrenBlocks)return this.childrenBlocks[t]||this.childrenBlocks[t.replace(/:/g,"_")]}},{key:"renderChildWithName",value:function(t){var e=this._getChildTemplate(t);return e?this.renderChildTemplate(e):null}},{key:"renderChildTemplate",value:function(t){return{template:t,$_parent:this.$_view}}},{key:"childrenWithArgs",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.renderChildWithNameAndArgs.apply(this,["children"].concat(e))}},{key:"renderChildWithNameAndArgs",value:function(t){for(var e=this._getChildTemplate(t),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e?this.renderChildTemplateWithArgs.apply(this,[e].concat(r)):null}},{key:"renderChildTemplateWithArgs",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return{template:t,$_parent:this.$_view,$_injectScope:function(t){for(var e=0,r=n.length;e<r;++e)t["v"+e]=n[e]}}}},{key:"childAttributes",value:function(t){var e=this.definedAttributes,n=t?t+":":null,r=[],i=this.sourceAttributes;if(i)for(var o=0,a=i.length;o<a;++o){var s=i[o];if(!e||!0!==e[s.name]){var u=s.original||s.name;if(n){if(0!==u.indexOf(n))continue;u=u.substring(n.length)}var l=s.get,f=s.set;r.push({name:u,value:l?f?{get:l.bind(this),set:f.bind(this)}:l.bind(this):s.value})}}var h=this.spreadAttributes;if(h)for(var d=0,p=h.length;d<p;++d){var _=h[d],v=_(this.$_view);if(v)if(v instanceof Array)for(var m=0,y=v.length;m<y;++m){var g=v[m];if(g){var b=g.name;if(!e||!0!==e[(0,L.default)(b)]){if(n){if(0!==b.indexOf(n))continue;b=b.substring(n.length)}r.push({name:b,value:g.value})}}}else if("object"===(void 0===v?"undefined":(0,c.default)(v)))for(var A in v){var w=v[A];if(w&&v.hasOwnProperty(A)&&(!e||!0!==e[(0,L.default)(A)])){if(n){if(0!==A.indexOf(n))continue;A=A.substring(n.length)}r.push({name:A,value:w})}}}var E=this.childEvents;if(E)for(var C=0,S=E.length;C<S;++C){var k=E[C],T=k.original||k.name;if(n){if(0!==T.indexOf(n))continue;T=T.substring(n.length)}r.push({name:T,value:k.value.bind(this)})}return r}},{key:"children",get:function(){return this.renderChildWithName("children")}}],[{key:"attachAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t)for(var r=0,i=t.length;r<i;++r){var o=t[r].name,a=e.definedAttributes&&e.definedAttributes[o];if(!a){var u=e.definedObservables&&e.definedObservables[o],c=o in e;if(u)console.warn('WARNING: The JSX attribute "'+o+'" was passed to a component declaring an @Observable of the same name. The JSX attribute will be ignored in a future Torq release. Use the @Attribute decorator to declare JSX attributes.');else if(c)console.warn('WARNING: The JSX attribute "'+o+'" was passed to a component declaring a property of the same name. The JSX attribute will be ignored in a future Torq release. Use the @Attribute decorator to declare JSX attributes.');else if(n)continue}var l=(0,x.default)({},t[r],{configurable:!0,enumerable:!1});l.get&&!l.set&&(l.set=D),(0,s.default)(e,l.name,l)}return e}},{key:"attachSpreads",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.on&&r.events;if((e||i)&&n)for(var o=0,a=n.length;o<a;++o){var u=n[o],l=u(t);if(l)if(l instanceof Array)for(var f=0,h=l.length;f<h;++f){var d=l[f];if(d){var p=(0,L.default)(d.name);if(e&&e[p]){d.value&&d.value.get&&(d=d.value);var _=(0,x.default)({},d,{configurable:!0,enumerable:!1});_.get&&!_.set&&(_.set=D),(0,s.default)(r,p,_)}else if(i&&I.test(d.name)){var v=d.name.substring(3);if(-1!==i.indexOf(v)){var m="function"==typeof d?d:d.value;m&&r.on(v,m)}}}}else if("object"===(void 0===l?"undefined":(0,c.default)(l)))for(var y in l){var g=(0,L.default)(y);if(l.hasOwnProperty(y))if(e&&e[g]){var b=l[y];if(!b)continue;var A=(0,x.default)({},b,{configurable:!0,enumerable:!1});A.get&&!A.set&&(A.set=D),(0,s.default)(r,g,A)}else if(i&&I.test(y)){var w=y.substring(3);if(-1!==i.indexOf(w)){var E=l[y],C="function"==typeof E?E:E&&E.value;C&&r.on(w,C)}}}}return r}},{key:"getBlockTemplate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";if(t)for(var n=0,r=t.length;n<r;++n){var i=t[n];if(i.name===e)return i.template}}},{key:"attachBlockTemplates",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t)for(var n=0,r=t.length;n<r;++n){var i=t[n];e[i.name]=i.template}return e}},{key:"make",value:function(t){function n(t){_=t,v=function(t){function e(){return(0,d.default)(this,e),(0,m.default)(this,(e.__proto__||(0,f.default)(e)).apply(this,arguments))}return(0,g.default)(e,t),e}(_),e.attachAttributes(x,v.prototype,!0),v.prototype.childrenBlocks=e.attachBlockTemplates(O),v.prototype.sourceAttributes=x,v.prototype.spreadAttributes=R,y=v.prototype.fork,b=v.prototype.render,w=v.prototype.attached,E=v.prototype.detached,w===e.prototype.attached&&(w=null),E===e.prototype.detached&&(E=null),C=v.prototype.dispose,L=v.prototype.definedAttributes,k=r()}function r(){if(!D)return void(v.prototype.childEvents=null);for(var t=v.prototype.events,e=[],n=t?[]:null,r=0,i=D.length;r<i;++r){var o=D[r];t&&t.indexOf(o.name)>-1?n.push(o):e.push({name:"on-"+o.name,value:o.value,original:o.original})}return v.prototype.childEvents=e,n}function i(t){for(var e=0,n=k.length;e<n;++e){var r=k[e];t.on(r.name,r.value)}}function a(t){for(var e=0,n=k.length;e<n;++e){var r=k[e];t.off(r.name,r.value)}}function s(t,e){var n=N;N=P||{},P=null,N.scope=y?t.scope.fork():t.scope,N.data=e,N.factory=t,N.spreads=R,N.definedAttributes=L;var r=new v;N.scope=null,N.data=null,P=N,N=n,I&&I(e,r),k&&i(r);var o,a=t.pushScope(r.scope),s=t.parentNode,u=t.nextNode,c=b&&b.call(r);c&&c.template?(o=c.template.make(t),o.$_parent=e,o.$_scope=c):o=A.default.EmptyTemplate.make(t),t.parentNode=s,t.nextNode=u,e.$_view=o,o.template.run(t,o),t.restoreScope(a),w&&w.call(r),M&&(e.$_hotReloadFactory=t,e.$_hotReloadScope=t.scope,e.$_hotReloadNext=j,j&&(j.$_hotReloadPrevious=e),j=e)}function u(t,e,n){var r=N;N=P||{},P=null,N.scope=y?t.scope.fork():t.scope,N.data=e,N.factory=t,N.spreads=R,N.definedAttributes=L;var o=new v;N.scope=null,N.data=null,P=N,N=r,I&&I(e,o),k&&i(o);var a=t.pushScope(o.scope);t.gotoAfterView(e.$_view),e.$_view.template.cache(t,e.$_view);var s,u=t.parentNode,c=t.nextNode,l=b&&b.call(o);l&&l.template?(s=l.template.make(t),s.$_parent=e,s.$_scope=l):s=A.default.EmptyTemplate.make(t),t.parentNode=u,t.nextNode=c,e.$_view=s,s.template.run(t,s),t.restoreScope(a),w&&w.call(o),!n&&M&&(e.$_hotReloadFactory=t,e.$_hotReloadScope=t.scope,e.$_hotReloadNext=j,j&&(j.$_hotReloadPrevious=e),j=e)}function c(t,e,n){var r=e.$_component;!n&&M&&(e.$_hotReloadFactory=t,j===e&&(j=e.$_hotReloadNext),e.$_hotReloadNext&&(e.$_hotReloadNext.$_hotReloadPrevious=e.$_hotReloadPrevious),e.$_hotReloadPrevious&&(e.$_hotReloadPrevious.$_hotReloadNext=e.$_hotReloadNext),e.$_hotReloadScope=null,e.$_hotReloadNext=null,e.$_hotReloadPrevious=null,e.$_hotReloadFactory=null,B.add(t)),E&&E.call(r);var i=e.$_view;i.template.dispose(t,i),k&&a(r),I&&I(e,null),C&&C.call(r),i.$_parent=null,i.$_scope=null,i.$_factory=null,r.scope=null,r.$_view=null,e.$_component=null}function l(t,e){var n=e.$_view;n.template.move(t,n)}function h(t,e){var n=e.$_view;return n.template.firstChild(t,n)}function p(t,e){var n=e.$_view;return n.template.lastChild(t,n)}var _,v,y,b,w,E,C,k,L,T=t||{},x=T.attributes,R=T.spreads,O=T.blocks,I=T.init,D=T.events;n(this);var M,j,B,F=A.default.make({render:s,reuse:u,dispose:c,move:l,firstChild:h,lastChild:p});return(M=_.hotReloader)&&(B=new o.default,M.signal.add(function(){S.default.log("[HMR] Patching component",M.name);for(var t=0,e=j;e;e=e.$_hotReloadNext)++t,c(e.$_hotReloadFactory,e,!0);S.default.log("[HMR] Disposed ",t," instances of ",M.name),n(M.instance),B.forEach(function(t){return F.releaseCache(t)}),t=0;for(var r=j;r;r=r.$_hotReloadNext){++t;var i=r.$_hotReloadFactory,o=i.pushScope(r.$_hotReloadScope);u(i,r,!0),i.restoreScope(o)}S.default.log("[HMR] Updated ",t," instances of ",M.name)})),F}},{key:"makeDynamic",value:function(t){var e=(0,O.default)("_dynamicTemplate");return{make:function(n,r){if(!r)return A.default.EmptyTemplate;var i=r[e];return i&&i.$_base===r||(i=r[e]=n.makeComponent(r,t),i.$_base=r),i}}}}]),e}(E.default);e.default=M},,function(t,e,n){var r=n(26),i=n(16),o=n(48),a=n(52),s=function(t,e,n){var u,c,l,f=t&s.F,h=t&s.G,d=t&s.S,p=t&s.P,_=t&s.B,v=t&s.W,m=h?i:i[e]||(i[e]={}),y=m.prototype,g=h?r:d?r[e]:(r[e]||{}).prototype;h&&(n=e);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in m||(l=c?g[u]:n[u],m[u]=h&&"function"!=typeof g[u]?n[u]:_&&c?o(l,r):v&&g[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m.virtual||(m.virtual={}))[u]=l,t&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=n(11),c=r(u),l=n(18),f=r(l),h=function(){function t(){(0,o.default)(this,t)}return(0,s.default)(t,null,[{key:"makeConditionReader",value:function(t){var e=t&&t.getCondition;if(e)return function(t){return Boolean(e(t))}}},{key:"make",value:function(t){function e(t,e,n,r,i,s,c){if(e.$_signals=n,e.$_invalidate=r,s){e.$_savedScope=t.scope,e.$_value=i;var l=i?o:a;if(l){var f=l.make(t);f.$_parent=e,f.v0=i,e.$_view=f,l.run(t,f)}else e.$_placeholder=t.pushCommentNode(u)}else if(c&&(e.$_savedScope=t.scope),i!==e.$_value){e.$_value=i;var h=i?o:a,d=e.$_view;if(d||h){var p=t.pushScope(e.$_savedScope);if(d?(t.gotoAfterView(d),d.template.cache(t,d),e.$_view=null):(t.gotoAfterNode(e.$_placeholder),t.removeNode(e.$_placeholder),e.$_placeholder=null),h){var _=h.make(t);_.$_parent=e,_.v0=i,e.$_view=_,h.run(t,_)}else e.$_placeholder?t.pushNode(e.$_placeholder):e.$_placeholder=t.pushCommentNode(u);t.restoreScope(p)}}else if(c){var v=e.$_view;v&&v.$_disposed&&v.template.reuse(t,v)}}var n=t.props,r=t.blocks,i=f.default.attachBlockTemplates(r),o=i.children||i.if_true,a=i.if_false||i.else,s=this.makeConditionReader(n);if(!s||!o&&!a)return c.default.EmptyTemplate;var u=this.placeholder;return c.default.make({render:function(t,n){t.runBinder(s,e,n,!0)},reuse:function(t,n){t.runBinder(s,e,n,!1)},dispose:function(t,e){t.removeSignals(e.$_signals,e.$_invalidate);var n=e.$_view;n&&n.template.dispose(t,n)},move:function(t,e){var n=e.$_view;n?n.template.move(t,n):t.pushNode(e.$_placeholder)},firstChild:function(t,e){var n=e.$_view;return n?n.template.firstChild(t,n):e.$_placeholder},lastChild:function(t,e){var n=e.$_view;return n?n.template.lastChild(t,n):e.$_placeholder}})}}]),t}();h.placeholder="empty if",e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){return function(t){var e=t.getValue();t.setGetter(function(){if(t.ref===this)return e;var n=e.bind(this);return(0,i.default)(this,t.name,{configurable:!0,enumerable:!1,value:n}),n})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){return function(n){t&&(0,i.default)(n.prototype,t,e)}}},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(32),o=r(i),a=n(2),s=r(a),u=n(166),c=r(u);e.default=function(t){return function(e){var n=e.name;-1!==p.indexOf(n)&&console.warn('"'+n+'" is a reserved attribute name, and may not work correctly as an @Attribute - please use a different name.');var r=e.ref.definedAttributes;e.ref.hasOwnProperty("definedAttributes")||(r=r?(0,o.default)({},r):{},e.add("definedAttributes",{configurable:!0,enumerable:!1,writable:!0,value:r})),r[n]=!0,t&&n!==t&&(r[t]=!0,e.name=t,e.add(n,{configurable:!0,enumerable:!1,get:function(){return this[t]},set:function(e){this[t]=e}})),(0,d.default)()(e)}};for(var l=n(18),f=r(l),h=n(7),d=r(h),p=["is","as","ref","define-ref"],_=f.default.prototype;_;)(0,c.default)(_).forEach(function(t){_.hasOwnProperty(t)&&p.push(t)}),_=(0,s.default)(_)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=r(i),a=n(2),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),h=n(3),d=r(h),p=n(8),_=r(p),v=n(4),m=r(v),y=n(98),g=r(y),b=n(207),A=r(b),w=n(45),E=r(w),C=n(55),S=r(C),k=n(353),L=r(k),T=n(76),x=r(T),R=function(){},O=function(t){function e(){return(0,c.default)(this,e),(0,d.default)(this,(e.__proto__||(0,s.default)(e)).apply(this,arguments))}return(0,m.default)(e,t),(0,f.default)(e,[{key:"watch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.default,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new S.default(t,e,n,r,i,this))}},{key:"watchCollection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.default,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new L.default(t,e,n,r,i,this))}},{key:"multiWatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.default,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new S.default(function(){return t.map(function(t){return t()})},function(t){return e.apply(null,t)},n,r,i,this))}},{key:"defineObservable",value:function(t,e){if(this.hasOwnProperty(t))return void(this[t]=e);var n="_"+t;this[n]=e;var r=this;(0,o.default)(this,t,{configurable:!0,enumerable:!1,get:function(){return S.default.active&&S.default.recordEvent(r,t),r[n]},set:function(e){var i=r[n];i!==e&&(r[n]=e,S.default.recordChange(r,t,e,i))}})}},{key:"property",value:function(t,e){return A.default.warn("SignalDispatcher.property()","Use SignalDispatcher.defineObservable() instead."),this.defineObservable(t,e)}},{key:"dispose",value:function(){this.stopListening(),(0,_.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"dispose",this).call(this)}},{key:"trigger",value:function(t){if(this.hasOwnProperty(w.SignalsProperty)){var e=this[w.SignalsProperty],n=e[t];if(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n.trigger.apply(n,i)}}}},{key:"on",value:function(t,e){return E.default.on(this,t,e)}},{key:"off",value:function(t,e){return E.default.off(this,t,e)}},{key:"listenTo",value:function(t,e,n){return E.default.listenTo(this,t,e,n)}},{key:"stopListening",value:function(t,e,n){return E.default.stopListening(this,t,e,n)}}]),e}(g.default);e.default=O},function(t,e,n){var r=n(133)("wks"),i=n(110),o=n(26).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(66),o=r(i),a=n(35),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),h=n(11),d=r(h),p=n(18),_=r(p),v=n(215),m=r(v),y=n(74),g=r(y),b=n(849),A=1,w=2,E=3,C=4,S=function(){function t(){(0,c.default)(this,t)}return(0,f.default)(t,null,[{key:"make",value:function(t){function e(t,e){var n=e.$_placeholder;n?t.pushNode(n):e.$_placeholder=t.pushCommentNode("empty repeat")}function n(t,n,r,i){t.gotoBeforeView(r[0]),e(t,n),n.$_list=null,n.$_previousList=null,n.$_map=null;var o=m.default.DISABLE_CACHING_BEYOND_CAPACITY;m.default.DISABLE_CACHING_BEYOND_CAPACITY=!0;for(var a=0;a<i;++a){var s=r[a];s.$_key=null,T.cache(t,s)}m.default.DISABLE_CACHING_BEYOND_CAPACITY=o}function r(t,e,n,r,i,o){t.gotoAfterNode(e.$_placeholder),t.removeNode(e.$_placeholder),e.$_placeholder=null;var a=e.$_list=[];if(e.$_map=null,i)for(var s=0;s<r;++s){var u=T.make(t);u.$_parent=e,u.v0=n[s],x&&(u.v1=s),u.$_key=null,T.run(t,u),a.push(u)}else for(var c=0;c<r;++c){var l=T.make(t);l.$_parent=e;var f=n[c];l.v0=o[f],x&&(l.v1=f),l.$_key=null,T.run(t,l),a.push(l)}}function i(t,e,n){for(var r=new s.default,i=0;i<n;++i){var o=e[i],a=o.$_key||(o.$_key=L?t.$_keyMethod(o.v0):(0,g.default)(o.v0));r.set(a,o),o.$_index=i,o.$_state=C}return r}function a(t,e,n,r,i,o,a){var s,u,c,l=t.$_previousList||[];l.length=i;for(var f=!o,h=0;h<i;++h)c=r[h],f&&(c=a[c]),s=n[h],s&&s.v0===c||(u=L?t.$_keyMethod(c):(0,g.default)(c),s=e.get(u)),s&&s.$_state===C?(s.$_state=E,l[h]=s):l[h]=null;return t.$_previousList=t.$_list,t.$_list=l,l}function u(t,e,n,r){var i=m.default.DISABLE_CACHING_BEYOND_CAPACITY;m.default.DISABLE_CACHING_BEYOND_CAPACITY=!0;for(var o=0,a=r.length;o<a;++o){var s=r[o];e.delete(s.$_key),s.$_key=null,T.cache(t,s)}m.default.DISABLE_CACHING_BEYOND_CAPACITY=i}function c(t,e,n,r,i,o,a,s,u){for(var c=-1,l=0;l<i;++l){var f=r[l];if(!f){var h=e[l];s||(h=u[h]);var d=L?o.$_keyMethod(h):(0,g.default)(h);if(!a.length){f=r[l]=T.make(t),f.$_parent=o,f.v0=h,x&&(f.v1=s?l:e[l]),f.$_key=d,f.$_state=A,n.set(d,f);continue}f=r[l]=a.pop(),n.delete(f.$_key),n.set(d,f),f.$_state=w,f.$_key=d}for(var p=f.$_index,_=0,v=c;_<=v;){var m=Math.round((_+v)/2),y=r[R[m]].$_index;if(y===p){_=m;break}y<p?_=m+1:v=m-1}f.$_pred=_>0?R[_-1]:-1,R[_]=l,_>c&&(c=_)}return R[c]}function l(t,e,n,r,i,o,a,s){for(var u=r;u<i;++u){var c=n[u];switch(c.$_state){case A:T.run(t,c);break;case w:if(o||T.dispose(t,c),T.move(t,c),a)c.v0=e[u],x&&(c.v1=u);else{var l=e[u];c.v0=s[l],x&&(c.v1=l)}T.reuse(t,c);break;default:T.move(t,c),(o||x&&c.v1!==(a?u:e[u]))&&(x&&(c.v1=a?u:e[u]),o||T.dispose(t,c),T.reuse(t,c))}}}function f(t,e){for(var n=[],r=e-1;r>=0;--r){var i=t[r];i.$_state===C&&n.push(i)}return n}function h(t,e,n,r,o,s,h,d,p){var _=e.$_map;if(_)for(var v=0;v<s;++v){var m=o[v];m.$_index=v,m.$_state=C}else _=e.$_map=i(e,o,s);var y=a(e,_,o,n,r,d,p),g=f(o,s),b=c(t,n,_,y,r,e,g,d,p);for(g.length&&u(t,_,e,g),b<r-1&&(t.gotoAfterView(y[b]),l(t,n,y,b+1,r,h,d,p));-1!==b;){var A=y[b];if(A.$_state===w||h||x&&A.v1!==b){h||T.dispose(t,A);var E=n[b];d?(A.v0=E,x&&(A.v1=b)):(A.v0=p[E],x&&(A.v1=E)),T.reuse(t,A)}var S=A.$_pred;S!==b-1&&(t.gotoBeforeView(y[b]),l(t,n,y,S+1,b,h,d,p)),b=S}}function p(t,i,a,s,u,c,l){if(i.$_signals=a,i.$_invalidate=s,c)if(i.$_savedScope=t.scope,i.$_map=null,i.$_previousList=null,u)if(u instanceof Array)if(u.length)for(var f=i.$_list=[],d=0,p=u.length;d<p;++d){var _=T.make(t);_.$_parent=i,_.v0=u[d],x&&(_.v1=d),_.$_key=null,T.run(t,_),f.push(_)}else i.$_list=null,e(t,i);else{var v=i.$_list=[];for(var m in u){var y=T.make(t);y.$_parent=i,y.v0=u[m],x&&(y.v1=m),y.$_key=null,T.run(t,y),v.push(y)}v.length||(i.$_list=null,e(t,i))}else i.$_list=null,e(t,i);else{l&&(i.$_savedScope=t.scope);var g=i.$_list,b=g?g.length:0;if(!u){if(!b)return;return void n(t,i,g,b)}var A,w=u instanceof Array;w||(A=u,u=(0,o.default)(u));var E=u.length;if(!E){if(!b)return;return void n(t,i,g,b)}var C=t.pushScope(i.$_savedScope);b?h(t,i,u,E,g,b,l,w,A):r(t,i,u,E,w,A),t.restoreScope(C)}}var v=t.props,y=t.blocks,S=t.args,k=v&&v.getCollection,L=v&&v.getKey,T=_.default.getBlockTemplate(y),x=S>1;if(!k||!T||!T.firstChild)return d.default.EmptyTemplate;var R=[];return d.default.make({render:function(t,e){L&&(e.$_keyMethod=L(e)),t.runBinder(function(t){return(0,b.readCollection)(k(t))},p,e,!0)},reuse:function(t,e){L&&(e.$_keyMethod=L(e)),t.runBinder(function(t){return(0,b.readCollection)(k(t))},p,e,!1)},dispose:function(t,e){t.removeSignals(e.$_signals,e.$_invalidate);var n=e.$_list;if(n)for(var r=0,i=n.length;r<i;++r)T.dispose(t,n[r]);e.$_previousList=null,e.$_map=null,e.$_savedScope=null},move:function(t,e){var n=e.$_list;if(n&&n.length)for(var r=0,i=n.length;r<i;++r)T.move(t,n[r]);else t.pushNode(e.$_placeholder)},firstChild:function(t,e){var n=e.$_list;return n&&n.length?T.firstChild(t,n[0]):e.$_placeholder},lastChild:function(t,e){var n=e.$_list;return n&&n.length?T.lastChild(t,n[n.length-1]):e.$_placeholder}})}}]),t}();e.default=S},,function(t,e,n){t.exports={default:n(342),__esModule:!0}},,function(t,e,n){t.exports={default:n(185),__esModule:!0}},function(t,e,n){t.exports={default:n(334),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(136),o=r(i),a=n(191),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,n){t.exports={default:n(324),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return t>=e&&t<=n}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(8),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(25),b=r(g),A=n(7),w=r(A),E=n(23),C=r(E);e.inRange=i;var S=n(108),k=r(S),L=function(t){function e(){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"expand",value:function(){return!1}},{key:"stopPendingItem",value:function(){}},{key:"savePosition",value:function(){}},{key:"layoutAttributes",value:function(){for(var t=this,e=function(){return t.setNeedsLayout()},n=0,r=arguments.length;n<r;n++)this.watch(arguments[n],e)}},{key:"setNeedsLayout",value:function(){this.parent&&!this.parent.childNeedsLayout&&this.parent.setChildNeedsLayout()}},{key:"detached",value:function(){this.setNeedsLayout()}},{key:"layout",value:function(t,e,n,r){this.left=t,this.top=e,this.needsLayout(n,r)&&this.updateLayout(n,r)}},{key:"needsLayout",value:function(t,e){return this._width!==t||this._height!==e}},{key:"updateLayout",value:function(t,e){this.width=t,this.height=e}},{key:"updatePosition",value:function(t,e){this.left+=t,this.top+=e}},{key:"inViewport",value:function(t){return(i(t.left,this.left,this.right)||i(this.left,t.left,t.right))&&(i(t.top,this.top,this.bottom)||i(this.top,t.top,t.bottom))}},{key:"collect",value:function(t){return!!this.inViewport(t)&&(t.addItem(this),!0)}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,p.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"toJSON",this).call(this,t);return n.name=this.constructor.name,n.left=this.left,n.top=this.top,n.width=this.width,n.height=this.height,n}},{key:"resolveBookmark",value:function(t){if(t.dataItem===this.data)return t.item=this,!0}},{key:"right",get:function(){return this.left+this.width}},{key:"bottom",get:function(){return this.top+this.height}},{key:"hasChildren",get:function(){return!1}}],[{key:"type",get:function(){return this.prototype.type}}]),e}(k.default);L=(0,y.default)(L,{decorators:[(0,C.default)({type:"item"})],properties:[{name:"left",decorators:[(0,w.default)()],init:function(){return 0}},{name:"top",decorators:[(0,w.default)()],init:function(){return 0}},{name:"width",decorators:[(0,w.default)()],init:function(){return 0}},{name:"height",decorators:[(0,w.default)()],init:function(){return 0}},{name:"isBookmark",decorators:[(0,w.default)()],init:function(){return!1}},{name:"data",decorators:[(0,b.default)()],kind:"property"}]}),e.default=L},function(t,e,n){var r=n(44),i=n(184),o=n(135),a=Object.defineProperty;e.f=n(41)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(53)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";e.__esModule=!0;var r=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e,n){return e in t?(0,i.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(40);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SignalsProperty=void 0;var i=n(34),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(191),f=r(l),h=e.SignalsProperty="_signals",d=(0,f.default)("owner"),p=function(){function t(e){(0,s.default)(this,t),this[d]=e,this.handlers=[]}return(0,c.default)(t,[{key:"add",value:function(t){this.handlers.push(t)}},{key:"remove",value:function(t){var e=this.handlers,n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{key:"trigger",value:function(){for(var t=this.handlers.slice(),e=this[d],n=0,r=t.length;n<r;++n){t[n].apply(e,arguments)}}},{key:"triggerNoArgs",value:function(){for(var t=this.handlers.slice(),e=this[d],n=0,r=t.length;n<r;++n)t[n].call(e)}},{key:"triggerWithArray",value:function(t){for(var e=this.handlers.slice(),n=this[d],r=0,i=e.length;r<i;++r){e[r].apply(n,t)}}}],[{key:"trigger",value:function(t,e){var n=t._signals;if(n&&n[d]===t){var r=n[e];if(r)return r.triggerWithArray(Array.prototype.slice.call(arguments,2)),r}}},{key:"triggerNoArgs",value:function(t,e){var n=t._signals;if(n&&n[d]===t){var r=n[e];if(r)return r.triggerNoArgs(),r}}},{key:"on",value:function(e,n,r){var i=e._signals;i&&i[d]===e||(i={},i[d]=e,(0,o.default)(e,h,{enumerable:!1,configurable:!1,value:i}));var a=i[n];return a||(a=i[n]=new t(e)),a.handlers.push(r),a}},{key:"off",value:function(t,e,n){var r=t._signals;if(r&&r[d]===t){var i=r[e];i&&i.remove(n)}}},{key:"listenTo",value:function(e,n,r,i){var o=e._listening;o||(e._listening=o=[]);var a=function(){i.apply(e,arguments)};o.push({obj:n,name:r,method:i,handler:a}),t.on(n,r,a)}},{key:"stopListening",value:function(e,n,r,i){var o=e._listening;if(o)for(var a=0,s=o.length;a<s;){var u=o[a];n&&u.obj!==n||r&&u.name!==r||i&&u.method!==i?++a:(t.off(u.obj,u.name,u.handler),o.splice(a,1),--s)}}}]),t}();e.default=p},,function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(91);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(314),o=r(i),a=n(75),s=r(a);e.default=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(t);!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){var r=n(252),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},,function(t,e,n){var r=n(39),i=n(92);t.exports=n(41)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(139),i=n(109);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(3),c=r(u),l=n(8),f=r(l),h=n(1),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(23),g=r(y),b=n(36),A=r(b),w=n(45),E=r(w),C=n(208),S=r(C),k=n(76),L=r(k),T=n(116),x=r(T),R=n(98),O=r(R),I=n(74),D=r(I),N=n(101),P=r(N),M=S.default.filter,j={},B=[],F=!1,U=function(){},$=function(t){return"function"==typeof t?t:"object"===(void 0===t?"undefined":(0,A.default)(t))&&"function"==typeof t.get?t.get:U},V=function(t){return"object"===(void 0===t?"undefined":(0,A.default)(t))&&"function"==typeof t.set?t.set:U},H=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.default,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,s.default)(this,e);var l=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));if(l.previousValue=j,l.bindings=[],l.dirty=!!r,l.disposableParent=u,l.valueGetter=$(t),l.set=V(t),l.callback=n||U,i&&i instanceof x.default){var f=i,h=l.apply.bind(l);i=function(){return f.push(h,a)}}return l.invalidate=function(){if(e.active!==l){if(l.track){var t=new Error;Error.captureStackTrace(t),P.default.log("change detected",window._signal,t.stack)}i?(l.dirty=!0,i()):l.compute()}},r?l.get():l.compute(),l}return(0,_.default)(e,t),(0,d.default)(e,null,[{key:"pushMutator",value:function(t){e.mutatorsStack.push(e.mutator),e.mutator=t}},{key:"popMutator",value:function(t){e.mutator===t?e.mutator=e.mutatorsStack.pop():console.error("Trying to pop a mutator that is not in the top of the stack")}},{key:"run",value:function(t,n,r){var i=e.active;e.active=t;var o=r&&r.track;o&&(t.track=r,P.default.groupStart("Running "+(r.name||"bindings")));try{return n.call(r)}finally{o&&(P.default.groupEnd("Running "+(r.name||"binder")),t.track=null),e.active=i}}},{key:"recordEvent",value:function(t,n){var r=e.active;if(r){if(r.track){var i=(0,D.default)(t)+"-"+(t.constructor?t.constructor.name:"Anonymous");P.default.log("Recording",i,n)}r.push({obj:t,eventName:n})}}},{key:"recordChange",value:function(t,n,r,i){E.default.trigger(t,n);var o=e.mutator;o&&o.record(t,n,r,i)}}]),(0,d.default)(e,[{key:"removeBindings",value:function(){var t=this.bindings;if(t){for(var e=this.invalidate,n=0,r=t.length;n<r;++n){var i=t[n];i.ref.remove(e),i.dispose&&i.dispose()}this.bindings=null}}},{key:"dispose",value:function(){this.removeBindings(),(0,f.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"dispose",this).call(this)}},{key:"update",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.previousValue;if(n===j||n!==t)return this.previousValue=t,e&&this.callback(t),!0}},{key:"apply",value:function(){if(!this.isDisposed&&this.dirty)return this.compute()}},{key:"_computeInnerValue",value:function(){this.dirty=!1,this.removeBindings();var t=this.disposableParent;if(!t||!t.isDisposed){F&&(B=[]),F=!0;var n=B,r=e.run(n,this.valueGetter,this);if(r=M(n,r),F=!1,!n.length)return r;B=[];for(var i=this.invalidate,o=0,a=n.length;o<a;++o){var s=n[o];s.ref=E.default.on(s.obj,s.eventName,i)}return this.bindings=n,r}}},{key:"compute",value:function(){var t=this._computeInnerValue();return this.update(t,!0)}},{key:"get",value:function(){var t=this._computeInnerValue();return this.update(t,!1),t}}]),e}(O.default);H.mutatorsStack=[],H.active=null,H.mutator=null,H=(0,m.default)(H,{decorators:[(0,g.default)({FirstExecutionMarker:j})]}),e.default=H},,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return t instanceof Array?e.base===t?e:new L(t):t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(166),a=r(o),s=n(78),u=r(s),c=n(2),l=r(c),f=n(0),h=r(f),d=n(1),p=r(d),_=n(3),v=r(_),m=n(4),y=r(m),g=n(45),b=r(g),A=n(55),w=r(A),E=n(119),C=r(E),S=n(976),k=r(S),L=function(t){function e(t){(0,h.default)(this,e);var n=(0,v.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return n.base=t||[],n}return(0,y.default)(e,t),(0,p.default)(e,[{key:"at",value:function(t){return w.default.active&&w.default.recordEvent(this,"change"),this.base[t]}},{key:"setAt",value:function(t,e){b.default.trigger(this,"change"),this.base[t]=e}},{key:"toArray",value:function(){return w.default.active&&w.default.recordEvent(this,"change"),this.base.slice()}},{key:"swapItems",value:function(t){this.base=t,b.default.trigger(this,"change")}},{key:"removeItem",value:function(t){var e=this.indexOf(t);-1!==e&&this.splice(e,1)}},{key:"concat",value:function(){var t;w.default.active&&w.default.recordEvent(this,"change");for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return new e((t=this.base).concat.apply(t,(0,u.default)(r.map(function(t){return t instanceof e?(w.default.active&&w.default.recordEvent(t,"change"),t.base):t}))))}},{key:"concatToArray",value:function(){return this.concat.apply(this,arguments).base}},{key:"spliceToArray",value:function(){return this.splice.apply(this,arguments).base}},{key:"sliceToArray",value:function(){return this.slice.apply(this,arguments).base}},{key:"mapToArray",value:function(){return this.map.apply(this,arguments).base}},{key:"filterToArray",value:function(){return this.filter.apply(this,arguments).base}},{key:"length",get:function(){return w.default.active&&w.default.recordEvent(this,"change"),this.base.length},set:function(t){this.base.length!==t&&(this.base.length=t,b.default.trigger(this,"change"))}}]),e}(C.default);e.default=L,k.default.polyfill();for(var T=Array.prototype,x=L.prototype,R=["fill","pop","push","reverse","shift","unshift","splice","sort","copyWithin"],O=(0,a.default)(T),I=0,D=O.length;I<D;++I){var N=O[I];x.hasOwnProperty(N)||(x[N]=function(t,e){return e?function(){var e=t.apply(this.base,arguments);return b.default.trigger(this,"change"),i(e,this)}:function(){return w.default.active&&w.default.recordEvent(this,"change"),i(t.apply(this.base,arguments),this)}}(T[N],-1!==R.indexOf(N)))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(287)(!0);n(138)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},,function(t,e,n){t.exports={default:n(378),__esModule:!0}},,,function(t,e,n){var r=n(109);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports={}},function(t,e,n){var r=n(188),i=n(140);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){n(291);for(var r=n(26),i=n(52),o=n(70),a=n(28)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){t.setWritableValue(function(){throw new Error("Abstract method "+t.name+" called on "+t.className)})}}},function(t,e,n){"use strict";function r(t,e){(0,a.default)(t,u,{enumerable:!1,configurable:!1,writable:!1,value:e})}function i(t){if(!t||"number"==typeof t||"string"==typeof t)return t;if(!t.hasOwnProperty(u)){var e="_"+ ++s;return(0,a.default)(t,u,{enumerable:!1,configurable:!1,writable:!1,value:e}),e}return t[u]}Object.defineProperty(e,"__esModule",{value:!0});var o=n(34),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=0,u="__object_id__";i.set=r,e.default=i},function(t,e,n){t.exports={default:n(312),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(352),o=r(i),a=n(154),s=r(a);e.default=new o.default(s.default,"UI Task Queue",100)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(100),o=function(t){return t&&t.__esModule?t:{default:t}}(i);r=o.default.performance&&o.default.performance.now?function(){return performance.now()}:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=n(102),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,i.default)(t)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];return(0,o.default)(s.default,"Now",t,e)};var i=n(157),o=r(i),a=n(223),s=r(a)},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=r(i);e.default=function(t,e){return"number"==typeof t?(e=t,t=s.default):(t||(t=s.default),"number"!=typeof e&&(e=0)),function(n){var r=n.fn,i=n.name,a="_task_"+i;n.setGetter(function(){var s=this;if(n.ref===this)return r;var u=void 0,c=this[a];if(c)return c;var l=function(){s.isDisposed||r.apply(s,u)};return c=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];u=r,t.push(l,e)},c.cancel=function(){t.remove(l)},(0,o.default)(this,a,{value:c,enumerable:!1}),(0,o.default)(this,i,{value:c,enumerable:!1}),c})}};var a=n(76),s=r(a)},,,function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o){e.expr_binder1=n,e.expr_invalidate1=r;var a=e.expr_value3;(o||a!==i)&&(e.expr_value3=i,e.expr_content1=t.renderContent(e.expr_content1,i))}function o(t){return t.$_parent.$_parent.$_parent.$_parent.$_scope._this.childrenBlocks.foreground}function a(t,e,n,r,i,o){e.expr_binder=n,e.expr_invalidate=r;var a=e.expr_value1;(o||a!==i)&&(e.expr_value1=i,e.expr_content=t.renderContent(e.expr_content,i))}function s(t){return t.$_parent.$_parent.$_parent.$_parent.$_scope._this.childrenBlocks.background}function u(){var t=this.$_view;t&&t.$_parent.$_parent.$_parent.$_scope._this.onScroll()}function c(t,e,n){return null!==n&&e?(t-=e*n,Math.floor(t/e)*e):t}function l(t,e,n){return null!==n&&e?(t+=e*n,Math.ceil(t/e)*e):t}Object.defineProperty(e,"__esModule",{value:!0});var f,h=n(11),d=r(h),p=n(15),_=n(30),v=r(_),m=n(854),y=r(m),g=n(2),b=r(g),A=n(1),w=r(A),E=n(3),C=r(E),S=n(4),k=r(S),L=n(81),T=r(L),x=n(25),R=r(x),O=n(9),I=r(O),D=n(18),N=r(D),P=n(10),M=r(P),j=n(0),B=r(j),F=n(5),U=r(F),$=n(7),V=r($),H=n(74),z=r(H),Y=n(855),W=r(Y),q=n(967),X=r(q),G=n(975),K=r(G),J={make:function(t){return J=d.default.make({render:function(t,e){var n=e.g=!t._group_g&&t.pushTemplateNode(et);n&&t.enterNode(n);var r=e.using=Q.make(t);r.$_parent=e,r.template.run(t,r),n&&t.exitNode(n)},dispose:function(t,e){e.using.template.dispose(t,e.using)},move:function(t,e){e.g?t.pushNode(e.g):e.using.template.move(t,e.using)},reuse:function(t,e){e.using.template.reuse(t,e.using)},firstChild:function(t,e){return e.g||e.using.template.firstChild(t,e.using)},lastChild:function(t,e){return e.g||e.using.template.lastChild(t,e.using)}}),J.make(t)}},Q={make:function(t){return Q=t.makeComponent(y.default,{args:1,props:{getValue:function(t){return t.$_parent.$_scope._this.scrollComponent}},blocks:[{name:"children",template:d.default.make({render:function(t,e){var n=e.scrollComponent_base=e.v0,r=e.scrollComponent=Z.make(t,n).make(t);r.$_parent=e,r.template.run(t,r)},dispose:function(t,e){e.scrollComponent.template.dispose(t,e.scrollComponent)},move:function(t,e){e.scrollComponent.template.move(t,e.scrollComponent)},reuse:function(t,e){var n=e.v0;if(n!==e.scrollComponent_base){e.scrollComponent_base=n;var r=Z.make(t,n).make(t);r.$_parent=e,t.replaceTemplate(e.scrollComponent,r),e.scrollComponent=r}else e.scrollComponent.template.reuse(t,e.scrollComponent)},firstChild:function(t,e){return e.scrollComponent.template.firstChild(t,e.scrollComponent)},lastChild:function(t,e){return e.scrollComponent.template.lastChild(t,e.scrollComponent)}})}]}),Q.make(t)}},Z={make:function(t,e){return Z=N.default.makeDynamic({attributes:[{name:"class",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.className},set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.className=t)}},{name:"style",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.style},set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.style=t)}},{name:"focusOnAttach",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.focusOnAttach},original:"focus-on-attach",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.focusOnAttach=t)}},{name:"contentWidth",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.contentWidth},original:"content-width",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.contentWidth=t)}},{name:"contentHeight",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.contentHeight},original:"content-height",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.contentHeight=t)}},{name:"verticalScroll",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.verticalScroll},original:"vertical-scroll",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.verticalScroll=t)}},{name:"horizontalScroll",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.horizontalScroll},original:"horizontal-scroll",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.horizontalScroll=t)}},{name:"scrollInfo",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.scrollInfo},original:"scroll-info",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.scrollInfo=t)}},{name:"scrollBarSize",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.scrollBarSize},original:"scroll-bar-size",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.scrollBarSize=t)}},{name:"scrollBarMargin",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.scrollBarMargin},original:"scroll-bar-margin",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.scrollBarMargin=t)}},{name:"scrollBarPadding",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.scrollBarPadding},original:"scroll-bar-padding",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.scrollBarPadding=t)}},{name:"autoScroll",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.autoScroll},original:"auto-scroll",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.autoScroll=t)}},{name:"allowHtmlDrag",get:function(){var t=this.$_view;if(t)return t.$_parent.$_parent.$_parent.$_scope._this.allowHtmlDrag},original:"allow-html-drag",set:function(t){var e=this.$_view;e&&(e.$_parent.$_parent.$_parent.$_scope._this.allowHtmlDrag=t)}}],blocks:[{name:"children",template:d.default.make({render:function(t,e){t.runBinder(s,a,e,!0);var n=e.repeat=tt.make(t);n.$_parent=e,n.template.run(t,n),t.runBinder(o,i,e,!0)},dispose:function(t,e){t.removeSignals(e.expr_binder,e.expr_invalidate),e.expr_content=t.disposeContent(e.expr_content),e.expr_value1=void 0,e.repeat.template.dispose(t,e.repeat),t.removeSignals(e.expr_binder1,e.expr_invalidate1),e.expr_content1=t.disposeContent(e.expr_content1),e.expr_value3=void 0},move:function(t,e){t.moveContent(e.expr_content),e.repeat.template.move(t,e.repeat),t.moveContent(e.expr_content1)},reuse:function(t,e){t.runBinder(s,a,e,!1),e.repeat.template.reuse(t,e.repeat),t.runBinder(o,i,e,!1)},firstChild:function(t,e){return t.contentFirstChild(e.expr_content)},lastChild:function(t,e){return t.contentLastChild(e.expr_content1)}})}],events:[{name:"scroll",value:u}],init:function(t,e){t.$_parent.$_parent.$_parent.$_scope._this.scroll=e},dispose:function(t,e){t.$_parent.$_parent.$_parent.$_scope._this.scroll=null}}),Z.make(t,e)}},tt={make:function(t){return tt=t.makeComponent(v.default,{args:1,props:{getCollection:function(t){return t.$_parent.$_parent.$_parent.$_parent.$_parent.$_scope._this.viewTypes}},blocks:[{name:"children",template:t.makeComponent(K.default,{attributes:[{name:"collection",get:function(){var t=this.$_view;if(t)return t.v0.items},set:function(t){var e=this.$_view;e&&(e.v0.items=t)}},{name:"view",get:function(){var t=this.$_view;if(t)return t.v0.viewType},set:function(t){var e=this.$_view;e&&(e.v0.viewType=t)}}]})}]}),tt.make(t)}},et=(0,p.register)(function(t){return t.makeNode("g")}),nt=function t(e,n){(0,B.default)(this,t),this.type=e,this.viewType=n};nt=(0,U.default)(nt,{properties:[{name:"items",decorators:[(0,V.default)()],kind:"property"}]}),f=N.default;var rt=function(t){function e(){(0,B.default)(this,e);var t=(0,C.default)(this,(e.__proto__||(0,b.default)(e)).call(this)),n=t.mapping;if(!n)return console.warn("You need to provide a mapping."),(0,C.default)(t);if(!t.children)return console.warn("You need to provide a layout in JSX children of VirtualScroll."),(0,C.default)(t);t.sourceItem=t.link(new X.default(t)),t.listenTo(t.sourceItem,"setChildNeedsLayout",t.setChildNeedsLayout),t.viewTypeById={},t.viewTypes=[];for(var r in n){var i=n[r],o=new nt(r,i);t.viewTypeById[r]=o,t.viewTypes.push(o)}return t.watch(function(){return t.layoutTracker},function(e){e||(t.savedBookmark&&(t.savedBookmark.item.isBookmark=!1),t.savedBookmark=null)}),t}return(0,k.default)(e,t),(0,w.default)(e,[{key:"setChildNeedsLayout",value:function(){this.savedLayoutBookmark=this.computeBookmark(),this.childNeedsLayout=!0,this.refresh()}},{key:"refreshNow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.scroll){var n=this.scroll.innerWidth,r=this.scroll.innerHeight,i=this.scroll.displayScrollLeft,o=i+n,a=this.scroll.displayScrollTop,s=a+r;this.layoutTracker?(e=this.savedBookmark)||(e=this.savedBookmark=this.computeBookmark())&&(e.item.isBookmark=!0):this.savedLayoutBookmark&&(e=this.savedLayoutBookmark,this.savedLayoutBookmark=null),this.loadPage(i,o,a,s,n,r,t,e)||this.updateSticky()}}},{key:"loadPage",value:function(t,e,n,r,i,o,a,s){var u=this,f=c(t,i,this.preloadLeft),h=l(e,i,this.preloadRight),d=c(n,o,this.preloadTop),p=l(r,o,this.preloadBottom);if(a||this.childNeedsLayout||this.left!==f||this.right!==h||this.top!==d||this.bottom!==p){this.left=f,this.right=h,this.top=d,this.bottom=p;var _=this.margin,v=this.sourceItem;if(v&&(v.layout(_,_,this.scroll.innerWidth-_,this.scroll.innerHeight-_),this.contentWidth=v.width+_,this.contentHeight=v.height+_,!a&&s&&(s.dataItem&&!s.item&&v.resolveBookmark(s),s.item))){var m=void 0,y=void 0;if(s.center?(m=s.item.left-(e-t-s.item.width)/2,y=s.item.top-(r-n-s.item.height)/2):(m=s.item.left-s.left,y=s.item.top-s.top),this.scroll.scrollTo(m,y,!0))return this.refreshNow(!0,s),!0}var g=this.stickyContainers=null,b={},A=[],w={},E=this.previousPendingItems;E&&E.forEach(function(t){return w[(0,z.default)(t)]=t});var C=this.items=[];if(v){var S=function(t){C.push(t),delete w[(0,z.default)(t)],t.expand()&&(A.push(t),s||(s=u.computeBookmark()));var e=b[t.type];e&&e.push(t)},k=function(t){g||(g=u.stickyContainers=[]),g.push(t)};this.viewTypes.forEach(function(t){return b[t.type]=[]}),v.collect({left:f,right:h,top:d,bottom:p,addItem:S,addStickyContainer:k})}this.previousPendingItems=A;for(var L in w)w[L].stopPendingItem();this.viewTypes.forEach(function(t){return t.items=b[t.type]}),this.childNeedsLayout=!1}}},{key:"computeBookmark",value:function(){var t=null,e=this.scroll.displayScrollLeft,n=this.scroll.displayScrollTop;return this.items.forEach(function(r){if(!r.hasChildren&&!r.fixed){var i=r.left-e,o=r.top-n;if(!(i<0||o<0)){var a=i*i+o*o;t?t.distance>a&&(t.item=r,t.left=i,t.top=o,t.distance=a):t={item:r,left:i,top:o,distance:a}}}}),t}},{key:"updateSticky",value:function(){var t=this.stickyContainers;if(t&&t.length){var e=this.scroll.displayScrollLeft,n=e+this.scroll.innerWidth,r=this.scroll.displayScrollTop,i=r+this.scroll.innerHeight,o={left:e,right:n,top:r,bottom:i};t.forEach(function(t){return t.updateSticky(o)})}}},{key:"onScroll",value:function(){this.refresh()}},{key:"getVirtualItem",value:function(t){var e={dataItem:t};return this.sourceItem.resolveBookmark(e),e.item}},{key:"elementVisibility",value:function(t){var e=this.getVirtualItem(t);if(!e)return{horizontal:0,vertical:0};var n={left:e.left,right:e.right,top:e.top,bottom:e.bottom},r={left:this.scroll.displayScrollLeft,right:this.scroll.displayScrollLeft+this.scroll.innerWidth,top:this.scroll.displayScrollTop,bottom:this.scroll.displayScrollTop+this.scroll.innerHeight},i=0,o=0;if(n.left>=r.left&&n.right<=r.right||n.left<=r.left&&n.right>=r.right)i=1;else if(!(n.right<r.left||n.left>r.right)){var a=Math.max(n.left,r.left),s=Math.min(n.right,r.right);i=(s-a)/e.width}if(n.top>=r.top&&n.bottom<=r.bottom||n.top<=r.top&&n.bottom>=r.bottom)o=1;else if(!(n.bottom<r.top||n.top>r.bottom)){var u=Math.max(n.top,r.top),c=Math.min(n.bottom,r.bottom);o=(c-u)/e.height}return{horizontal:i,vertical:o}}},{key:"elementInViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.elementVisibility(t),r=n.horizontal,i=n.vertical;return r>=e&&i>=e}},{key:"scrollToElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{vertical:"top",horizontal:"left"},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{left:0,top:0},i=this.getVirtualItem(t);if(!i)return console.error("Virtual item to scroll was not found",t),!1;var o=i.top-r.top,a=i.left-r.left;return n&&"bottom"===n.vertical&&(o+=i.height-this.scroll.innerHeight+2*r.top),n&&"right"===n.horizontal&&(a+=i.width-this.scroll.innerWidth+2*r.left),this.scrollTo(a,o,e),!0}},{key:"scrollTo",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.scroll.animateTo(t,e):this.scroll.scrollTo(t,e)}},{key:"windowCoordsToVirtualCoords",value:function(t,e){var n=t+this.scroll.offsetX,r=e+this.scroll.offsetY,i=-(this.scroll.offsetX-this.scroll.displayScrollLeft),o=-(this.scroll.offsetY-this.scroll.displayScrollTop),a={x:n,y:r,viewTop:o,viewRight:i+this.scroll.viewWidth,viewBottom:o+this.scroll.viewHeight,viewLeft:i,virtualTop:this.scroll.displayScrollTop,virtualRight:this.scroll.displayScrollLeft+this.scroll.viewWidth,virtualBottom:this.scroll.displayScrollTop+this.scroll.viewHeight,virtualLeft:this.scroll.displayScrollLeft};return a.inView=n>=a.virtualLeft&&n<a.virtualRight&&r>=a.virtualTop&&r<a.virtualBottom,a}},{key:"render",value:function(){return{template:J,_this:this}}},{key:"preloadLeft",get:function(){return this.horizontalScroll?this.scroll.directionLeft<0?1:0:null}},{key:"preloadRight",get:function(){return this.horizontalScroll?this.scroll.directionLeft>0?1:0:null}},{key:"preloadTop",get:function(){return this.verticalScroll?this.scroll.directionTop<0?1:0:null}},{key:"preloadBottom",get:function(){return this.verticalScroll?this.scroll.directionTop>0?1:0:null}},{key:"scrollPosition",get:function(){return this.scroll&&{left:this.scroll.displayScrollLeft,top:this.scroll.displayScrollTop}},set:function(t){var e=t&&t.left||0,n=t&&t.top||0;this.scrollTo(e,n)}}]),e}(f);rt=(0,U.default)(rt,{decorators:[(0,I.default)((0,M.default)(null),t,"VirtualScroll")],properties:[{name:"className",decorators:[(0,R.default)("class")],kind:"property"},{name:"style",decorators:[(0,R.default)()],kind:"property"},{name:"mapping",decorators:[(0,R.default)()],kind:"property"},{name:"item",decorators:[(0,R.default)()],kind:"property"},{name:"margin",decorators:[(0,R.default)()],init:function(){return 0}},{name:"layoutTracker",decorators:[(0,R.default)()],init:function(){return!1}},{name:"focusOnAttach",decorators:[(0,R.default)()],init:function(){return!0}},{name:"autoScroll",decorators:[(0,R.default)()],init:function(){return!1}},{name:"scrollInfo",decorators:[(0,R.default)()],init:function(){return{animation:!1,duration:100,friction:100,keyboardEnabled:!0,keyboardMove:40}}},{name:"scrollBarSize",decorators:[(0,R.default)()],init:function(){return 7}},{name:"scrollBarMargin",decorators:[(0,R.default)()],init:function(){return 5}},{name:"scrollBarPadding",decorators:[(0,R.default)()],init:function(){return 0}},{name:"verticalScroll",decorators:[(0,R.default)()],init:function(){return!1}},{name:"horizontalScroll",decorators:[(0,R.default)()],init:function(){return!1}},{name:"scrollComponent",decorators:[(0,R.default)()],init:function(){return W.default}},{name:"allowHtmlDrag",decorators:[(0,R.default)()],init:function(){return!1}},{name:"contentWidth",decorators:[(0,V.default)()],init:function(){return 0}},{name:"contentHeight",decorators:[(0,V.default)()],init:function(){return 0}},{name:"refresh",decorators:[(0,T.default)(1e4)],fn:function(){this.refreshNow()}}]}),e.default=rt}).call(e,n(6)(t))},function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n(884),o=n(889);t.exports=r},function(t,e,n){function r(t){return null==t?void 0===t?u:s:c&&c in Object(t)?o(t):a(t)}var i=n(127),o=n(885),a=n(886),s="[object Null]",u="[object Undefined]",c=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.VBlockItem=e.HBlockItem=void 0;var i=n(5),o=r(i),a=n(23),s=r(a),u=n(2),c=r(u),l=n(0),f=r(l),h=n(1),d=r(h),p=n(3),_=r(p),v=n(8),m=r(v),y=n(4),g=r(y),b=n(267),A=r(b),w=n(268),E=r(w),C=function(t){function e(){return(0,f.default)(this,e),(0,_.default)(this,(e.__proto__||(0,c.default)(e)).apply(this,arguments))}return(0,g.default)(e,t),(0,d.default)(e,[{key:"updateLayout",value:function(t,n){var r,i,o,a=this,s=this.margin,u=this.paginatedList=new E.default,l=this.stickyList=new E.default,f=null;"horizontal"===this.direction?(o=this.top,r=this.left,this.forEach(function(e){e.parent=a,e.layout(r,o,t,n),r+=e._width+s,e.sticky?(f&&l.add(f,f._left,e._left),f=e):u.add(e,e._left,e._left+e._width)}),this.width=Math.max(0,r-this._left-s),this.height=n,f&&l.add(f,f._left,this._left+this._width)):(i=this.left,r=this.top,this.forEach(function(e){e.parent=a,e.layout(i,r,t,n),r+=e._height+s,e.sticky?(f&&l.add(f,f._top,e._top),f=e):u.add(e,e._top,e._top+e._height)}),this.width=t,this.height=Math.max(0,r-this._top-s),f&&l.add(f,f._top,this._top+this._height)),(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updateLayout",this).call(this,t,n)}},{key:"updatePosition",value:function(t,n){(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"updatePosition",this).call(this,t,n);var r=this.stickyList;r&&(r.offset+="horizontal"===this.direction?t:n)}},{key:"collect",value:function(t){if(!(0,m.default)(e.prototype.__proto__||(0,c.default)(e.prototype),"collect",this).call(this,t))return!1;var n=this.stickyList;if(!n)return!0;var r,i;"horizontal"===this.direction?(r=t.left,i=t.right):(r=t.top,i=t.bottom);var o=this.visibleSticky=[];return n.query(r,i,function(e){t.addItem(e),o.push(e)}),o.length&&t.addStickyContainer(this),!0}},{key:"updateSticky",value:function(t){var e=this.visibleSticky;if(e){var n,r,i,o,a,s,u=e.length-1,c=this.margin;if("horizontal"===this.direction)for(r=this.top,n=Math.max(t.left,this.left),a=Math.min(t.right,this.right);u>=0;--u)i=e[u],o=i.fixed=i.left<n,o&&(i.fixedLeft=Math.min(a-i.width,n),i.fixedTop=r,n-=i.width),a=Math.min(a,i.left-c);else for(n=this.left,r=Math.max(t.top,this.top),s=Math.min(t.bottom,this.bottom);u>=0;--u)i=e[u],o=i.fixed=i.top<r,o&&(i.fixedLeft=n,i.fixedTop=Math.min(s-i.height,r),r-=i.height),s=Math.min(s,i.top-c)}}}]),e}(A.default);e.default=C;var S=e.HBlockItem=function(t){function e(){return(0,f.default)(this,e),(0,_.default)(this,(e.__proto__||(0,c.default)(e)).apply(this,arguments))}return(0,g.default)(e,t),e}(C);e.HBlockItem=S=(0,o.default)(S,{decorators:[(0,s.default)({direction:"horizontal"})]});var k=e.VBlockItem=function(t){function e(){return(0,f.default)(this,e),(0,_.default)(this,(e.__proto__||(0,c.default)(e)).apply(this,arguments))}return(0,g.default)(e,t),e}(C);e.VBlockItem=k=(0,o.default)(k,{decorators:[(0,s.default)({direction:"vertical"})]})},,function(t,e,n){var r=n(20),i=n(16),o=n(53);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(39).f,i=n(63),o=n(28)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){t.exports={default:n(317),__esModule:!0}},function(t,e,n){var r=n(48),i=n(199),o=n(200),a=n(44),s=n(113),u=n(145),c={},l={},e=t.exports=function(t,e,n,f,h){var d,p,_,v,m=h?function(){return t}:u(t),y=r(n,f,e?2:1),g=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=s(t.length);d>g;g++)if((v=e?y(a(p=t[g])[0],p[1]):y(t[g]))===c||v===l)return v}else for(_=m.call(t);!(p=_.next()).done;)if((v=i(_,y,p.value,e))===c||v===l)return v};e.BREAK=c,e.RETURN=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t.dispose)return void t.dispose();"function"==typeof t&&t()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=r(o),s=n(1),u=r(s);e.disposeHelper=i;var c=function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,[{key:"dispatch",value:function(t){var e=this[t];e?e.call(this):this.dispatchChildren(t)}},{key:"dispatchChildren",value:function(e){var n=this._disposables;if(n)for(var r=0,i=n.length;r<i;++r){var o=n[r];if(o instanceof t)o.dispatch(e);else{var a=o[e];a&&a.call(o)}}}},{key:"link",value:function(t){var e=this._disposables;return e||(e=this._disposables=[]),e.push(t),t}},{key:"unlink",value:function(t){var e=this._disposables;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}},{key:"disposeLink",value:function(t){this.unlink(t),i(t)}},{key:"dispose",value:function(){this.isDisposed=!0;var t=this._disposables;if(t){this._disposables=null;for(var e=t.length-1;e>=0;--e)i(t[e])}}}]),t}();e.default=c},function(t,e,n){t.exports={default:n(346),__esModule:!0}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==t?t:{}}()}).call(e,n(43))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=function(){function t(){(0,o.default)(this,t)}return(0,s.default)(t,null,[{key:"log",value:function(){console.log.apply(console,arguments)}},{key:"assert",value:function(){console.assert.apply(console,arguments)}},{key:"table",value:function(){console.table.apply(console,arguments)}},{key:"groupStart",value:function(){console.group.apply(console,arguments)}},{key:"groupEnd",value:function(){console.groupEnd.apply(console,arguments)}}]),t}();e.default=u},function(t,e,n){t.exports={default:n(357),__esModule:!0}},,,,,function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(75),o=r(i),a=n(2),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),h=n(3),d=r(h),p=n(8),_=r(p),v=n(4),m=r(v),y=n(5),g=r(y),b=n(7),A=r(b),w=n(27),E=r(w),C=n(55),S=r(C),k=n(11),L=r(k),T=n(18),x=r(T),R=null,O={},I=function(t){function e(){(0,c.default)(this,e);var t=(0,d.default)(this,(e.__proto__||(0,s.default)(e)).call(this));if(t._parentNode=null,R){var n=R,r=n.scope,i=n.factory,o=n.data;o.$_item=t,t.scope=r,t.$_depth=i.depth,t.$_factory=i,t.$_view=o}return t}return(0,m.default)(e,t),(0,f.default)(e,[{key:"init",value:function(){}},{key:"attached",value:function(){}},{key:"detached",value:function(){}},{key:"insertBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.willInsertBefore(t,e),this._insertBeforeImpl(t,e),this.didInsertBefore(t,e)}},{key:"replaceChild",value:function(t,e){this.insertBefore(e,t),t.dispose()}},{key:"appendChild",value:function(t){this.insertBefore(t,null)}},{key:"willInsertBefore",value:function(){}},{key:"didInsertBefore",value:function(){}},{key:"_insertBeforeImpl",value:function(t,e){if(e)return void e._pushBefore(t);var n=this.lastChild;if(n)return void n._pushAfter(t);if(t.remove(),"fragment"===t.type){var r=this.firstChild=t.firstChild;for(this.lastChild=t.lastChild;r;r=r.nextSibling)r.parentNode=this;return t.firstChild=null,void(t.lastChild=null)}this.lastChild=this.firstChild=t,t.parentNode=this}},{key:"_pushFragmentBefore",value:function(t){var e=t.firstChild,n=t.lastChild;if(e){t.firstChild=null,t.lastChild=null;for(var r=this.parentNode,i=e;i;i=i.nextSibling)i.parentNode=r;var o=this.previousSibling;o?(e.previousSibling=o,o.nextSibling=e):r.firstChild=e,this.previousSibling=n,n.nextSibling=this}}},{key:"_pushBefore",value:function(t){if("fragment"===t.type)return void this._pushFragmentBefore(t);t.remove();var e=this.parentNode;t.parentNode=e;var n=this.previousSibling;n?(t.previousSibling=n,n.nextSibling=t):e&&(e.firstChild=t),this.previousSibling=t,t.nextSibling=this}},{key:"_pushFragmentAfter",value:function(t){var e=t.firstChild,n=t.lastChild;if(e){t.firstChild=null,t.lastChild=null;for(var r=this.parentNode,i=e;i;i=i.nextSibling)i.parentNode=r;var o=this.nextSibling;o?(n.nextSibling=o,o.previousSibling=n):r&&(r.lastChild=n),this.nextSibling=e,e.previousSibling=this}}},{key:"_pushAfter",value:function(t){if("fragment"===t.type)return void this._pushFragmentAfter(t);t.remove();var e=this.parentNode;t.parentNode=e;var n=this.nextSibling;n?(t.nextSibling=n,n.previousSibling=t):e&&(e.lastChild=t),this.nextSibling=t,t.previousSibling=this}},{key:"remove",value:function(){var t=this.parentNode,e=this.previousSibling,n=this.nextSibling;return this.parentNode=null,e?(e.nextSibling=this.nextSibling,this.previousSibling=null):t&&(t.firstChild=n),n?(n.previousSibling=e,this.nextSibling=null):t&&(t.lastChild=e),this}},{key:"dispose",value:function(){this.remove(),(0,_.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"dispose",this).call(this)}},{key:"forEach",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.firstChild,r=0;n;n=n.nextSibling,++r)if((e||"comment"!==n.type)&&!1===t(n,r))return}},{key:"any",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.firstChild,r=0;n;n=n.nextSibling,++r)if((e||"comment"!==n.type)&&!0===t(n,r))return}},{key:"forEachParent",value:function(t){for(var e=this.parent;e;e=e.parent)t(e)}},{key:"map",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=this.firstChild,i=0;r;r=r.nextSibling,++i)(e||"comment"!==r.type)&&n.push(t(r,n.length));return n}},{key:"filter",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=this.firstChild,i=0;r;r=r.nextSibling,++i)if(e||"comment"!==r.type){var o=t(r,n.length);o&&n.push(o)}return n}},{key:"setChildren",value:function(t){return this.children=t,this}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={type:this.type};return this.firstChild&&(e.children=this.map(function(e){return e.toJSON(t)},t)),e}},{key:"getXRayInfo",value:function(){return{type:"node",name:this.type}}},{key:"parentNode",get:function(){return S.default.recordEvent(this,"parentNode"),this._parentNode},set:function(t){this._parentNode!==t&&(S.default.recordChange(this,"parentNode",t,this._parentNode),this._parentNode&&this.detached(),this._parentNode=t,t&&this.attached())}},{key:"children",get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},set:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=(0,o.default)(t);!(e=(i=a.next()).done);e=!0){var s=i.value;this.appendChild(s)}}catch(t){n=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"hasChildren",get:function(){return!!this.firstChild}}],[{key:"make",value:function(t){function e(t){for(var e=0,n=v.length;e<n;++e){var r=v[e];t.on(r.name,r.value)}}function n(t){for(var e=0,n=v.length;e<n;++e){var r=v[e];t.off(r.name,r.value)}}function r(t,n){var r=R;R=O||{},O=null,R.scope=b?t.scope.fork():t.scope,R.factory=t,R.data=n;var i=new g;if(R.scope=null,R.data=null,O=R,R=r,t.pushNode(i),A&&A.call(i),v&&e(i,v),C){var o=t.pushScope(i.scope);t.enterNode(i);var a=n.$_subview=C.make(t);a.$_parent=n,a.template.run(t,a),t.exitNode(i),t.restoreScope(o)}w&&w.call(i),_&&_(n,i)}function i(t,n){var r=R;R=O||{},O=null,R.scope=b?t.scope.fork():t.scope,R.factory=t,R.data=n;var i=new g;if(R.scope=null,R.data=null,O=R,R=r,A&&A.call(i),v&&e(i,v),n.$_placeholder.parentNode.replaceChild(n.$_placeholder,i),n.$_placeholder=null,C){var o=t.pushScope(i.scope);t.enterNode(i);var a=n.$_subview=C.make(t);a.$_parent=n,a.template.run(t,a),t.exitNode(i),t.restoreScope(o)}w&&w.call(i),_&&_(n,i)}function o(t,e){var r=e.$_item;_&&_(e,null),E&&E.call(r),v&&n(r);var i=e.$_subview;i&&(i.template.cache(t,i),e.$_subview=null);var o=e.$_placeholder=t.makeCommentNode("disposed item");r.parentNode.replaceChild(r,o),r.scope=null,r.$_view=null,r.$_factory=null,e.$_item=null}function a(t,e){t.pushNode(e.$_item||e.$_placeholder)}function u(t,e){return e.$_item||e.$_placeholder}function l(t,e){return e.$_item||e.$_placeholder}var f=t||{},h=f.attributes,p=f.blocks,_=f.init,v=f.events,y=this,g=function(t){function e(){return(0,c.default)(this,e),(0,d.default)(this,(e.__proto__||(0,s.default)(e)).apply(this,arguments))}return(0,m.default)(e,t),e}(y);g.prototype._options=t,x.default.attachAttributes(h,g.prototype);var b=g.prototype.fork,A=g.prototype.init,w=g.prototype.attached,E=g.prototype.detached,C=x.default.getBlockTemplate(p);return L.default.make({render:r,reuse:i,dispose:o,move:a,firstChild:u,lastChild:l})}}]),e}(E.default);I.isVirtualNode=!0,I=(0,g.default)(I,{properties:[{name:"previousSibling",decorators:[(0,A.default)()],init:function(){return null}},{name:"nextSibling",decorators:[(0,A.default)()],init:function(){return null}},{name:"firstChild",decorators:[(0,A.default)()],init:function(){return null}},{name:"lastChild",decorators:[(0,A.default)()],init:function(){return null}}]}),e.default=I,I.prototype.isVirtualNode=!0,I.prototype.type="node"},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!0},function(t,e,n){var r=n(44),i=n(187),o=n(140),a=n(132)("IE_PROTO"),s=function(){},u=function(){var t,e=n(134)("iframe"),r=o.length;for(e.style.display="none",n(189).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(137),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(110)("meta"),i=n(40),o=n(63),a=n(39).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(53)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,r)&&l(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.AfterTaskQueue=void 0;var i=n(2),o=r(i),a=n(3),s=r(a),u=n(4),c=r(u),l=n(0),f=r(l),h=n(1),d=r(h),p=n(5),_=r(p),v=n(22),m=r(v),y=n(73),g=r(y),b=n(74),A=r(b),w=function(){function t(){(0,f.default)(this,t),this.running=!1,this.registered=!1,this.itemMap={},this.maxBucket=-1,this.buckets=[],this.bucketMap={}}return(0,d.default)(t,[{key:"push",value:function(t,e,n){var r=(0,A.default)(t);e=Number(e)||0;var i=this.itemMap[r];if(i){if(i.lateBinder=n,i.cancel=!1,i.priority!==e){var o=i.bucket.items;o[o.indexOf(i)]=null,i.priority=e}else if(!i.executed)return;i.executed=!1}else i={callback:t,priority:e,cancel:!1,executed:!1,lateBinder:n},this.itemMap[r]=i;var a=this.bucketMap[e]||this._makeBucket(e);this.maxBucket=Math.max(this.maxBucket,a.index),i.bucket=a,a.items.push(i),this.registerIfNeeded()}},{key:"_makeBucket",value:function(t){for(var e=this.buckets,n=0,r=e.length-1;n<=r;){var i=Math.round((n+r)/2);e[i].priority<t?r=i-1:n=i+1}var o=this.bucketMap[t]={priority:t,items:[],index:n};this.buckets.splice(n,0,o),n<=this.maxBucket&&++this.maxBucket;for(var a=e.length;n<a;++n)e[n].index=n;return o}},{key:"wrap",value:function(t,e,n){var r=this;return function(){return r.push(t,e||0,n)}}},{key:"registerIfNeeded",value:function(){this.registered||(this.registered=!0,this.register(this.inAfterCall))}},{key:"remove",value:function(t){var e=(0,A.default)(t),n=this.itemMap[e];n&&(n.executed=!1,n.cancel=!0)}},{key:"execHoisted",value:function(t){for(;t.length;){var e=t.pop();e.cancel||(e.executed=!0,e.callback())}}},{key:"execCallbacks",value:function(t){for(var e=this.buckets;this.maxBucket>=0;){var n=e[this.maxBucket],r=n.items;if(r.length){var i=r.pop();i&&!i.cancel&&(i.lateBinder?t?t.push(i):t=[i]:(i.executed=!0,i.callback()))}else--this.maxBucket}return t}},{key:"after",get:function(){var t=this._after;return t||(t=this._after=new E(this)),t}}]),t}();w=(0,_.default)(w,{properties:[{name:"register",decorators:[(0,g.default)()],fn:function(){}},{name:"run",decorators:[(0,m.default)()],fn:function(){if(this.maxBucket>=0){this.running=!0;for(var t=null;this.maxBucket>=0||t;)try{for(;this.maxBucket>=0||t;)(t=this.execCallbacks(t))&&(this.execHoisted(t),t=null)}catch(t){console.error(t),console.error(t.stack)}this.running=!1}this.itemMap={},this.registered=!1;var e=this._after;e&&(this.inAfterCall=!0,e.run(),this.inAfterCall=!1)}},{name:"quickRun",decorators:[(0,m.default)()],fn:function(){if(this.maxBucket>=0){this.running=!0;for(var t=null;this.maxBucket>=0||t;)(t=this.execCallbacks(t))&&(this.execHoisted(t),t=null);this.running=!1}this.itemMap={},this.registered=!1;var e=this._after;e&&(this.inAfterCall=!0,e.run(),this.inAfterCall=!1)}}]}),e.default=w;var E=e.AfterTaskQueue=function(t){function e(t){(0,f.default)(this,e);var n=(0,s.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return n.parent=t,n}return(0,c.default)(e,t),(0,d.default)(e,[{key:"register",value:function(){this.parent.registerIfNeeded()}}]),e}(w)},function(t,e,n){var r=n(93),i=n(28)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function t(){(0,i.default)(this,t)};e.default=o},function(t,e,n){t.exports={default:n(374),__esModule:!0}},,,,function(t,e,n){"use strict";function r(t,e){return t.createElement(e)}function i(t,e,n){return t.createElement(e,n)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new L.default(function(n,r){var i=document.createElement("script");if(i.onload=n,i.onerror=r,i.src=t,e)for(var o in e){var a=e[o];i.setAttribute(o,a)}(document.head||document.body).appendChild(i)})}function a(t){return t.createDocumentFragment()}function s(t,e,n){return t.createElementNS(e,n)}function u(t,e){return t.createComment(e)}function c(t,e){return t.createTextNode(e)}function l(t,e){t.appendChild(e)}function f(t){t.textContent=""}function h(t,e,n){if(!n)return void t.appendChild(e);t.insertBefore(e,n)}function d(t){if(t.remove)t.remove();else{var e=t.parentNode;e&&e.removeChild(t)}}function p(t){return t.nodeName.toLowerCase()}function _(t,e){return t.getAttribute(e)}function v(t,e,n){t.setAttribute(e,n)}function m(t,e){t.removeAttribute(e)}function y(t,e,n,r){var i=n.indexOf("_");if(i>=0){var o=n.substr(0,i),a=n.substr(i+1),s=e[o];if(s)return void t.setAttributeNS(s,a,r)}t.setAttribute(n,r)}function g(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function b(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,n,r)}function A(t){return t.checked}function w(t,e){t.checked=e}function E(t){return t.value}function C(t,e){t.value=e}function S(t){return t.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.SvgNamespaces=e.XlinkNS=e.XmlNS=e.SvgNS=void 0;var k=n(99),L=function(t){return t&&t.__esModule?t:{default:t}}(k);e.createElement=r,e.createElementWithType=i,e.injectScript=o,e.createDocumentFragment=a,e.createElementNS=s,e.createComment=u,e.createTextNode=c,e.appendChild=l,e.removeChildren=f,e.insertBefore=h,e.removeNode=d,e.getNodeName=p,e.getAttribute=_,e.setAttribute=v,e.removeAttribute=m,e.setAttributeNS=y,e.addEventListener=g,e.removeEventListener=b,e.isChecked=A,e.setIsChecked=w,e.getValue=E,e.setValue=C,e.focus=S;var T=e.SvgNS="http://www.w3.org/2000/svg",x=e.XmlNS="http://www.w3.org/XML/1998/namespace",R=e.XlinkNS="http://www.w3.org/1999/xlink";e.SvgNamespaces={xmlns:T,xml:x,xlink:R}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(874),o=n(875),a=n(876),s=n(877),u=n(878);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n(167);t.exports=r},function(t,e,n){var r=n(50),i=r.Symbol;t.exports=i},function(t,e,n){var r=n(85),i=r(Object,"create");t.exports=i},function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n(898);t.exports=r},function(t,e,n){function r(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=n(175),o=1/0;t.exports=r},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){_&&d&&(_=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!_){var t=i(a);_=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,_=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var d,p=[],_=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||_||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){var r=n(133)("keys"),i=n(110);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(26),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(40),i=n(26).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(40);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports={default:n(286),__esModule:!0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(111),i=n(20),o=n(186),a=n(52),s=n(63),u=n(70),c=n(288),l=n(94),f=n(183),h=n(28)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,_,v,m,y){c(n,e,_);var g,b,A,w=function(t){if(!d&&t in k)return k[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",C="values"==v,S=!1,k=t.prototype,L=k[h]||k["@@iterator"]||v&&k[v],T=L||w(v),x=v?C?w("entries"):T:void 0,R="Array"==e?k.entries||L:L;if(R&&(A=f(R.call(new t)))!==Object.prototype&&A.next&&(l(A,E,!0),r||s(A,h)||a(A,h,p)),C&&L&&"values"!==L.name&&(S=!0,T=function(){return L.call(this)}),r&&!y||!d&&!S&&k[h]||a(k,h,T),u[e]=T,u[E]=p,v)if(g={values:C?T:w("values"),keys:m?T:w("keys"),entries:x},y)for(b in g)b in k||o(k,b,g[b]);else i(i.P+i.F*(d||S),e,g);return g}},function(t,e,n){var r=n(93);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){e.f=n(28)},function(t,e,n){var r=n(26),i=n(16),o=n(111),a=n(141),s=n(39).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(95),i=n(92),o=n(54),a=n(135),s=n(63),u=n(184),c=Object.getOwnPropertyDescriptor;e.f=n(41)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(117),i=n(28)("iterator"),o=n(70);t.exports=n(16).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},,,function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},,function(t,e,n){var r=n(52);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(40);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(91);t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.rAFrames=void 0;var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(4),p=r(d),_=n(5),v=r(_),m=n(8),y=r(m),g=n(22),b=r(g),A=n(116),w=r(A),E=n(100),C=r(E),S=n(77),k=r(S),L=function(t){setTimeout(t,0)},T=C.default.requestAnimationFrame||C.default.webkitRequestAnimationFrame||C.default.mozRequestAnimationFrame||L,x=T,R=e.rAFrames=[];i=w.default;var O=function(t){function e(){var t,n,r,i;(0,u.default)(this,e);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return n=r=(0,h.default)(this,(t=e.__proto__||(0,a.default)(e)).call.apply(t,[this].concat(s))),r.tickTime=(0,k.default)(),i=n,(0,h.default)(r,i)}return(0,p.default)(e,t),(0,l.default)(e,[{key:"register",value:function(){x(this.run)}},{key:"request",value:function(t){x(t)}},{key:"wrapAll",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach(function(n){return t[n]=e.wrap(t[n].bind(t))})}},{key:"wrap",value:function(t){var e=this;return function(){return e.push(t)}}},{key:"tick",value:function(){(0,k.default)()-this.tickTime>=5&&this.run()}},{key:"background",get:function(){return x===L},set:function(t){x=t?L:T}}]),e}(i);O=(0,v.default)(O,{properties:[{name:"run",decorators:[(0,b.default)()],fn:function(){var t,e,n=this.tickTime=(0,k.default)();(0,y.default)(O.prototype.__proto__||(0,a.default)(O.prototype),"run",this).call(this),t=(0,k.default)(),e=t-n,R.unshift(e),R.splice(10,R.length),e>16&&console.warn("Long rAF frame-time",e)}}]}),e.default=new O},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){I=t.appendChild||I,D=t.insertBefore||D,t.transform&&(P=t.transform(P))}function o(t,e){N[(0,L.makeAttrName)(t)]=e}Object.defineProperty(e,"__esModule",{value:!0}),e.extend=i,e.registerAttribute=o,e.default=function(t,e,n){return P(t,e,n)};var a=n(214),s=r(a),u=n(355),c=r(u),l=n(356),f=r(l),h=n(360),d=r(h),p=n(361),_=r(p),v=n(362),m=r(v),y=n(364),g=r(y),b=n(365),A=r(b),w=n(366),E=r(w),C=n(367),S=r(C),k=n(15),L=n(216),T=n(101),x=r(T),R=/^class-(.+)$/,O=/^style-(.+)$/,I=function(t,e){t.appendChild(e)},D=function(t,e,n){t.insertBefore(e,n)},N={_class:f.default,_text$45content:A.default,_value:S.default,_checked:c.default,_indeterminate:_.default,_disabled:E.default,_readonly:E.default,_required:E.default,_multiple:E.default,_autofocus:E.default,_hidden:E.default,_ismap:E.default,_style:m.default},P=function(t,e,n){var r=new s.default(t,e,n,N),i=r.dom={},o=null,a=e?e.ownerDocument:window.document;return r.getDocument=function(){return a},r.makeStats=function(){return o={remove:0,appendChild:0,insertBefore:0,addEventListener:0,removeEventListener:0,setAttribute:0,removeAttribute:0,textContent:0,nodeValue:0}},r.takeStats=function(){var t=o;return o=null,t},r.logStats=function(){var t=[];o.remove&&t.push({name:"remove",value:o.remove}),o.appendChild&&t.push({name:"appendChild",value:o.appendChild}),o.insertBefore&&t.push({name:"insertBefore",value:o.insertBefore}),o.addEventListener&&t.push({name:"addEventListener",value:o.addEventListener}),o.removeEventListener&&t.push({name:"removeEventListener",value:o.removeEventListener}),o.setAttribute&&t.push({name:"setAttribute",value:o.setAttribute}),o.removeAttribute&&t.push({name:"removeAttribute",value:o.removeAttribute}),o.textContent&&t.push({name:"textContent",value:o.textContent}),o.nodeValue&&t.push({name:"nodeValue",value:o.nodeValue}),x.default.table(t)},r.ensureAttr=function(t){var e=t.match(R);if(e)return d.default.make(e[1]);var n=t.match(O);return n?g.default.make(n[1]):this.setAttr},r.makeCommentNode=function(t){return a.createComment(t)},r.makeCustomNode=r.makeNode=function(t){return a.createElement(t)},r.makeCustomNodeWithType=r.makeNodeWithType=function(t,e){return a.createElement(t,e)},r.makeTextNode=function(t){return a.createTextNode(t)},r.setTextContent=function(t,e){t.textContent=e,o&&++o.textContent},r.setNodeValue=function(t,e){t.nodeValue=e,o&&++o.nodeValue},r.appendNode=function(t,e){I(t,e),o&&++o.appendChild},r.insertBeforeNode=function(t,e){D(e.parentNode,t,e),o&&++o.insertBefore},r.appendTextNode=function(t,e){this.appendNode(t,a.createTextNode(e))},r.replaceNode=function(t,e){t.parentNode.replaceChild(e,t)},r.makeFragment=function(){return a.createDocumentFragment()},a.body.remove?r.removeNode=function(t){t.remove(),o&&++o.remove}:r.removeNode=function(t){var e=t.parentNode;e&&e.removeChild(t)},r.setAttr=function(t,e,n){void 0===n||null===n?t.removeAttribute(e):t.setAttribute(e,n),o&&++o.setAttribute},r.removeAttr=function(t,e,n){t.removeAttribute(e,n),o&&++o.removeAttribute},r.attachEvent=function(t,e,n,r){t.addEventListener(e,n,r),o&&++o.addEventListener},r.detachEvent=function(t,e,n,r){t.removeEventListener(e,n,r),o&&++o.removeEventListener},r.pushTextNode=function(t){return this.pushNode(a.createTextNode(t))},r.pushTemplateNode=function(t){var e=i[t]||(i[t]=k.templates[t](this)),n=a.createClone?a.createClone(e):e.cloneNode(!0);return this.pushNode(n)},r.pushCommentNode=function(t){return this.pushNode(a.createComment(t))},r.pushNode=function(t){var e=this.parentNode,n=this.nextNode;return n?(D(e,t,n),o&&++o.insertBefore):(I(e,t),o&&++o.appendChild),t},r}},function(t,e,n){"use strict";function r(t,e,n,r,i,o){if(!e._TorqUpdate){if(!i)return n.preventDefault(),e._TorqUpdate=!0,this.update(e,r),void(e._TorqUpdate=!1);var a=this.read(e);if(a!==r){if(o)for(var s=0,u=o.length;s<u;++s){var c=o[s];c&&c.pre&&c.pre()}var l=i(t,a);if(o)for(var f=0,h=o.length;f<h;++f){var d=o[f];d&&d.post&&d.post()}a!==l&&(e._TorqUpdate=!0,this.update(e,l),e._TorqUpdate=!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return function(n){var o=n.getValue(),a=n.name,s=a+"__Safari_workaround";if(e){var u=a+e;(0,i.default)(n.ref,u,{value:o})}n.setGetter(function(){if(n.ref===this)return o;var e=this[s];if(e)return e;e=t.apply(void 0,[o].concat(r));var u={value:e,enumerable:!1,configurable:!0};return(0,i.default)(this,a,u),(0,i.default)(this,s,u),e})}}},function(t,e,n){t.exports={default:n(380),__esModule:!0}},,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1];return(0,o.default)(s.default,"Now",t,e)};var i=n(157),o=r(i),a=n(385),s=r(a)},,,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),i(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(t).stack,writable:!0}),n)}return o(e,t),e}(function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Error));e.default=a,t.exports=e.default},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,n,r):"string"==typeof e?l(t,e,n):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return s(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function c(t,e){if(s(e),t=i(t,e<0?0:0|p(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(e,n);t=i(t,r);var a=t.write(e,n);return a!==r&&(t=t.slice(0,a)),t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=f(t,e),t}function d(t,e){if(o.isBuffer(e)){var n=0|p(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||G(e.length)?i(t,0):f(t,e);if("Buffer"===e.type&&Q(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),o.alloc(+t)}function v(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return L(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(t,c)===o(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(t,c+h)!==o(e,h)){f=!1;break}if(f)return c}return-1}function A(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return X(z(e,t.length-n),t,n,r)}function E(t,e,n,r){return X(Y(e),t,n,r)}function C(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return X(q(e),t,n,r)}function k(t,e,n,r){return X(W(e,t.length-n),t,n,r)}function L(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return x(r)}function x(t){var e=t.length;if(e<=Z)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Z));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=H(t[o]);return i}function D(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function B(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(t,e,n,r,52,8),n+8}function $(t){if(t=V(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function V(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function q(t){return K.toByteArray($(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function G(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var K=n(478),J=n(479),Q=n(480);e.Buffer=o,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return u(null,t,e,n)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,u=Math.min(a,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return C(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||N(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),J.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),J.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),J.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),J.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){P(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){P(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:z(new o(t,r).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(43))},function(t,e,n){t.exports={default:n(196),__esModule:!0}},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){var r=n(85),i=n(50),o=r(i,"Map");t.exports=o},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(890),o=n(897),a=n(899),s=n(900),u=n(901);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t){return a(t)?i(t):o(t)}var i=n(918),o=n(925),a=n(173);t.exports=r},function(t,e){function n(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n(251),o=n(172);t.exports=r},function(t,e,n){function r(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}var i=n(47),o=n(175),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=r},function(t,e,n){function r(t){return"symbol"==typeof t||o(t)&&i(t)==a}var i=n(86),o=n(87),a="[object Symbol]";t.exports=r},,,,function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=this.$_view;t&&t.$_parent.$_scope._this.stop()}function o(){var t=this.$_view;t&&t.$_parent.$_scope._this.expand()}function a(t,e,n,r,i,o){e.expr_binder=n,e.expr_invalidate=r;var a=e.expr_value1;(o||a!==i)&&(e.expr_value1=i,e.expr_content=t.renderContent(e.expr_content,i))}function s(t){return t.$_parent.$_scope._this.childrenWithArgs(t.$_parent.$_scope._this.data)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(11),c=r(u),l=n(21),f=r(l),h=n(2),d=r(h),p=n(0),_=r(p),v=n(1),m=r(v),y=n(3),g=r(y),b=n(8),A=r(b),w=n(4),E=r(w),C=n(5),S=r(C),k=n(7),L=r(k),T=n(25),x=r(T),R=n(9),O=r(R),I=n(18),D=r(I),N=n(10),P=r(N),M=n(994),j=r(M),B=n(995),F=r(B),U={make:function(t){return U=t.makeComponent(f.default,{props:{getCondition:function(t){return t.$_scope._this.expanded}},blocks:[{name:"if_true",template:c.default.make({render:function(t,e){t.runBinder(s,a,e,!0)},dispose:function(t,e){t.removeSignals(e.expr_binder,e.expr_invalidate),e.expr_content=t.disposeContent(e.expr_content),e.expr_value1=void 0},move:function(t,e){t.moveContent(e.expr_content)},reuse:function(t,e){t.runBinder(s,a,e,!1)},firstChild:function(t,e){return t.contentFirstChild(e.expr_content)},lastChild:function(t,e){return t.contentLastChild(e.expr_content)}})},{name:"if_false",template:t.makeComponent(j.default,{attributes:[{name:"lazyWidth",get:function(){var t=this.$_view;if(t)return t.$_parent.$_scope._this.lazyWidth},original:"lazy-width",set:function(t){var e=this.$_view;e&&(e.$_parent.$_scope._this.lazyWidth=t)}},{name:"lazyHeight",get:function(){var t=this.$_view;if(t)return t.$_parent.$_scope._this.lazyHeight},original:"lazy-height",set:function(t){var e=this.$_view;e&&(e.$_parent.$_scope._this.lazyHeight=t)}}],events:[{name:"expand",value:o},{name:"stop",value:i}]})}]}),U.make(t)}},$=function(t){function e(){return(0,_.default)(this,e),(0,g.default)(this,(e.__proto__||(0,d.default)(e)).apply(this,arguments))}return(0,E.default)(e,t),(0,m.default)(e,[{key:"expand",value:function(){var t=this;if(!this.expanded&&!this.loading){var e=this.loader;if(!e)return void(this.expanded=!0);this.loading=!0,this.rejection=new F.default,e(this.rejection.promise).then(function(e){t.isDisposed||(t.data=e,t.rejection=null,t.loading=!1,t.expanded=!0)},function(t){t&&console.error(t)})}}},{key:"stop",value:function(){this.rejection&&(this.rejection.resolve(),this.rejection=null,this.loading=!1)}},{key:"dispose",value:function(){(0,A.default)(e.prototype.__proto__||(0,d.default)(e.prototype),"dispose",this).call(this),this.stop()}},{key:"render",value:function(){return{template:U,_this:this}}}]),e}(D.default);$=(0,S.default)($,{decorators:[(0,O.default)((0,P.default)(null),t,"LazyItem")],properties:[{name:"lazyWidth",decorators:[(0,x.default)()],init:function(){return-1}},{name:"lazyHeight",decorators:[(0,x.default)()],init:function(){return-1}},{name:"loader",decorators:[(0,x.default)()],kind:"property"},{name:"data",decorators:[(0,L.default)()],kind:"property"},{name:"loading",decorators:[(0,L.default)()],init:function(){return!1}},{name:"expanded",decorators:[(0,L.default)()],init:function(){return!1}}]}),e.default=$}).call(e,n(6)(t))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.VKnuthPlassBlockItem=e.HKnuthPlassBlockItem=void 0;var i,o=n(23),a=r(o),s=n(49),u=r(s),c=n(2),l=r(c),f=n(0),h=r(f),d=n(1),p=r(d),_=n(3),v=r(_),m=n(8),y=r(m),g=n(4),b=r(g),A=n(5),w=r(A),E=n(22),C=r(E),S=n(25),k=r(S),L=n(267),T=r(L),x=n(268),R=r(x),O=n(996),I=r(O);i=T.default;var D=function(t){function e(){(0,h.default)(this,e);var t=(0,v.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return t.layoutAttributes(function(){return t.size}),t.knuthPlass=new I.default(t.getItemAspectRatio),t}return(0,b.default)(e,t),(0,p.default)(e,[{key:"updateLayout",value:function(t,n){var r,i,o,a,s,c=this,f=this.knuthPlass,h=this.margin,d=this.size,p=-1,_=d-50,v=d+50,m=this.children,g=this.paginatedList=new R.default;if("horizontal"===this.direction){a=this.left;var b=f.calculateBreaks(m,n,h,d),A=(0,u.default)(b,2);r=A[0],o=A[1];for(var w=0,E=r.length;w<E;++w)!function(t,e){var i=r[t],u=o[t],l=m.slice(p+1,i+1),d=l.reduce(function(t,e){return t+1/e.aspectRatio},0),y=Math.max(Math.min(Math.round(u/d),v),_),b=f.calculateRowLayout(l,u,n,0,n,h,y);s=c.top,l.forEach(function(t,e){var n=b[e];t.parent=c,t.layout(a,s,y,n),g.add(t,t.left,t.right),s+=n+h}),a+=y+h,p=i}(w);this.width=Math.max(0,a-this.left-h),this.height=n}else{s=this.top;var C=f.calculateBreaks(m,t,h,d),S=(0,u.default)(C,2);r=S[0],i=S[1];for(var w=0,E=r.length;w<E;++w)!function(e,n){var o=r[e],u=i[e],l=m.slice(p+1,o+1),d=l.reduce(function(t,e){return t+e.aspectRatio},0),y=Math.max(Math.min(Math.round(u/d),v),_),b=f.calculateRowLayout(l,u,t,0,t,h,y);a=c.left,l.forEach(function(t,e){var n=b[e];t.parent=c,t.layout(a,s,n,y),g.add(t,t.top,t.bottom),a+=n+h}),s+=y+h,p=o}(w);this.width=t,this.height=Math.max(0,s-this.top-h)}(0,y.default)(e.prototype.__proto__||(0,l.default)(e.prototype),"updateLayout",this).call(this,t,n)}}]),e}(i);D=(0,w.default)(D,{properties:[{name:"size",decorators:[(0,k.default)()],init:function(){return 120}},{name:"getItemAspectRatio",decorators:[(0,C.default)()],fn:function(t){return"horizontal"===this.direction?1/t.aspectRatio:t.aspectRatio}}]}),e.default=D;var N=e.HKnuthPlassBlockItem=function(t){function e(){return(0,h.default)(this,e),(0,v.default)(this,(e.__proto__||(0,l.default)(e)).apply(this,arguments))}return(0,b.default)(e,t),e}(D);e.HKnuthPlassBlockItem=N=(0,w.default)(N,{decorators:[(0,a.default)({direction:"horizontal"})]});var P=e.VKnuthPlassBlockItem=function(t){function e(){return(0,h.default)(this,e),(0,v.default)(this,(e.__proto__||(0,l.default)(e)).apply(this,arguments))}return(0,b.default)(e,t),e}(D);e.VKnuthPlassBlockItem=P=(0,w.default)(P,{decorators:[(0,a.default)({direction:"vertical"})]})},,,function(t,e,n){var r=n(63),i=n(69),o=n(132)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){t.exports=!n(41)&&!n(53)(function(){return 7!=Object.defineProperty(n(134)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){n(285);var r=n(16).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){t.exports=n(52)},function(t,e,n){var r=n(39),i=n(44),o=n(71);t.exports=n(41)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(63),i=n(54),o=n(289)(!1),a=n(132)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(26).document;t.exports=r&&r.documentElement},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(293),__esModule:!0}},function(t,e,n){var r=n(93);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(54),i=n(194).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(188),i=n(140).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){n(308);var r=n(16).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){n(310);var r=n(16).Object;t.exports=function(t){return r.getOwnPropertyNames(t)}},,function(t,e,n){"use strict";var r=n(39).f,i=n(112),o=n(150),a=n(48),s=n(151),u=n(97),c=n(138),l=n(190),f=n(201),h=n(41),d=n(114).fastKey,p=n(152),_=h?"_s":"size",v=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[_]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[_]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[_]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return p(this,e)[_]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[_]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){var r=n(44);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(70),i=n(28)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(26),i=n(16),o=n(39),a=n(41),s=n(28)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(26),i=n(20),o=n(114),a=n(53),s=n(52),u=n(150),c=n(97),l=n(151),f=n(40),h=n(94),d=n(39).f,p=n(326)(0),_=n(41);t.exports=function(t,e,n,v,m,y){var g=r[t],b=g,A=m?"set":"add",w=b&&b.prototype,E={};return _&&"function"==typeof b&&(y||w.forEach&&!a(function(){(new b).entries().next()}))?(b=e(function(e,n){l(e,b,t,"_c"),e._c=new g,void 0!=n&&c(n,m,e[A],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!y||"clear"!=t)&&s(b.prototype,t,function(n,r){if(l(this,b,t),!e&&y&&!f(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),y||d(b.prototype,"size",{get:function(){return this._c.size}})):(b=v.getConstructor(e,t,m,A),u(b.prototype,n),o.NEED=!0),h(b,t),E[t]=b,i(i.G+i.W+i.F,E),y||v.setStrong(b,t,m),b}},function(t,e,n){var r=n(117),i=n(330);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){"use strict";var r=n(20);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(20),i=n(91),o=n(48),a=n(97);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),e=void 0!==u,e&&i(u),void 0==t?new this:(n=[],e?(r=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){return function(t){var e="_"+t.name,n=t.fn;if("get"!==t.kind)throw new Error("@Memoize can only be applied on getters.");t.setGetter(function(){if(this.hasOwnProperty(e))return this[e];var r=n.call(this);return this[e]=r,(0,i.default)(this,t.name,{configurable:!0,value:r}),r})}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u={},c=function(){function t(){(0,o.default)(this,t)}return(0,s.default)(t,null,[{key:"warn",value:function(e,n){t.ignoreWarnings||u[e]||(console.warn(e+" is deprecated. "+n),u[e]=!0)}}]),t}();c.ignoreWarnings=!1,e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(345),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=[i.default],a=1;e.default={add:function(t){o.push(t),a=o.length},remove:function(t){var e=o.indexOf(t);-1!==e&&o.splice(e,1),a=o.length},filter:function(t,e){for(var n=0,r=a;n<r;++n){var i=o[n](t,e);if(i)return i.value}return e}}},function(t,e,n){var r=n(44),i=n(91),o=n(28)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(48),s=n(348),u=n(189),c=n(134),l=n(26),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,_=l.Dispatch,v=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},g=function(t){y.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete m[t]},"process"==n(93)(f)?r=function(t){f.nextTick(a(y,t,1))}:_&&_.now?r=function(t){_.now(a(y,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:h,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(44),i=n(40),o=n(153);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(28)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(e){var n=t.state;if(n){var r=t.link;n.onEvent(r.data,r.node,e,t.value,r.setterFn)}}}function o(t,e){F=t,U=e}function a(t){return function(){try{return t.apply(this,arguments)}catch(t){U&&U(t),console.error(t)}}}function s(t,e,n,r,i,o){var a=t.depth,s=O.default.wrap(function(){var o=t.depth;if(t.depth=a,n)for(var u=0,c=n.length;u<c;++u){var l=n[u],f=l.ref;f&&(f.remove(s),l.dispose&&l.dispose())}if(!e.$_disposed){var h=S.default.active;n=S.default.active=[];var d=r(e);S.default.active=h,d=P(n,d);for(var p=0,_=n.length;p<_;++p){var v=n[p];v.ref=A.default.on(v.obj,v.eventName,s)}i(t,e,n,s,d,!1,!1),t.depth=o}},a,o);return s}Object.defineProperty(e,"__esModule",{value:!0});var u=n(36),c=r(u),l=n(0),f=r(l),h=n(1),d=r(h),p=n(5),_=r(p),v=n(23),m=r(v);e.setPreventExceptions=o;var y,g,b=n(45),A=r(b),w=n(208),E=r(w),C=n(55),S=r(C),k=n(100),L=r(k),T=n(207),x=r(T),R=n(76),O=r(R),I=n(215),D=r(I),N=n(216),P=E.default.filter,M=[],j=/^on-(.+?)(-capture)?$/,B=0;L.default.setImmediate?(y=L.default.setImmediate,g=L.default.clearImmediate):(y=function(t){return L.default.setTimeout(t,0)},g=L.default.clearTimeout);var F=!1,U=null,$=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,f.default)(this,t),this.id=++B,this.depth=0,this.preventExceptions=F,this.attr=i,this.templates=new D.default,this.scope=e,this.parentNode=n,this.nextNode=r}return(0,d.default)(t,[{key:"makeCommentNode",value:function(){}},{key:"makeTextNode",value:function(){}},{key:"makeCustomNode",value:function(){}},{key:"makeCustomNodeWithType",value:function(){}},{key:"setTextContent",value:function(){}},{key:"setNodeValue",value:function(){}},{key:"appendNode",value:function(){}},{key:"appendTextNode",value:function(){}},{key:"replaceNode",value:function(){}},{key:"makeNode",value:function(){}},{key:"makeNodeWithType",value:function(){}},{key:"makeFragment",value:function(){}},{key:"removeNode",value:function(){}},{key:"pushTextNode",value:function(){}},{key:"setAttr",value:function(){}},{key:"removeAttr",value:function(){}},{key:"attachEvent",value:function(){}},{key:"detachEvent",value:function(){}},{key:"pushNode",value:function(){}},{key:"pushCommentNode",value:function(){}},{key:"pushTemplateNode",value:function(){}},{key:"makeComponent",value:function(t,e){return t.make(e)}},{key:"makeDirective",value:function(t,e){return x.default.warn("Factory.makeDirective","Use Factory.makeComponent instead."),this.makeComponent(t,e)}},{key:"ensureAttr",value:function(){return this.setAttr}},{key:"enterNode",value:function(t){this.parentNode=t,this.nextNode=null}},{key:"exitNode",value:function(t){this.parentNode=t.parentNode,this.nextNode=t.nextSibling}},{key:"pushScope",value:function(t){var e=this.scope;return this.scope=t,e}},{key:"restoreScope",value:function(t){this.scope=t}},{key:"pushJsx",value:function(t){var e=t.template.make(this);return e.$_parent=t.$_parent,e.$_scope=t,e.template.run(this,e),e}},{key:"renderContent",value:function(t,e){if(!t){if(void 0===e||null===e||""===e)return{type:"empty",content:e,scope:this.scope,node:this.pushCommentNode("empty expression")};if("function"==typeof e&&"function"==typeof e.make){var n=e.TemplateInstance||(e.TemplateInstance=e.make({})),r=n.make(this);return r.template.run(this,r),{type:"template",content:e,scope:this.scope,view:r}}if("object"===(void 0===e?"undefined":(0,c.default)(e))){if(e.make&&"function"==typeof e.make){var i=e.make(this);return i.template.run(this,i),{type:"template",content:e,scope:this.scope,view:i}}if(e.template&&e.template.make&&"function"==typeof e.template.make){var o=e.template.make(this);o.$_parent=e.$_parent,o.$_scope=e;var a=e.$_injectScope;return a&&a(o),o.template.run(this,o),{type:"template",content:e,scope:this.scope,view:o}}}return{type:"text",content:e,scope:this.scope,node:this.pushTextNode(e)}}if(e===t.content&&("template"!==t.type||!t.view.$_disposed))return t;if(t.scope||(t.scope=this.scope),void 0===e||null===e||""===e){if("empty"===t.type)return t;if("text"===t.type){var s=this.makeCommentNode("empty placeholder");return this.replaceNode(t.node,s),t.type="empty",t.content=e,t.node=s,t}return this.gotoAfterContent(t),this.cacheContent(t),{type:"empty",content:e,scope:t.scope,node:this.pushCommentNode("empty expression")}}if("function"==typeof e&&"function"==typeof e.make){this.gotoAfterContent(t),this.cacheContent(t);var u=this.pushScope(t.scope),l=e.TemplateInstance||(e.TemplateInstance=e.make({})),f=l.make(this);return f.template.run(this,f),this.restoreScope(u),{type:"template",content:e,scope:t.scope,view:f}}if("object"===(void 0===e?"undefined":(0,c.default)(e))){if(e.make&&"function"==typeof e.make){this.gotoAfterContent(t),this.cacheContent(t);var h=this.pushScope(t.scope),d=e.make(this);return d.template.run(this,d),this.restoreScope(h),{type:"template",content:e,scope:t.scope,view:d}}if(e.template&&e.template.make&&"function"==typeof e.template.make){this.gotoAfterContent(t),this.cacheContent(t);var p=this.pushScope(t.scope),_=e.template.make(this);_.$_parent=e.$_parent,_.$_scope=e;var v=e.$_injectScope;return v&&v(_),_.template.run(this,_),this.restoreScope(p),{type:"template",content:e,scope:t.scope,view:_}}}if("text"===t.type)return this.setNodeValue(t.node,e),t.content=e,t;if("empty"===t.type){var m=this.makeTextNode(e);return this.replaceNode(t.node,m),t.type="text",t.content=e,t.node=m,t}return this.gotoAfterContent(t),this.cacheContent(t),{type:"text",content:e,scope:t.scope,node:this.pushTextNode(e)}}},{key:"moveContent",value:function(t){switch(t.type){case"empty":case"text":this.pushNode(t.node);break;case"template":var e=t.view;e.template.move(this,e)}}},{key:"cacheContent",value:function(t){switch(t.type){case"empty":case"text":this.removeNode(t.node),t.node=null;break;case"template":var e=t.view;e.template.cache(this,e),t.view=null}}},{key:"disposeContent",value:function(t){switch(t.type){case"empty":case"text":break;case"template":var e=t.view;e.template.dispose(this,e)}return t.scope=null,t}},{key:"gotoBeforeNode",value:function(t){this.parentNode=t.parentNode,this.nextNode=t}},{key:"gotoAfterNode",value:function(t){this.parentNode=t.parentNode,this.nextNode=t.nextSibling}},{key:"gotoBeforeView",value:function(t){var e=t.template.firstChild(this,t);this.parentNode=e.parentNode,this.nextNode=e}},{key:"gotoAfterView",value:function(t){var e=t.template.lastChild(this,t);this.parentNode=e.parentNode,this.nextNode=e.nextSibling}},{key:"gotoBeforeContent",value:function(t){switch(t.type){case"empty":case"text":this.gotoBeforeNode(t.node);break;case"template":this.gotoBeforeView(t.view)}}},{key:"gotoAfterContent",value:function(t){switch(t.type){case"empty":case"text":this.gotoAfterNode(t.node);break;case"template":this.gotoAfterView(t.view)}}},{key:"contentFirstChild",value:function(t){switch(t.type){case"empty":case"text":return t.node;case"template":var e=t.view;return e.template.firstChild(this,e)}}},{key:"contentLastChild",value:function(t){switch(t.type){case"empty":case"text":return t.node;case"template":var e=t.view;return e.template.lastChild(this,e)}}},{key:"runRafBinder",value:function(t,e,n,r,i){var o=this;return y(function(){o.runBinder(t,e,n,r,i)})}},{key:"disposeRafBinder",value:function(t){g(t)}},{key:"runBinder",value:function(t,e,n,r,i){var o=S.default.active,u=S.default.active=M;this.preventExceptions&&(t=a(t));var c=t(n);S.default.active=o,c=P(u,c);var l;if(u.length){M=[],l=s(this,n,u,t,e,i);for(var f=0,h=u.length;f<h;++f){var d=u[f];d.ref=A.default.on(d.obj,d.eventName,l)}}else u=null;e(this,n,u,l,c,r,!r)}},{key:"removeSignals",value:function(t,e){if(t)for(var n=0,r=t.length;n<r;++n){var i=t[n];i.ref.remove(e),i.dispose&&i.dispose()}}},{key:"setUnpreparedAttr",value:function(t,e,n){var r=(0,N.makeAttrName)(e);return(this.attr[r]||(this.attr[r]=this.ensureAttr(e)))(t,e,n)}},{key:"updateSpreadAttribute",value:function(t,e,n,r){function o(e,o){e=String(e);var s=e.match(j);if(s){var u=v.attachEvent(t,s[1],o,!!s[2])||o;return void r.events.push({name:s[1],value:u,capture:!!s[2]})}var l=(0,N.makeAttrName)(e),f=v.attr[l]||(v.attr[l]=v.ensureAttr(e)),h={name:e,updater:f,disposed:!1};if(r.attrs.push(h),"function"==typeof o)v.runBinder(o,function(n,r,i,o,a,s,u){h.disposed||(h.signals=i,h.invalidate=o,(u||a!==h.value)&&(h.value=a,h.state=f(t,e,a,h.state)))},n,!1);else if("object"===(void 0===o?"undefined":(0,c.default)(o))&&"function"==typeof o.get){var d;if("function"==typeof o.set){var p=o.get,_=o.set;v.preventExceptions&&(p=a(p),_=a(_)),h.link={data:n,node:t,setterFn:function(t,e){return _(e),p()}},d=i(h)}v.runBinder(o.get,function(n,r,i,o,a,s,u){h.disposed||(h.signals=i,h.invalidate=o,(u||a!==h.value)&&(h.value=a,h.state=f(t,e,a,h.state,d)))},n,!1)}else h.state=f(t,e,o)}if(r){for(var s=r.attrs,u=0,l=s.length;u<l;++u){var f=s[u];f.signals&&this.removeSignals(f.signals,f.invalidate),f.disposed=!0,f.updater(t,f.name,null,f.state),f.link=null,f.state=null}for(var h=r.events,d=0,p=h.length;d<p;++d){var _=h[d];this.detachEvent(t,_.name,_.value,_.capture)}}if(e){var v=this;if(r={attrs:[],events:[]},e instanceof Array)for(var m=0,y=e.length;m<y;++m){var g=e[m];o(g.name,g.value)}else if("object"===(void 0===e?"undefined":(0,c.default)(e)))for(var b in e)e.hasOwnProperty(b)&&o(b,e[b]);return r}}},{key:"replaceTemplate",value:function(t,e){this.gotoAfterView(t),t.template.cache(this,t),e.template.run(this,e)}}]),t}();$.active=null,$=(0,_.default)($,{decorators:[(0,m.default)({_group_g:!0})]}),e.default=$},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t+"_prev",n=t+"_next";return function(){function t(){(0,a.default)(this,t),this._first=null,this._last=null}return(0,u.default)(t,[{key:"prepend",value:function(t){var r=this._first;this._first=t,t[n]=r,r?r[e]=t:this._last=t}},{key:"takeFirst",value:function(){var t=this._first;return t&&this.remove(t),t}},{key:"takeLast",value:function(){var t=this._last;return t&&this.remove(t),t}},{key:"remove",value:function(t){var r=t[e],i=t[n];r?(r[n]=i,t[e]=null):this._first=i,i?(i[e]=r,t[n]=null):this._last=r}}]),t}()}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=r(o),s=n(1),u=r(s),c=i("$_lruG_"),l=i("$_lruL_"),f=20,h=!1,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;(0,a.default)(this,t),this._byId={},this._count=0,this._global=new c,this._capacity=e}return(0,u.default)(t,null,[{key:"DISABLE_CACHING_BEYOND_CAPACITY",get:function(){return h},set:function(t){h=t}}]),(0,u.default)(t,[{key:"init",value:function(t){this._byId[t]=new l}},{key:"take",value:function(t){var e=this._byId[t].takeFirst();return e&&(--this._count,this._global.remove(e)),e}},{key:"put",value:function(t,e){if(!(h&&this._count>=this._capacity)){var n=this._byId[t];if(n.prepend(e),e.$_lru_list=n,++this._count,this._global.prepend(e),this._count>this._capacity){--this._count;var r=this._global.takeLast();r.$_lru_list.remove(r),r.$_lru_list=null}}}},{key:"removeAll",value:function(t){for(var e=this._global,n=this._byId[t]._first;n;n=n.$_lruL_next)--this._count,e.remove(n);this.init(t)}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t){return"_"+t.replace(/-/g,"$45").replace(/:/g,"$58")}Object.defineProperty(e,"__esModule",{value:!0}),e.makeAttrName=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){_(t,null,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.removeClass=e.addClass=e.replaceSingleClassName=e.replaceClassNames=void 0;var o=n(78),a=r(o),s=n(75),u=r(s),c=n(37),l=r(c);e.appendClassNames=i;var f,h,d,p;"undefined"==typeof document||"classList"in document.createElement("_")?(f=function(t,e,n){var r=t.classList;if(e)if("string"==typeof e)r.remove(e);else for(var i=0,o=e.length;i<o;++i)r.remove(e[i]);if(n)for(var a=0,s=n.length;a<s;++a)r.add(n[a]);return n},h=function(t,e,n){var r=t.classList;if(e)if("string"==typeof e)r.remove(e);else for(var i=0,o=e.length;i<o;++i)r.remove(e[i]);return n&&r.add(n),n},d=function(t,e){t.classList.add(e)},p=function(t,e){t.classList.remove(e)}):(f=function(t,e,n){var r=new l.default(t.className.split(" "));if(e)if("string"==typeof e)r.delete(e);else{var i=!0,o=!1,s=void 0;try{for(var c,f=(0,u.default)(e);!(i=(c=f.next()).done);i=!0){var h=c.value;r.delete(h)}}catch(t){o=!0,s=t}finally{try{!i&&f.return&&f.return()}finally{if(o)throw s}}}if(n){var d=!0,p=!1,_=void 0;try{for(var v,m=(0,u.default)(n);!(d=(v=m.next()).done);d=!0){var y=v.value;r.add(y)}}catch(t){p=!0,_=t}finally{try{!d&&m.return&&m.return()}finally{if(p)throw _}}}return t.setAttribute("class",[].concat((0,a.default)(r)).join(" ")),n},h=function(t,e,n){var r=new l.default(t.className.split(" "));if(e)if("string"==typeof e)r.delete(e);else{var i=!0,o=!1,s=void 0;try{for(var c,f=(0,u.default)(e);!(i=(c=f.next()).done);i=!0){var h=c.value;r.delete(h)}}catch(t){o=!0,s=t}finally{try{!i&&f.return&&f.return()}finally{if(o)throw s}}}return n&&r.add(n),t.setAttribute("class",[].concat((0,a.default)(r)).join(" ")),n},d=function(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&(n.push(e),t.setAttribute("class",n.join(" ")))},p=function(t,e){var n=t.className.split(" "),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.setAttribute("class",n.join(" ")))});var _=e.replaceClassNames=f;e.replaceSingleClassName=h,e.addClass=d,e.removeClass=p},function(t,e,n){"use strict";function r(t,e){var n=t.style,r=(0,a.transformProperties)(e);for(var i in r)n[i]=r[i]}function i(t,e){var n=t.style;for(var r in(0,a.transformProperties)(e))n[r]=""}function o(t,e,n){t.style[(0,a.transformPropertyName)(e)]=(0,a.transformValueForProperty)(e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.setStyles=r,e.unsetStyles=i,e.setStyle=o;var a=n(219)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return"number"!=typeof e?"":o(t)}function o(t){return _.test(t)?"px":v.test(t)?"deg":""}function a(t){return""!==o(t)}function s(t,e){if(t=(0,p.default)(t),a(t)){if("string"==typeof e){var n=e.match(/^(\d+(?:\.\d+)?)(.*)$/),r=null;n&&(e=n[1],r=n[2],e=Math.round(100*parseFloat(e))/100)}if(r&&""!==r||(r=i(t,e)),r)return e+r}return e}function u(t){var e=o((0,p.default)(t));if(e)return function(t){if("string"==typeof t){var n=t.match(/^(\d+(?:\.\d+)?)(.*)$/),r=null;n&&(t=n[1],r=n[2],t=Math.round(100*parseFloat(t))/100)}return t?(r||"number"!=typeof t||(r=e),r&&(t+=r),t):0}}function c(t){return g.get(t)}function l(t){var e={};for(var n in t){var r=t[n];e[g.get(n)]=s(n,r)}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.degProperties=e.pxProperties=void 0,e.unitForProperty=i,e.getUnitProperty=o,e.isUnitProperty=a,e.transformValueForProperty=s,e.valueTransformerForProperty=u,e.transformPropertyName=c,e.transformProperties=l;var f=n(363),h=r(f),d=n(220),p=r(d),_=e.pxProperties=new RegExp("^("+["backgroundPositionX","backgroundPositionY","borderRadius","borderWidth","bottom","height","left","marginBottom","marginLeft","marginRight","marginTop","maxHeight","maxWidth","minHeight","minWidth","paddingBottom","paddingLeft","paddingRight","paddingTop","perspectiveX","perspectiveY","perspectiveZ","right","top","translateX","translateY","translateZ","width"].join("|")+")$"),v=e.degProperties=new RegExp("^("+["rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY","skewZ"].join("|")+")$"),m=["","webkit-","o-","ms-","moz-"],y=window.getComputedStyle(document.createElement("div")),g=new h.default(function(t){for(var e=0,n=m.length;e<n;++e){var r=(0,p.default)(m[e]+t);if(y.hasOwnProperty(r))return r}return t})},function(t,e,n){"use strict";function r(t){return t.replace(/-+([^-]?)/g,i)}var i=function(t,e){return e.toUpperCase()};t.exports=r},function(t,e,n){"use strict";t.exports=n(370).defaults},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t){function n(){for(var n=this,i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];r=setTimeout(function(){t.apply(n,o)},e)}var r=void 0;return n.cancel=function(){r&&(clearTimeout(r),r=null)},n}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new i.default(t,"Now")};var r=n(157),i=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,n){"use strict";function r(t,e,n){function r(e){var n=d,r=p;return d=p=void 0,g=e,v=t.apply(r,n)}function i(t){return g=t,m=setTimeout(u,e),b?r(t):v}function a(t){var n=t-y,r=t-g,i=e-n;return A?Math.min(i,_-r):i}function s(t){var n=t-y,r=t-g;return void 0===y||n>=e||n<0||A&&r>=_}function u(){var t=Date.now();if(s(t))return c(t);m=setTimeout(u,a(t))}function c(t){return m=void 0,w&&d?r(t):(d=p=void 0,v)}function l(){void 0!==m&&clearTimeout(m),g=0,d=y=p=m=void 0}function f(){return void 0===m?v:c(Date.now())}function h(){for(var t=Date.now(),n=s(t),o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];if(d=a,p=this,y=t,n){if(void 0===m)return i(y);if(A)return m=setTimeout(u,e),r(y)}return void 0===m&&(m=setTimeout(u,e)),v}var d=void 0,p=void 0,_=void 0,v=void 0,m=void 0,y=void 0,g=0,b=!1,A=!1,w=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e=+e||0,"object"===(void 0===n?"undefined":(0,o.default)(n))&&(b=!!n.leading,A="maxWait"in n,_=A?Math.max(+n.maxWait||0,e):_,w="trailing"in n?!!n.trailing:w),h.cancel=l,h.flush=f,h}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r},function(t,e,n){t.exports={default:n(376),__esModule:!0}},,,,function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},,,,function(t,e){function n(t){var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=n;var r=Object.prototype.toString},,,function(t,e,n){t.exports={default:n(485),__esModule:!0}},,function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n(43))},function(t,e){function n(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=n},function(t,e,n){e.UINT32=n(495),e.UINT64=n(496)},,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return e.priority-t.priority}Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(32),s=r(a),u=n(2),c=r(u),l=n(0),f=r(l),h=n(1),d=r(h),p=n(3),_=r(p),v=n(4),m=r(v),y=n(5),g=r(y),b=n(81),A=r(b),w=n(206),E=r(w),C=n(7),S=r(C),k=n(27),L=r(k),T=n(77),x=r(T),R=n(857),O=r(R),I=n(246),D=r(I);o=L.default;var N=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.default,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,f.default)(this,e);var i=(0,_.default)(this,(e.__proto__||(0,c.default)(e)).call(this));return i.state={event:null,interactionName:null,currentInteraction:null,newInteraction:null},i.interactionsList=[],i.touchManager=i.link(new n),i.touchManager.allowHtmlDrag=r,t&&(0,s.default)(i.touchManager.enabledInputs,t),i.listenTo(i.touchManager,"click",i.onClick),i.listenTo(i.touchManager,"start",i.onStart),i.listenTo(i.touchManager,"update",i.onUpdate),i.listenTo(i.touchManager,"end",i.onEnd),i.listenTo(i.touchManager,"reset",i.onReset),i.listenTo(i.touchManager,"gestureChange",i.onChange),i.listenTo(i.touchManager,"wait",i.onWait),i.link(function(){return i.clearWait()}),i.waitTimers=[],i}return(0,m.default)(e,t),(0,d.default)(e,[{key:"addNodeEvents",value:function(t,e){this.touchManager.addNodeEvents(t,e)}},{key:"pushInteraction",value:function(t){this.interactionsList.push(t)}},{key:"removeInteraction",value:function(t){var e=this.interactionsList,n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{key:"pushState",value:function(t,e,n){this.state.interactionName=t,this.state.eventState=null,this.state.event=e,this.touchManager.start(e,n)}},{key:"updateState",value:function(t){this.state.eventState=t,"wait"!==t&&this.clearWait();var e=[];if(this.interactionsList.forEach(function(t){var n=t.priority;!1!==n&&e.push({interaction:t,priority:n})}),!e.length)return void this.resetInteraction();e.sort(i);var n=e[0].interaction;n!==this.state.currentInteraction&&(this.state.newInteraction=n)}},{key:"resetInteraction",value:function(){this.state.newInteraction=null;var t=this.state.currentInteraction;t&&(t.started=!1,t.reset&&t.reset(this.state),this.state.currentInteraction=null,this.trigger("currentInteraction")),this.active=!1}},{key:"updateCurrentInteraction",value:function(){var t=this.state.newInteraction;t&&(this.resetInteraction(),this.state.currentInteraction=t,this.trigger("currentInteraction"),this.active=!0)}},{key:"propagateInteractionEvent",value:function(t){this.updateCurrentInteraction(),this.triggerInteractionEvent(t)}},{key:"triggerInteractionEvent",value:function(t){var e=this.state.currentInteraction;if(e){this.interactionEvent(e,t);var n=e[t];n&&n.call(e)}}},{key:"wait",value:function(t){var e=this,n=new O.default;n.setTimeout(function(){e.updateState("wait")},t),this.waitTimers.push(n)}},{key:"clearWait",value:function(){this.waitTimers.forEach(function(t){return t.dispose()}),this.waitTimers=[],this.waitStart=null}},{key:"onClick",value:function(){this.updateState("click"),this.propagateInteractionEvent("click"),this.resetInteraction()}},{key:"onStart",value:function(){this.updateState("drag"),this.updateCurrentInteraction();var t=this.state.currentInteraction;t&&(this.interactionEvent(t,"start"),t.start&&t.start(),t.started=!0)}},{key:"onUpdate",value:function(t){this.state.event=t,this.onUpdateHandler()}},{key:"onEnd",value:function(){var t=this.state.currentInteraction;t&&t.started&&(t.started=!1,t.end&&t.end())}},{key:"onWait",value:function(){this.waitStart=(0,x.default)(),this.updateState("wait")}},{key:"onReset",value:function(){this.resetInteraction()}},{key:"onChange",value:function(){this.updateState("gestureChange"),this.propagateInteractionEvent("gestureChange");var t=this.state.currentInteraction;t&&!t.started&&this.touchManager.resetStartOffsets()}},{key:"interactionEvent",value:function(){}},{key:"waitTime",get:function(){return this.waitStart?(0,x.default)()-this.waitStart:0}},{key:"processingEvent",get:function(){return this.touchManager.listening}}]),e}(o);N=(0,g.default)(N,{properties:[{name:"active",decorators:[(0,S.default)()],init:function(){return!1}},{name:"instance",decorators:[(0,E.default)()],static:!0,kind:"get",fn:function(){return new this}},{name:"onUpdateHandler",decorators:[(0,A.default)()],fn:function(){var t=this.state.currentInteraction;t&&t.started&&t.update&&t.update()}}]}),e.default=N},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"mousedown"===t.type&&(1!==t.which||t.ctrlKey)||"mouseup"===t.type&&1!==t.which}Object.defineProperty(e,"__esModule",{value:!0}),e.maxHistoryItems=e.isMSPointerSupported=e.isPointerSupported=e.isTouchSupported=void 0;var o,a=n(2),s=r(a),u=n(3),c=r(u),l=n(8),f=r(l),h=n(4),d=r(h),p=n(5),_=r(p),v=n(22),m=r(v),y=n(7),g=r(y),b=n(0),A=r(b),w=n(1),E=r(w),C=n(247),S=r(C),k=n(77),L=r(k),T=n(100),x=r(T),R=n(27),O=r(R),I=n(218),D=e.isTouchSupported="ontouchstart"in x.default,N=e.isPointerSupported=!!x.default.navigator&&x.default.navigator.pointerEnabled,P=e.isMSPointerSupported=!!x.default.navigator&&x.default.navigator.msPointerEnabled,M=P?MSPointerEvent.MSPOINTER_TYPE_MOUSE:"mouse",j=e.maxHistoryItems=10,B=function(){function t(){(0,A.default)(this,t),this.next=0,this.items=[]}return(0,E.default)(t,[{key:"reset",value:function(){}},{key:"push",value:function(t){var e=this.next++%j;this.items[e]={point:t,time:(0,L.default)()}}},{key:"reverse",value:function(t){for(var e=this.next+j-1,n=e+j,r=0;n>e;--n){var i=n%j,o=this.items[i];if(o&&!1===t(o,r++))return}}},{key:"each",value:function(t){for(var e=this.next,n=e+j,r=0;e<n;++e){var i=e%j,o=this.items[i];if(o&&!1===t(o,r++))return}}},{key:"movement",get:function(){var t=this.items[(this.next-2)%j].point,e=this.items[(this.next-1)%j].point;return{x:e.left-t.left,y:e.top-t.top}}},{key:"velocity",get:function(){var t,e,n;return this.reverse(function(r,i){if(!i)return void(t=r);var o=t.time-r.time,a=r.point.clone().scaleAndMove(t.point,-1);return(!n||!(a.left*n.left<0||a.top*n.top<0))&&(n=a.clone(),Math.abs(a.left)<5&&(a.left=0),Math.abs(a.top)<5&&(a.top=0),e=a.scale(1/o),o>=50?(e=null,!1):!(o>=30)&&void 0)}),e||new S.default}}]),t}(),F=function(){function t(e,n,r,i,o){(0,A.default)(this,t),this.id=e,this.touch=n,this.event=r,this.startOffset=i,this.current=i.clone(),this.model=o,this.history=new B}return(0,E.default)(t,[{key:"update",value:function(t,e){this.touch=t,this.event=e,this.current=S.default.create(t.pageX,t.pageY),this.history.push(this.current)}},{key:"resetOffset",value:function(){this.startTime=this.time=(0,L.default)(),this.startOffset=this.current.clone()}},{key:"offset",get:function(){return this.startOffset.clone().scaleAndMove(this.current,-1)}}]),t}(),U=function(){function t(){(0,A.default)(this,t),this.touches=[],this.touchesById={}}return(0,E.default)(t,[{key:"at",value:function(t){return this.touches[t]}},{key:"get",value:function(t){return this.touchesById[t]}},{key:"add",value:function(t){this.touches.push(t),this.touchesById[t.id]=t}},{key:"each",value:function(t){this.touches.forEach(t)}},{key:"remove",value:function(t){var e=this;this.touches=this.touches.filter(function(n){return!t(n)||(delete e.touchesById[n.id],!1)})}},{key:"length",get:function(){return this.touches.length}}]),t}();o=O.default;var $=function(t){function e(){var t,n,r,i;(0,A.default)(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=(0,c.default)(this,(t=e.__proto__||(0,s.default)(e)).call.apply(t,[this].concat(a))),r.touchDragMinOffset=10,r.scrollDragMinOffset=5,r.mouseDragMinOffset=1,r.started=!1,r.preventDefault=!0,r.mobileScroll=!1,r.usingMouse=!1,r.touches=new U,r.allowHtmlDrag=!1,r.enabledInputs={mouse:!0,touch:!0,pointer:!0},i=n,(0,c.default)(r,i)}return(0,d.default)(e,t),(0,E.default)(e,[{key:"start",value:function(t,e){this.onTouchStart(t,e)}},{key:"inputEnabled",value:function(t){return"mousedown"===t.type||"mouseup"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType?this.enabledInputs.mouse:"pointerdown"===t.type||"MSPointerDown"===t.type?this.enabledInputs.pointer:this.enabledInputs.touch}},{key:"createTouchModels",value:function(t,e){var n=this.touches;if("mousedown"===t.type){var r=S.default.create(t.pageX,t.pageY);n.add(new F("mouse",t,t,r,e))}else if("pointerdown"===t.type||"MSPointerDown"===t.type){var i=S.default.create(t.pageX,t.pageY);n.add(new F(t.pointerId,t,t,i,e))}else for(var o=0,a=t.changedTouches.length;o<a;o++){var s=t.changedTouches[o],u=S.default.create(s.pageX,s.pageY),c=new F(s.identifier,s,t,u,e);n.get(c.id)&&console.error("Existing touch handled twice"),n.add(c)}}},{key:"addNodeEvents",value:function(t,e){t.addEventListener("mousedown",e),D&&t.addEventListener("touchstart",e),N?((0,I.setStyle)(t,"touch-action","none"),t.addEventListener("pointerdown",function(n){n.pointerType!==M&&e.call(t,n)},!1)):P&&((0,I.setStyle)(t,"touch-action","none"),t.addEventListener("MSPointerDown",function(n){n.pointerType!==M&&e.call(t,n)},!1))}},{key:"addListeners",value:function(){this.touches.length||console.error("Expected this.touches to be a non-empty array"),this.listening=!0,document.addEventListener("mousedown",this.onTouchStart,!0),document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseup",this.onMouseUp,!0),D&&(document.addEventListener("touchstart",this.onTouchStart,!0),document.addEventListener("touchmove",this.onTouchMove,!0),document.addEventListener("touchend",this.onTouchEnd,!0),document.addEventListener("touchcancel",this.onTouchCancel,!0)),N?(document.addEventListener("pointerdown",this.onTouchStart,!0),document.addEventListener("pointermove",this.onPointerMove,!0),document.addEventListener("pointerup",this.onPointerUp,!0)):P&&(document.addEventListener("MSPointerDown",this.onTouchStart,!0),document.addEventListener("MSPointerMove",this.onPointerMove,!0),document.addEventListener("MSPointerUp",this.onPointerUp,!0)),this.allowHtmlDrag&&(document.addEventListener("dragstart",this.onDragStart,!0),document.addEventListener("dragend",this.onDragEnd,!0))}},{key:"removeListeners",value:function(){this.touches.length&&console.error("Expected this.touches to be an empty array"),this.listening=!1,document.removeEventListener("mousedown",this.onTouchStart,!0),document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseup",this.onMouseUp,!0),D&&(document.removeEventListener("touchstart",this.onTouchStart,!0),document.removeEventListener("touchmove",this.onTouchMove,!0),document.removeEventListener("touchend",this.onTouchEnd,!0),document.removeEventListener("touchcancel",this.onTouchCancel,!0)),N?(document.removeEventListener("pointerdown",this.onTouchStart,!0),document.removeEventListener("pointermove",this.onPointerMove,!0),document.removeEventListener("pointerup",this.onPointerUp,!0)):P&&(document.removeEventListener("MSPointerDown",this.onTouchStart,!0),document.removeEventListener("MSPointerMove",this.onPointerMove,!0),document.removeEventListener("MSPointerUp",this.onPointerUp,!0)),this.allowHtmlDrag&&(document.removeEventListener("dragstart",this.onDragStart,!0),document.removeEventListener("dragend",this.onDragEnd,!0)),this.trigger("listenersRemoved")}},{key:"sendUpdateEvent",value:function(t){this.started?this.trigger("update",t):this.startGesture()}},{key:"startGesture",value:function(){var t=!1,e=this.touchDragMinOffset,n=this.mouseDragMinOffset;if(this.touches.each(function(r){t|=Math.abs(r.offset.length())>("mouse"===r.id?n:e)}),this.mobileScroll&&1===this.touches.length){var r=this.touches.at(0);"mouse"!==r.id&&Math.abs(r.offset.top)>this.scrollDragMinOffset&&(t=!1,r.ended=!0,this.updateAfterTouchEnded())}t&&(this.started=!0,this.trigger("start"))}},{key:"handlePointerEnd",value:function(t,e){if(t.pointerType!==M){var n=this.touches.get(t.pointerId);n&&(n.ended=!0),this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault()),this.updateAfterTouchEnded(e)}}},{key:"handleTouchEnd",value:function(t,e){for(var n={},r=0,i=t.touches.length;r<i;r++){var o=t.touches[r];n[o.identifier]=!0}var a=!1;this.touches.each(function(t){n[t.touchId]||(t.ended=!0,a=!0)}),a&&(this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault()),this.updateAfterTouchEnded(e))}},{key:"updateAfterTouchEnded",value:function(t){if(!t&&!this.started&&1===this.touches.length){var e=this.touches.at(0);e&&e.ended&&this.trigger("click",e)}this.touches.remove(function(t){return t.ended}),this.touches.length?this.trigger("gestureChange"):(this.started&&!t&&this.trigger("end"),this.reset())}},{key:"resetStartOffsets",value:function(){this.touches.each(function(t){return t.resetOffset()}),this.started=!1}},{key:"reset",value:function(){this.preventDefault=!0,this.usingMouse=!1,this.started=!1,this.removeListeners(),this.trigger("reset")}},{key:"dispose",value:function(){this.reset(),(0,f.default)(e.prototype.__proto__||(0,s.default)(e.prototype),"dispose",this).call(this)}},{key:"computePreventDefault",get:function(){return this.preventDefault&&(!this.mobileScroll||this.started||this.usingMouse)}}],[{key:"isAnyAncestorDraggable",value:function(t){for(;!t.draggable&&(t=t.parentElement););return!!t}}]),e}(o);$=(0,_.default)($,{properties:[{name:"listening",decorators:[(0,g.default)()],init:function(){return!1}},{name:"onTouchStart",decorators:[(0,m.default)()],fn:function(t,e){var n=t.originalEvent||t;"mousedown"===n.type&&(this.usingMouse=!0,this.touches.get("mouse")&&this.onMouseUp(t));var r=this.allowHtmlDrag&&$.isAnyAncestorDraggable(t.target);if(!i(n)&&this.inputEnabled(n)&&!r){var o=!!this.touches.length;this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault()),this.createTouchModels(n,e||t.model),o||(this.addListeners(),this.trigger("wait")),o&&this.started&&this.trigger("gestureChange")}}},{name:"onPointerMove",decorators:[(0,m.default)()],fn:function(t){if(t.pointerType!==M){var e=this.touches.get(t.pointerId);e&&e.update(t,t),this.sendUpdateEvent(t),this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault())}}},{name:"onMouseMove",decorators:[(0,m.default)()],fn:function(t){if(!this.allowHtmlDrag||!$.isAnyAncestorDraggable(t.target)){var e=this.touches.get("mouse");e&&e.update(t,t),this.sendUpdateEvent(t),this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault())}}},{name:"onTouchMove",decorators:[(0,m.default)()],fn:function(t){for(var e=0,n=t.changedTouches.length;e<n;e++){var r=t.changedTouches[e],i=this.touches.get(r.identifier);i&&i.update(r,t)}this.sendUpdateEvent(t),this.computePreventDefault&&(t.stopImmediatePropagation(),t.preventDefault())}},{name:"onPointerCancel",decorators:[(0,m.default)()],fn:function(t){this.handlePointerEnd(t,!0)}},{name:"onPointerUp",decorators:[(0,m.default)()],fn:function(t){this.handlePointerEnd(t,!1)}},{name:"onMouseUp",decorators:[(0,m.default)()],fn:function(){var t=this.touches.get("mouse");t&&(t.ended=!0),this.updateAfterTouchEnded()}},{name:"onTouchCancel",decorators:[(0,m.default)()],fn:function(t){this.handleTouchEnd(t,!0)}},{name:"onTouchEnd",decorators:[(0,m.default)()],fn:function(t){this.handleTouchEnd(t,!1)}},{name:"onDragStart",decorators:[(0,m.default)()],fn:function(){this.listening&&this.allowHtmlDrag&&document.removeEventListener("mousemove",this.onMouseMove,!0)}},{name:"onDragEnd",decorators:[(0,m.default)()],fn:function(){this.listening&&this.allowHtmlDrag&&document.addEventListener("mousemove",this.onMouseMove,!0)}}]}),e.default=$},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=n(858),c=function(){function t(){(0,o.default)(this,t),this.left=0,this.top=0}return(0,s.default)(t,[{key:"set",value:function(t,e){return 2===arguments.length?(this.left=t,this.top=e):(this.left=t.left,this.top=t.top),this}},{key:"clone",value:function(){return t.wrap(this)}},{key:"equals",value:function(t){return(0,u.almostEqual)(this.left,t.left)&&(0,u.almostEqual)(this.top,t.top)}},{key:"isZero",value:function(){return(0,u.almostEqual)(this.left,0)&&(0,u.almostEqual)(this.top,0)}},{key:"moveToZero",value:function(){return this.left=0,this.top=0,this}},{key:"scale",value:function(t){return this.left*=t,this.top*=t,this}},{key:"scaleAndMove",value:function(t,e){return this.left+=t.left*e,this.top+=t.top*e,this}},{key:"subtract",value:function(t){return this.left-=t.left,this.top-=t.top,this}},{key:"subtractFrom",value:function(t){return this.left=t.left-this.left,this.top=t.top-this.top,this}},{key:"dot",value:function(t){return this.left*t.left+this.top*t.top}},{key:"angle",value:function(t){var e=this.length()*t.length();return e?Math.acos(Math.min(1,Math.max(-1,this.dot(t)/e))):0}},{key:"signedAngle",value:function(t){return Math.atan2(t.top,t.left)-Math.atan2(this.top,this.left)}},{key:"axisAngle",value:function(t){return Math.atan2(this.left-t.left,this.top-t.top)}},{key:"length",value:function(){return Math.sqrt(this.left*this.left+this.top*this.top)}},{key:"distance",value:function(t){var e=this.left-t.left,n=this.top-t.top;return Math.sqrt(e*e+n*n)}},{key:"normalize",value:function(t){var e=this.length();return e?this.scale(1/e*(void 0!==t?t:1)):this}},{key:"setMaximumLength",value:function(t){var e=this.length();return e>t?this.scale(1/e*t):this}},{key:"move",value:function(t){return this.left+=t.left,this.top+=t.top,this}},{key:"moveBy",value:function(t,e){return this.left+=t,this.top+=e,this}},{key:"rotate",value:function(t){var e=this.left,n=this.top,r=t/180*Math.PI,i=Math.sin(r),o=Math.cos(r);return this.left=e*o-n*i,this.top=e*i+n*o,this}},{key:"project",value:function(t){var e=this.dot(t)/t.dot(t);return this.left=t.left*e,this.top=t.top*e,this}},{key:"roundToIntegers",value:function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this}},{key:"toSVGPoint",value:function(t){if(t){var e=t.apply(this);return(0,u.cssRound)(e.left)+" "+(0,u.cssRound)(e.top)}return(0,u.cssRound)(this.left)+" "+(0,u.cssRound)(this.top)}},{key:"id",value:function(){return this._uniqueId||(this._uniqueId=++t.uniqueId),this._uniqueId}},{key:"x",get:function(){return this.left}},{key:"y",get:function(){return this.top}}],[{key:"fromPixi",value:function(e){var n=new t;return n.left=e.x,n.top=e.y,n}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new t;return r.left=e,r.top=n,r}},{key:"wrap",value:function(e){var n=new t;return n.set(e),n}},{key:"createList",value:function(){return t.createFromList(arguments)}},{key:"createFromList",value:function(e){for(var n=[],r=0;r<e.length;r+=2)n.push(t.create(e[r],e[r+1]));return n}},{key:"wrapList",value:function(e){for(var n=[],r=0;r<e.length;++r)n.push(t.wrap(e[r]));return n}}]),t}();c.uniqueId=0,e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(8),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(22),b=r(g),A=n(7),w=r(A),E=n(76),C=r(E),S=n(45),k=r(S),L=n(98),T=r(L),x=n(77),R=r(x);i=T.default;var O=function(t){function e(){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"start",value:function(){this.startedAt=this.now=(0,R.default)(),this.active||(this.active=!0,this.enqueue())}},{key:"dispose",value:function(){this.stop(),(0,p.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"dispose",this).call(this)}},{key:"stop",value:function(){this.active=!1}},{key:"dt",get:function(){return this.now-this.startedAt}}]),e}(i);O=(0,y.default)(O,{properties:[{name:"active",decorators:[(0,w.default)()],init:function(){return!1}},{name:"startedAt",decorators:[(0,w.default)()],init:function(){return 0}},{name:"now",decorators:[(0,w.default)()],init:function(){return 0}},{name:"enqueue",decorators:[(0,b.default)()],fn:function(){C.default.push(this.run)}},{name:"run",decorators:[(0,b.default)()],fn:function(){this.now=(0,R.default)(),this.active&&(k.default.trigger(this,"tick"),this.active?C.default.after.push(this.enqueue):k.default.trigger(this,"end"))}}]}),e.default=O},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n(125),o=n(879),a=n(880),s=n(881),u=n(882),c=n(883);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==s||e==u||e==a||e==c}var i=n(86),o=n(107),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(43))},function(t,e){function n(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t,e,n,a,s){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!==t&&e!==e:i(t,e,n,a,r,s))}var i=n(902),o=n(87);t.exports=r},function(t,e,n){function r(t,e,n,r,c,l){var f=n&s,h=t.length,d=e.length;if(h!=d&&!(f&&d>h))return!1;var p=l.get(t);if(p&&l.get(e))return p==e;var _=-1,v=!0,m=n&u?new i:void 0;for(l.set(t,e),l.set(e,t);++_<h;){var y=t[_],g=e[_];if(r)var b=f?r(g,y,_,e,t,l):r(y,g,_,t,e,l);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,function(t,e){if(!a(m,e)&&(y===t||c(y,t,n,r,l)))return m.push(e)})){v=!1;break}}else if(y!==g&&!c(y,g,n,r,l)){v=!1;break}}return l.delete(t),l.delete(e),v}var i=n(903),o=n(249),a=n(906),s=1,u=2;t.exports=r},function(t,e,n){var r=n(920),i=n(87),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(50),i=n(921),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;t.exports=l}).call(e,n(6)(t))},function(t,e,n){var r=n(922),i=n(923),o=n(924),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e,n){function r(t){return t===t&&!i(t)}var i=n(107);t.exports=r},function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},function(t,e,n){function r(t,e){e=i(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}var i=n(262),o=n(130);t.exports=r},function(t,e,n){function r(t,e){return i(t)?t:o(t,e)?[t]:a(s(t))}var i=n(47),o=n(174),a=n(937),s=n(263);t.exports=r},function(t,e,n){function r(t){return null==t?"":i(t)}var i=n(940);t.exports=r},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){var r=n(949),i=n(952),o=i(r);t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(38),m=r(v),y=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,_.default)(e,t),(0,c.default)(e,[{key:"setChildNeedsLayout",value:function(){this.childNeedsLayout=!0,this.setNeedsLayout()}},{key:"layoutAttributes",value:function(){for(var t=this,e=function(){return t.setChildNeedsLayout()},n=0,r=arguments.length;n<r;n++)this.watch(arguments[n],e)}},{key:"willInsertBefore",value:function(t,n){(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"willInsertBefore",this).call(this,t,n),this.setChildNeedsLayout()}},{key:"layout",value:function(t,e,n,r){if(this.needsLayout(n,r))return this.left=t,this.top=e,void this.updateLayout(n,r);var i=t-this.left,o=e-this.top;(i||o)&&this.updatePosition(i,o)}},{key:"updatePosition",value:function(t,n){(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"updatePosition",this).call(this,t,n),this.forEach(function(e){return e.updatePosition(t,n)})}},{key:"needsLayout",value:function(t,n){return this.childNeedsLayout||(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"needsLayout",this).call(this,t,n)}},{key:"updateLayout",value:function(){this.childNeedsLayout=!1}},{key:"collect",value:function(t){return!!this.inViewport(t)&&(t.addItem(this),this.forEach(function(e){return e.collect(t)}),!0)}},{key:"resolveBookmark",value:function(t){return!!(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"resolveBookmark",this).call(this,t)||this.any(function(e){return e.resolveBookmark(t)})}}]),e}(m.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(25),g=r(y),b=n(266),A=r(b),w=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return t.layoutAttributes(function(){return t.margin}),t}return(0,_.default)(e,t),(0,c.default)(e,[{key:"needsLayout",value:function(t,e){return this.childNeedsLayout||("horizontal"===this.direction?this.height!==e:this.width!==t)}},{key:"updatePosition",value:function(t,n){(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"updatePosition",this).call(this,t,n);var r=this.paginatedList;r&&(r.offset+="horizontal"===this.direction?t:n)}},{key:"collect",value:function(t){var e=this.paginatedList;if(!e)return!1;if(!this.inViewport(t))return!1;t.addItem(this);var n,r;return"horizontal"===this.direction?(n=t.left,r=t.right):(n=t.top,r=t.bottom),e.query(n,r,function(e){return e.collect(t)}),!0}}]),e}(A.default);w=(0,m.default)(w,{properties:[{name:"margin",decorators:[(0,g.default)()],init:function(){return 0}}]}),e.default=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return Math.floor(t/l)}function o(t){return Math.ceil(t/l)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=r(a),u=n(1),c=r(u),l=1e3,f=function(){function t(){(0,s.default)(this,t),this.pages={},this.offset=0}return(0,c.default)(t,[{key:"add",value:function(t,e,n){for(var r=this.pages,a=i(e),s=a,u=o(n);s<=u;++s){var c=r[s];c||(r[s]=c=[]),c.push({initial:a,value:t})}}},{key:"query",value:function(t,e,n){for(var r=this.offset,a=i(t-r),s=a,u=o(e-r);s<=u;++s){var c=this.pages[s];if(c)for(var l=0,f=c.length;l<f;++l){var h=c[l];s!==a&&h.initial!==s||n(h.value)}}}}]),t}();e.default=f},,,,,function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return"translate3D("+t+"px, "+e+"px, 0)"}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(4),p=r(d),_=n(5),v=r(_),m=n(25),y=r(m),g=n(9),b=r(g),A=n(18),w=r(A),E=n(10),C=r(E),S=n(983),k=r(S),L=function(t){function e(){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,l.default)(e,[{key:"itemAttributes",get:function(){var t=this;return{class:k.default.virtualScrollItem,"style-transform":function(){var e=t.virtualItem;return e?e.fixed?i(e.fixedLeft,e.fixedTop):i(e.left,e.top):null},"style-visibility":function(){return t.virtualItem?"visible":"hidden"},"style-width":function(){var e=t.virtualItem;return e?e.width+"px":null},"style-height":function(){var e=t.virtualItem;return e?e.height+"px":null}}}}]),e}(w.default);L=(0,v.default)(L,{decorators:[(0,b.default)((0,C.default)(null),t,"VirtualItemView")],properties:[{name:"virtualItem",decorators:[(0,y.default)()],kind:"property"}]}),e.default=L}).call(e,n(6)(t))},,,,,function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(281),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},,,function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,s(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(l)setTimeout(a,0,t);else{var e=c[t];if(e){l=!0;try{o(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var n=f.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(a,0,t)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(43),n(131))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(4),p=r(d),_=n(5),v=r(_),m=n(22),y=r(m);i=r(n(116)).default;var g=function(t){function e(){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,l.default)(e,[{key:"register",value:function(){if("loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",this.exec);setTimeout(this.run,0)}}]),e}(i);g=(0,v.default)(g,{properties:[{name:"exec",decorators:[(0,y.default)()],fn:function(){this.run()}}]}),e.default=new g},function(t,e,n){n(284),t.exports=n(16).Object.getPrototypeOf},function(t,e,n){var r=n(69),i=n(183);n(90)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(20);r(r.S+r.F*!n(41),"Object",{defineProperty:n(39).f})},function(t,e,n){n(64),n(72),t.exports=n(141).f("iterator")},function(t,e,n){var r=n(137),i=n(109);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(112),i=n(92),o=n(94),a={};n(52)(a,n(28)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(54),i=n(113),o=n(290);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(137),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(292),i=n(190),o=n(70),a=n(54);t.exports=n(138)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){n(294),n(115),n(296),n(297),t.exports=n(16).Symbol},function(t,e,n){"use strict";var r=n(26),i=n(63),o=n(41),a=n(20),s=n(186),u=n(114).KEY,c=n(53),l=n(133),f=n(94),h=n(110),d=n(28),p=n(141),_=n(142),v=n(295),m=n(192),y=n(44),g=n(54),b=n(135),A=n(92),w=n(112),E=n(193),C=n(144),S=n(39),k=n(71),L=C.f,T=S.f,x=E.f,R=r.Symbol,O=r.JSON,I=O&&O.stringify,D=d("_hidden"),N=d("toPrimitive"),P={}.propertyIsEnumerable,M=l("symbol-registry"),j=l("symbols"),B=l("op-symbols"),F=Object.prototype,U="function"==typeof R,$=r.QObject,V=!$||!$.prototype||!$.prototype.findChild,H=o&&c(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=L(F,e);r&&delete F[e],T(t,e,n),r&&t!==F&&T(F,e,r)}:T,z=function(t){var e=j[t]=w(R.prototype);return e._k=t,e},Y=U&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},W=function(t,e,n){return t===F&&W(B,e,n),y(t),e=b(e,!0),y(n),i(j,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=w(n,{enumerable:A(0,!1)})):(i(t,D)||T(t,D,A(1,{})),t[D][e]=!0),H(t,e,n)):T(t,e,n)},q=function(t,e){y(t);for(var n,r=v(e=g(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},X=function(t,e){return void 0===e?w(t):q(w(t),e)},G=function(t){var e=P.call(this,t=b(t,!0));return!(this===F&&i(j,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(j,t)||i(this,D)&&this[D][t])||e)},K=function(t,e){if(t=g(t),e=b(e,!0),t!==F||!i(j,e)||i(B,e)){var n=L(t,e);return!n||!i(j,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=x(g(t)),r=[],o=0;n.length>o;)i(j,e=n[o++])||e==D||e==u||r.push(e);return r},Q=function(t){for(var e,n=t===F,r=x(n?B:g(t)),o=[],a=0;r.length>a;)!i(j,e=r[a++])||n&&!i(F,e)||o.push(j[e]);return o};U||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===F&&e.call(B,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),H(this,t,A(1,n))};return o&&V&&H(F,t,{configurable:!0,set:e}),z(t)},s(R.prototype,"toString",function(){return this._k}),C.f=K,S.f=W,n(194).f=E.f=J,n(95).f=G,n(143).f=Q,o&&!n(111)&&s(F,"propertyIsEnumerable",G,!0),p.f=function(t){return z(d(t))}),a(a.G+a.W+a.F*!U,{Symbol:R});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)d(Z[tt++]);for(var et=k(d.store),nt=0;et.length>nt;)_(et[nt++]);a(a.S+a.F*!U,"Symbol",{for:function(t){return i(M,t+="")?M[t]:M[t]=R(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in M)if(M[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!U,"Object",{create:X,defineProperty:W,defineProperties:q,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),O&&a(a.S+a.F*(!U||c(function(){var t=R();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,I.apply(O,r)}}}),R.prototype[N]||n(52)(R.prototype,N,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(71),i=n(143),o=n(95);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){n(142)("asyncIterator")},function(t,e,n){n(142)("observable")},function(t,e,n){t.exports={default:n(299),__esModule:!0}},function(t,e,n){n(300);var r=n(16).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(20);r(r.S,"Object",{create:n(112)})},function(t,e,n){t.exports={default:n(302),__esModule:!0}},function(t,e,n){n(303),t.exports=n(16).Object.setPrototypeOf},function(t,e,n){var r=n(20);r(r.S,"Object",{setPrototypeOf:n(304).set})},function(t,e,n){var r=n(40),i=n(44),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(48)(Function.call,n(144).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(306),o=r(i),a=n(307),s=r(a),u=n(309),c=r(u);e.default=function(t,e){for(var n=(0,c.default)(e),r=0;r<n.length;r++){var i=n[r],a=(0,s.default)(e,i);a&&a.configurable&&void 0===t[i]&&(0,o.default)(t,i,a)}return t}},function(t,e,n){t.exports={default:n(185),__esModule:!0}},function(t,e,n){t.exports={default:n(195),__esModule:!0}},function(t,e,n){var r=n(54),i=n(144).f;n(90)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){t.exports={default:n(196),__esModule:!0}},function(t,e,n){n(90)("getOwnPropertyNames",function(){return n(193).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=function(){function t(e,n,r){var i=n.name,o=n.init,a=n.fn,u=n.kind;(0,s.default)(this,t),this.descriptor=null,this.ref=e,this.classObject=r,this.name=i,this.fn=a,this.init=o,this.kind=o?"property":u||"method"}return(0,c.default)(t,[{key:"define",value:function(t){this.descriptor=t}},{key:"isDefined",value:function(){return!!this.descriptor}},{key:"getSuper",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name;return this.ref[t]}},{key:"throwError",value:function(t){throw new Error(t+" - "+this.className+"."+this.name+".")}},{key:"getValue",value:function(){var t=this.descriptor;return t&&t.get&&this.throwError("Another decorator has already added a getter. Please revise the order of the decorators."),t&&t.value||this.fn}},{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.define({configurable:n,enumerable:e,value:t})}},{key:"setWritableValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.define({configurable:n,enumerable:e,value:t,writable:!0})}},{key:"setDefaultValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.define({configurable:e,enumerable:t,value:this.getValue()})}},{key:"getDefaultValue",value:function(){var t=this.init;return t?t():void 0}},{key:"setGetter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.define({configurable:n,enumerable:e,get:t})}},{key:"finish",value:function(){this.descriptor&&(0,o.default)(this.ref,this.name,this.descriptor)}},{key:"add",value:function(t,e){(0,o.default)(this.ref,t,e)}},{key:"className",get:function(){return this.classObject.constructor.name}}],[{key:"applyDecorators",value:function(e,n){var r=e.constructor,i=n.static?r:e,o=new t(i,n,r),a=n.decorators;if(a)for(var s=0,u=a.length;s<u;++s)a[s](o);o.finish()}}]),t}();e.default=l},function(t,e,n){n(72),n(64),t.exports=n(313)},function(t,e,n){var r=n(44),i=n(145);t.exports=n(16).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){t.exports={default:n(315),__esModule:!0}},function(t,e,n){n(72),n(64),t.exports=n(316)},function(t,e,n){var r=n(117),i=n(28)("iterator"),o=n(70);t.exports=n(16).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){var r=n(16),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},o.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var r=new i(e,n||this),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,i){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new r:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,t.exports=o},,function(t,e,n){t.exports={default:n(321),__esModule:!0}},function(t,e,n){n(322),t.exports=n(16).Object.entries},function(t,e,n){var r=n(20),i=n(323)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){var r=n(71),i=n(54),o=n(95).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){n(115),n(64),n(72),n(325),n(329),n(331),n(332),t.exports=n(16).Set},function(t,e,n){"use strict";var r=n(198),i=n(152);t.exports=n(202)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){var r=n(48),i=n(139),o=n(69),a=n(113),s=n(327);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,d=e||s;return function(e,s,p){for(var _,v,m=o(e),y=i(m),g=r(s,p,3),b=a(y.length),A=0,w=n?d(e,b):u?d(e,0):void 0;b>A;A++)if((h||A in y)&&(_=y[A],v=g(_,A,m),t))if(n)w[A]=v;else if(v)switch(t){case 3:return!0;case 5:return _;case 6:return A;case 2:w.push(_)}else if(l)return!1;return f?-1:c||l?l:w}}},function(t,e,n){var r=n(328);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(40),i=n(192),o=n(28)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(20);r(r.P+r.R,"Set",{toJSON:n(203)("Set")})},function(t,e,n){var r=n(97);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(204)("Set")},function(t,e,n){n(205)("Set")},function(t,e,n){t.exports={default:n(195),__esModule:!0}},function(t,e,n){n(115),n(64),n(72),n(335),n(336),n(337),n(338),t.exports=n(16).Map},function(t,e,n){"use strict";var r=n(198),i=n(152);t.exports=n(202)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){var r=n(20);r(r.P+r.R,"Map",{toJSON:n(203)("Map")})},function(t,e,n){n(204)("Map")},function(t,e,n){n(205)("Map")},,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(8),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(73),b=r(g),A=n(206),w=r(A),E=n(27),C=r(E),S=n(354),k=r(S),L=n(155),T=r(L);i=C.default;var x=function(t){function e(t){(0,u.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,a.default)(e)).call(this)),r=n.scope=n.link(new k.default),i=t||T.default;return n.factory=new i(r),n}return(0,v.default)(e,t),(0,l.default)(e,[{key:"start",value:function(t,e,n){this.factory.parentNode=t,this.factory.nextNode=e,n&&(this.factory.scope=n);var r=this.render();this.view=this.factory.renderContent(null,r),this.attached()}},{key:"dispose",value:function(){this.view&&(this.detached(),this.factory.cacheContent(this.view),this.view=null),this.factory=null,(0,p.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"dispose",this).call(this)}},{key:"attached",value:function(){}},{key:"detached",value:function(){}}]),e}(i);x=(0,y.default)(x,{properties:[{name:"instance",decorators:[(0,w.default)()],static:!0,kind:"get",fn:function(){return new this}},{name:"render",decorators:[(0,b.default)()],fn:function(){}}]}),e.default=x},function(t,e,n){n(343),t.exports=n(16).Object.assign},function(t,e,n){var r=n(20);r(r.S+r.F,"Object",{assign:n(344)})},function(t,e,n){"use strict";var r=n(71),i=n(143),o=n(95),a=n(69),s=n(139),u=Object.assign;t.exports=!u||n(53)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),_=p.length,v=0;_>v;)f.call(d,h=p[v++])&&(n[h]=d[h]);return n}:u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(e&&e instanceof a.default){var n=e._torq_binding;return n||(n=e._torq_binding={resolved:!1,value:void 0},n.obj=n,e.then(function(t){n.resolved=!0,n.value=t,u.default.trigger(n,"update")})),n.resolved||t.push({eventName:"update",obj:n}),n}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(99),a=r(o);e.default=i;var s=n(45),u=r(s)},function(t,e,n){n(115),n(64),n(72),n(347),n(350),n(351),t.exports=n(16).Promise},function(t,e,n){"use strict";var r,i,o,a,s=n(111),u=n(26),c=n(48),l=n(117),f=n(20),h=n(40),d=n(91),p=n(151),_=n(97),v=n(209),m=n(210).set,y=n(349)(),g=n(153),b=n(211),A=n(212),w=u.TypeError,E=u.process,C=u.Promise,S="process"==l(E),k=function(){},L=i=g.f,T=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(28)("species")]=function(t){t(k,k)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e}catch(t){}}(),x=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&D(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(w("Promise-chain cycle")):(o=x(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){m.call(u,function(){var e,n,r,i=t._v,o=I(t);if(o&&(e=b(function(){S?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=S||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},I=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!I(e.promise))return!1;return!0},D=function(t){m.call(u,function(){var e;S?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},P=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw w("Promise can't be resolved itself");(e=x(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(P,r,1),c(N,r,1))}catch(t){N.call(r,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};T||(C=function(t){p(this,C,"Promise","_h"),d(t),r.call(this);try{t(c(P,this,1),c(N,this,1))}catch(t){N.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(150)(C.prototype,{then:function(t,e){var n=L(v(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=S?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(P,t,1),this.reject=c(N,t,1)},g.f=L=function(t){return t===C||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!T,{Promise:C}),n(94)(C,"Promise"),n(201)("Promise"),a=n(16).Promise,f(f.S+f.F*!T,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!T),"Promise",{resolve:function(t){return A(s&&this===a?C:this,t)}}),f(f.S+f.F*!(T&&n(213)(function(t){C.all(t).catch(k)})),"Promise",{all:function(t){var e=this,n=L(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;_(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=L(e),r=n.reject,i=b(function(){_(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(26),i=n(210).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(93)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(20),i=n(16),o=n(26),a=n(209),s=n(212);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(20),i=n(153),o=n(211);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(4),p=r(d),_=n(5),v=r(_),m=n(22),y=r(m);i=r(n(116)).default;var g=function(t){function e(t,n,r){(0,u.default)(this,e);var i=(0,h.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return i.parent=t,i.name=n,i.priority=r,i}return(0,p.default)(e,t),(0,l.default)(e,[{key:"register",value:function(t){t?this.parent.after.push(this.enqueue):this.enqueue()}}]),e}(i);g=(0,v.default)(g,{properties:[{name:"enqueue",decorators:[(0,y.default)()],fn:function(){this.parent.push(this.run,this.priority)}}]}),e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(36),a=r(o),s=n(2),u=r(s),c=n(0),l=r(c),f=n(1),h=r(f),d=n(3),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(22),b=r(g),A=n(119),w=r(A),E=n(55),C=r(E),S=n(45),k=r(S);i=C.default;var L=function(t){function e(){return(0,l.default)(this,e),(0,p.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,h.default)(e,[{key:"update",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.previousValue;return n===t?!!this.lengthChanged&&(this.lengthChanged=!1,e&&this.invokeCallback(t),!0):(n===this.FirstExecutionMarker?this.previousValue=t:n&&"object"===(void 0===n?"undefined":(0,a.default)(n))&&k.default.stopListening(this,n),this.lengthChanged=!1,t&&"object"===(void 0===t?"undefined":(0,a.default)(t))&&k.default.listenTo(this,t,"change",this.onLengthChanged),e&&this.invokeCallback(t),!0)}},{key:"invokeCallback",value:function(t){if(t instanceof w.default)return void this.callback(t.base);this.callback(t)}}]),e}(i);L=(0,y.default)(L,{properties:[{name:"onLengthChanged",decorators:[(0,b.default)()],fn:function(){this.lengthChanged=!0,this.invalidate()}}]}),e.default=L},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(4),d=r(h),p=n(27),_=r(p),v=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,d.default)(e,t),(0,c.default)(e,[{key:"fork",value:function(){var t=function(){};return t.prototype=this,this.link(new t(this))}},{key:"clean",value:function(){for(var t in this)this.hasOwnProperty(t)&&"_"!==t[0]&&delete this[t]}}]),e}(_.default);e.default=v},function(t,e,n){"use strict";function r(t,e,n,r,i){return i?(r||(t.addEventListener("change",i,!1),t.addEventListener("keyup",i,!1),t.addEventListener("input",i,!1),t.addEventListener("blur",i,!1),r=a),t._TorqUpdate=!0,r.update(t,void 0!==n&&n),t._TorqUpdate=!1,r):void(t.checked=!!n)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(156),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a={update:function(t,e){t.checked=Boolean(e)},read:function(t){return t.checked},onEvent:o.default}},function(t,e,n){"use strict";function r(t,e,n,r){if(!n)return(0,s.replaceClassNames)(t,r,null);if("string"==typeof n){if(-1===n.indexOf(" "))return(0,s.replaceSingleClassName)(t,r,n);n=n.trim().split(/\s+/)}else if(n instanceof Array)n=i(n);else if("object"===(void 0===n?"undefined":(0,a.default)(n))){var o=[];for(var u in n){var c=n[u];c&&o.push(u.split(" "))}n=i(o)}return(0,s.replaceClassNames)(t,r,n)}function i(t){for(var e=[],n=0,r=t.length;n<r;++n){var i=t[n];if(i instanceof Array)for(var o=0,a=i.length;o<a;++o)i[o]&&e.push(i[o]);else i&&e.push(i)}return e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),a=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=r;var s=n(217)},function(t,e,n){n(64),n(358),t.exports=n(16).Array.from},function(t,e,n){"use strict";var r=n(48),i=n(20),o=n(69),a=n(199),s=n(200),u=n(113),c=n(359),l=n(145);i(i.S+i.F*!n(213)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),d="function"==typeof this?this:Array,p=arguments.length,_=p>1?arguments[1]:void 0,v=void 0!==_,m=0,y=l(h);if(v&&(_=r(_,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(h.length),n=new d(e);e>m;m++)c(n,m,v?_(h[m],m):h[m]);else for(f=y.call(h),n=new d;!(i=f.next()).done;m++)c(n,m,v?a(f,_,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(39),i=n(92);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(217);e.default={make:function(t){return function(e,n,i){i?(0,r.addClass)(e,t):(0,r.removeClass)(e,t)}}}},function(t,e,n){"use strict";function r(t,e,n,r,i){return i?(r||(t.addEventListener("change",i,!1),t.addEventListener("keyup",i,!1),t.addEventListener("input",i,!1),t.addEventListener("blur",i,!1),r=a),t._TorqUpdate=!0,r.update(t,n),t._TorqUpdate=!1,r):void t.setAttribute(e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(156),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a={update:function(t,e){t.indeterminate=Boolean(e)},read:function(t){return t.indeterminate},onEvent:o.default}},function(t,e,n){"use strict";function r(t,e,n,r){return n&&"string"!=typeof n?(r&&("string"==typeof r?t.setAttribute("style",""):(0,i.unsetStyles)(t,r)),(0,i.setStyles)(t,n)):t.setAttribute("style",n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(218)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=function(){function t(e){(0,o.default)(this,t),this.map={},this.transform=e}return(0,s.default)(t,[{key:"get",value:function(t){var e=this.map;return e.hasOwnProperty(t)?e[t]:e[t]=this.transform(t)}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(219);e.default={make:function(t){var e=(0,r.transformPropertyName)(t),n=(0,r.valueTransformerForProperty)(t);return n?function(t,r,i){t.style[e]=n(i)}:function(t,n,r){t.style[e]=void 0===r||null===r?"":r}}}},function(t,e,n){"use strict";function r(t,e,n){t.textContent=n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e,n){n?t.setAttribute(e,e):t.removeAttribute(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.options.length;n<r;n++){var i=t.options[n];if(i.value===e){i.selected=!0;break}}}function i(t,e,n,r,i){if(!i)return void t.setAttribute(e,n);if(!r)if(t.addEventListener("change",i,!1),t.addEventListener("keyup",i,!1),t.addEventListener("input",i,!1),t.addEventListener("blur",i,!1),"inherit"!==t.contentEditable)r=c;else switch(t.getAttribute("type")){case"number":case"range":r=s;break;default:r=u}return t._TorqUpdate=!0,r.update(t,n),t._TorqUpdate=!1,r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(156),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s={update:function(t,e){var n=parseFloat(e,10);isNaN(n)&&(n=""),t.value!==n&&(t.value=n)},read:function(t){return parseFloat(t.value,10)},onEvent:a.default},u={update:function(t,e){var n=void 0===e?"":e;if(t.value!==n&&(t.value=n,"SELECT"===t.tagName&&t.value!==n))return void r(t,n)},read:function(t){return t.value},onEvent:a.default},c={update:function(t,e){var n=void 0===e?"":e;t.textContent!==n&&(t.textContent=n)},read:function(t){return t.textContent},onEvent:a.default}},,,function(t,e,n){"use strict";function r(t){t=Object(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach(function(e){if(null!==e){e=Object(e);for(var n in e){var r=t[n];(void 0===r||r===i[n]&&!o.call(t,n))&&(t[n]=e[n])}}}),t}var i=Object.prototype,o=i.hasOwnProperty;t.exports={defaults:r}},function(t,e,n){"use strict";function r(t){return(t||"")+ ++i}var i=0;t.exports=r},,,function(t,e,n){n(375),t.exports=n(16).Object.freeze},function(t,e,n){var r=n(40),i=n(114).onFreeze;n(90)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){n(377);var r=n(16).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},function(t,e,n){var r=n(20);r(r.S+r.F*!n(41),"Object",{defineProperties:n(187)})},function(t,e,n){n(379),t.exports=n(16).Object.keys},function(t,e,n){var r=n(69),i=n(71);n(90)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(381),t.exports=n(16).Number.isFinite},function(t,e,n){var r=n(20),i=n(26).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return"object"===(void 0===n?"undefined":(0,a.default)(n))&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),(0,u.default)(t,e,{leading:r,maxWait:e,trailing:i})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(36),a=r(o);e.default=i;var s=n(223),u=r(s)},,,,,function(t,e,n){t.exports={default:n(391),__esModule:!0}},function(t,e,n){n(392),t.exports=n(16).Number.isNaN},function(t,e,n){var r=n(20);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){t.exports={default:n(394),__esModule:!0}},function(t,e,n){n(395),t.exports=parseInt},function(t,e,n){var r=n(20),i=n(396);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(26).parseInt,i=n(397).trim,o=n(228),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(20),i=n(109),o=n(53),a=n(228),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(t,e,n){var i={},s=o(function(){return!!a[t]()||u[t]()!=u}),c=i[t]=s?e(h):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},h=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r,r;!function(e){t.exports=e()}(function(){return function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof r&&r;if(!u&&c)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n||t)},f,f.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){return r(this,t),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return i(t,[{key:"limit",value:function(t){var e=this._max;return arguments.length>0&&(this._max=t,this._purge()),e}},{key:"dispose",value:function(t){return this._dispose=t,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(t,e){this.push(e)},[])}},{key:"values",value:function(){return this.each(function(t){this.push(t)},[])}},{key:"each",value:function(t,e){arguments<2&&(e=this);for(var n=0,r=this._MRU.older;r!==this._LRU;)t.call(e,r.val,r.key,n++),r=r.older;return e}},{key:"has",value:function(t){return void 0!==this._index[t]}},{key:"peek",value:function(t){var e=this._index[t];if(void 0!==e)return e.expires<Date.now()?void this.del(e.key):e.val}},{key:"touch",value:function(t){var e=this._index[t];if(void 0===e)throw new Error("touch: no such item");return this._promote(e),this}},{key:"get",value:function(t){var e=this._index[t];if(void 0!==e)return e.expires<Date.now()?void this.del(e.key):(this._promote(e),e.val)}},{key:"set",value:function(t,e,n){arguments.length<3&&(n=1/0),n+=Date.now();var r=this._index[t];if(void 0===r)r={older:null,newer:null,key:t,val:e,expires:n},this._index[t]=r,this._attach(r),this._cur++,this._purge();else{var i=r.val;r.val=e,this._promote(r),this._dispose.call(void 0,r.key,i,"set")}return this}},{key:"del",value:function(t){var e=this._index[t];if(void 0===e)throw new Error("del: no such item");return delete this._index[t],this._detach(e),this._cur--,this._dispose.call(void 0,t,e.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(t){this._detach(t),this._attach(t)}},{key:"_detach",value:function(t){t.older.newer=t.newer,t.newer.older=t.older,t.older=null,t.newer=null}},{key:"_attach",value:function(t){t.older=this._MRU.older,t.newer=this._MRU,t.newer.older=t,t.older.newer=t}}]),t}();e.exports=o},{}]},{},[1])(1)})},,,,,,,,,,,,,,function(t,e,n){(function(n){function r(t,e){if(t instanceof a)return t;if("string"!=typeof t)return null;if(t.length>K)return null;if(!(e?Q[_t]:Q[ht]).test(t))return null;try{return new a(t,e)}catch(t){return null}}function i(t,e){var n=r(t,e);return n?n.version:null}function o(t,e){var n=r(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}function a(t,e){if(t instanceof a){if(t.loose===e)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>K)throw new TypeError("version is longer than "+K+" characters");if(!(this instanceof a))return new a(t,e);G("SemVer",t,e),this.loose=e;var n=t.trim().match(e?Q[_t]:Q[ht]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>J||this.major<0)throw new TypeError("Invalid major version");if(this.minor>J||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>J||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<J)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}function s(t,e,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new a(t,n).inc(e,r).version}catch(t){return null}}function u(t,e){if(A(t,e))return null;var n=r(t),i=r(e);if(n.prerelease.length||i.prerelease.length){for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==i[o])return"pre"+o;return"prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==i[o])return o}function c(t,e){var n=Bt.test(t),r=Bt.test(e);return n&&r&&(t=+t,e=+e),n&&!r?-1:r&&!n?1:t<e?-1:t>e?1:0}function l(t,e){return c(e,t)}function f(t,e){return new a(t,e).major}function h(t,e){return new a(t,e).minor}function d(t,e){return new a(t,e).patch}function p(t,e,n){return new a(t,n).compare(new a(e,n))}function _(t,e){return p(t,e,!0)}function v(t,e,n){return p(e,t,n)}function m(t,n){return t.sort(function(t,r){return e.compare(t,r,n)})}function y(t,n){return t.sort(function(t,r){return e.rcompare(t,r,n)})}function g(t,e,n){return p(t,e,n)>0}function b(t,e,n){return p(t,e,n)<0}function A(t,e,n){return 0===p(t,e,n)}function w(t,e,n){return 0!==p(t,e,n)}function E(t,e,n){return p(t,e,n)>=0}function C(t,e,n){return p(t,e,n)<=0}function S(t,e,n,r){var i;switch(e){case"===":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),i=t===n;break;case"!==":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),i=t!==n;break;case"":case"=":case"==":i=A(t,n,r);break;case"!=":i=w(t,n,r);break;case">":i=g(t,n,r);break;case">=":i=E(t,n,r);break;case"<":i=b(t,n,r);break;case"<=":i=C(t,n,r);break;default:throw new TypeError("Invalid operator: "+e)}return i}function k(t,e){if(t instanceof k){if(t.loose===e)return t;t=t.value}if(!(this instanceof k))return new k(t,e);G("comparator",t,e),this.loose=e,this.parse(t),this.semver===Ft?this.value="":this.value=this.operator+this.semver.version,G("comp",this)}function L(t,e){if(t instanceof L)return t.loose===e?t:new L(t.raw,e);if(t instanceof k)return new L(t.value,e);if(!(this instanceof L))return new L(t,e);if(this.loose=e,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function T(t,e){return new L(t,e).set.map(function(t){return t.map(function(t){return t.value}).join(" ").trim().split(" ")})}function x(t,e){return G("comp",t),t=D(t,e),G("caret",t),t=O(t,e),G("tildes",t),t=P(t,e),G("xrange",t),t=j(t,e),G("stars",t),t}function R(t){return!t||"x"===t.toLowerCase()||"*"===t}function O(t,e){return t.trim().split(/\s+/).map(function(t){return I(t,e)}).join(" ")}function I(t,e){var n=e?Q[kt]:Q[St];return t.replace(n,function(e,n,r,i,o){G("tilde",t,e,n,r,i,o);var a;return R(n)?a="":R(r)?a=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?a=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":o?(G("replaceTilde pr",o),"-"!==o.charAt(0)&&(o="-"+o),a=">="+n+"."+r+"."+i+o+" <"+n+"."+(+r+1)+".0"):a=">="+n+"."+r+"."+i+" <"+n+"."+(+r+1)+".0",G("tilde return",a),a})}function D(t,e){return t.trim().split(/\s+/).map(function(t){return N(t,e)}).join(" ")}function N(t,e){G("caret",t,e);var n=e?Q[Rt]:Q[xt];return t.replace(n,function(e,n,r,i,o){G("caret",t,e,n,r,i,o);var a;return R(n)?a="":R(r)?a=">="+n+".0.0 <"+(+n+1)+".0.0":R(i)?a="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":o?(G("replaceCaret pr",o),"-"!==o.charAt(0)&&(o="-"+o),a="0"===n?"0"===r?">="+n+"."+r+"."+i+o+" <"+n+"."+r+"."+(+i+1):">="+n+"."+r+"."+i+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+i+o+" <"+(+n+1)+".0.0"):(G("no pr"),a="0"===n?"0"===r?">="+n+"."+r+"."+i+" <"+n+"."+r+"."+(+i+1):">="+n+"."+r+"."+i+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+i+" <"+(+n+1)+".0.0"),G("caret return",a),a})}function P(t,e){return G("replaceXRanges",t,e),t.split(/\s+/).map(function(t){return M(t,e)}).join(" ")}function M(t,e){t=t.trim();var n=e?Q[wt]:Q[At];return t.replace(n,function(e,n,r,i,o,a){G("xRange",t,e,n,r,i,o,a);var s=R(r),u=s||R(i),c=u||R(o),l=c;return"="===n&&l&&(n=""),s?e=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),c&&(o=0),">"===n?(n=">=",u?(r=+r+1,i=0,o=0):c&&(i=+i+1,o=0)):"<="===n&&(n="<",u?r=+r+1:i=+i+1),e=n+r+"."+i+"."+o):u?e=">="+r+".0.0 <"+(+r+1)+".0.0":c&&(e=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0"),G("xRange return",e),e})}function j(t,e){return G("replaceStars",t,e),t.trim().replace(Q[Mt],"")}function B(t,e,n,r,i,o,a,s,u,c,l,f,h){return e=R(n)?"":R(r)?">="+n+".0.0":R(i)?">="+n+"."+r+".0":">="+e,s=R(u)?"":R(c)?"<"+(+u+1)+".0.0":R(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+s,(e+" "+s).trim()}function F(t,e){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length){for(var n=0;n<t.length;n++)if(G(t[n].semver),t[n].semver!==Ft&&t[n].semver.prerelease.length>0){var r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}function U(t,e,n){try{e=new L(e,n)}catch(t){return!1}return e.test(t)}function $(t,e,n){var r=null,i=null;try{var o=new L(e,n)}catch(t){return null}return t.forEach(function(t){o.test(t)&&(r&&-1!==i.compare(t)||(r=t,i=new a(r,n)))}),r}function V(t,e,n){var r=null,i=null;try{var o=new L(e,n)}catch(t){return null}return t.forEach(function(t){o.test(t)&&(r&&1!==i.compare(t)||(r=t,i=new a(r,n)))}),r}function H(t,e){try{return new L(t,e).range||"*"}catch(t){return null}}function z(t,e,n){return W(t,e,"<",n)}function Y(t,e,n){return W(t,e,">",n)}function W(t,e,n,r){t=new a(t,r),e=new L(e,r);var i,o,s,u,c;switch(n){case">":i=g,o=C,s=b,u=">",c=">=";break;case"<":i=b,o=E,s=g,u="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(U(t,e,r))return!1;for(var l=0;l<e.set.length;++l){var f=e.set[l],h=null,d=null;if(f.forEach(function(t){t.semver===Ft&&(t=new k(">=0.0.0")),h=h||t,d=d||t,i(t.semver,h.semver,r)?h=t:s(t.semver,d.semver,r)&&(d=t)}),h.operator===u||h.operator===c)return!1;if((!d.operator||d.operator===u)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0}function q(t,e){var n=r(t,e);return n&&n.prerelease.length?n.prerelease:null}function X(t,e,n){return t=new L(t,n),e=new L(e,n),t.intersects(e)}e=t.exports=a;var G;G="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var K=256,J=Number.MAX_SAFE_INTEGER||9007199254740991,Q=e.re=[],Z=e.src=[],tt=0,et=tt++;Z[et]="0|[1-9]\\d*";var nt=tt++;Z[nt]="[0-9]+";var rt=tt++;Z[rt]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var it=tt++;Z[it]="("+Z[et]+")\\.("+Z[et]+")\\.("+Z[et]+")";var ot=tt++;Z[ot]="("+Z[nt]+")\\.("+Z[nt]+")\\.("+Z[nt]+")";var at=tt++;Z[at]="(?:"+Z[et]+"|"+Z[rt]+")";var st=tt++;Z[st]="(?:"+Z[nt]+"|"+Z[rt]+")";var ut=tt++;Z[ut]="(?:-("+Z[at]+"(?:\\."+Z[at]+")*))";var ct=tt++;Z[ct]="(?:-?("+Z[st]+"(?:\\."+Z[st]+")*))";var lt=tt++;Z[lt]="[0-9A-Za-z-]+";var ft=tt++;Z[ft]="(?:\\+("+Z[lt]+"(?:\\."+Z[lt]+")*))";var ht=tt++,dt="v?"+Z[it]+Z[ut]+"?"+Z[ft]+"?";Z[ht]="^"+dt+"$";var pt="[v=\\s]*"+Z[ot]+Z[ct]+"?"+Z[ft]+"?",_t=tt++;Z[_t]="^"+pt+"$";var vt=tt++;Z[vt]="((?:<|>)?=?)";var mt=tt++;Z[mt]=Z[nt]+"|x|X|\\*";var yt=tt++;Z[yt]=Z[et]+"|x|X|\\*";var gt=tt++;Z[gt]="[v=\\s]*("+Z[yt]+")(?:\\.("+Z[yt]+")(?:\\.("+Z[yt]+")(?:"+Z[ut]+")?"+Z[ft]+"?)?)?";var bt=tt++;Z[bt]="[v=\\s]*("+Z[mt]+")(?:\\.("+Z[mt]+")(?:\\.("+Z[mt]+")(?:"+Z[ct]+")?"+Z[ft]+"?)?)?";var At=tt++;Z[At]="^"+Z[vt]+"\\s*"+Z[gt]+"$";var wt=tt++;Z[wt]="^"+Z[vt]+"\\s*"+Z[bt]+"$";var Et=tt++;Z[Et]="(?:~>?)";var Ct=tt++;Z[Ct]="(\\s*)"+Z[Et]+"\\s+",Q[Ct]=new RegExp(Z[Ct],"g");var St=tt++;Z[St]="^"+Z[Et]+Z[gt]+"$";var kt=tt++;Z[kt]="^"+Z[Et]+Z[bt]+"$";var Lt=tt++;Z[Lt]="(?:\\^)";var Tt=tt++;Z[Tt]="(\\s*)"+Z[Lt]+"\\s+",Q[Tt]=new RegExp(Z[Tt],"g");var xt=tt++;Z[xt]="^"+Z[Lt]+Z[gt]+"$";var Rt=tt++;Z[Rt]="^"+Z[Lt]+Z[bt]+"$";var Ot=tt++;Z[Ot]="^"+Z[vt]+"\\s*("+pt+")$|^$";var It=tt++;Z[It]="^"+Z[vt]+"\\s*("+dt+")$|^$";var Dt=tt++;Z[Dt]="(\\s*)"+Z[vt]+"\\s*("+pt+"|"+Z[gt]+")",Q[Dt]=new RegExp(Z[Dt],"g");var Nt=tt++;Z[Nt]="^\\s*("+Z[gt]+")\\s+-\\s+("+Z[gt]+")\\s*$";var Pt=tt++;Z[Pt]="^\\s*("+Z[bt]+")\\s+-\\s+("+Z[bt]+")\\s*$";var Mt=tt++;Z[Mt]="(<|>)?=?\\s*\\*";for(var jt=0;jt<tt;jt++)G(jt,Z[jt]),Q[jt]||(Q[jt]=new RegExp(Z[jt]));e.parse=r,e.valid=i,e.clean=o,e.SemVer=a,a.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},a.prototype.toString=function(){return this.version},a.prototype.compare=function(t){return G("SemVer.compare",this.version,this.loose,t),t instanceof a||(t=new a(t,this.loose)),this.compareMain(t)||this.comparePre(t)},a.prototype.compareMain=function(t){return t instanceof a||(t=new a(t,this.loose)),c(this.major,t.major)||c(this.minor,t.minor)||c(this.patch,t.patch)},a.prototype.comparePre=function(t){if(t instanceof a||(t=new a(t,this.loose)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],r=t.prerelease[e];if(G("prerelease compare",e,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return c(n,r)}while(++e)},a.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=s,e.diff=u,e.compareIdentifiers=c;var Bt=/^[0-9]+$/;e.rcompareIdentifiers=l,e.major=f,e.minor=h,e.patch=d,e.compare=p,e.compareLoose=_,e.rcompare=v,e.sort=m,e.rsort=y,e.gt=g,e.lt=b,e.eq=A,e.neq=w,e.gte=E,e.lte=C,e.cmp=S,e.Comparator=k;var Ft={};k.prototype.parse=function(t){var e=this.loose?Q[Ot]:Q[It],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new a(n[2],this.loose):this.semver=Ft},k.prototype.toString=function(){return this.value},k.prototype.test=function(t){return G("Comparator.test",t,this.loose),this.semver===Ft||("string"==typeof t&&(t=new a(t,this.loose)),S(t,this.operator,this.semver,this.loose))},k.prototype.intersects=function(t,e){if(!(t instanceof k))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new L(t.value,e),U(this.value,n,e);if(""===t.operator)return n=new L(this.value,e),U(t.semver,n,e);var r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),s=S(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=S(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||i||o&&a||s||u},e.Range=L,L.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range},L.prototype.toString=function(){return this.range},L.prototype.parseRange=function(t){var e=this.loose;t=t.trim(),G("range",t,e);var n=e?Q[Pt]:Q[Nt];t=t.replace(n,B),G("hyphen replace",t),t=t.replace(Q[Dt],"$1$2$3"),G("comparator trim",t,Q[Dt]),t=t.replace(Q[Ct],"$1~"),t=t.replace(Q[Tt],"$1^"),t=t.split(/\s+/).join(" ");var r=e?Q[Ot]:Q[It],i=t.split(" ").map(function(t){return x(t,e)}).join(" ").split(/\s+/);return this.loose&&(i=i.filter(function(t){return!!t.match(r)})),i=i.map(function(t){return new k(t,e)})},L.prototype.intersects=function(t,e){if(!(t instanceof L))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return t.set.some(function(t){return t.every(function(t){return n.intersects(t,e)})})})})},e.toComparators=T,L.prototype.test=function(t){if(!t)return!1;"string"==typeof t&&(t=new a(t,this.loose));for(var e=0;e<this.set.length;e++)if(F(this.set[e],t))return!0;return!1},e.satisfies=U,e.maxSatisfying=$,e.minSatisfying=V,e.validRange=H,e.ltr=z,e.gtr=Y,e.outside=W,e.prerelease=q,e.intersects=X}).call(e,n(131))},function(t,e,n){"use strict";function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,n){var r=t;return l(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=h(e,{uri:t}),r.callback=n,r}function o(t,e,n){return e=i(t,e,n),a(e)}function a(t){function e(){4===l.readyState&&setTimeout(a,0)}function n(){var t=void 0;if(t=l.response?l.response:l.responseText||s(l),b)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(p),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,c(t,A)}function a(){if(!d){var e;clearTimeout(p),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=A,i=null;return 0!==e?(r={body:n(),statusCode:e,method:v,headers:{},url:_,rawRequest:l},l.getAllResponseHeaders&&(r.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),c(i,r,r.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var u=!1,c=function(e,n,r){u||(u=!0,t.callback(e,n,r))},l=t.xhr||null;l||(l=t.cors||t.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var h,d,p,_=l.url=t.uri||t.url,v=l.method=t.method||"GET",m=t.body||t.data,y=l.headers=t.headers||{},g=!!t.sync,b=!1,A={body:void 0,headers:{},statusCode:0,method:v,url:_,rawRequest:l};if("json"in t&&!1!==t.json&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),m=JSON.stringify(!0===t.json?m:t.json))),l.onreadystatechange=e,l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){d=!0},l.ontimeout=i,l.open(v,_,!g,t.username,t.password),g||(l.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(p=setTimeout(function(){if(!d){d=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}},t.timeout)),l.setRequestHeader)for(h in y)y.hasOwnProperty(h)&&l.setRequestHeader(h,y[h]);else if(t.headers&&!r(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(m||null),l}function s(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function u(){}var c=n(463),l=n(232),f=n(464),h=n(467);t.exports=o,o.XMLHttpRequest=c.XMLHttpRequest||u,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:c.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(e,n,r){return n=i(e,n,r),n.method=t.toUpperCase(),a(n)}})},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(e,n(43))},function(t,e,n){var r=n(465),i=n(466),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),a=r(t.slice(n+1));void 0===e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},function(t,e){function n(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=n,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){function r(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):a(t,e,n)}function i(t,e,n){for(var r=0,i=t.length;r<i;r++)c.call(t,r)&&e.call(n,t[r],r,t)}function o(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}function a(t,e,n){for(var r in t)c.call(t,r)&&e.call(n,t[r],r,t)}var s=n(232);t.exports=r;var u=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(t,e){function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t}t.exports=n;var r=Object.prototype.hasOwnProperty},,,,,,,,,,function(t,e,n){(function(n,r){var i,o,a;!function(n,r){o=[],i=r,void 0!==(a="function"==typeof i?i.apply(e,o):i)&&(t.exports=a)}(0,function(){var e;e=window.nodeRequire?window.nodeRequire:function(){};var i,o,a;if(function(t){function e(t,e){return b.call(t,e)}function n(t,e){var n,r,i,o,a,s,u,c,l,f,h,d=e&&e.split("/"),p=y.map,_=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),a=t.length-1,y.nodeIdCompat&&w.test(t[a])&&(t[a]=t[a].replace(w,"")),t=d.concat(t),l=0;l<t.length;l+=1)if("."===(h=t[l]))t.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||_)&&p){for(n=t.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),d)for(f=d.length;f>0;f-=1)if((i=p[d.slice(0,f).join("/")])&&(i=i[r])){o=i,s=l;break}if(o)break;!u&&_&&_[r]&&(u=_[r],c=l)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function r(e,n){return function(){return d.apply(t,A.call(arguments,0).concat([e,n]))}}function s(t){return function(e){return n(e,t)}}function u(t){return function(e){v[t]=e}}function c(n){if(e(m,n)){var r=m[n];delete m[n],g[n]=!0,h.apply(t,r)}if(!e(v,n)&&!e(g,n))throw new Error("No "+n);return v[n]}function l(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,d,p,_,v={},m={},y={},g={},b=Object.prototype.hasOwnProperty,A=[].slice,w=/\.js$/;p=function(t,e){var r,i=l(t),o=i[0];return t=i[1],o&&(o=n(o,e),r=c(o)),o?t=r&&r.normalize?r.normalize(t,s(e)):n(t,e):(t=n(t,e),i=l(t),o=i[0],t=i[1],o&&(r=c(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},_={require:function(t){return r(t)},exports:function(t){var e=v[t];return void 0!==e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:f(t)}}},h=function(n,i,o,a){var s,l,f,h,d,y,b=[],A=typeof o;if(a=a||n,"undefined"===A||"function"===A){for(i=!i.length&&o.length?["require","exports","module"]:i,d=0;d<i.length;d+=1)if(h=p(i[d],a),"require"===(l=h.f))b[d]=_.require(n);else if("exports"===l)b[d]=_.exports(n),y=!0;else if("module"===l)s=b[d]=_.module(n);else if(e(v,l)||e(m,l)||e(g,l))b[d]=c(l);else{if(!h.p)throw new Error(n+" missing "+l);h.p.load(h.n,r(a,!0),u(l),{}),b[d]=v[l]}f=o?o.apply(v[n],b):void 0,n&&(s&&s.exports!==t&&s.exports!==v[n]?v[n]=s.exports:f===t&&y||(v[n]=f))}else n&&(v[n]=o)},i=o=d=function(e,n,r,i,o){if("string"==typeof e)return _[e]?_[e](n):c(p(e,n).f);if(!e.splice){if(y=e,y.deps&&d(y.deps,y.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?h(t,e,n,r):setTimeout(function(){h(t,e,n,r)},4),d},d.config=function(t){return d(t)},i._defined=v,a=function(t,n,r){n.splice||(r=n,n=[]),e(v,t)||e(m,t)||(m[t]=[t,n,r])},a.amd={jQuery:!0}}(),a("components/almond/almond",function(){}),function(){function e(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(e[r+i++]=_[t])});16>i;)e[r+i++]=0;return e}function r(t,e){var n=e||0,r=p;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function i(t,e,n){var i=e&&n||0,o=e||[];t=t||{};var a=null!=t.clockseq?t.clockseq:g,s=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:A+1,c=s-b+(u-A)/1e4;if(0>c&&null==t.clockseq&&(a=a+1&16383),(0>c||s>b)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");b=s,A=u,g=a,s+=122192928e5;var l=(1e4*(268435455&s)+u)%4294967296;o[i++]=l>>>24&255,o[i++]=l>>>16&255,o[i++]=l>>>8&255,o[i++]=255&l;var f=s/4294967296*1e4&268435455;o[i++]=f>>>8&255,o[i++]=255&f,o[i++]=f>>>24&15|16,o[i++]=f>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var h=t.node||y,d=0;6>d;d++)o[i+d]=h[d];return e||r(o)}function s(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new d(16):null,t=null),t=t||{};var o=t.random||(t.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;16>a;a++)e[i+a]=o[a];return e||r(o)}var u,c=this;if("function"==typeof o)try{var l=o("crypto").randomBytes;u=l&&function(){return l(16)}}catch(t){}if(!u&&c.crypto&&crypto.getRandomValues){var f=new Uint8Array(16);u=function(){return crypto.getRandomValues(f),f}}if(!u){var h=new Array(16);u=function(){for(var t,e=0;16>e;e++)0==(3&e)&&(t=4294967296*Math.random()),h[e]=t>>>((3&e)<<3)&255;return h}}for(var d="function"==typeof n?n:Array,p=[],_={},v=0;256>v;v++)p[v]=(v+256).toString(16).substr(1),_[p[v]]=v;var m=u(),y=[1|m[0],m[1],m[2],m[3],m[4],m[5]],g=16383&(m[6]<<8|m[7]),b=0,A=0,w=s;if(w.v1=i,w.v4=s,w.parse=e,w.unparse=r,w.BufferClass=d,"function"==typeof a&&a.amd)a("components/uuid/uuid",[],function(){return w});else if(void 0!==t&&t.exports)t.exports=w;else{var E=c.uuid;w.noConflict=function(){return c.uuid=E,w},c.uuid=w}}.call(this),a("components/dcx-js/src/AdobeDCXError",["require","exports","module"],function(t,e,n){"use strict";function r(t,e,n){Error.call(this),this.code=t,this.message="["+t+"] "+e,this.underlyingError=n}r.prototype=new Error,r.prototype.name="AdobeDCXError",delete r.prototype.stack,r.INVALID_JSON="INVALID_JSON",r.READ_ONLY="READ_ONLY",r.INVALID_PARAMS="",r.INVALID_DATA="INVALID_DATA",r.DUPLICATE_VALUE="DUPLICATE_VALUE",r.NO_LOCAL_STORAGE="NO_LOCAL_STORAGE",r.INVALID_STATE="INVALID_STATE",r.DELETED_COMPOSITE="DELETED_COMPOSITE",r.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",r.NETWORK_ERROR="NETWORK_ERROR",r.COMPONENT_DOWNLOAD_ERROR="COMPONENT_DOWNLOAD_ERROR",r.COMPONENT_UPLOAD_ERROR="COMPONENT_UPLOAD_ERROR",r.UPDATE_CONFLICT="UPDATE_CONFLICT",r.NO_COMPOSITE="NO_COMPOSITE",r.ALREADY_EXISTS="ALREADY_EXISTS",r.SERVICE_IS_INACTIVE="SERVICE_IS_INACTIVE",r.EXCEEDS_QUOTA="EXCEEDS_QUOTA",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.RETRYABLE_SERVER_ERROR="RETRYABLE_SERVER_ERROR",r.TIMED_OUT="TIMED_OUT",r.UNEXPECTED="UNEXPECTED",r.TERMINATED_INPUTSTREAM="TERMINATED_INPUTSTREAM",r.WRONG_ENDPOINT="WRONG_ENDPOINT",r.OUT_OF_SPACE="ENOSPC";var i={};return i[r.SERVICE_IS_INACTIVE]=1,i[r.NOT_IMPLEMENTED]=1,i[r.EXCEEDS_QUOTA]=1,i[r.RETRYABLE_SERVER_ERROR]=1,i[r.TIMED_OUT]=1,i[r.TERMINATED_INPUTSTREAM]=1,i[r.WRONG_ENDPOINT]=1,i[r.OUT_OF_SPACE]=1,r.wrapError=function(t,e,n,o){if(!n||!i[n.code]){if(o){var a=o.statusCode;a>=500&&600>a&&(501===a?(t=r.NOT_IMPLEMENTED,e="Unimplemented request"):507===a?(t=r.EXCEEDS_QUOTA,e="Quota exceeded"):(t=r.RETRYABLE_SERVER_ERROR,e="Server error"))}n=new r(t,e,n)}return o&&(n.response=o),n},r.networkError=function(t,e,n){return r.wrapError(r.NETWORK_ERROR,t,e,n)},r.unexpectedResponse=function(t,e,n){return r.wrapError(r.UNEXPECTED_RESPONSE,t,e,n)},r}),function(){function e(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(e[r+i++]=_[t])});16>i;)e[r+i++]=0;return e}function r(t,e){var n=e||0,r=p;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function i(t,e,n){var i=e&&n||0,o=e||[];t=t||{};var a=null!=t.clockseq?t.clockseq:g,s=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:A+1,c=s-b+(u-A)/1e4;if(0>c&&null==t.clockseq&&(a=a+1&16383),(0>c||s>b)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");b=s,A=u,g=a,s+=122192928e5;var l=(1e4*(268435455&s)+u)%4294967296;o[i++]=l>>>24&255,o[i++]=l>>>16&255,o[i++]=l>>>8&255,o[i++]=255&l;var f=s/4294967296*1e4&268435455;o[i++]=f>>>8&255,o[i++]=255&f,o[i++]=f>>>24&15|16,o[i++]=f>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var h=t.node||y,d=0;6>d;d++)o[i+d]=h[d];return e||r(o)}function s(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new d(16):null,t=null),t=t||{};var o=t.random||(t.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;16>a;a++)e[i+a]=o[a];return e||r(o)}var u,c=this;if("function"==typeof o)try{var l=o("crypto").randomBytes;u=l&&function(){return l(16)}}catch(t){}if(!u&&c.crypto&&crypto.getRandomValues){var f=new Uint8Array(16);u=function(){return crypto.getRandomValues(f),f}}if(!u){var h=new Array(16);u=function(){for(var t,e=0;16>e;e++)0==(3&e)&&(t=4294967296*Math.random()),h[e]=t>>>((3&e)<<3)&255;return h}}for(var d="function"==typeof n?n:Array,p=[],_={},v=0;256>v;v++)p[v]=(v+256).toString(16).substr(1),_[p[v]]=v;var m=u(),y=[1|m[0],m[1],m[2],m[3],m[4],m[5]],g=16383&(m[6]<<8|m[7]),b=0,A=0,w=s;if(w.v1=i,w.v4=s,w.parse=e,w.unparse=r,w.BufferClass=d,"function"==typeof a&&a.amd)a("components/dcx-js/src/components/uuid/uuid",[],function(){return w});else if(void 0!==t&&t.exports)t.exports=w;else{var E=c.uuid;w.noConflict=function(){return c.uuid=E,w},c.uuid=w}}.call(this),"function"!=typeof e)var e=o;if(a("components/dcx-js/src/AdobeDCXUtil",["require","exports","module","./components/uuid/uuid"],function(t,n,r){"use strict";var i;try{i=t("./components/uuid/uuid")}catch(t){i=e("uuid")}var o;n._setLogCallback=function(t){o=t},n.merge=function(t){var e,n;for(e=1;e<arguments.length;++e){var r=arguments[e];if("object"==typeof r)for(n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t},n.parentDirectory=function(t){var e=t.split("/");return e.pop(),e.join("/")},n.filePathComponents=function(t){var e=t.split("/"),n=e.pop(),r=n.split("."),i=r.length>1?r.pop():null;return{directory:e.join("/"),fileName:n,baseName:r.join("."),extension:i}},n.appendPathElements=function(){var t,e=[],n=arguments.length;for(t=0;n>t;t++){var r=arguments[t];"string"==typeof r&&""!==r&&((0!==t||1===r.length)&&"/"===r.charAt(0)&&(r=r.slice(1)),t!==n-1&&"/"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1)),e.push(r))}return e.join("/")};var a=/^[^\u0000-\u001F\u0022\u002A\u003A\u003C\u003E\u003F\u005C\u007F]*[^\u0000-\u001F\u0022\u002A\u002E\u003A\u003C\u003E\u003F\u005C\u007F]{1}$/;n.isValidPath=function(t,e){try{if(t.length>65535)return!1;var n=(e?t.slice(1):t).split("/");if(!n||0===n.length)return!1;var r,i=n.length;for(r=0;i>r;r++){if(n[r].length>255||!a.test(n[r]))return!1}if(e&&n.length>0){var o=n[0];if("manifest"===o||"mimetype"===o)return!1}return!0}catch(t){return!1}},n.isValidAbsolutePath=function(t){return n.isValidPath(t,!0)};var s=n.noOp=function(){};n.consumeStream=function(t,e,n){t.on("data",n||s),t.on("end",e||s)},n.flatCopy=function(t){var e,n={},r=Object.keys(t),i=r.length;for(e=0;i>e;e++){var o=r[e];n[o]=t[o]}return n},n.deepCopy=function(t){return JSON.parse(JSON.stringify(t))},n.objectsEqual=function(t,e,r){var i,o,a={},s=Object.keys(t),u=s.length;for(o=0;u>o;o++){if(i=s[o],!r||!r[i]){var c=t[i],l=e[i],f=typeof c;if(f!==typeof l)return!1;if("object"===f){if(!n.objectsEqual(c,l,r))return!1}else if(c!==l)return!1}a[i]=!0}for(s=Object.keys(e),u=s.length,o=0;u>o;o++)if(i=s[o],!a[i])return!1;return!0};var u=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");n.parseURI=function(t){var e=t.match(u);return{scheme:e[2],authority:e[4],path:e[5],query:e[7],fragment:e[9]}},n.endPointOf=function(t){var e,r=n.parseURI(t),i=r.scheme,o=r.authority,a="https"===i?443:"http"===i?80:-1;return i&&o&&(e=(i+"://"+o).toLowerCase(),a>=0&&o.indexOf(":")<0&&(e=e+":"+a)),e},n.ensureRelativeHrefStartsWithSlash=function(t){if(t){var e=n.parseURI(t),r=e.scheme,i=e.authority;r||i||"/"!==t.charAt(0)&&(t="/"+t)}return t};var c=/^([^:]+):(.*)$/,l=/^\s+|\s+$/g;return n.parseHeaders=function(t){var e,n,r,i={},o=t.split(/\r?\n/);for(e=0;e<o.length;++e){var a=o[e];if(a.length>0){var s=a.charCodeAt(0);if(!n||9!==s&&32!==s){var u=c.exec(a);u&&u.length>1&&(n=u[1].toLowerCase(),r=u[2]||"",r=r.replace(l,""),i[n]?i[n]=i[n]+","+r:i[n]=r)}else i[n]=i[n]+" "+a.replace(l,"")}}return i},n.timeStamp=function(t){var e=(new Date).getTime();return t&&(e-=e%1e3),e},n.generateUuid=i,n.log=function(t){if("function"==typeof o)try{o(t)}catch(t){}},n}),a("components/dcx-js/src/AdobeDCXNode",["require","exports","module","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n){t?this._setData(t):this._data={},this._readOnly=e,this._isRoot=n}var i=t("./AdobeDCXError"),o=t("./AdobeDCXUtil");r.ROOT_PATH="/",Object.defineProperties(r.prototype,{id:{get:function(){return this._data.id},set:function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(this._owner)throw new i(i.READ_ONLY,"Cannot change the id of a node that is part of a branch or element.");if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,"Expecting a non-empty string.");this._data.id=t,this._setDirty()}},name:{get:function(){return this._data.name},set:function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.name=t,this._setDirty()}},type:{get:function(){return this._data.type},set:function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.type=t,this._setDirty()}},relationship:{get:function(){return this._data.rel},set:function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Expecting a string or undefined.");this._data.rel=t,this._setDirty()}},path:{get:function(){return this._isRoot?"/":this._data.path},set:function(t){if(t!==this.path){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if(this._isRoot)throw new i(i.READ_ONLY,"Cannot change the path of the root node.");if(t&&!o.isValidPath(t))throw new i(i.INVALID_PARAMS,"Expecting a valid path or undefined.");this._owner?this._owner._setPathOfNode(this,t||void 0):(this._data.path=t||void 0,this._parentPath=""),this._setDirty()}}},parentPath:{get:function(){return this._parentPath},set:function(t){throw new i(i.READ_ONLY,"parentPath is read-only.")}},absolutePath:{get:function(){var t=this.path;return this._isRoot?t:t&&this._owner?o.appendPathElements(this._parentPath,t):void 0},set:function(t){throw new i(i.READ_ONLY,"absolutePath is read-only.")}},isRoot:{get:function(){return this._isRoot},set:function(t){throw new i(i.READ_ONLY,"isRoot is read-only.")}}}),r.prototype.getLink=function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');return this._data._links?this._data._links[t]:void 0},r.prototype.setLink=function(t,e){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("object"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "link" must be an object.');if("string"!=typeof e)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var n=this._data._links;n||(n=this._data._links={}),n[e]=t,this._setDirty()},r.prototype.removeLink=function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "relationship" must be a string');var e=this._data._links;e&&(delete e[t],Object.keys(e).length<1&&delete this._data._links,this._setDirty())};var a={components:!0,children:!0,"manifest-format-version":!0,id:!0,name:!0,type:!0,state:!0,local:!0},s={components:!0,children:!0,rel:!0,path:!0,id:!0,name:!0,type:!0};return r.prototype.getCustomKeys=function(){var t,e=[],n=Object.keys(this._data),r=n.length;for(t=0;r>t;t++){var i=n[t];(this._isRoot?a[i]:s[i])||e.push(i)}return e},r.prototype.getValue=function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");return this._data[t]},r.prototype.setValue=function(t,e){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");this._data[t]=e,this._setDirty()},r.prototype.removeValue=function(t){if(this._readOnly)throw new i(i.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new i(i.INVALID_PARAMS,'Param "key" must be a string');if("children"===t||"components"===t)throw new i(i.INVALID_PARAMS,"Illegal key");delete this._data[t],this._setDirty()},r.prototype.copy=function(){var t=null,e=this._data.children,n=this._data.components;try{e&&delete this._data.children,n&&delete this._data.components;t=new r(JSON.parse(JSON.stringify(this._data)))}finally{e&&(this._data.children=e),n&&(this._data.components=n)}return t},r.prototype.isEqualTo=function(t,e,n){return this._isEqual(this._data,t._data,o.merge({children:!0,components:!0},e),n)},r.prototype._isEqual=function(t,e,n,r){var i,a,s,u,c;if(!o.objectsEqual(t,e,n))return!1;if(a=t.components,s=e.components,u=a?a.length:0,c=s?s.length:0,u!==c)return!1;if(u){var l,f,h;for(i=0;u>i;i++){for(l=a[i],f=null,h=0;u>h;h++)if(l.id===s[h].id){f=s[h];break}if(!f)return!1;if(!o.objectsEqual(l,f,r))return!1}}if(a=t.children,s=e.children,u=a?a.length:0,c=s?s.length:0,u!==c)return!1;if(u)for(i=0;u>i;i++)if(!this._isEqual(a[i],s[i],n,r))return!1;return!0},r.prototype._setData=function(t){var e=this._verify(t);if(null===e)return this._data=t,this;throw e},r.prototype._verify=function(t){return"string"!=typeof t.id?new i(i.INVALID_DATA,"Node is missing an id of type string"):null},r.prototype._setDirty=function(){this._owner&&this._owner._setDirty()},r}),a("components/dcx-js/src/AdobeDCXComponent",["require","exports","module","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e){t?this._setData(t):this._data={},this._readOnly=e}function i(t){this.compositeId=t,this.records={}}function o(t,e,n,r,i,o){this.id=t,this.etag=e,this.version=n,this.md5=r,this.length=i,this.type=o}var a=t("./AdobeDCXError"),s=t("./AdobeDCXUtil"),u={unmodified:"unmodified",modified:"modified",pendingDelete:"pendingDelete",committedDelete:"committedDelete"};r.STATES=u,r._UploadResults=i,r._UploadRecord=o,Object.defineProperties(r.prototype,{id:{get:function(){return this._data.id},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if(this._owner)throw new a(a.READ_ONLY,"Cannot change the id of a component that is part of a branch or element.");if("string"!=typeof t||""===t)throw new a(a.INVALID_PARAMS,"Expecting a non-empty string.");this._data.id=t,this._setDirty()}},name:{get:function(){return this._data.name},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a string or undefined.");this._data.name=t,this._setDirty()}},type:{get:function(){return this._data.type},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new a(a.INVALID_PARAMS,"Expecting a non-empty string.");this._data.type=t,this._setDirty()}},path:{get:function(){return this._data.path},set:function(t){if(this._data.path!==t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if(!s.isValidPath(t))throw new a(a.INVALID_PARAMS,"Expecting a valid path.");this._owner?this._owner._core._setPathOfComponent(this,t):(this._data.path=t,this._parentPath=""),this._setDirty()}}},parentPath:{get:function(){return this._parentPath},set:function(t){throw new a(a.READ_ONLY,"parentPath is read-only.")}},absolutePath:{get:function(){return this._data.path&&this._owner?s.appendPathElements(this._parentPath,this._data.path):void 0},set:function(t){throw new a(a.READ_ONLY,"absolutePath is read-only.")}},relationship:{get:function(){return this._data.rel},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a string or undefined.");this._data.rel=t,this._setDirty()}},state:{get:function(){return this._data.state},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new a(a.INVALID_PARAMS,"Expecting a string.");if(!u.hasOwnProperty(t))throw new a(a.INVALID_PARAMS,'State must be "modified", "unmodified", "pendingDelete", or "committedDelete".');this._data.state=t,this._setDirty()}},etag:{get:function(){return this._data.etag},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a string or undefined.");this._data.etag=t,this._setDirty()}},md5:{get:function(){return this._data.md5},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a string or undefined.");this._data.md5=t,this._setDirty()}},version:{get:function(){return this._data.version},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if(void 0!==t&&"string"!=typeof t)throw new a(a.INVALID_PARAMS,"Expecting a string or undefined.");this._data.version=t,this._setDirty()}},length:{get:function(){return this._data.length},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a number or undefined.");this._data.length=t,this._setDirty()}},width:{get:function(){return this._data.width},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a number or undefined.");this._data.width=t,this._setDirty()}},height:{get:function(){return this._data.height},set:function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("number"!=typeof t&&void 0!==t)throw new a(a.INVALID_PARAMS,"Expecting a number or undefined.");this._data.height=t,this._setDirty()}}});var c={name:!0,id:!0,state:!0,path:!0,rel:!0,type:!0,etag:!0,length:!0,version:!0,md5:!0,width:!0,height:!0};return r.prototype.getCustomKeys=function(){var t,e=[],n=Object.keys(this._data),r=n.length;for(t=0;r>t;t++){var i=n[t];c[i]||e.push(i)}return e},r.prototype.getValue=function(t){if("string"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "key" must be a string');return this._data[t]},r.prototype.setValue=function(t,e){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "key" must be a string');this._data[t]=e,this._setDirty()},r.prototype.removeValue=function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "key" must be a string');delete this._data[t],this._setDirty()},r.prototype.getLink=function(t){if("string"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "relationship" must be a string');return this._data._links?this._data._links[t]:void 0},r.prototype.setLink=function(t,e){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("object"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "link" must be an object.');if("string"!=typeof e)throw new a(a.INVALID_PARAMS,'Param "relationship" must be a string');var n=this._data._links;n||(n=this._data._links={}),n[e]=t,this._setDirty()},r.prototype.removeLink=function(t){if(this._readOnly)throw new a(a.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new a(a.INVALID_PARAMS,'Param "relationship" must be a string');var e=this._data._links;e&&(delete e[t],Object.keys(e).length<1&&delete this._data._links,this._setDirty())},r.prototype.isEqualTo=function(t,e){return s.objectsEqual(this._data,t._data,e)},r.prototype._setData=function(t){var e=this._verify(t);if(null===e)return this._data=t,this;throw e},r.prototype._setDirty=function(){this._owner&&this._owner._setDirty()},r.prototype._verify=function(t){return"string"!=typeof t.id?new a(a.INVALID_DATA,"Component is missing an id of type string"):null},r}),a("components/dcx-js/src/AdobeDCXFS",["require","exports","module","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";var r,i=(t("./AdobeDCXError"),t("./AdobeDCXUtil"));e.canUseFileSystem=!1,e._setFS=function(t){r=t,e.canUseFileSystem=!!t},e.ensureDirectoryExists=function(t,n){var o=function(t){t&&"EEXIST"===t.code?n():n(t)},a=function(a){if(a)n();else{var s=i.parentDirectory(t);s?e.ensureDirectoryExists(s,function(e){e?n(e):r.mkdir(t,o)}):r.mkdir(t,o)}};t?r.exists(t,a):a(!0)},e.getTempFilePathAt=function(t,n){var r=function(){var o=t+i.generateUuid();e.exists(o,function(t){t?r():n(o)})};r()},e.exists=function(t,e){r.exists(t,e)},e.deleteFile=function(t,e){r.unlink(t,function(t){t&&"ENOENT"!==t.code?e(t):e()})},e.readFile=function(t,e,n){r.readFile(t,e,n)},e.writeFile=function(t,n,o,a){var s=i.parentDirectory(t);e.ensureDirectoryExists(s,function(e){e?a(e):r.writeFile(t,n,o,a)})},e.writeFileAtomically=function(t,n,o,a){var s=i.parentDirectory(t);e.ensureDirectoryExists(s,function(i){i?a(i):e.getTempFilePathAt(s+"/",function(e){r.writeFile(e,n,o,function(n){n?a(n):r.rename(e,t,a)})})})},e.createWriteStream=function(t,e){return r.createWriteStream(t,e)},e.createReadStream=function(t,e){return r.createReadStream(t,e)},e.move=function(t,n,o,a){var s=i.parentDirectory(n);e.ensureDirectoryExists(s,function(e){if(e)a(e);else if(o){var i=(new Date).getTime()/1e3;r.utimes(t,i,i,function(e){e?a(e):r.rename(t,n,a)})}else r.rename(t,n,a)})},e.info=function(t,e){r.stat(t,e)},e.directoryListing=function(t,e){var n,i,o=[],a=function(a){r.stat(t+"/"+a,function(t,r){if(!t)try{o.push({name:a,info:r}),n--}catch(e){t=e}t?i||(i=t,e(t)):0===n&&e(void 0,o)})};r.readdir(t,function(t,r){if(!t)try{var i,o=r.length;for(n=o,i=0;o>i;i++)a(r[i])}catch(e){t=e}t?e(t):0===n&&e(void 0,[])})},e.deleteDirectory=function(t,n){var i,o,a=function(){try{r.rmdir(t,n)}catch(t){n(t)}},s=function(t){t&&!i&&(i=t),1>--o&&(i?n(i):a())},u=function(n){var i=t+"/"+n;r.unlink(i,function(t){try{t?e.deleteDirectory(i,function(t){s(t)}):s()}catch(t){s(t)}})};r.readdir(t,function(t,e){if(!t)try{var r=e.length;if(1>r)a();else{var i;for(o=r,i=0;r>i;i++)u(e[i])}}catch(e){t=e}t&&n(t)})};var o=function(t,e,n){try{var o=e+i.generateUuid(),a=r.createWriteStream(o),s=r.createReadStream(t);s.on("end",function(){r.rename(o,e,n)}),s.pipe(a)}catch(t){n(t)}};return e.copyFile=function(t,n,r){var a=i.parentDirectory(n);e.ensureDirectoryExists(a,function(e){e?r(e):o(t,n,r)})},e}),a("components/dcx-js/src/AdobeDCXBranchCore",["require","exports","module","./AdobeDCXError","./AdobeDCXNode","./AdobeDCXComponent","./AdobeDCXFS","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n){this._readOnly=n,this._owner=e,this._setData(t),this._localStorage=void 0}function i(t,e,n,r,i,a,s,u){var l=e._owner._core,f=t._owner._core,h=n&&t.id===e.id,d=f._getSourceHrefOfComponent(t),p=l.getComponentWithId(e.id),_=r&&(!p||!p.etag)&&"unmodified"===t.state,v=!h&&!d,m=v;if(i&&!p&&(d||v)&&t.id===e.id&&(e._data.id=c.generateUuid(),e.state="modified",e.etag=void 0,e.version=void 0,e.md5=void 0,e.length=void 0),a&&a._copyComponentMapping(t.id,u,e.id,s)&&(m=!1,h||(e.state="modified")),v){if(_){if(d=f._getHrefOfComponent(t),l._setSourceHrefOfComponent(d,e,s),!d&&m)throw new o(o.INVALID_STATE,"Failed to determine the source href of a component that does not have a local file.")}else if(m)throw new o(o.INVALID_STATE,"Could not use server-to-server copy for component "+t.id)}else l._setSourceHrefOfComponent(d,e,s);d&&(e.state="modified")}var o=t("./AdobeDCXError"),a=t("./AdobeDCXNode"),s=t("./AdobeDCXComponent"),u=t("./AdobeDCXFS"),c=t("./AdobeDCXUtil");return Object.defineProperties(r.prototype,{rootNode:{get:function(){return this.getChildWithAbsolutePath(a.ROOT_PATH)},set:function(t){throw new o(o.READ_ONLY,'Property "rootNode" is read-only.')}},hasLocalStorage:{get:function(){return this._localStorage},set:function(){throw new o(o.READ_ONLY,"Cannot set the property hasLocalStorage.")}},isDirty:{get:function(){return this._isDirty},set:function(){throw new o(o.READ_ONLY,"Cannot set the property isDirty.")}},changeCount:{get:function(){return this._data.local?this._data.local.change||0:0},set:function(){throw new o(o.READ_ONLY,"Cannot set the property changeCount.")}}}),r.prototype.getChildWithId=function(t){return this._allNodes[t]},r.prototype.getChildWithAbsolutePath=function(t){var e=this._absolutePaths[t.toLowerCase()];return e&&e instanceof a?e:void 0},r.prototype.getChildrenOf=function(t){if(!(t=t?this._allNodes[t.id]:this.rootNode))throw new o(o.INVALID_PARAMS,"Unknown node");var e=[],n=t._data.children;if(Array.isArray(n)){var r;for(r=0;r<n.length;r++){var i=n[r],a=this._allNodes[i.id];if(!a)throw new o(o.INVALID_DATA,"Node not in cache");e[e.length]=a}}return e},r.prototype.addChild=function(t,e,n,r){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(e=e||c.generateUuid(),this._allNodes[e])throw new o(o.DUPLICATE_VALUE,"Node already exists in branch.");if(n&&("number"!=typeof n||n%1!=0))throw new o(o.INVALID_PARAMS,'Param "index" must be an integer.');var i=r?this._allNodes[r.id]:this.rootNode;if(!i)throw new o(o.INVALID_PARAMS,"Unknown parent node.");var s=new a;s.id=e,t&&(s.name=t),s._parentPath=i.absolutePath||i._parentPath;var u=i._data.children;return u?(n>=0&&n<=u.length||(n=u.length),n===u.length?u[n]=s._data:u.splice(n,0,s._data)):i._data.children=[s._data],this._allNodes[s.id]=s,s._owner=this._owner,this._setDirty(),s},r.prototype.removeChild=function(t){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "node".');if(t.isRoot)throw new o(o.INVALID_PARAMS,"Cannot remove the root node.");var e=t.id;if(!e)throw new o(o.INVALID_PARAMS,'Param "node" must have an id.');var n=this._nodeDataOfParentOfNode(t);if(!n)throw new o(o.INVALID_PARAMS,"Node not found in this branch.");return n.parentNodeData.children.splice(n.index,1),0===n.parentNodeData.children.length&&delete n.parentNodeData.children,t=this._allNodes[e],this._removeNodeFromCachesRecursively(t._data),this._setDirty(),t},r.prototype.moveChild=function(t,e,n){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "node".');if(t.isRoot)throw new o(o.INVALID_PARAMS,"Cannot move the root node.");if(e&&("number"!=typeof e||e%1!=0))throw new o(o.INVALID_PARAMS,'Param "index" must be an integer.');var r=t.id;if(!r)throw new o(o.INVALID_PARAMS,'Param "node" must have an id.');var i=this._nodeDataOfParentOfNode(t);if(t=this._allNodes[r],!i)throw new o(o.INVALID_PARAMS,"Node not found in this branch.");var a=n?this._allNodes[n.id]:this.rootNode;if(!a)throw new o(o.INVALID_PARAMS,"Unknown parent node.");if(this._nodeIdIsDescendantOf(a.id,t._data))throw new o(o.INVALID_PARAMS,"Must not create a cycle.");var s=i.parentNodeData.children.splice(i.index,1)[0];try{var u=a._data.children;u?(e>=0&&e<=u.length||(e=u.length),e===u.length?u[e]=s:u.splice(e,0,s)):a._data.children=[s]}catch(t){throw i.parentNodeData.children.splice(i.index,0,s),t}return 0===i.parentNodeData.children.length&&delete i.parentNodeData.children,this._setDirty(),this._allNodes[r]},r.prototype.copyChild=function(t,e,n,r,i,o){return this._copyChild(t,e,n,r,i,!1,o)},r.prototype.replaceChild=function(t,e,n,r){return this._copyChild(t,void 0,void 0,e,n||t.id,!0,r)},r.prototype.allComponents=function(){var t,e=[];for(t in this._allComponents)this._allComponents.hasOwnProperty(t)&&e.push(this._allComponents[t]);return e},r.prototype.getComponentWithId=function(t){return this._allComponents[t]},r.prototype.getComponentWithAbsolutePath=function(t){var e=this._absolutePaths[t.toLowerCase()];return e&&e instanceof s?e:void 0},r.prototype.getComponentsOf=function(t){if(!(t=t?this._allNodes[t.id]:this.rootNode))throw new o(o.INVALID_PARAMS,"Unknown node");var e=[],n=t._data.components;if(Array.isArray(n)){var r;for(r=0;r<n.length;r++){var i=n[r],a=this._allComponents[i.id];if(!a)throw new o(o.INVALID_DATA,"Component not in cache");e[e.length]=a}}return e},r.prototype.addComponent=function(t,e,n,r,i,a,u,l,f,h){var d=this._localStorage;if(!d)throw new o(o.NO_LOCAL_STORAGE,"No local storage. Use AdobeDCXCompositeXfer.uploadNewComponent() followed by addComponentWithUploadResults()");if("function"!=typeof h&&i)throw new o(o.INVALID_PARAMS,'Param "callback" must be a function.');if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(f&&"string"!=typeof f)throw new o(o.INVALID_PARAMS,'Param "id" must be of type string.');if(!i&&!u)throw new o(o.INVALID_PARAMS,"Must provide either source or sourceHref.");try{if(u){var p=this._getBranchOf(this).compositeHref;if(p){var _=c.endPointOf(p),v=c.endPointOf(u);if(_&&v&&_!==v)throw new o(o.WRONG_ENDPOINT,"Given source href has an invalid endpoint: "+v)}}var m=this._local();f=f||c.generateUuid();var y=new s;y.id=f,y.name=t,y.type=e,y.relationship=n,y.path=r,y.state="modified";var g=this,b=function(t){if(!t)try{if(f&&g._allComponents[f])throw new o(o.DUPLICATE_VALUE,'The "id" of a component must be unique.');var e=l?g._allNodes[l.id]:g.rootNode;if(!e)throw new o(o.INVALID_PARAMS,"Unknown parent node.");var n=g._normalizedAbsolutePathForItem(y,e);if(g._absolutePaths[n])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+n);if(!c.isValidAbsolutePath(n))throw new o(o.INVALID_PARAMS,"Invalid absolute path: "+n);y._parentPath=e.absolutePath||e._parentPath;var r=e._data.components;r?r.push(y._data):e._data.components=[y._data],y._owner=g._owner,u&&g._setSourceHrefOfComponent(u,y),g._allComponents[y.id]=y,g._absolutePaths[n]=y,g._setDirty()}catch(e){d.removeComponentAsset(y,m),u&&g._setSourceHrefOfComponent(void 0,y),y=void 0,t=e}if(h)return h(t,y);if(t)throw t;return y};if(!i)return b();d.ingestComponentAsset(y,i,a,m,b)}catch(t){if(h)return h(t);throw t}},r.prototype.addComponentWithUploadResults=function(t,e,n,r,i){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(i.compositeId!==this._owner.compositeId)throw new o(o.INVALID_PARAMS,"Param uploadResults does not appear valid to be for this composite.");var a=Object.keys(i.records);if(1!==a.length)throw new o(o.INVALID_PARAMS,"Param uploadResults must contain records of exactly one component upload.");if(this._localStorage)throw new o(o.INVALID_PARAMS,"This method is for in-browser use only. Use addComponent() instead.");var u=i.records[a[0]],c=u.id;if(this._allComponents[c])throw new o(o.DUPLICATE_VALUE,"Duplicate component id: "+c);var l=r?this._allNodes[r.id]:this.rootNode;if(!l)throw new o(o.INVALID_PARAMS,"Unknown parent node.");var f=new s;f.id=c,f.name=t,f.type=u.type,f.relationship=e,f.path=n,f.state="unmodified",f.etag=u.etag,f.length=u.length,f.version=u.version,f.md5=u.md5;var h=this._normalizedAbsolutePathForItem(f,l);if(this._absolutePaths[h])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+h);f._parentPath=l.absolutePath||l._parentPath;var d=l._data.components;return d?d.push(f._data):l._data.components=[f._data],f._owner=this._owner,this._allComponents[c]=f,this._absolutePaths[h]=f,this._setDirty(),f},r.prototype.updateComponent=function(t,e,n,r){var i=this._localStorage;if(!i)throw new o(o.NO_LOCAL_STORAGE,"No local storage. Use AdobeDCXCompositeXfer.uploadComponent() to upload a new component asset and then call updateComponentWithUploadResults()");if("function"!=typeof r)throw new o(o.INVALID_PARAMS,'Param "callback" must be a function.');if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!(t=this._allComponents[t.id]))throw new o(o.INVALID_PARAMS,"Unknown component.");try{var a=this,s=function(e){if(!e)try{"modified"!==t.state?t.state="modified":a._setDirty(),a._setSourceHrefOfComponent(void 0,t)}catch(n){e=n,t=void 0}r(e,t)};i.ingestComponentAsset(t,e,n,this._local(),s)}catch(t){r(t)}},r.prototype.updateComponentWithUploadResults=function(t,e){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!(t=this._allComponents[t.id]))throw new o(o.INVALID_PARAMS,"Unknown component.");if(this._localStorage)throw new o(o.INVALID_PARAMS,"This method is for in-browser use only. Use updateComponent() instead.");if(e.compositeId!==this._owner.compositeId)throw new o(o.INVALID_PARAMS,"Param uploadResults does not appear valid to be for this composite.");var n=e.records[t.id];if(!n)throw new o(o.INVALID_PARAMS,"Param uploadResults does not contain an upload record for the given component.");return t.etag=n.etag,t.version=n.version,t.md5=n.md5,t.length=n.length,t},r.prototype.removeComponent=function(t){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "component".');var e=t.id;if(!e)throw new o(o.INVALID_PARAMS,'Param "component" must have an id.');var n=this._nodeDataOfParentOfComponent(t);if(!n)throw new o(o.INVALID_PARAMS,"Component not found in this branch.");return n.parentNodeData.components.splice(n.index,1),0===n.parentNodeData.components.length&&delete n.parentNodeData.components,t=this._allComponents[e],delete this._allComponents[e],delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],this._localStorage&&(this._localStorage.removeComponentAsset(t,this._local()),this._setSourceHrefOfComponent(void 0,t)),t._owner=void 0,t._parentPath="",this._setDirty(),t},r.prototype.moveComponent=function(t,e){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "component".');var n=t.id;if(!n)throw new o(o.INVALID_PARAMS,'Param "component" must have an id.');var r=this._nodeDataOfParentOfComponent(t);if(!r)throw new o(o.INVALID_PARAMS,"Component not found in this branch.");var i=e?this._allNodes[e.id]:this.rootNode;if(!i)throw new o(o.INVALID_PARAMS,"Unknown parent node.");var a=this._normalizedAbsolutePathForItem(t,i);if(this._absolutePaths[a])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+a);var s=r.parentNodeData.components.splice(r.index,1)[0],u=i._data.components;return u?u.push(s):i._data.components=[s],0===r.parentNodeData.components.length&&delete r.parentNodeData.components,t=this._allComponents[n],delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],t._parentPath=i.absolutePath||i._parentPath,this._absolutePaths[a]=t,this._setDirty(),t},r.prototype.copyComponent=function(t,e,n,r,i){return this._copyComponent(t,e,n,r,!1,i)},r.prototype.replaceComponent=function(t,e,n,r){return this._copyComponent(t,void 0,e,n||t.id,!0,r)},r.prototype.assetOfComponent=function(t,e){try{if(!this._localStorage)throw new o(o.NO_LOCAL_STORAGE,"No local storage.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "component".');if(!t.id)throw new o(o.INVALID_PARAMS,'Param "component" must have an id.');var n=this._localStorage.componentAssetPath(t,this._local());if(!e)return n;u.exists(n,function(t){e(void 0,t?n:null)})}catch(t){if(!e)throw t;e(t)}},r.prototype._getHrefOfComponent=function(t){var e,n=this._getBranchOf(t),r=n.compositeHref;return r&&void 0!==t.version&&(e=c.appendPathElements(r,t.id),e+=";version="+t.version),e},r.prototype._setSourceHrefOfComponent=function(t,e,n){var r=e.id,i=this._componentSourceHrefLookup(!0,n);t?i[r]=t:i[r]&&delete i[r]},r.prototype._getSourceHrefOfComponent=function(t,e){var n=t.id,r=this._componentSourceHrefLookup(!1,e);return r?r[n]:void 0},r.prototype._copySourceHrefsFrom=function(t){var e=t._componentSourceHrefLookup(!1),n=this.allComponents(),r=n.length;if(r&&e){var i,o=this._componentSourceHrefLookup(!0);for(i=0;r>i;i++){var a=n[i].id;o[a]=e[a]}}},r.prototype._getBranchOf=function(t){return t._owner?this._getBranchOf(t._owner):t},r.prototype._isSameComposite=function(t){var e=this._getBranchOf(this),n=this._getBranchOf(t);return e._data.id===n._data.id&&(e.compositeHref===n.compositeHref&&this._localStorage===t._localStorage)},r.prototype._stringify=function(t,e){if(t){var n=this._data.local,r=null;try{delete this._data.local,r=JSON.stringify(this._data,void 0,e?2:void 0)}catch(t){throw t}finally{n&&(this._data.local=n)}return r}return JSON.stringify(this._data,void 0,e?2:void 0)},r.prototype._setData=function(t){var e=new a(t,this._readOnly,!0);e._owner=this._owner,e._parentPath="";var n=e.id,r={},i={},u={};i[n]=e,u[a.ROOT_PATH]=e;var l=this,f=function(t,e,n,r,i){var u,h,d,p=t.components;if(Array.isArray(p))for(u=0;u<p.length;u++){var _=p[u],v=new s(_,l._readOnly);if(e[v.id])throw new o(o.INVALID_DATA,"Duplicate component id: "+v.id);if(v._owner=l._owner,v._parentPath=i,d=l._normalizedAbsolutePathForItem(v),r[d])throw new o(o.INVALID_DATA,"Duplicate absolute path: "+d);if(!c.isValidAbsolutePath(d))throw new o(o.INVALID_DATA,"Invalid absolute component path: "+d);e[v.id]=v,r[d]=v}var m=t.children;if(Array.isArray(m))for(u=0;u<m.length;u++){var y=m[u],g=new a(y,l._readOnly);if(n[g.id])throw new o(o.INVALID_DATA,"Duplicate node id: "+g.id);if(h=g.path,g._owner=l._owner,g._parentPath=i,h){if(d=l._normalizedAbsolutePathForItem(g),r[d])throw new o(o.INVALID_DATA,"Duplicate absolute path: "+d);if(!c.isValidAbsolutePath(d))throw new o(o.INVALID_DATA,"Invalid node absolute path: "+d);r[d]=g}n[g.id]=g,f(y,e,n,r,g.path?c.appendPathElements(i,g.path):i)}};return f(t,r,i,u,a.ROOT_PATH),this._data=t,this._allComponents=r,this._allNodes=i,this._absolutePaths=u,this._isDirty=!1,this},r.prototype._removeNodeFromCachesRecursively=function(t){var e,n=t.components;if(Array.isArray(n))for(e=0;e<n.length;e++){var r=n[e].id,i=this._allComponents[r];delete this._allComponents[r],delete this._absolutePaths[this._normalizedAbsolutePathForItem(i)],i._owner=void 0,this._localStorage&&(this._localStorage.removeComponentAsset(i,this._local()),this._setSourceHrefOfComponent(void 0,i))}var o=t.children;if(Array.isArray(o))for(e=0;e<o.length;e++)this._removeNodeFromCachesRecursively(o[e]);var a=t.id,s=this._allNodes[a];delete this._allNodes[a],s.path&&delete this._absolutePaths[this._normalizedAbsolutePathForItem(s)],s._owner=void 0},r.prototype._local=function(){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");return this._data.local||(this._data.local={version:2}),this._data.local},r.prototype._componentSourceHrefLookup=function(t,e){if(t&&this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(e||(e=t?this._local():this._data.local)){var n=e["componentS2SCopy#srcHref"];return!n&&t&&(n=e["componentS2SCopy#srcHref"]={}),n}},r.prototype._recursiveReset=function(t,e){var n,r=t.components;if(r)for(n=r.length-1;n>=0;n--){var i=r[n];"committedDelete"===i.state?(delete r[n],delete this._allComponents[i.id],delete i._owner,this._localStorage&&this._localStorage.removeComponentAsset(i,this._local()),this._setSourceHrefOfComponent(void 0,i,this._local())):(delete i.etag,delete i.version,delete i.length,delete i.md5,i.state="modified",e&&e(i))}var o=t.children;if(o)for(n=0;n<o.length;n++)this._recursiveReset(o[n],e)},r.prototype._nodeIdIsDescendantOf=function(t,e){var n,r=e.children;if(r)for(n=0;n<r.length;n++){var i=r[n];if(i.id===t||this._nodeIdIsDescendantOf(t,i))return!0}return!1},r.prototype._recursivelyGetAllComponentsOfChild=function(t,e){e=e||[];var n,r,i=t._data||t,o=i.components;if(o)for(r=o.length,n=0;r>n;n++)e[e.length]=this._allComponents[o[n].id];var a=i.children;if(a)for(r=a.length,n=0;r>n;n++)e=this._recursivelyGetAllComponentsOfChild(a[n],e);return e},r.prototype._nodeDataOfParentOfNode=function(t,e){e=e||this._data;var n,r=t._data.id,i=e.children;if(i)for(n=0;n<i.length;n++){var o=i[n];if(o.path,o.id===r)return{parentNodeData:e,index:n};var a=this._nodeDataOfParentOfNode(t,o);if(a)return a}return null},r.prototype._nodeDataOfParentOfComponent=function(t,e){e=e||this._data;var n,r=t._data.id,i=e.components;if(i)for(n=0;n<i.length;n++){var o=i[n];if(o.id===r)return{parentNodeData:e,index:n}}var a=e.children;if(a)for(n=0;n<a.length;n++){var s=a[n],u=this._nodeDataOfParentOfComponent(t,s);if(u)return u}return null},r.prototype._determineAbsolutePathChangesRecursively=function(t,e,n){var r,i=t.components;if(i)for(r=0;r<i.length;r++){var o=i[r],a=this._allComponents[o.id];n.push({item:a,parentPath:e,absPath:c.appendPathElements(e,o.path)})}var s=t.children;if(s)for(r=0;r<s.length;r++){var u=s[r],l=this._allNodes[u.id],f=u.path,h=f?c.appendPathElements(e,f):e;n.push({item:l,parentPath:e,absPath:f?h:void 0}),this._determineAbsolutePathChangesRecursively(u,h,n)}},r.prototype._setPathOfNode=function(t,e){var n=e?c.appendPathElements(t.parentPath,e):t.parentPath,r=[{item:t,absPath:e?n:void 0}];this._determineAbsolutePathChangesRecursively(t._data,n,r);var i,a,s=c.flatCopy(this._absolutePaths);for(i=0;i<r.length;i++){var u=r[i].item;u._data.path&&delete s[this._normalizedAbsolutePathForItem(u)]}for(i=0;i<r.length;i++)if(a=r[i],a.absPath){var l=a.absPath.toLowerCase();if(s[l])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+l);if(!c.isValidAbsolutePath(l))throw new o(o.INVALID_PARAMS,"Invalid absolute path: "+l);s[l]=a.item}for(i=0;i<r.length;i++)a=r[i],a.parentPath&&(a.item._parentPath=a.parentPath);t._data.path=e,this._absolutePaths=s},r.prototype._setPathOfComponent=function(t,e){if(!this._allComponents[t.id])throw new o(o.INVALID_PARAMS,"Unknown component.");var n=c.appendPathElements(t.parentPath,e).toLowerCase();if(this._absolutePaths[n])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path for component: "+n);if(!c.isValidAbsolutePath(n))throw new o(o.INVALID_PARAMS,"Invalid absolute path: "+n);delete this._absolutePaths[this._normalizedAbsolutePathForItem(t)],this._absolutePaths[n]=t,t._data.path=e},r.prototype._setDirty=function(t){this._isDirty=!0,this._local().change=this.changeCount+1,t||"unmodified"!==this._data.state&&this._data.state||(this._data.state="modified")},r.prototype._normalizedAbsolutePathForItem=function(t,e){var n;return n=e?c.appendPathElements(e.absolutePath||e._parentPath,t.path):t.absolutePath,n.toLowerCase()},r.prototype._hasSameEndpoint=function(t){var e=this._getBranchOf(this).compositeHref,n=this._getBranchOf(t).compositeHref;if(e&&n){var r=c.endPointOf(e),i=c.endPointOf(n);if(r&&i&&r!==i)return!1}return!0},r.prototype._copyComponent=function(t,e,n,r,a,s){if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "component".');if(s&&"function"!=typeof s)throw new o(o.INVALID_PARAMS,"Param callback must be a function.");var u=this,c=t._owner._core,l=this._isSameComposite(c),f=l||this._hasSameEndpoint(t),h=c._local(),d=this._localStorage,p=c._localStorage,_=d&&p;if(_&&!s&&!l)throw new o(o.INVALID_PARAMS,"Must pass a callback when copying between two different composites.");if(!_&&!f)throw new o(o.NO_LOCAL_STORAGE,"Cannot copy between two different endpoints without local storage.");var v=function(t,e,n){i(t,e,l,f,!r,_?d:void 0,n,h)},m=_?p.componentAssetPath(t,h):void 0;if(!s)return this._copyComponentModel(t,e,a,n,r,v);if(l||!m)try{s(void 0,this._copyComponentModel(t,e,a,n,r,v))}catch(t){s(t)}else{var y={};d.ingestComponentAsset(t,m,!0,y,function(i){if(i)s(i);else try{h=y,s(void 0,u._copyComponentModel(t,e,a,n,r,v))}catch(t){s(t)}})}},r.prototype._copyComponentModel=function(t,e,n,r,i,a){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "component".');var u=t._owner,l=new s(JSON.parse(JSON.stringify(t._data)));r?(l.path=r,l.id=i||c.generateUuid()):i&&(l.id=i),l._owner=this._owner,t.id===l.id&&this._isSameComposite(u._core)||(l.state="modified",l.etag=void 0,l.version=void 0,l.md5=void 0,l.length=void 0);var f=this._allComponents[l.id];if(f&&!n)throw new o(o.DUPLICATE_VALUE,"Component already exists.");if(n&&!f)throw new o(o.INVALID_PARAMS,"Could not find existing component.");var h,d;if(n){var p=this._nodeDataOfParentOfComponent(f);if(!p)throw new o(o.INVALID_PARAMS,"Parent node of existing component not found in this branch.");var _=p.parentNodeData.id;if(!(d=this._allNodes[_]))throw new o(o.INVALID_STATE,"Unknown parent node.");h=p.index}else if(!(d=e?this._allNodes[e.id]:this.rootNode))throw new o(o.INVALID_PARAMS,"Unknown parent node.");l._parentPath=d.absolutePath||d._parentPath;var v=this._normalizedAbsolutePathForItem(l),m=this._absolutePaths[v];if(m&&m!==f)throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+v);if(!c.isValidAbsolutePath(v))throw new o(o.INVALID_PARAMS,"Component path must be a valid path for a component.");var y=this._local();a&&(y=c.deepCopy(y),a(t,l,y));var g=d._data.components;return n?g[h]=l._data:g?g.push(l._data):d._data.components=[l._data],this._data.local=y,this._allComponents[l.id]=l,this._absolutePaths[v]=l,this._setDirty(),l},r.prototype._copyChild=function(t,e,n,r,a,s,u){if(!t)throw new o(o.INVALID_PARAMS,'Expecting param "node".');var c=this,l=t._owner._core,f=this._isSameComposite(l),h=f||this._hasSameEndpoint(t),d=l._local(),p=this._localStorage,_=l._localStorage,v=p&&_,m=l._recursivelyGetAllComponentsOfChild(t);if(m.length>0){if(v&&!u&&!f)throw new o(o.INVALID_PARAMS,"Must pass a callback when copying between two different composites.");if(!v&&!h)throw new o(o.NO_LOCAL_STORAGE,"Cannot copy components between two different endpoints without local storage.")}var y=function(t,e,n){i(t,e,f,h,!0,v?p:void 0,n,d)};if(!u)return this._copyChildModel(t,e,n,s,r,a,y);var g=function(){u(void 0,c._copyChildModel(t,e,n,s,r,a,y))};if(0===m.length||f||!v)try{g()}catch(t){u(t)}else{var b,A,w={},E=m.length,C=0,S=function(t){if(t&&!A&&(A=t),0===--C)if(A)u(A);else try{d=w,g()}catch(t){u(t)}};for(b=0;E>b;b++){var k=m[b],L=_.componentAssetPath(k,d);L&&(C++,p.ingestComponentAsset(k,L,!0,w,S))}if(0===C)try{g()}catch(t){u(t)}}},r.prototype._copyChildModel=function(t,e,n,r,i,u,l){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");var f=t._owner,h=new a(JSON.parse(JSON.stringify(t._data)));i?(h.path=i,h.id=u||c.generateUuid()):u&&(h.id=u),h._owner=this._owner,t.isRoot&&(delete h._data.local,delete h._data["manifest-format-version"]);var d=this._allNodes[h.id];if(d&&!r)throw new o(o.DUPLICATE_VALUE,"Child node already exists.");if(r&&!d)throw new o(o.INVALID_PARAMS,"Could not find existing node to replace.");var p;if(r){var _=this._nodeDataOfParentOfNode(d);if(!_)throw new o(o.INVALID_PARAMS,"Parent of existing node not found in this branch.");var v=_.parentNodeData.id;if(!(p=this._allNodes[v]))throw new o(o.INVALID_STATE,"Unknown parent node.");n=_.index}else if(!(p=e?this._allNodes[e.id]:this.rootNode))throw new o(o.INVALID_PARAMS,"Unknown parent node.");if(h._parentPath=p.absolutePath||p._parentPath,h.path){var m=this._normalizedAbsolutePathForItem(h),y=this._absolutePaths[m];if(y&&y!==d)throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+m);if(!c.isValidAbsolutePath(m))throw new o(o.INVALID_PARAMS,"Node path must be a valid path for a node.")}var g=c.flatCopy(this._allNodes),b=c.flatCopy(this._allComponents),A=c.flatCopy(this._absolutePaths),w=c.deepCopy(this._local()),E=function(t,e,n,r,i,o){delete n[t.id],t.path&&delete i[e._normalizedAbsolutePathForItem(t)];var a,s,u=t._data.children;if(u)for(s=u.length,a=0;s>a;a++)E(n[u[a].id],e,n,r,i,o);var c=t._data.components;if(c)for(s=c.length,a=0;s>a;a++){var l=r[c[a].id];delete r[l.id],delete i[e._normalizedAbsolutePathForItem(l)],e._localStorage&&(e._localStorage.removeComponentAsset(l,o),e._setSourceHrefOfComponent(void 0,l,o))}};d&&E(d,this,g,b,A,w);var C=this,S=function(t,e,n,r,i,u,f,h){if(r[t.id])throw new o(o.DUPLICATE_VALUE,"Duplicate node id: "+t.id);r[t.id]=t;var d;if(t.path){if(d=e._core._normalizedAbsolutePathForItem(t),u[d])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+d);u[d]=t}var p,_,v=t._data.children;if(v)for(_=v.length,p=0;_>p;p++){var m=new a(v[p]);r[m.id]&&(m.id=c.generateUuid()),m._owner=e,m._parentPath=t.absolutePath||t._parentPath,S(m,e,n,r,i,u,f,h)}var y=t._data.components;if(y)for(_=y.length,p=0;_>p;p++){var g=new s(y[p]),b=g.id;if(i[b]&&(g.id=c.generateUuid(),g.state="modified",g.etag=void 0,g.version=void 0,g.md5=void 0,g.length=void 0),g._owner=e,g._parentPath=t.absolutePath||t._parentPath,l&&l(n.getComponentWithId(b),g,f),i[g.id])throw new o(o.DUPLICATE_VALUE,"Duplicate component id: "+g.id);if(i[g.id]=g,d=e._core._normalizedAbsolutePathForItem(g),u[d])throw new o(o.DUPLICATE_VALUE,"Duplicate absolute path: "+d);u[d]=g}};if(S(h,this._owner,f,g,b,A,w,f._local()),r)p._data.children[n]=h._data;else{var k=p._data.children;k?(n>=0&&n<=k.length||(n=k.length),n===k.length?k[n]=h._data:k.splice(n,0,h._data)):p._data.children=[h._data]}return C._allNodes=g,C._allComponents=b,C._absolutePaths=A,C._data.local=w,C._setDirty(),h},r.prototype._verifyIntegrity=function(t,e,n){var r,i=this,s=[],u=!1,l=function(t){return s.push(new o(o.INVALID_STATE,t)),e&&(u||(e("Branch for composite "+i.rootNode.id+" has the following errors:"),u=!0),e("   "+t)),!1},f=function(t,e){return!!t||l(e)},h=[],d=function(t){(h.indexOf(t)<0||l("Item "+t.id+" encountered more than once"))&&h.push(t)},p=c.flatCopy(this._allComponents),_=c.flatCopy(this._allNodes),v=c.flatCopy(this._absolutePaths),m=Object.keys(v),y=m.length;for(r=0;y>r;r++){var g=m[r];f("/"===g.charAt(0),"Absolute path "+g+" does not start with a slash.")}var b=function(t,e){var n,r,o=t.children;if(o)for(n=0;n<o.length;n++){var a=o[n],s=_[a.id];(s||l("Node "+a.id+" is not in cache."))&&(d(s),f(s._data===a,"Node "+s.id+" _data property incorrect."),delete _[s.id],s.path&&s._owner&&(r=i._normalizedAbsolutePathForItem(s),(v[r]||l("Absolute path of node "+s.id+" ("+r+") is not in cache."))&&delete v[r]),f(s._parentPath===e,"Parent path of node "+s.id+" should be "+e+" but is "+s._parentPath),f(s._owner===i._owner,"Node "+s.id+" _owner property is not correct.")),b(a,a.path?c.appendPathElements(e,a.path):e)}var u=t.components;if(u)for(n=0;n<u.length;n++){var h=u[n],m=p[h.id];(m||l("Component "+h.id+" is not in cache."))&&(d(m),f(m._data===h,"Component "+m.id+" _data property incorrect."),delete p[m.id],m._owner&&(r=i._normalizedAbsolutePathForItem(m),(v[r]||l("Absolute path "+r+" is not in cache."))&&delete v[r]),f(m._parentPath===e,"Parent path of component "+m.id+" should be "+e+" but is "+m._parentPath),f(m._owner===i._owner,"Component "+m.id+" _owner property is not correct."))}},A=v[a.ROOT_PATH];f(A,"Cannot find root node via path")&&(f(A.id===this._data.id,"Root node has correct id"),f(A.path===a.ROOT_PATH,"Root node has correct path"),f(""===A._parentPath,"Root node has correct parent path"),f(A._owner===this._owner,"Root node has correct owner"),f(A._data===this._data,"Root node has correct data"),f(_[A.id]===A,"Cannot find root node via id")&&delete _[A.id],delete v[a.ROOT_PATH]),b(this._data,a.ROOT_PATH);var w=Object.keys(p);for(r=0;r<w.length;r++)l("Component "+w[r]+" is in cache but could not be found.");for(w=Object.keys(_),r=0;r<w.length;r++)l("Node "+w[r]+" is in cache but could not be found.");for(w=Object.keys(v),r=0;r<w.length;r++)l("Absolute path "+w[r]+" is in cache but could not be found.");if(this._localStorage){var E=this._localStorage.componentIds(this._local());for(r=0;r<E.length;r++)f(this._allComponents[E[r]],"Component "+E[r]+" is in local storage mapping but could not be found in the manifest.");if(t)for(E=Object.keys(this._allComponents),r=0;r<E.length;r++){var C=E[r],S=this._allComponents[C],k=this._localStorage.componentAssetPath(S,this._local());f(k,"Component "+C+" does not have an entry in local storage mapping.")&&n&&f(n.existsSync(k),"Asset "+k+" does not exist.")}var L=this._componentSourceHrefLookup();if(L)for(E=Object.keys(L),y=E.length,r=0;y>r;r++){var T=this._allComponents[E[r]];T?f("modified"===T.state,"Component "+E[r]+" is in local source href mapping but has a state of "+T.state):f(!1,"Component "+E[r]+" is in local source href mapping but could not be found in the manifest.")}}return s.length?s:null},r}),a("components/dcx-js/src/AdobeDCXElement",["require","exports","module","./AdobeDCXBranchCore","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n){if(this._owner=e,t)t=this._setData(t,n);else{t={id:a.generateUuid()},this._core=new i(t,this,n),this._data=t}}var i=t("./AdobeDCXBranchCore"),o=t("./AdobeDCXError"),a=t("./AdobeDCXUtil");return Object.defineProperties(r.prototype,{rootNode:{get:function(){return this._core.rootNode},set:function(t){this._core.rootNode=t}},name:{get:function(){return this._core.rootNode.name},set:function(t){var e=this._core;if(e._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new o(o.INVALID_PARAMS,"Expecting a string or undefined.");e.rootNode.name=t}},type:{get:function(){return this._core.rootNode.type},set:function(t){var e=this._core;if(e._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new o(o.INVALID_PARAMS,"Expecting a non-empty string.");e.rootNode.type=t}},compositeHref:{get:function(){return this._owner.compositeHref},set:function(t){throw new o(o.READ_ONLY,'Property "compositeHref" is read-only.')}},_localStorage:{get:function(){return this._core._localStorage},set:function(t){this._core._localStorage=t}},hasLocalStorage:{get:function(){return this._core.hasLocalStorage},set:function(t){this._core.hasLocalStorage=t}},_isDirty:{get:function(){return this._core._isDirty},set:function(t){this._core._isDirty=t}},isDirty:{get:function(){return this._isDirty},set:function(t){this._core.isDirty=t}},changeCount:{get:function(){return this._core.changeCount},set:function(t){this._core.changeCount=t}}}),r.prototype.getChildWithId=function(t){return this._core.getChildWithId(t)},r.prototype.getChildWithAbsolutePath=function(t){return this._core.getChildWithAbsolutePath(t)},r.prototype.getChildrenOf=function(t){return this._core.getChildrenOf(t)},r.prototype.addChild=function(t,e,n,r){return this._core.addChild(t,e,n,r)},r.prototype.removeChild=function(t){return this._core.removeChild(t)},r.prototype.moveChild=function(t,e,n){return this._core.moveChild(t,e,n)},r.prototype.copyChild=function(t,e,n,r,i,o){return this._core.copyChild(t,e,n,r,i,o)},r.prototype.allComponents=function(){return this._core.allComponents()},r.prototype.getComponentWithId=function(t){return this._core.getComponentWithId(t)},r.prototype.getComponentWithAbsolutePath=function(t){return this._core.getComponentWithAbsolutePath(t)},r.prototype.getComponentsOf=function(t){return this._core.getComponentsOf(t)},r.prototype.addComponent=function(t,e,n,r,i,o,a,s,u,c){return this._core.addComponent(t,e,n,r,i,o,a,s,u,c)},r.prototype.addComponentWithUploadResults=function(t,e,n,r,i){return this._core.addComponentWithUploadResults(t,e,n,r,i)},r.prototype.updateComponent=function(t,e,n,r){return this._core.updateComponent(t,e,n,r)},r.prototype.updateComponentWithUploadResults=function(t,e){return this._core.updateComponentWithUploadResults(t,e)},r.prototype.removeComponent=function(t){return this._core.removeComponent(t)},r.prototype.moveComponent=function(t,e){return this._core.moveComponent(t,e)},r.prototype.copyComponent=function(t,e,n,r,i){return this._core.copyComponent(t,e,n,r,i)},r.prototype.assetOfComponent=function(t,e){return this._core.assetOfComponent(t,e)},r.prototype.parse=function(t){if("string"!=typeof t)throw new o(o.INVALID_PARAMS,'Param "data" must be a string');var e=null;try{e=JSON.parse(t)}catch(t){throw new o(o.INVALID_JSON,"Manifest could not be parsed. Underlying error: "+t.message)}return this._setData(e,this._core._readOnly)},r.prototype.copy=function(){return new r(JSON.parse(JSON.stringify(this._data)),this._owner)},r.prototype._updateLocalDataFromBranch=function(t){if(this._readOnly)throw new o(o.READ_ONLY,"This object is read-only.");if(!this._localStorage)throw new o(o.NO_LOCAL_STORAGE,"No local storage.");if(!t._localStorage)throw new o(o.NO_LOCAL_STORAGE,"No local storage for source.");if(this._localStorage.compositePath!==t._localStorage.compositePath)throw new o(o.INVALID_PARAMS,"Branches must have same storage path.");this._core._localStorage.copyLocalStorageData(t,t._core._local(),this,this._core._local()),this._core._copySourceHrefsFrom(t._core)},r.prototype._verify=function(t){return"string"!=typeof t.id?new o(o.INVALID_DATA,"Element is missing an id of type string"):"string"!=typeof t.name?new o(o.INVALID_DATA,"Element is missing a name of type string"):"string"!=typeof t.type?new o(o.INVALID_DATA,"Element is missing a type of type string"):null},r.prototype._setData=function(t,e){var n=this._verify(t);if(null===n)return this._core=new i(t,this,e),this._data=t,this;throw n},r.prototype._local=function(){return this._core._local()},r.prototype._setDirty=function(t){this._core._setDirty(t)},r.prototype._setPathOfNode=function(t,e){this._core._setPathOfNode(t,e)},r.prototype._verifyIntegrity=function(t,e,n){return this._core._verifyIntegrity(t,e,n)},r}),a("components/dcx-js/src/AdobeDCXBranch",["require","exports","module","./AdobeDCXBranchCore","./AdobeDCXElement","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e){if(t)t=this._setData(t,e);else{var n=l.generateUuid();t={"manifest-format-version":f,id:n},this.originalManifestFormatVersion=f,this._core=new s(t,this,e),this._data=t}this._pendingElements=[]}function i(t){var e,n,r=t.components;if(r)for(n=r.length,e=0;n>e;e++){var o=r[e];delete o.localStorageAssetId}var a=t.children;if(a)for(n=a.length,e=0;n>e;e++)i(a[e])}function o(t,e){e&&t.path&&delete t.path;var n,r=t.components;if("object"==typeof r)for(n=0;n<r.length;n++){var i=r[n];"number"==typeof i.version&&(i.version=i.version.toString())}var a=t.children;if("object"==typeof a)for(n=0;n<a.length;n++){var s=a[n];o(s)}}function a(t){var e=t["manifest-format-version"];if(f>e){if(4>e)throw new c(c.INVALID_DATA,"Encountered manifest format version "+t["manifest-format-version"]+". Format version conversion not yet implemented for that version.");5>e&&i(t),6>e&&o(t,!0)}}var s=t("./AdobeDCXBranchCore"),u=t("./AdobeDCXElement"),c=t("./AdobeDCXError"),l=t("./AdobeDCXUtil"),f=6;return r._newBranchAsCopyOfCore=function(t,e){var n=JSON.parse(JSON.stringify(t._data)),i=new r(n),o=i._core;return i._localStorage=e,i._resetIdentity(function(n){var r=t.getComponentWithId(n.id);if(!r)throw new c(c.INVALID_STATE,"Could not find original component.");if("modified"===r.state||!r.etag)throw new c(c.INVALID_STATE,"Cannot create a new composite from a branch that contains modified or unbound components.");var i=t._getHrefOfComponent(r);if(!i)throw new c(c.INVALID_STATE,"Cannot determine the href of component id "+r.id);o._setSourceHrefOfComponent(i,n),e&&e.removeComponentAsset(n,o._local())}),i},Object.defineProperties(r.prototype,{compositeId:{get:function(){return this._core.rootNode.id},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new c(c.INVALID_PARAMS,"Expecting a non-empty string.");if(e._allNodes[t])throw new c(c.DUPLICATE_VALUE,"There is already a node with the same id.");delete e._allNodes[this._data.id],this._data.id=t,e._allNodes[t]=this._core.rootNode,e._setDirty()}},rootNode:{get:function(){return this._core.rootNode},set:function(t){this._core.rootNode=t}},name:{get:function(){return this._core.rootNode.name},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new c(c.INVALID_PARAMS,"Expecting a string or undefined.");e.rootNode.name=t}},type:{get:function(){return this._core.rootNode.type},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t||""===t)throw new c(c.INVALID_PARAMS,"Expecting a non-empty string.");e.rootNode.type=t}},compositeHref:{get:function(){return this._data.local?this._data.local.compositeHref:void 0},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new c(c.INVALID_PARAMS,"Expecting a string or undefined.");e._local().compositeHref=l.ensureRelativeHrefStartsWithSlash(t),e._setDirty()}},_collaborationType:{get:function(){return this._data.local?this._data.local.collaborationType:void 0},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");t?e._local().collaborationType=t:delete e._local().collaborationType,e._setDirty(!0)}},_clientDataString:{get:function(){return this._data.local?this._data.local.clientDataString:void 0},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");t?e._local().clientDataString=t:delete e._local().clientDataString,e._setDirty(!0)}},manifestEtag:{get:function(){return this._data.local?this._data.local.manifestEtag:void 0},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t&&void 0!==t)throw new c(c.INVALID_PARAMS,"Expecting a string or undefined.");e._local().manifestEtag=t,e._setDirty()}},compositeState:{get:function(){return this._data.state||"unmodified"},set:function(t){var e=this._core;if(e._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if("string"!=typeof t)throw new c(c.INVALID_PARAMS,"Expecting a string.");if("unmodified"!==t&&"modified"!==t&&"pendingDelete"!==t&&"committedDelete"!==t)throw new c(c.INVALID_PARAMS,'State must be "modified", "unmodified", "pendingDelete", or "committedDelete".');this._data.state=t,e._setDirty(!0)}},isBound:{get:function(){return this.manifestEtag&&this.compositeHref},set:function(){throw new c(c.READ_ONLY,"Cannot set the property isBound. Use resetIdentity instead.")}},_localStorage:{get:function(){return this._core._localStorage},set:function(t){this._core._localStorage=t}},hasLocalStorage:{get:function(){return this._core.hasLocalStorage},set:function(t){this._core.hasLocalStorage=t}},_isDirty:{get:function(){return this._core._isDirty},set:function(t){this._core._isDirty=t}},isDirty:{get:function(){return this._core.isDirty},set:function(t){this._core.isDirty=t}},localData:{get:function(){return this._core._stringify(!1,!0)},set:function(){throw new c(c.READ_ONLY,"Cannot set the property localData.")}},remoteData:{get:function(){return this._core._stringify(!0)},set:function(){throw new c(c.READ_ONLY,"Cannot set the property remoteData.")}},pendingElements:{get:function(){return this._pendingElements},set:function(t){throw new c(c.READ_ONLY,"Cannot set the property pendingElements.")}},changeCount:{get:function(){return this._core.changeCount},set:function(t){this._core.changeCount=t}}}),r.prototype.parse=function(t){if("string"!=typeof t)throw new c(c.INVALID_PARAMS,'Param "data" must be a string');var e=null;try{e=JSON.parse(t)}catch(t){throw new c(c.INVALID_JSON,"Manifest could not be parsed. Underlying error: "+t.message)}return this._setData(e,this._core._readOnly)},r.prototype.getElementWithId=function(t){return this._createElement(this._core.getChildWithId(t))},r.prototype.getElementWithAbsolutePath=function(t){return this._createElement(this._core.getChildWithAbsolutePath(t))},r.prototype.addElement=function(t,e,n,r,i,o){if("string"!=typeof t)throw new c(c.INVALID_PARAMS,"Element must have a name of type string");if("string"!=typeof e)throw new c(c.INVALID_PARAMS,"Element must have a type of type string");if("string"!=typeof n)throw new c(c.INVALID_PARAMS,"Element must have a path of type string");var a=this._core.addChild(t,r,i,o);try{a.path=n}catch(t){throw this._core.removeChild(a),t}return a._data.type=e,this._createElement(a)},r.prototype.updateElement=function(t){var e=this.getChildWithId(t.rootNode.id);if(!e)throw new c(c.INVALID_PARAMS,"Element does not exist in branch.");var n=this._core.replaceChild(t.rootNode,e.path);return this._deleteElement(t),n},r.prototype.abandonElement=function(t){this._deleteElement(t)},r.prototype.getChildWithId=function(t){return this._core.getChildWithId(t)},r.prototype.getChildWithAbsolutePath=function(t){return this._core.getChildWithAbsolutePath(t)},r.prototype.getChildrenOf=function(t){return this._core.getChildrenOf(t)},r.prototype.addChild=function(t,e,n,r){return this._core.addChild(t,e,n,r)},r.prototype.removeChild=function(t){return this._core.removeChild(t)},r.prototype.moveChild=function(t,e,n){return this._core.moveChild(t,e,n)},r.prototype.copyChild=function(t,e,n,r,i,o){return this._core.copyChild(t,e,n,r,i,o)},r.prototype.replaceChild=function(t,e,n,r){return this._core.replaceChild(t,e,n,r)},r.prototype.allComponents=function(){return this._core.allComponents()},r.prototype.getComponentWithId=function(t){return this._core.getComponentWithId(t)},r.prototype.getComponentWithAbsolutePath=function(t){return this._core.getComponentWithAbsolutePath(t)},r.prototype.getComponentsOf=function(t){return this._core.getComponentsOf(t)},r.prototype.addComponent=function(t,e,n,r,i,o,a,s,u,c){return this._core.addComponent(t,e,n,r,i,o,a,s,u,c)},r.prototype.addComponentWithUploadResults=function(t,e,n,r,i){return this._core.addComponentWithUploadResults(t,e,n,r,i)},r.prototype.updateComponent=function(t,e,n,r){return this._core.updateComponent(t,e,n,r)},r.prototype.updateComponentWithUploadResults=function(t,e){return this._core.updateComponentWithUploadResults(t,e)},r.prototype.removeComponent=function(t){return this._core.removeComponent(t)},r.prototype.moveComponent=function(t,e){return this._core.moveComponent(t,e)},r.prototype.copyComponent=function(t,e,n,r,i){return this._core.copyComponent(t,e,n,r,i)},r.prototype.replaceComponent=function(t,e,n,r){return this._core.replaceComponent(t,e,n,r)},r.prototype.assetOfComponent=function(t,e){return this._core.assetOfComponent(t,e)},r.prototype.copy=function(){return new r(JSON.parse(JSON.stringify(this._data)))},r.prototype._createElement=function(t){var e;if(t){var n=JSON.parse(JSON.stringify(t._data));n["manifest-format-version"]=this._data["manifest-format-version"],delete n.path,(e=new u(n,this,this._core._readOnly))&&this._localStorage&&(e._localStorage=this._localStorage,e._updateLocalDataFromBranch(this),this._localStorage.registerInMemoryBranchOrElement(e))}return e&&this._pendingElements.push(e),e},r.prototype._deleteElement=function(t){var e=this._pendingElements.indexOf(t);if(0>e)throw new c(c.INVALID_PARAMS,"Unknown element.");this._pendingElements.splice(e,1),this._localStorage&&this._localStorage.unregisterInMemoryBranchOrElement(t)},r.prototype._updateLocalDataFromBranch=function(t){if(this._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");if(!this._localStorage)throw new c(c.NO_LOCAL_STORAGE,"No local storage.");if(!t._localStorage)throw new c(c.NO_LOCAL_STORAGE,"No local storage for source.");if(this._localStorage.compositePath!==t._localStorage.compositePath)throw new c(c.INVALID_PARAMS,"Branches must have same storage path.");this._core._localStorage.copyLocalStorageData(t,t._core._local(),this,this._core._local()),this._core._copySourceHrefsFrom(t._core)},r.prototype._verify=function(t){return"string"!=typeof t.id?new c(c.INVALID_DATA,"Manifest is missing an id of type string"):"string"!=typeof t.name?new c(c.INVALID_DATA,"Manifest is missing a name of type string"):"string"!=typeof t.type?new c(c.INVALID_DATA,"Manifest is missing a type of type string"):"number"!=typeof t["manifest-format-version"]?new c(c.INVALID_DATA,"Manifest is missing a manifest-format-version of type number"):null},r.prototype._setData=function(t,e){this.originalManifestFormatVersion=t["manifest-format-version"],a(t),t.local&&(t.local.version=2);var n=this._verify(t);if(null===n)return t["manifest-format-version"]=f,this._core=new s(t,this,e),this._data=t,this;throw n},r.prototype._reset=function(t,e){if(this._readOnly)throw new c(c.READ_ONLY,"This object is read-only.");this._data.local&&(delete this._data.local.manifestEtag,delete this._data.local.compositeHref),t||(this._data.id=l.generateUuid()),this._data.state="modified",this._core._recursiveReset(this._data,e),this._core._setDirty()},r.prototype._resetBinding=function(t){this._reset(!0,t)},r.prototype._resetIdentity=function(t){this._reset(!1,t)},r.prototype._local=function(){return this._core._local()},r.prototype._setDirty=function(t){this._core._setDirty(t)},r.prototype._setPathOfNode=function(t,e){this._core._setPathOfNode(t,e)},r.prototype._verifyIntegrity=function(t,e,n){return this._core._verifyIntegrity(t,e,n)},r}),a("components/dcx-js/src/AdobeDCXPushJournal",["require","exports","module","./AdobeDCXError","./AdobeDCXFS","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n){n?this._setData(n,t.href):this._data={"push-journal-format-version":a,"composite-href":t.href,"uploaded-components":{}},this._filePath=e,this._waitingCallbacks=[],this._commitInProgress=!1,this._needAnotherCommit=!1}var i=t("./AdobeDCXError"),o=t("./AdobeDCXFS"),a=(t("./AdobeDCXUtil"),3);return r.readJournal=function(t,e,n,i){o.readFile(t,"utf8",function(o,a){var s;if(o&&o.code&&n&&(o=void 0),!o)try{a=JSON.parse(a),s=new r(e,t,a)}catch(i){n?s=new r(e,t):o=i}i(o,o?void 0:s)})},Object.defineProperties(r.prototype,{compositeHref:{get:function(){return this._data["composite-href"]},set:function(t){throw new i(i.READ_ONLY,"This property is read-only.")}},manifestEtag:{get:function(){return this._data.etag},set:function(t){t?this._data.etag=t:delete this._data.etag}},currentBranchEtag:{get:function(){return this._data["current-branch-etag"]},set:function(t){t?this._data["current-branch-etag"]=t:delete this._data["current-branch-etag"]}},changeCount:{get:function(){return this._data.change},set:function(t){t?this._data.change=t:delete this._data.change}},compositeHasBeenCreated:{get:function(){return!!this._data["composite-created"]},set:function(t){t?this._data["composite-created"]=!0:delete this._data["composite-created"]}},compositeHasBeenDeleted:{get:function(){return!!this._data["composite-deleted"]},set:function(t){t?this._data["composite-deleted"]=!0:delete this._data["composite-deleted"]}},isEmpty:{get:function(){return 0===Object.keys(this._data["uploaded-components"]).length&&!this.compositeHasBeenDeleted&&!this.manifestEtag},set:function(t){throw new i(i.READ_ONLY,"This property is read-only.")}},isComplete:{get:function(){return!!(this._data.etag&&this._data.change||this._data["composite-deleted"])},set:function(t){throw new i(i.READ_ONLY,"This property is read-only.")}}}),r.prototype.recordUploadedComponent=function(t,e,n,r,i,o,a){var s={etag:e,length:i,version:n,md5:r};o&&(s["storage-name"]=o),a&&(s["source-href"]=a),this._data["uploaded-components"][t]=s},r.prototype.idsOfAllUploadedComponents=function(){return Object.keys(this._data["uploaded-components"])},r.prototype.getRecordForUploadedComponent=function(t){return this._data["uploaded-components"][t]},r.prototype.removeRecordForUploadedComponent=function(t){delete this._data["uploaded-components"][t]},r.prototype.applyToBranch=function(t,e){if(!this.isComplete)throw new i(i.INVALID_STATE,"Journal is not complete.");var n=t.isDirty;if(this.compositeHasBeenDeleted)t._data.state="committedDelete",t.manifestEtag=this.manifestEtag;else{var r,o="unmodified"!==t.compositeState&&this.changeCount!==t.changeCount,a=this.idsOfAllUploadedComponents(),s=a.length;for(r=0;s>r;r++){var u=a[r],c=t.getComponentWithId(u);if(c){var l=this.getRecordForUploadedComponent(c.id);c._data.etag=l.etag,c._data.length=l.length,c._data.version=l.version,c._data.md5=l.md5,l["source-href"]?t._core._getSourceHrefOfComponent(c)===l["source-href"]&&(c._data.state="unmodified",t._core._setSourceHrefOfComponent(void 0,c)):t.hasLocalStorage&&t._localStorage.componentAssetName(c,t._local())===l["storage-name"]?(c._data.state="unmodified",t._core._setSourceHrefOfComponent(void 0,c)):t.hasLocalStorage||(c._data.state="unmodified")}}t.manifestEtag=this.manifestEtag,o||(t._data.state="unmodified")}e&&(t._isDirty=n)},r.prototype.commitChanges=function(t){if(!this._filePath)return void(t&&t());var e=this,n=function(t){e._needAnotherCommit=!1,e._commitInProgress=!0,e._waitingCallbacks=[],o.writeFileAtomically(e._filePath,JSON.stringify(e._data),"utf8",function(r){var i,o=t.length;for(i=0;o>i;i++)try{t[i](r)}catch(t){}e._needAnotherCommit?n(e._waitingCallbacks):e._commitInProgress=!1})};e._commitInProgress?(this._needAnotherCommit=!0,t&&this._waitingCallbacks.push(t)):n(t?[t]:[])},r.prototype._setData=function(t,e){if(t["push-journal-format-version"]<=2){var n=t["uploaded-components"];if(n){var r,i=Object.keys(n),o=i.length;for(r=0;o>r;r++){var s=i[r],u=n[s];"number"==typeof u.version&&(u.version=String(u.version))}}t["push-journal-format-version"]=a}var c=this._verify(t,e);if(null===c)return this._data=t,this;throw c},r.prototype._verify=function(t,e){return t["push-journal-format-version"]!==a?new i(i.INVALID_DATA,"Wrong push journal format version."):t["composite-href"]!==e?new i(i.INVALID_DATA,"Composite and journal hrefs mismatch."):t["uploaded-components"]?null:new i(i.INVALID_DATA,"Missing component list.")},r}),a("components/dcx-js/src/AdobeDCXLocalStorage",["require","exports","module","./AdobeDCXError","./AdobeDCXUtil","./AdobeDCXFS"],function(t,e,n){"use strict";function r(t,e){if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,'Param "compositePath" must be a non-empty string.');this._compositePath=t,this._preserveFileExtensions=e,this._inMemoryBranchesAndElements=[],this._inflightComponents=[]}var i=t("./AdobeDCXError"),o=t("./AdobeDCXUtil"),a=t("./AdobeDCXFS");Object.defineProperties(r.prototype,{compositePath:{get:function(){return this._compositePath},set:function(t){if("string"!=typeof t||""===t)throw new i(i.INVALID_PARAMS,'Param "compositePath" must be a non-empty string.');this._compositePath=t}}}),r.prototype.currentManifestPath=function(){return this._compositePath+"/manifest"},r.prototype.currentBaseManifestPath=function(){return this._compositePath+"/manifest.base"},r.prototype.pulledManifestPath=function(){return this._compositePath+"/pull.manifest"},r.prototype.pushedManifestPath=function(){return this._compositePath+"/push.manifest"},r.prototype.resolvePulledBranch=function(t,e){var n=this;a.writeFileAtomically(this.currentManifestPath(),t.localData,"utf8",function(t){t?(t.code!==i.OUT_OF_SPACE&&(t=new i(i.INVALID_STATE,"Could not write current manifest.",t)),e(t)):a.move(n.pulledManifestPath(),n.currentBaseManifestPath(),!1,function(t){t?e(new i(i.INVALID_STATE,"Could not move pull manifest.",t)):e()})})},r.prototype.acceptPushedBranch=function(t,e){var n=this;a.writeFileAtomically(this.currentManifestPath(),t.localData,"utf8",function(t){t?(t.code!==i.OUT_OF_SPACE&&(t=new i(i.INVALID_STATE,"Could not write current manifest.",t)),e(new i(i.INVALID_STATE,"Could not write current manifest.",t))):a.move(n.pushedManifestPath(),n.currentBaseManifestPath(),!1,function(t){t?e(new i(i.INVALID_STATE,"Could not move push manifest.",t)):n._deleteJournal(e)})})},r.prototype.discardPulledBranch=function(t){a.deleteFile(this.pulledManifestPath(),t)},r.prototype.discardPushedBranch=function(t){var e=this;a.deleteFile(this.pushedManifestPath(),function(n){n?t(n):e._deleteJournal(t)})},r.prototype.discardBaseBranch=function(t){a.deleteFile(this.currentBaseManifestPath(),t)},r.prototype.registerInMemoryBranchOrElement=function(t){if(this._inMemoryBranchesAndElements.indexOf(t)>=0)throw new i(i.INVALID_STATE,"Branch or element is already registered.");this._inMemoryBranchesAndElements.push(t)},r.prototype.unregisterInMemoryBranchOrElement=function(t){var e=this._inMemoryBranchesAndElements.indexOf(t);if(0>e)throw new i(i.INVALID_STATE,"Unknown branch or element.");this._inMemoryBranchesAndElements.splice(e,1)},r.prototype._deleteJournal=function(t){a.deleteFile(this.pushJournalPath(),t)};var s=/(\/)|(\.$)/;return r.prototype.componentAssetName=function(t,e){var n=e["copyOnWrite#storageIds"],r=n?n[t.id]:null;return r&&s.test(r)&&(r=null),r},r.prototype.componentAssetPath=function(t,e){var n=this.componentAssetName(t,e);return n?this._componentPathFromName(n):null},r.prototype.ingestComponentAsset=function(t,e,n,r,o){var s=this,u=this._newFileNameForComponent(t),c=this._componentPathFromName(u);this._inflightComponents.push(u);var l=function(e){if(!e)try{s._setComponentName(t,r,u)}catch(t){e=t}var n=s._inflightComponents.indexOf(u);0>n&&!e&&(e=new i(i.INVALID_STATE,"Could not find inflight component.")),s._inflightComponents.splice(n,1),o(e)};n?a.copyFile(e,c,l):a.move(e,c,!0,l)},r.prototype.removeComponentAsset=function(t,e){var n=e["copyOnWrite#storageIds"];n&&delete n[t.id]},r.prototype.componentIds=function(t){var e=t["copyOnWrite#storageIds"];return e?Object.keys(e):[]},r.prototype.copyLocalStorageData=function(t,e,n,r){var i,o=n.allComponents(),a=o.length,s=e["copyOnWrite#storageIds"];if(s){var u=r["copyOnWrite#storageIds"];for(u||(u=r["copyOnWrite#storageIds"]={}),i=0;a>i;i++){var c=o[i],l=c.id,f=t.getComponentWithId(l);if(f&&f.etag===c.etag){var h=s[l];h&&(u[l]=h)}}}},r.prototype.removeUnusedLocalFiles=function(t,e){var n,r,o,s,u,c=this,l=function(t){c._deleteComponentAsset(t,function(t){t&&!n&&(n=t),0===--u&&e(n)})},f=function(){try{var t,n=s.length,i=[];for(t=0;n>t;t++){var a=s[t].name,f=s[t].info;!r[a]&&f.mtime.getTime()<o&&c._inflightComponents.indexOf(a)<0&&i.push(a)}if((u=n=i.length)>0)for(t=0;n>t;t++)l(i[t])}catch(t){return void e(t)}0===u&&e()};this._gatherComponentAssetNames([this.currentManifestPath(),this.currentBaseManifestPath(),this.pulledManifestPath(),this.pushedManifestPath()],t,function(t,a,u,c){if(n)return void e(n);if(!t)try{if(1>a||!c)throw new i(i.INVALID_STATE,1>a?"No manifest found.":"Invalid time stamp");r=u,o=c}catch(e){t=e}t&&(n=t),s&&(n?e(n):f())}),a.directoryListing(this._compositePath+"/components",function(t,i){if(n)return void e(n);if(!t)try{s=i}catch(e){t=e}t&&(n=t),r&&(n?e(n):f())})},r.prototype.tempPathForComponent=function(){return this._compositePath+"/tmp/"+o.generateUuid()},r.prototype.deleteTempFiles=function(t){a.deleteDirectory(this._compositePath+"/tmp",t)},r.prototype.clientDataPath=function(){return this._compositePath+"/clientdata"},r.prototype.pushJournalPath=function(){return this._compositePath+"/push.journal"},r.prototype._copyComponentMapping=function(t,e,n,r){var i=e["copyOnWrite#storageIds"];if(i){var o=r["copyOnWrite#storageIds"];o||(o=r["copyOnWrite#storageIds"]={});var a=i[t];return a&&(o[n]=a),a}},r.prototype._componentPathFromName=function(t){return this._compositePath+"/components/"+t},r.prototype._newFileNameForComponent=function(t){var e=o.generateUuid();if(this._preserveFileExtensions){var n=t.path?o.filePathComponents(t.path).extension:null;n&&(e=e+"."+n)}return e},r.prototype._setComponentName=function(t,e,n){var r=e["copyOnWrite#storageIds"];r||(r=e["copyOnWrite#storageIds"]={}),r[t.id]=n},r.prototype._gatherComponentAssetNames=function(t,e,n){try{var r,i,s={},u=e||o.timeStamp(!0),c=t.length,l=c,f=0,h=function(t){if(t){t=t["copyOnWrite#storageIds"];var e,n=Object.keys(t);for(e=0;e<n.length;e++){var r=t[n[e]];s[r]=!0}}};for(r=0;c>r;r++)!function(t){a.exists(t,function(e){e?(f++,a.info(t,function(e,r){if(!e)try{var o=r.mtime.getTime();u>o&&(u=o),a.readFile(t,"utf8",function(t,e){if(l--,!t)try{e=JSON.parse(e),h(e.local)}catch(e){t=e}t&&!i&&(i=t),0===l&&n(i,f,s,u)})}catch(t){e=t}e&&(l--,i||(i=e),0===l&&n(i))})):0===--l&&n(i,f,s,u)})}(t[r]);for(c=this._inMemoryBranchesAndElements.length,r=0;c>r;r++)h(this._inMemoryBranchesAndElements[r]._local())}catch(t){n(t)}},r.prototype._deleteComponentAsset=function(t,e){a.deleteFile(this._componentPathFromName(t),e)},r}),a("components/dcx-js/src/AdobeDCXComposite",["require","exports","module","./AdobeDCXError","./AdobeDCXBranch","./AdobeDCXPushJournal","./AdobeDCXLocalStorage","./AdobeDCXFS","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n,r,i,a){i=c.ensureRelativeHrefStartsWithSlash(i),this._options=a||{},n?this._setPath(n):i?(this._href=i,t&&(this._name=t),e&&(this._type=e),r&&(this._id=r)):e&&(this._current=new o,t&&(this._current._data.name=t),this._current._data.type=e,r&&(this._current.compositeId=r)),this._autoRemoveUnusedLocalFiles=!0,this._options.xhrBaseBranchSupport&&(this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0),this._collaborationType=l.PRIVATE}var i=t("./AdobeDCXError"),o=t("./AdobeDCXBranch"),a=t("./AdobeDCXPushJournal"),s=t("./AdobeDCXLocalStorage"),u=t("./AdobeDCXFS"),c=t("./AdobeDCXUtil"),l={PRIVATE:void 0,SHARED_BY_USER:"sharedByUser",SHARED_WITH_USER:"sharedWithUser"};return r.newCompositeAsCopyOf=function(t,e,n,a,s,u,l){var f=t._core;if(f||t.current&&(f=t.current._core),!f)throw new i(i.INVALID_PARAMS,"compositeBranchOrElement must be a branch, an element or a composite with a current branch.");var h=new r(void 0,void 0,void 0,void 0,void 0,l);return a&&(h.path=a),h._current=o._newBranchAsCopyOfCore(f,this._localStorage),h.id=s||c.generateUuid(),e&&(h.name=e),n&&(h.type=n),u&&(h.href=u),h},r.COLLABORATION=l,Object.defineProperties(r.prototype,{id:{get:function(){return this._current?this._current.compositeId:this._id},set:function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.compositeId=t),this._id=t}},name:{get:function(){return this._current?this._current.name:this._name},set:function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.name=t),this._name=t}},type:{get:function(){return this._current?this._current.type:this._type},set:function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._current&&(this._current.type=t),this._type=t}},href:{get:function(){return this._current?this._current.compositeHref:this._href},set:function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");t=c.ensureRelativeHrefStartsWithSlash(t),this._current&&(this._current.compositeHref=t),this._href=t}},collaborationType:{get:function(){return this._current?this._current._collaborationType:this._collaborationType},set:function(t){if(t!==l.PRIVATE&&t!==l.SHARED_BY_USER&&t!==l.SHARED_WITH_USER)throw new i(i.INVALID_PARAMS,"Invalid value: ."+t);this._current&&(this._current._collaborationType=t),this._collaborationType=t}},clientDataString:{get:function(){return this._current?this._current._clientDataString:this._clientDataString},set:function(t){if("string"!=typeof t&&void 0!==t)throw new i(i.INVALID_PARAMS,"Invalid clientDataString: must be a string or undefined.");var e=this._options.maxClientDataLength||1024;if(t&&t.length>e)throw new i(i.INVALID_PARAMS,"Invalid clientDataString: cannot be greater than 1KB");this._current&&(this._current._clientDataString=t),this._clientDataString=t}},path:{get:function(){return this._path},set:function(t){if("string"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a string.");this._setPath(t)}},isBound:{get:function(){return this._current&&this._current.isBound||!this._current&&this._href},set:function(){throw new i(i.READ_ONLY,"Cannot set the property isBound. Use resetIdentity or resetBinding instead.")}},hasLocalStorage:{get:function(){return this._localStorage},set:function(){throw new i(i.READ_ONLY,"Cannot set the property hasLocalStorage.")}},autoRemoveUnusedLocalFiles:{get:function(){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");return this._autoRemoveUnusedLocalFiles},set:function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");this._autoRemoveUnusedLocalFiles=t}},clientDataStoragePath:{get:function(){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");return this._localStorage.clientDataPath()},set:function(t){throw new i(i.READ_ONLY,'Property "clientDataStoragePath" is read-only.')}},current:{get:function(){return this._current},set:function(t){throw new i(i.READ_ONLY,'Property "current" is read-only.')}}}),r.prototype.loadCurrentFromLocalStorage=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");var e=this;this._loadBranch(this._localStorage.currentManifestPath(),!1,function(n,r){if(!n&&r)try{e._current=r,e._currentBranchCommittedAtDate=c.timeStamp(!0)}catch(t){n=t}t(n,n?void 0:r)})},r.prototype.commitChanges=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");if(!this._current)return t(new i(i.INVALID_STATE,"Current branch is not in memory."));var e=this;u.writeFileAtomically(this._localStorage.currentManifestPath(),this._current.localData,"utf8",function(n){if(!n)try{e._currentBranchCommittedAtDate=c.timeStamp(!0),e._current._isDirty=!1}catch(t){n=t}t(n)})},r.prototype.tempAssetPath=function(){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");return this._localStorage.tempPathForComponent()},r.prototype.deleteTempFiles=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");this._localStorage.deleteTempFiles(function(e){t&&t(e)})},r.prototype.removeUnusedLocalFiles=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");this._localStorage.removeUnusedLocalFiles(this._currentBranchCommittedAtDate,t)},r.prototype.removeLocalStorage=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");return this._path?void u.deleteDirectory(this._path,t):t(new i(i.INVALID_STATE,"No path set."))},r.prototype.loadBaseBranch=function(t){if(!this._localStorage&&!this._baseBranchData)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");if(this._localStorage)this._loadBranch(this._localStorage.currentBaseManifestPath(),!0,t);else{var e,n;try{n=new o(void 0,!0).parse(this._baseBranchData)}catch(t){e=t}t(e,n)}},r.prototype.loadPulledBranch=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");this._loadBranch(this._localStorage.pulledManifestPath(),!1,t)},r.prototype.loadPushedBranch=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");this._loadBranch(this._localStorage.pushedManifestPath(),!1,t)},r.prototype.resolvePullWithBranch=function(t,e){if(!t)throw new i(i.INVALID_PARAMS,"Need a branch.");if(t===this._current)throw new i(i.INVALID_PARAMS,"Cannot resolve current.");if(this._localStorage&&!e)throw new i(i.INVALID_PARAMS,"Need a callback function.");var n=this,r=function(){t._collaborationType=n.collaborationType,t._clientDataString=n.clientDataString,n._current=t};if(this._localStorage)n._localStorage.resolvePulledBranch(t,function(t){if(!t)try{r(),n._autoRemoveUnusedLocalFiles&&n._localStorage.removeUnusedLocalFiles(n._currentBranchCommittedAtDate,function(t){})}catch(e){t=e}e(t,t?void 0:n._current)});else{if(this._options.xhrBaseBranchSupport&&(this._baseBranchData=this._pulledBranchData,this._pulledBranchData=void 0),r(),!e)return this._current;e(void 0,this._current)}},r.prototype.acceptPush=function(t){if(this._localStorage&&!t)throw new i(i.INVALID_PARAMS,"Need a callback function.");var e,n,r=this,o=function(i){if(!i)if(e)try{r._localStorage?(e.applyToBranch(n),r._localStorage.acceptPushedBranch(n,function(n){if(!n)try{e.applyToBranch(r._current,!0),r._autoRemoveUnusedLocalFiles&&r._localStorage.removeUnusedLocalFiles(r._currentBranchCommittedAtDate,function(t){})}catch(t){n=t}t(n)})):(e.applyToBranch(r._current,!0),r._options.xhrBaseBranchSupport&&(r._baseBranchData=r._pushedBranchData,r._pushedBranchData=void 0),r._pushJournal=void 0,t&&t())}catch(t){i=t}else t&&t();if(i){if(!t)throw i;t(i)}};if(!this._localStorage)return e=this._pushJournal,o();var s,u=2;a.readJournal(r._localStorage.pushJournalPath(),r,!1,function(t,n){u--,s?o():(t?"ENOENT"!==t.code&&(s=new i(i.INVALID_STATE,"Failed to load push journal.",t)):e=n,u||o())}),this._loadBranch(this._localStorage.currentManifestPath(),!1,function(t,e){u--,s?o():(t?s=new i(i.INVALID_STATE,"Failed to load current manifest.",t):n=e,u||o())})},r.prototype.discardPulledBranch=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");var e=this;this._localStorage.discardPulledBranch(function(n){if(!n){try{e._autoRemoveUnusedLocalFiles&&e._localStorage.removeUnusedLocalFiles(e._currentBranchCommittedAtDate,function(t){})}catch(t){n=t}t(n)}n&&t(n)})},r.prototype.discardPushedBranch=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");var e=this;this._localStorage.discardPushedBranch(function(n){if(!n){try{e._autoRemoveUnusedLocalFiles&&e._localStorage.removeUnusedLocalFiles(e._currentBranchCommittedAtDate,function(t){})}catch(t){n=t}t(n)}n&&t(n)})},r.prototype.resetBinding=function(t){delete this._href,this._current&&this._current._resetBinding(),this._localStorage?this._discardEveryBranchButCurrent(t):(this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0,t&&t())},r.prototype.resetIdentity=function(t){delete this._href,this._current?(this._current._resetIdentity(),this._id=this._current.compositeId):this._id=c.generateUuid(),this._localStorage?this._discardEveryBranchButCurrent(t):(this._baseBranchData=void 0,this._pushedBranchData=void 0,this._pulledBranchData=void 0,t&&t())},r.prototype._loadBranch=function(t,e,n){if("function"!=typeof n)throw new i(i.INVALID_PARAMS,'Param "callback" must be a function.');var r=this;u.exists(t,function(i){i?u.readFile(t,"utf8",function(t,i){var a;if(!t)try{a=new o(void 0,e).parse(i),a._localStorage=r._localStorage}catch(e){t=e}n(t,a)}):n()})},r.prototype._discardEveryBranchButCurrent=function(t){if(!this._localStorage)throw new i(i.NO_LOCAL_STORAGE,"No local storage.");var e,n=this,r=3,o=function(i){i&&!e&&(e=i),0===--r&&(!e&&n._autoRemoveUnusedLocalFiles&&n._localStorage.removeUnusedLocalFiles(n._currentBranchCommittedAtDate,function(t){}),t(e))};this._localStorage.discardPushedBranch(o),this._localStorage.discardPulledBranch(o),this._localStorage.discardBaseBranch(o)},r.prototype._setPath=function(t){this._localStorage?this._localStorage.compositePath=t:u.canUseFileSystem&&(this._localStorage=new s(t,this._options.preserveFileExtensions),this._current&&(this._current._localStorage=this._localStorage)),this._path=t},r}),"function"!=typeof e)var e=o;return a("components/dcx-js/src/AdobeNetworkHTTPService",["require","exports","module","./AdobeDCXUtil","./AdobeDCXError","./AdobeDCXFS"],function(t,i,o){"use strict";function a(t){this.filename=t}function s(){}function u(t){this._requestQueue=[],this._requestsOutstanding=[],this._rejectedAuths=[],this._authCallback=t,this._isActive=!0,this._waitingForAuthentication=!1,this._currentAuthId=h.generateUuid(),this._https=l,this._XMLHttpRequest=c,this._handlesRedirects=void 0!==c,this._maxOutstanding=5}var c,l,f,h=t("./AdobeDCXUtil"),d=t("./AdobeDCXError"),p=t("./AdobeDCXFS");void 0!==r&&r.Buffer?(l=e("https"),f=e("url")):c=window.XMLHttpRequest;var _=h.merge;return Object.defineProperties(u.prototype,{isActive:{get:function(){return this._isActive},set:function(t){this._isActive!==t&&(this._isActive=t,t||(this._authValue=void 0,this._checkQueue()))}},crossOriginCredentials:{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t}},maxOutstanding:{get:function(){return this._maxOutstanding},set:function(t){this._maxOutstanding=t,this._checkQueue()}},handlesRedirects:{get:function(){return this._handlesRedirects}}}),u.prototype._forceXhr=function(t,n){this._https=void 0,this._XMLHttpRequest=t||c||e("xhr2"),this._handlesRedirects=!n},u.FileContent=a,u.StreamProvider=s,u.prototype.setAdditionalHeaders=function(t){this._additionalHeaders=t||{}},u.prototype.setAdditionalNodeOptions=function(t){this._additionalNodeOptions=t},u.prototype.setApiKey=function(t){this._apiKey=t},u.prototype.setTimeout=function(t){this._timeout=t},u.prototype.setAuthToken=function(t){t?(this._authValue="Bearer "+t,this.resume()):(this._authValue=void 0,this._currentAuthId=h.generateUuid())},u.prototype.resume=function(){this._currentAuthId=h.generateUuid(),this._waitingForAuthentication=!1,this._checkQueue()},u.prototype.setRequestHooks=function(t,e){this._beforeHook=t,this._afterHook=e},u.prototype.invoke=function(t,e,r,i,o,s){o=o||{};var u=o.responseType;if(u instanceof a){if(!p.canUseFileSystem)throw new d(d.INVALID_PARAMS,"No filesystem access")}else if("buffer"===u){if("function"!=typeof n)throw new d(d.INVALID_PARAMS,"No Buffer class")}else if("blob"===u){if("function"!=typeof Blob)throw new d(d.INVALID_PARAMS,"No Blob class")}else if(u&&"text"!==u&&"json"!==u&&"arraybuffer"!==u)throw new d(d.INVALID_PARAMS,"Unsupported response type");r=_({},r,this._additionalHeaders),this._apiKey&&(r["x-api-key"]=this._apiKey);var c={method:t,href:e,headers:r,callback:s,body:i,options:o},l=o.reuseRequestDesc;if(l){if(this._requestQueue.indexOf(l)>=0||this._requestsOutstanding.indexOf(l)>=0)throw new d(d.INVALID_PARAMS,"Request descriptor still in use.");c=h.merge(l,c)}return this._doRequest(c),c},u.prototype._doRequest=function(t){function e(e,n){e&&h.log("["+t.id+"] error: "+e),c&&c.end();var r=v._requestsOutstanding.indexOf(t);r>=0&&v._requestsOutstanding.splice(r,1);var i=t.callback;i&&(t.callback=void 0,e&&(e.clientRequest=t.clientRequest,e.xhr=t.xhr),e&&e.code!==d.SERVICE_IS_INACTIVE&&!v._isActive?e=new d(d.SERVICE_IS_INACTIVE,"Service is now inactive",e):t.timedOut&&(e=new d(d.TIMED_OUT,"timed out request",e)),i(e,n)),v._isActive&&v._checkQueue()}function r(r){function i(){return s?void 0:(s=!0,c=void 0,e(void 0,r))}var o=!1,s=!1,u=!1,l=v._requestsOutstanding.indexOf(t);if(0>l)return void v._checkQueue();t.response=r;var f=(new Date).valueOf()-t.startTime;if(h.log("["+t.id+"] "+r.statusCode+" ("+f+"ms)"),401===r.statusCode&&v._authCallback)v._requestsOutstanding.splice(l,1),v._requestQueue.unshift(t),v._authFail(t),h.consumeStream(r);else{var _=t.progress;200===r.statusCode||201===r.statusCode||202===r.statusCode?(r.on("data",function(t){t.length&&_&&_(t.length),!c&&t&&y.push(t)}),v._https&&b instanceof a&&(c=p.createWriteStream(b.filename),r.pipe(c),o=!0)):h.consumeStream(r),r.once("end",function(){u=!0;var i=v._requestsOutstanding.indexOf(t);if(!(0>i||(v._requestsOutstanding.splice(i,1),v._checkQueue(),o||s)))return s=!0,r.response=n.concat(y),"arraybuffer"===b?r.response=new ArrayBuffer(r.response):"text"===b&&(r.response=r.response.toString()),e(void 0,r)}),r.once("close",function(){return u||s?void 0:(s=!0,e(new d(d.NETWORK_ERROR,"incomplete response")))}),o&&(c.once("finish",i),c.once("close",i))}}function i(){var n=t.progress;if(n&&u.response){var r=u.response.length;n(r-m),m=r}if(4===u.readyState){if(0===u.status)return e(new d(d.UNEXPECTED,"XHR failure"));var i=v._requestsOutstanding.indexOf(t);if(0>i)return void v._checkQueue();var o=(new Date).valueOf()-t.startTime;if(h.log("["+t.id+"] "+u.status+" ("+o+"ms)"),v._requestsOutstanding.splice(i,1),401!==u.status||!v._authCallback){if(t.xhr=u,t.response=u,u.statusCode=u.status,u.headers=h.parseHeaders(u.getAllResponseHeaders()),b instanceof a){var s=u.response.response;return void p.writeFileAtomically(b.filename,s,void 0,function(t){return t?e(new d(d.UNEXPECTED,"Can't create file",t,u)):e(void 0,u)})}return n&&g&&n(g.length||g.size),e(void 0,u)}v._requestQueue.unshift(t),v._authFail(t),v._checkQueue()}}function o(n){n.pipe(l),n.on("error",function(n){return v.abort(t),e(new d(d.TERMINATED_INPUTSTREAM,"Input stream terminated abnormally",n))})}var u,c,l,v=this,m=0,y=[],g=t.body,b=t.options.responseType;if(!this._isActive)return e(new d(d.SERVICE_IS_INACTIVE,"Network request in inactive state"));if(this._waitingForAuthentication||this._requestsOutstanding.length>=this._maxOutstanding||t.options.noSoonerThen)this._requestQueue.push(t),this._waitingForAuthentication||this._checkQueue();else{var A=t.headers;if(null===A.Authorization)delete A.Authorization;else{if(!this._allowAuthTokenToBeSentInsecurely_DONT_USE_THIS_IN_PRODUCTION&&0!==t.href.indexOf("https:"))return e(new d(d.INVALID_PARAMS,"Must not send auth token over unsecured connection"));this._authValue&&(A.Authorization=this._authValue)}if(this._currentAuthId&&(t.authId=this._currentAuthId),this._beforeHook&&this._beforeHook(t),t.id=h.generateUuid(),t.startTime=(new Date).valueOf(),A["X-Request-Id"]=t.id,this._https){this._requestsOutstanding.push(t);var w=f.parse(t.href),E=_({},this._additionalNodeOptions,w);E.method=t.method||"GET",E.headers=A,h.log("["+t.id+"] "+E.method+" "+t.href),l=this._https.request(E,r),t.clientRequest=l,l.once("error",e),v._timeout&&l.setTimeout(v._timeout,function(){t.timedOut=!0,l.abort()}),t.bytesSent=0,t.bytesReported=0,l.once("end",function(){if(t.progress){var e=t.bytesSent-t.bytesReported;e>0&&(t.progress(e),t.bytesReported+=e)}});var C=l.write;if(l.write=function(e){var n=e&&e.length;return n&&(t.bytesSent+=n),C.call(l,e,function(){t.progress&&e&&(t.progress(n),t.bytesReported+=n)})},g instanceof a){o(p.createReadStream(g.filename))}else if(g instanceof s)if(g.getStream){var S=g.getStream();o(S)}else g.getStreamAsync&&g.getStreamAsync(function(n,r){return n?(v.abort(t),e(new d(d.TERMINATED_INPUTSTREAM,"Error creating input stream",n))):void o(r)});else if(g instanceof n)l.write(g),l.end();else if(g instanceof ArrayBuffer)l.write(new n(new Int8Array(g))),l.end();else if("string"==typeof g)l.write(new n(g,"utf8")),l.end();else{if(g)return e(new d(d.INVALID_PARAMS,"Invalid data type"));l.end()}this._afterHook&&this._afterHook(t,l)}else{if(g instanceof a)return p.canUseFileSystem?void p.readFile(g.filename,{},function(n,r){return n?e(n):(t.body=r,void v._doRequest(t))}):e(new d(d.INVALID_PARAMS,"Can't use FileContent without filesystem support"));"function"==typeof n&&g instanceof n&&(t.body=g=new Int8Array(g)),this._requestsOutstanding.push(t),h.log("["+t.id+"] "+t.method+" "+t.href),u=new this._XMLHttpRequest,u.open(t.method,t.href,!0),this._withCredentials&&(u.withCredentials=!0),b&&(u.responseType=b instanceof a?"buffer":b),u.onreadystatechange=i;var k;for(k in A)A.hasOwnProperty(k)&&u.setRequestHeader(k,A[k]);t.xhr=u,v._timeout&&(u.timeout=v._timeout,u.ontimeout=function(){t.timedOut=!0,u.abort()}),g?u.send(g):u.send(),this._afterHook&&this._afterHook(t,u)}}},u.prototype._authFail=function(t){if(this._authCallback){var e=t.authId;if(-1!==this._rejectedAuths.indexOf(e))return;this._authValue=null,this._waitingForAuthentication=!0,this._rejectedAuths.unshift(e)>this._maxOutstanding&&(this._rejectedAuths.length=this._maxOutstanding),this._authCallback(this)}},u.prototype._checkQueue=function(){if(!this._isActive){var t=this._requestsOutstanding;this._requestsOutstanding=[],t.forEach(function(t){t.xhr&&t.xhr.abort(),t.clientRequest&&t.clientRequest.abort();var e=t.callback;if(e){t.callback=void 0;e(new d(d.SERVICE_IS_INACTIVE,"Network request in inactive state"))}});var e=this._requestQueue;return this._requestQueue=[],e.forEach(function(t){var e=new d(d.SERVICE_IS_INACTIVE,"Network request in inactive state"),n=t.callback;n&&(t.callback=void 0,n(e))}),void(this._checkQueueTimerId&&(clearTimeout(this._checkQueueTimerId),this._checkQueueTimerId=void 0,this._checkQueueTimerWhen=void 0))}for(var n,r=Date.now(),i=r+3e5,o=0;!(this._waitingForAuthentication||this._requestsOutstanding.length>=this._maxOutstanding||o>=this._requestQueue.length);){var a=this._requestQueue[o];n=a.options.noSoonerThen||r,n&&n>i&&(n=a.options.noSoonerThen=i),r>=n?(this._requestQueue.splice(o,1),a.options.noSoonerThen=void 0,this._doRequest(a)):o++}if(!this._waitingForAuthentication&&this._requestsOutstanding.length<this._maxOutstanding&&this._requestQueue.length>0){var s,u,c=this._requestQueue.length;for(u=0;c>u;u++)n=this._requestQueue[u].options.noSoonerThen,n&&n>i&&(n=this._requestQueue[u].options.noSoonerThen=i),n&&(s=s&&n>s?s:n);if(s&&(!this._checkQueueTimerWhen||this._checkQueueTimerWhen>s)){this._checkQueueTimerId&&clearTimeout(this._checkQueueTimerId),this._checkQueueTimerWhen=s;var l=this;this._checkQueueTimerId=setTimeout(function(){l._checkQueueTimerWhen=void 0,l._checkQueueTimerId=void 0,l._checkQueue()},s-r)}}},u.prototype.abort=function(t){var e=this._requestQueue.indexOf(t);return e>=0?void this._requestQueue.splice(e,1):void((e=this._requestsOutstanding.indexOf(t))>=0&&(this._requestsOutstanding.splice(e,1),t.xhr&&t.xhr.abort(),t.clientRequest&&t.clientRequest.abort(),this._checkQueue()))},u.prototype.abortAllWithToken=function(t){if(t){var e;for(e=0;e<this._requestQueue.length;++e)this._requestQueue[e].token===t&&(this._requestQueue.splice(e,1),--e);for(e=0;e<this._requestsOutstanding.length;++e)if(this._requestsOutstanding[e].token===t){var n=this._requestsOutstanding[e];this._requestsOutstanding.splice(e,1),--e,n.xhr&&n.xhr.abort(),n.clientRequest&&n.clientRequest.abort()}this._checkQueue()}},u}),a("components/dcx-js/src/AdobeSessionBase",["require","exports","module","./AdobeDCXError","./AdobeDCXUtil","./AdobeNetworkHTTPService"],function(t,e,n){"use strict";function r(t,e){this._service=t,this._server=e,e&&(this._endPoint=s.endPointOf(e)),this.SYNC_ASYNC_DEFAULT_DELAY=5,this.ASYNC_DEFAULT_DELAY=1,this.DEFAULT_POLL_DELAY=10,this._maxRedirects=5,this._authenticationWhitelist=[]}var i=t("./AdobeDCXError"),o=i.networkError,a=i.unexpectedResponse,s=t("./AdobeDCXUtil"),u=s.merge,c=t("./AdobeNetworkHTTPService"),l=s.appendPathElements;return r.FileContent=c.FileContent,r.StreamProvider=c.StreamProvider,Object.defineProperties(r.prototype,{maxRedirects:{get:function(){return this._maxRedirects},set:function(t){if("number"!=typeof t)throw new i(i.INVALID_PARAMS,"Expecting a number.");this._maxRedirects=Math.floor(t)}},authenticationWhitelist:{get:function(){return this._authenticationWhitelist},set:function(t){if(!Array.isArray(t))throw new i(i.INVALID_PARAMS,"Expecting an array.");this._authenticationWhitelist=t}}}),r.prototype.isValidHref=function(t){var e=s.endPointOf(t);return!e||e===this._endPoint},r.prototype.isDomainOnWhitelist=function(t){var e=s.parseURI(t).authority;if(!e||0===e.length)return!0;var n,r=e.length,i=this._authenticationWhitelist.length;for(n=0;i>n;n++){var o=this._authenticationWhitelist[n],a=o.length;if((r>a?e.slice(-a):e)===o)return!0}return!1},r.prototype.getAsset=function(t,e,n,r){function c(t,e){if(t)return r(o("Error downloading an asset",t,e));var n=e.statusCode;if(200===n)r(void 0,e);else if(304===n)r(void 0,e);else if(301===n||302===n||303===n||307===n)if(!d._service.handlesRedirects&&d.maxRedirects)if(p<d.maxRedirects){var i=e.headers.location;i?h(i):r(a("Missing location header in redirect response",t,e))}else r(a("Too many redirects",t,e));else r(a("Unexpected response getting an asset",t,e));else r(a("Unexpected response getting an asset",t,e))}if(!(t=this._resolveUrl(t)))return r(new i(i.WRONG_ENDPOINT,"Wrong endpoint: "+t));var l,f={};"string"==typeof e?f["If-None-Match"]=e:u(f,e);var h,d=this,p=0;return h=function(e){var r={responseType:n};return e&&(p++,r.reuseRequestDesc=l,d.isDomainOnWhitelist(e)||(f.Authorization=null)),d._service.invoke("GET",e||t,f,void 0,r,c)},l=h(),l.progress=s.noOp,l},r.prototype.getAssetAsType=function(t,e,n,r){function i(t,e){if(t)return r(t);if(200===e.statusCode){var n=e.response||e.responseText;r(void 0,n,e.headers.etag,e)}else 304===e.statusCode?r(void 0,null,e.headers.etag,e):r(a("Unexpected response getting asset",t,e))}return this.getAsset(t,n,e,i)},r.prototype._resolveUrl=function(t){var e=s.endPointOf(t);if(e){if(e!==this._endPoint)return;return t}return l(this._server,t)},r.prototype._makeRelativeUrl=function(t){var e=s.endPointOf(t);if(e){if(e!==this._endPoint)return;var n=s.parseURI(t);(n.scheme||n.authority)&&(t=n.path,n.query&&(t+="?"+n.query),n.fragment&&(t+="#"+n.fragment))}return t},r.prototype._parseAsyncResponse=function(t){var e=t.responseText||t.response;if(!e)throw new i(i.INVALID_DATA,"No body data.");var n={},r=e.indexOf("\n");if(-1===r)throw new i(i.INVALID_DATA,"Could not find status line.");var o=e.slice(0,13===e.charCodeAt(r-1)?r-1:r),a=o.split(" ");if(n.statusCode=parseInt(a[1],10),!n.statusCode)throw new i(i.INVALID_DATA,"Could not find status code.");a.length>2&&(n.statusText=a[2]);var u=e.search(/\r?\n\r?\n/);-1===u&&(u=e.length);var c=e.slice(r+1,u);n.headers=s.parseHeaders(c);var l="\r"===e.charAt(u)?u+2:u+1;return n.response=e.slice(l),n},r.prototype._pollForAsyncResponse=function(t,e,n,r){var i=this,s=Date.now()+1e3*e,u={responseType:"text",reuseRequestDesc:n,noSoonerThen:s};n=this._service.invoke("GET",t,void 0,void 0,u,function(e,s){if(e)return r(o("Error polling for an asynchronous reponse",e,s));var u=s.statusCode;if(202===u){var c=s.headers["retry-after"];c&&(c=parseInt(c,10)),i._pollForAsyncResponse(t,c||i.DEFAULT_POLL_DELAY,n,r)}else if(200===u){try{s=i._parseAsyncResponse(s)}catch(t){return r(a("Error parsing response body.",t,s))}u=s.statusCode,200===u||201===u||204===u?r(void 0,s):r(a("Unexpected response copying a component asset",e,s))}else r(a("Unexpected response polling for an asynchronous response",e,s))})},r.prototype._handle202Response=function(t,e,n,r){var i,o=t.responseText||t.response;try{i=JSON.parse(o)}catch(e){return r(a("Error parsing 202 response body.",e,t))}var s=i.href;if(!s)return r(a("202 response missing an href.",void 0,t));var u=t.headers["retry-after"];u=u?parseInt(u,10):n,this._pollForAsyncResponse(this._resolveUrl(s),u,e,r)},r}),a("components/dcx-js/src/AdobeStorageSession",["require","exports","module","./AdobeSessionBase","./AdobeDCXError","./AdobeDCXComposite","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e,n,r){var i=[],o="";return e&&i.push("order="+e),t&&i.push("orderBy="+t),n&&i.push("start="+n),r&&i.push("limit="+r),i.length>0&&(o="?"+i.join("&")),o}function i(t,e){if(o.call(this,t,e),!this._endPoint)throw new a(a.INVALID_PARAMS,"Could not determine endpoint from: "+e);this.authenticationWhitelist=["adobe.com","adobe.io","fotolia.net"]}var o=t("./AdobeSessionBase"),a=t("./AdobeDCXError"),s=a.networkError,u=a.unexpectedResponse,c=t("./AdobeDCXComposite"),l=t("./AdobeDCXUtil"),f=l.appendPathElements,h="If-Match",d="If-None-Match";return i.prototype=Object.create(o.prototype),i.prototype.name="AdobeStorageSession",i.FileContent=o.FileContent,i.StreamProvider=o.StreamProvider,i.prototype.getCollection=function(t,e,n){function r(e,a){if(e)return n(s("Error retrieving a collection",e,a));if(200===a.statusCode){var l=a.responseText||a.response,f=JSON.parse(l);i?i.children=i.children.concat(f.children):i=f;var h=a.headers["x-children-next-start"];if(h){var d=t+"&start="+h;c._service.invoke("GET",d,o,void 0,{responseType:"text"},r)}else n(void 0,i,a.headers.etag,a.headers)}else 304===a.statusCode?n(void 0,null,a.headers.etag,a.headers):n(u("Unexpected status code while getting a collection",void 0,a))}if(!(t=this._resolveUrl(t)))return n(new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+t));t+="?order=asc&orderby=name";var i,o={};e&&(o[d]=e);var c=this;return this._service.invoke("GET",t,o,void 0,{responseType:"text"},r)},i.prototype.pagedGetCollection=function(t,e,n,i,o,c,l,f){function h(t,e){if(t)return f(s("Error retrieving a collection",t,e));if(200===e.statusCode){var n=e.responseText||e.response,r=JSON.parse(n);l?l.children=l.children.concat(r.children):l=r,f(void 0,l,e.headers.etag,e.headers)}else 304===e.statusCode?f(void 0,null,e.headers.etag,e.headers):f(u("Unexpected status code while getting a collection",void 0,e))}if(!(t=this._resolveUrl(t)))return f(new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+t));t+=r(n,i,o,c);var p={};return e&&(p[d]=e),this._service.invoke("GET",t,p,void 0,{responseType:"text"},h)},i.prototype.getComponent=function(t,e,n){var r=this.getComponentHref(t,t.version);return this.getAsset(r,void 0,e,n)},i.prototype.getSyncGroups=function(t,e){var n=f(this._server,"assets");return this.getCollection(n,t,e)},i.prototype.getSyncGroup=function(t,e,n){var r=f(this._server,"assets",t);return this.getCollection(r,e,n)},i.prototype.getCompositeManifest=function(t,e,n){var r=t.href;return r&&(r=this._resolveUrl(r)),r?(r=f(r,"manifest"),this.getAssetAsType(r,"text",e,n)):n(new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+r))},i.prototype.headRequest=function(t,e){return this._service.invoke("HEAD",t,{},void 0,void 0,function(t,n){return t?e(t):void e(t,n)})},i.prototype.createCompositeDirectory=function(t,e,n){function r(t,e,n){var r={"Content-Type":"application/vnd.adobe.directory+json","X-Update":"content"};e&&(r[h]="*"),i._service.invoke("PUT",o,r,void 0,void 0,function(t,e){return t?n(s("Error Creating composite directory",t,e)):409===e.statusCode?(t=new a(a.ALREADY_EXISTS,t),t.response=e,n(t)):void n(void 0,e)})}var i=this,o=this._resolveUrl(t.href);return o?void r(t,e,function(a,c){if(a)return n(a);var f=c.statusCode;if(200===f||201===f)n(void 0,c);else if(404===f){var h=l.parentDirectory(o);i._service.invoke("PUT",h,{},void 0,void 0,function(i,o){if(i)return n(s("Error creating composite directory",i,o));var a=o.statusCode;200===a||201===a||409===a?r(t,e,function(t,e){if(t)return n(t);var r=e.statusCode;200===r||201===r?n(void 0,e):n(s("Error creating composite directory",t,e))}):n(u("Unexpected response creating composite directory",i,o))})}else n(u("Unexpected response creating composite directory",a,c))}):n(new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+o))},i.prototype.deleteCompositeDirectory=function(t,e){var n=this,r=this._resolveUrl(t.href);if(!r)return e(new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+r));var i={"If-Match":"*"};r+="?recursive=true&invocation_mode=sync,async";var o=this._service.invoke("DELETE",r,i,void 0,void 0,function(t,r){if(t)return e(s("Error deleting composite directory",t,r));var i=r.statusCode;return 200===i||204===i||404===i?e(void 0,r):202===i?n._handle202Response(r,o,n.SYNC_ASYNC_DEFAULT_DELAY,e):void e(u("Unexpected response deleting composite directory",t,r))})},i.prototype.leaveSharedComposite=function(t,e){if(t.collaborationType!==c.COLLABORATION.SHARED_WITH_USER)throw new a(a.INVALID_STATE,"Composite's collaboration type must be sharedWithUser.");return this.deleteCompositeDirectory(t,e)},i.prototype.uploadComponent=function(t,e,n,r,i,o){if(!t._owner||!t._owner.compositeHref)throw new a(a.INVALID_STATE,"Component must be part of a branch of a bound composite.");return this.uploadAssetForComponentId(t.id,t.type,t._owner.compositeHref,e,n,r,i,o)},i.prototype.uploadAssetForComponentId=function(t,e,n,r,i,o,c,l){function f(t,e){t?delete _[h]:_[h]="*";var n=d._service.invoke("PUT",p,_,c,void 0,function(t,n){if(t)return e(s("Error uploading component",t,n));var r=n.statusCode;if(200===r||201===r||204===r){var i;try{i=JSON.parse(n.responseText||n.response)}catch(r){return t=new a(a.INVALID_DATA,"Invalid JSON returned by server",r),t.response=n,e(t,n,i)}e(void 0,n,i)}else 507===r?(t=new a(a.EXCEEDS_QUOTA,"Exceeds quota",t),t.response=n,e(t)):(t=u("Unexpected response uploading component",t),t.response=n,e(t))});return n.token=o,n}var d=this,p=this._constructComponentHref(n,t);i&&(p+="?intermediates=false");var _={};return e&&(_["Content-Type"]=e),f(r,function(t,e,n){if(t){if(!(e=t.response))return l(t);var i=e.statusCode;return void(404===i||409===i||412===i?f(!r,l):l(t))}l(void 0,e,n)})},i.prototype.copyAssetToComponentId=function(t,e,n,r,i,o,c,l){function f(t,e,n){t?delete v[h]:v[h]="*";var r=p._service.invoke("PUT",_,v,void 0,{responseType:"text"},function(t,i){if(t)return n(s("Error uploading component",t,i));var o=i.statusCode;200===o||201===o||204===o?n(void 0,i,e):202===o?p._handle202Response(i,r,p.SYNC_ASYNC_DEFAULT_DELAY,function(t,r){n(t,r,e)}):n(u("Unexpected response copying a component asset",t,i),i,e)});return r.token=o,r}var d=this._makeRelativeUrl(c);if(!d)return l(new a(a.WRONG_ENDPOINT,"Cannot copy asset: "+c));var p=this,_=this._constructComponentHref(n,t);_+="?invocation_mode=sync,async",i&&(_+="&intermediates=false");var v={};e&&(v["Content-Type"]=e),v.Link="<"+d+">;rel=source";var m=function(t,e,n){var i;if(t){if(!(e=t.response))return l(t);var o=e.statusCode;return void(n||404!==o&&409!==o&&412!==o?507===o?(t=new a(a.EXCEEDS_QUOTA,"Exceeds quota",t),t.response=e,l(t)):l(t):f(!r,!0,m))}try{i=JSON.parse(e.responseText||e.response)}catch(n){return t=new a(a.INVALID_DATA,"Invalid JSON returned by server",n),t.response=e,l(t)}l(void 0,e,i)};return f(r,!0,m)},i.prototype.updateManifest=function(t,e,n,r){var i=this.getBranchManifestHref(t),o={"Content-Type":"application/vnd.adobe.dcx-manifest+json"},c=t.manifestEtag;return n?o["If-Match"]="*":c&&(o["If-Match"]=c),this._service.invoke("PUT",i,o,e,void 0,function(t,e){if(t)return r(s("Error updating manifest",t,e));var n=e.statusCode;!e.headers.etag||200!==n&&201!==n&&204!==n?412===n?(t=new a(a.UPDATE_CONFLICT,"Manifest has been changed"),t.response=e,r(t)):r(u("Unexpected response updating manifest",t,e)):r(void 0,e)})},i.prototype.getHrefForComposite=function(t,e){if(!t.type)throw new a(a.INVALID_STATE,"Composite needs a type");if(!t.id)throw new a(a.INVALID_STATE,"Composite needs an id");return t.href?t.href:this._resolveUrl(f("assets",e,t.id))},i.prototype.getCompositeManifestHref=function(t){var e=this._resolveUrl(t.href);if(!e)throw new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+e);return f(e,"manifest")},i.prototype.getBranchManifestHref=function(t){var e=this._resolveUrl(t.compositeHref);if(!e)throw new a(a.WRONG_ENDPOINT,"Wrong endpoint: "+e);return f(e,"manifest")},i.prototype.getComponentHref=function(t,e){var n=t._owner;if(!n||!n.compositeHref)throw new a(a.INVALID_STATE,"Component must be part of a branch of a bound composite.");var r;return n._core&&(r=n._core._getSourceHrefOfComponent(t)),r||this._constructComponentHref(n.compositeHref,t.id,e)},i.prototype._constructComponentHref=function(t,e,n){var r=f(this._resolveUrl(t),e);return r&&void 0!==n&&(r+=";version="+n),r},i}),a("components/dcx-js/src/AdobeCommunitySession",["require","exports","module","./AdobeSessionBase","./AdobeDCXError","./AdobeDCXUtil"],function(t,e,n){"use strict";function r(t,e){if(i.call(this,t,e),!this._endPoint)throw new o(o.INVALID_PARAMS,"Could not determine endpoint from: "+e);this.authenticationWhitelist=["adobe.com","adobe.io","fotolia.net"]}var i=t("./AdobeSessionBase"),o=t("./AdobeDCXError"),a=t("./AdobeDCXUtil"),s=a.appendPathElements;r.prototype=Object.create(i.prototype),r.prototype.name="AdobeCommunitySession",r.FileContent=i.FileContent,r.StreamProvider=i.StreamProvider,r.prototype.getCompositeManifestHref=function(t){var e=this._resolveUrl(t.href);if(!e)throw new o(o.WRONG_ENDPOINT,"Wrong endpoint: "+e);return s(e,"manifest")},r.prototype.getComponent=function(t,e,n){var r=this.getComponentHref(t,t.version);return this.getAsset(r,void 0,e,n)},r.prototype.getRenditionOfComponent=function(t,e,n,r,i,o){var a=this.getComponentRenditionHref(t,t.version,e,n,r);return this.getAsset(a,{accept:e},i,o)},r.prototype.getCompositeManifest=function(t,e,n){var r=t.href;return r&&(r=this._resolveUrl(r)),r?(r=s(r,"manifest"),this.getAssetAsType(r,"text",e,n)):n(new o(o.WRONG_ENDPOINT,"Wrong endpoint: "+r))},r.prototype.headRequest=function(t,e){return this._service.invoke("HEAD",t,{},void 0,void 0,function(t,n){return t?e(t):void e(t,n)})},r.prototype.getComponentHref=function(t,e){var n=t._owner;if(!n||!n.compositeHref)throw new o(o.INVALID_STATE,"Component must be part of a branch of a bound composite.");var r;return n._core&&(r=n._core._getSourceHrefOfComponent(t)),r||this._constructComponentHref(n.compositeHref,t,e)},r.prototype.getComponentRenditionHref=function(t,e,n,r,i){var a=t._owner;if(!a||!a.compositeHref)throw new o(o.INVALID_STATE,"Component must be part of a branch of a bound composite.");if(a._core&&a._core._getSourceHrefOfComponent(t))throw new o(o.INVALID_STATE,"Getting a rendition of a source href not implemented.");return this._constructComponentRenditionHref(a.compositeHref,t,e,n,r,i)},r.prototype._constructComponentHref=function(t,e,n){var r=e.absolutePath.slice(1),i=s(this._resolveUrl(t),r);return i&&void 0!==n&&(i+=this._hrefUsesContentApis(t)?"/version/"+n:"?version="+n),i};var u="/content/2/",c=/^\/?content\/2\/[^\/]+\/[^\/]+/,l=/^\/?api\/v2\/[^\/]+\/assets\/[^\/]+/,f={"image/jpeg":"jpg","image/png":"png"};return r.prototype._constructComponentRenditionHref=function(t,e,n,r,i,s){var h,d,p=e.absolutePath.slice(1),_=a.parseURI(t).path;if(_.slice(0,u.length)===u){var v=f[r];if(!v)throw new o(o.INVALID_PARAMS,"Unsupported rendition media type: "+r);if(!((h=c.exec(_))&&h.length>0))throw new o(o.INVALID_PARAMS,"Failed to parse composite href: "+t);d=this._resolveUrl(a.appendPathElements(h[0],"rendition",p,"version",n,"format",v,"dimension",i,"size",String(s)))}else{if(!((h=l.exec(_))&&h.length>0))throw new o(o.INVALID_PARAMS,"Failed to parse composite href: "+t);d=this._resolveUrl(a.appendPathElements(h[0],"rendition",i,String(s),p)+"?version="+n)}return d},r.prototype._hrefUsesContentApis=function(t){return a.parseURI(t).path.slice(0,u.length)===u},r}),a("components/dcx-js/src/AdobeDCXCompositeXfer",["require","exports","module","./AdobeDCXComposite","./AdobeDCXComponent","./AdobeDCXBranch","./AdobeDCXError","./AdobeDCXPushJournal","./AdobeSessionBase","./AdobeDCXUtil","./AdobeDCXFS"],function(t,e,n){"use strict";function r(t,e,n){return d.wrapError(d.UNEXPECTED_RESPONSE,t,e,n)}function i(t,e,n){this._session=t,this._callback=e,this._cleanup=n,this._componentsPending=0,this.bytesTransfered=0,this.bytesTotal=0,this.onProgress=v.noOp;var r=this;this._reportProgress=function(t){if(t>0){r.bytesTransfered+=t;var e=r.onProgress;e&&e(r.bytesTransfered,r.bytesTotal)}}}function o(t,e,n,i,o){function a(t){t||(e.compositeHasBeenCreated=!0);var n,r=e._compositeCreationCallbacks,i=r.length;for(n=0;i>n;n++)try{r[n](t)}catch(t){}e._compositeCreationCallbacks=void 0}t.isBound||e.compositeHasBeenCreated?o():e._compositeCreationCallbacks?e._compositeCreationCallbacks.push(o):(e._compositeCreationCallbacks=[o],i.createCompositeDirectory(t,n,function(e,o){if(e){if(e.code!==d.ALREADY_EXISTS)return a(r("Unexpected response creating a composite directory",e,o));if(n)a();else{var s=i.getCompositeManifestHref(t);i.headRequest(s,function(t,e){return t?a(t):404!==e.statusCode?(t=new d(d.INVALID_STATE,"Composite already exists and overwriteExisting not specified"),a(t)):void a()})}}else a()}))}function a(t,e,n,r,i){if("number"!=typeof e)throw new d(d.UNEXPECTED_RESPONSE,"No length");var o=r.headers.etag,a=r.headers["x-latest-version"],s=i.md5;if(!o)throw new d(d.UNEXPECTED_RESPONSE,"No etag");if(!a)throw new d(d.UNEXPECTED_RESPONSE,"No version");if(!s)throw new d(d.UNEXPECTED_RESPONSE,"No md5");return new f._UploadRecord(t,o,a,s,e,n)}function s(t,e,n,r){var i=r.headers.etag,o=r.headers["x-latest-version"],a=e.md5,s=e.size;if("number"!=typeof s)throw new d(d.UNEXPECTED_RESPONSE,"No length");if(!i)throw new d(d.UNEXPECTED_RESPONSE,"No etag");if(!o)throw new d(d.UNEXPECTED_RESPONSE,"No version");if(!a)throw new d(d.UNEXPECTED_RESPONSE,"No md5");return new f._UploadRecord(t,i,o,a,s,n)}var u,c,l=t("./AdobeDCXComposite"),f=t("./AdobeDCXComponent"),h=t("./AdobeDCXBranch"),d=t("./AdobeDCXError"),p=t("./AdobeDCXPushJournal"),_=t("./AdobeSessionBase"),v=t("./AdobeDCXUtil"),m=t("./AdobeDCXFS"),y=_.FileContent,g=f.STATES;return i.prototype._callCallback=function(t,e){var n=this._callback;n&&(this._callback=void 0,n(t,e))},i.prototype._xferComplete=function(t,e){var n=this._cleanup;n?(this._cleanup=void 0,n(t,e)):this._callCallback(t,e)},i.prototype.abort=function(t){this._aborted||(this._aborted=!0,this._session._service.abortAllWithToken(this)),t||(this._callback=void 0,t=new Error("Aborted")),this._xferComplete(t)},e.pullComposite=function(t,e,n){if(!t.hasLocalStorage)throw new d(d.INVALID_PARAMS,"No local storage. Use AdobeDCXCompositeXfer.pullCompositeManifestOnly() to pull down the composite without local storage.");return this._pullComposite(t,e,"all",n)},e.pullMinimumComposite=function(t,e,n){if(!t.hasLocalStorage)throw new d(d.INVALID_PARAMS,"No local storage. Use AdobeDCXCompositeXfer.pullCompositeManifestOnly() to pull down the composite without local storage.");return this._pullComposite(t,e,"min",n)},e.pullCompositeManifestOnly=function(t,e,n){return this._pullComposite(t,e,"none",n)},e.downloadComponents=function(t,n,r,o){function a(t){return t._owner?a(t._owner):t}var s=a(n),u=new i(r,o);return u._referenceBranch=s,e._pullComponents(u,s,t||n.allComponents()),u},e.pushComposite=function(t,n,r,o){var a,s=t._localStorage;a=new i(r,o,function(e,n){if(a._owner&&t.hasLocalStorage&&s.unregisterInMemoryBranchOrElement(a._owner),!t.hasLocalStorage){var r=a._journal;t._pushJournal=r.isEmpty?void 0:r}a._callCallback(e,n)}),a._composite=t,a._overwriteExisting=n;var u=!t.isBound;if(a._compositeIsNew=u,t.hasLocalStorage)t._loadBranch(s.currentManifestPath(),!1,function(n,r){return n?a._xferComplete(n):(a._owner=r,t._localStorage.registerInMemoryBranchOrElement(r),void p.readJournal(s.pushJournalPath(),t,!0,function(n,r){return n?a._xferComplete(n):(a._journal=r,void e._pushComposite(t,a))}))});else{if(!t.href)return a._xferComplete(new d(d.INVALID_STATE,"New composite has no href"));a._owner=t.current.copy(),a._journal=t._pushJournal||new p(t),e._pushComposite(t,a)}return a},e.uploadNewComponent=function(t,e,n,r,i,o){if(n._localStorage)throw new d(d.INVALID_PARAMS,"For in-browser use only. Use composite.current.addComponent() to add a new component asset");return u(r||v.generateUuid(),e,!0,n.collaborationType===l.COLLABORATION.SHARED_WITH_USER,t,n.id,n.href,i,o)},e.uploadComponent=function(t,e,n,r,i){if(n._localStorage)throw new d(d.INVALID_PARAMS,"For in-browser use only. Use composite.current.updateComponent() to update a component asset");return u(t.id,t.type,!1,n.collaborationType===l.COLLABORATION.SHARED_WITH_USER,e,n.id,n.href,r,i)},e.copyAssetForNewComponent=function(t,e,n,r,i,o){if(n._localStorage)throw new d(d.INVALID_PARAMS,"For in-browser use only. Use composite.current.addComponent() to add a new component asset");return c(r||v.generateUuid(),e,!0,n.collaborationType===l.COLLABORATION.SHARED_WITH_USER,t,n.id,n.href,i,o)},e.getURLForComponent=function(t,e){if(t._owner._localStorage)throw new d(d.INVALID_PARAMS,"For in-browser use only.");return e.getComponentHref(t,t.version)},e._pullComposite=function(t,n,r,o){function a(e,n){if(e){var r=e.pulledBranch;return void(r?(r.compositeState=g.unmodified,r.hasLocalStorage?m.writeFileAtomically(t._localStorage.pulledManifestPath(),e.pulledBranch.localData,"utf8",function(t){s._callCallback(e)}):s._callCallback(e)):s._callCallback(e))}return null===n?s._callCallback(void 0,null):(n.compositeState=g.unmodified,void(n.hasLocalStorage?m.writeFileAtomically(t._localStorage.pulledManifestPath(),n.localData,"utf8",function(t){return t?s._callCallback(t):(n._isDirty=!1,void s._callCallback(void 0,n))}):(t._options.xhrBaseBranchSupport&&(t._pulledBranchData=n.localData),s._callCallback(void 0,n))))}if("string"!=typeof t.href)throw new d(d.INVALID_STATE,"Composite must have an href");var s,u=function(i,o){if(i)return s._xferComplete(i);var a;o?(a=o.manifestEtag,s._referenceBranch=o):t.current&&(a=t.current.manifestEtag,s._referenceBranch=t.current);var u=n.getCompositeManifest(t,a,function(n,i,a){if(n)return n.response&&404===n.response.statusCode?s._xferComplete(new d(d.NO_COMPOSITE,"Composite missing or deleted",n.underlyingError||n)):s._xferComplete(n);if(null===i&&!o)return s._xferComplete(void 0,null);var u;if(null!==i)try{if(u=(new h).parse(i),u._localStorage=t._localStorage,u.compositeHref=t.href,u._collaborationType=t.collaborationType,u._clientDataString=t.clientDataString,u.manifestEtag=a,u.compositeState===g.committedDelete||u.compositeState===g.pendingDelete)return void s._session.deleteCompositeDirectory(t,function(t){return t?s._xferComplete(new d(d.DELETED_COMPOSITE,"Error deleting composite directory",t)):s._xferComplete(new d(d.DELETED_COMPOSITE,"Composite is deleted"))});s._referenceBranch&&u.hasLocalStorage&&u._updateLocalDataFromBranch(s._referenceBranch)}catch(t){return s._xferComplete(new d(d.INVALID_JSON,"Corrupted manifest",t))}else u=o;var c,l,f=u.allComponents();for(c=0;c<f.length;++c)l=f[c],l.state===g.pendingDelete||l.state===g.committedDelete?u.removeComponent(l):l.state=g.unmodified;f=void 0,"all"===r?f=u.allComponents():"min"===r&&(l=u.getComponentWithAbsolutePath("/META-INF/metadata.xml"))&&(f=[l]),f?e._pullComponents(s,u,f):s._xferComplete(void 0,u)});u&&(u.token=s,u.progress=s._reportProgress)};return s=new i(n,o,a),s._composite=t,t.hasLocalStorage?t.loadPulledBranch(u):u(),s},e._pullComponents=function(t,n,r){function i(e,r){if(t._componentsPending-=1,e&&(t.failedComponents=t.failedComponents||[],t.failedComponents.push({component:r,error:e})),0===t._componentsPending&&!t._aborted){var i=t.failedComponents;if(i){e=new d(d.COMPONENT_DOWNLOAD_ERROR,"Failed to download all components");var o,a=i.length;for(o=0;a>o;o++){var s=i[o].error;if(s.code===d.OUT_OF_SPACE){e=new d(s.code,s.message);break}}return e.pulledBranch=n,e.failedComponents=i,t._xferComplete(e)}t._xferComplete(void 0,n)}}function o(n){if(!t._aborted){t.bytesTotal+=n.length||0;var r=n._owner._localStorage,o=r.tempPathForComponent(n),a=v.parentDirectory(o);m.ensureDirectoryExists(a,function(r){if(r)return t.abort(r);var a=e._pullComponent(n,o,s,i);a.progress=t._reportProgress,a.token=t})}}if(!n.hasLocalStorage)throw new d(d.INVALID_PARAMS,"No local storage.");var a,s=t._session;for(t._componentsPending=r.length,a=0;a<r.length;++a){var u,c=r[a];if(t._referenceBranch){var l=t._referenceBranch.getComponentWithId(c.id);l&&(u=l.etag)}c.etag!==u?o(c):function(t){n.assetOfComponent(t,function(e,n){"string"!=typeof n?o(t):i(void 0,t)})}(c)}0===t._componentsPending&&t._xferComplete(void 0,n)},e._pullComponent=function(t,e,n,i){var o=t._owner;if(!t._owner.hasLocalStorage)throw new d(d.INVALID_PARAMS,"No local storage. Use AdobeDCXCompositeXfer.pullCompositeManifestOnly() to pull down the composite without local storage.");return n.getComponent(t,new y(e),function(n,a){if(n)i(n,t);else if(200===a.statusCode){var s=Number(a.headers["content-length"]);void 0===t.length||null===t.length||isNaN(s)||s===t.length?o._localStorage.ingestComponentAsset(t,e,!1,o._local(),function(e){i(e,t,a.headers.etag)}):i(new d(d.UNEXPECTED_RESPONSE,"Incorrect content length",n,a))}else 304===a.statusCode?i(void 0,t,a.headers.etag):i(r("Unexpected response getting a component",n,a),t)})},e._pushComposite=function(t,n){function r(e){if(s)return n._xferComplete(e);var r=c.getCompositeManifestHref(t);c.headRequest(r,function(t,r){return t?n._xferComplete(t):404===r.statusCode?(e=new d(d.NO_COMPOSITE,"Composite does not exist; may have been deleted"),n._xferComplete(e)):n._xferComplete(e)})}if(!t.href)return n._xferComplete(new d(d.INVALID_STATE,"New composite has no href"));var i=n._owner,a=n._journal,s=n._compositeIsNew,u=n._overwriteExisting,c=n._session,f=i.changeCount,h=i.remoteData.length+50;return n.bytesTotal=h,i.compositeState===g.committedDelete?n._xferComplete(new d(d.DELETED_COMPOSITE,"Attempt to push a deleted composite")):s||i.compositeState!==g.unmodified?i.compositeState===g.pendingDelete?s&&!u?n._xferComplete(new d(d.DELETED_COMPOSITE,"Attempt to delete unbound composite")):t.collaborationType===l.COLLABORATION.SHARED_WITH_USER?n._xferComplete(new d(d.INVALID_STATE,"Attempt to delete composite that is shared with this user.")):e._deleteComposite(n,u,function(t,e){n._xferComplete(t,e)}):void o(t,a,u,c,function(o){return o?n._xferComplete(o):void e._pushComponents(n,i,function(){var e=n.failedComponents;if(e){o=new d(d.COMPONENT_UPLOAD_ERROR,"One or more components failed to upload.");var s,l=e.length;for(s=0;l>s;s++){var p=e[s].error;if(p.code===d.EXCEEDS_QUOTA){o=new d(p.code,p.message);break}}return o.failedComponents=e,r(o)}i.compositeState=g.unmodified,a.manifestEtag&&a.currentBranchEtag===i.manifestEtag&&(i.manifestEtag=a.manifestEtag);var _=i.remoteData;n.bytesTotal+=_.length,n.bytesTotal-=h;var v=c.updateManifest(i,_,u,function(e,o){if(e)return r(e);var s=o.headers.etag;a.manifestEtag=s,a.currentBranchEtag=i.manifestEtag,a.changeCount=f,a.commitChanges(function(e){return e?n._xferComplete(e):(a.applyToBranch(i),i.compositeState=g.unmodified,void(t.hasLocalStorage?m.writeFileAtomically(t._localStorage.pushedManifestPath(),i.localData,"utf8",function(t){return t?n._xferComplete(t):(i._isDirty=!1,void n._xferComplete(void 0,i))}):(t._options.xhrBaseBranchSupport&&(t._pushedBranchData=i.localData),n._xferComplete(void 0,i))))})});v&&(v.progress=n._reportProgress,v.token=n)})}):n._xferComplete()},e._deleteComposite=function(t,e,n){var r=t._composite,i=t._owner,o=t._session;i.compositeState=g.committedDelete;var a=i.remoteData;t.bytesTotal=a.length,t._journal.manifestEtag&&t._journal.currentBranchEtag===i.manifestEtag&&(i.manifestEtag=t._journal.manifestEtag),o.updateManifest(i,a,e,function(e,a){return e?n(e):void o.deleteCompositeDirectory(r,function(e,o){return e?n(e):(t._journal.compositeHasBeenDeleted=!0,void t._journal.commitChanges(function(t){return t?n(t):void(r.hasLocalStorage?m.writeFileAtomically(r._localStorage.pushedManifestPath(),i.localData,"utf8",function(t){return t?n(t):void n(void 0,i)}):n(void 0,i))}))})})},e._pushComponents=function(t,e,n){function r(e,r,i){r?c[e.id]=r:delete c[e.id],i&&(t.failedComponents=t.failedComponents||[],t.failedComponents.push({component:e,error:i})),0===Object.keys(c).length&&f.commitChanges(n)}function i(e,n,i){r(e,"uploading"),m.info(n,function(o,a){if(o)return o=new d(d.INVALID_STATE,"Component asset missing",o),void r(e,null,o);var u=a.size,c=v.filePathComponents(n).fileName,h=f.getRecordForUploadedComponent(e.id);if(h&&h.length===u&&h["storage-name"]===c)return e.etag=h.etag,e.version=h.version,e.md5=h.md5,e.length=h.length,e.state=g.unmodified,void r(e,null);t.bytesTotal+=u;var p=t._session.uploadComponent(e,i,s.collaborationType===l.COLLABORATION.SHARED_WITH_USER,t,new y(n),function(t,n,i){if(!t){var o=n.headers.etag,a=n.headers["x-latest-version"],s=i.md5;o||(t=new d(d.UNEXPECTED_RESPONSE,"No etag")),a||(t=new d(d.UNEXPECTED_RESPONSE,"No version")),s||(t=new d(d.UNEXPECTED_RESPONSE,"No md5")),t||(e.etag=o,e.version=a,e.md5=s,e.length=u,e.state=g.unmodified,f.recordUploadedComponent(e.id,o,a,s,u,c),f.commitChanges())}r(e,null,t)});p&&(p.progress=t._reportProgress,p.token=t)})}var o,a=e.allComponents(),s=t._composite,u=s._localStorage,c={},f=t._journal;for(o=0;o<a.length;++o){var h=a[o],p=h.state,_=h.etag,b=!_;if(p||(p=g.unmodified),b||p===g.modified){var A=e._core._getSourceHrefOfComponent(h);if(e.hasLocalStorage||A){var w=b||t._compositeIsNew;A?function(n,o,a){var c=f.getRecordForUploadedComponent(n.id);if(c&&c["source-href"]===o)return n.etag=c.etag,n.version=c.version,n.md5=c.md5,n.length=c.length,void(n.state=g.unmodified);r(n,"copying");var h=t._session.copyAssetToComponentId(n.id,n.type,t._composite.href,a,s.collaborationType===l.COLLABORATION.SHARED_WITH_USER,t,o,function(t,s,c){if(t){if(u){var l=u.componentAssetPath(n,e._local());if(l)return i(n,l,a)}}else{var h=s.headers.etag,p=s.headers["x-latest-version"],_=c.md5,v=c.size;h||(t=new d(d.UNEXPECTED_RESPONSE,"No etag")),p||(t=new d(d.UNEXPECTED_RESPONSE,"No version")),_||(t=new d(d.UNEXPECTED_RESPONSE,"No md5")),v||(t=new d(d.UNEXPECTED_RESPONSE,"No length")),t||(n.etag=h,n.version=p,n.md5=_,n.length=v,n.state=g.unmodified,f.recordUploadedComponent(n.id,h,p,_,v,void 0,o),f.commitChanges())}r(n,null,t)});h&&(h.progress=t._reportProgress,h.token=t)}(h,A,w):i(h,u.componentAssetPath(h,e._local()),w)}else{var E=new d(d.INVALID_STATE,"Component should not be modified or new without local storage");t.failedComponents=t.failedComponents||[],t.failedComponents.push({component:h,error:E})}}else p===g.unmodified?f.removeRecordForUploadedComponent(h.id):(p===g.committedDelete||p===g.pendingDelete)&&e.removeComponent(h)}0===Object.keys(c).length&&n()},u=function(t,e,n,r,o,s,u,c,l){if("function"!=typeof l)throw new d(d.INVALID_PARAMS,'Param "callback" must be a function.');var h=o.length||o.byteLength||o.size,p=new i(c,l);p.bytesTotal=h;var _=c.uploadAssetForComponentId(t,e,u,n,r,p,o,function(n,r,i){var o;if(!n)try{o=new f._UploadResults(s),h=h||_.bytesSent,o.records[t]=a(t,h,e,r,i)}catch(t){n=t,o=void 0}p._xferComplete(n,o)});return _&&(_.progress=p._reportProgress,_.token=p),p},c=function(t,e,n,r,o,a,u,c,l){if("function"!=typeof l)throw new d(d.INVALID_PARAMS,'Param "callback" must be a function.');var h=new i(c,l),p=c.copyAssetToComponentId(t,e,u,n,r,h,o,function(n,r,i){if(!h._aborted){var o;if(!n)try{o=new f._UploadResults(a),o.records[t]=s(t,i,e,r)}catch(t){n=t,o=void 0}l(n,o)}});return p&&(p.progress=h._reportProgress,p.token=h),h},e}),a("components/dcx-js/src/AdobeDCX",["require","exports","module","./AdobeDCXComposite","./AdobeDCXLocalStorage","./AdobeNetworkHTTPService","./AdobeStorageSession","./AdobeCommunitySession","./AdobeDCXCompositeXfer","./AdobeDCXUtil","./AdobeDCXError","./AdobeDCXFS"],function(t,e,n){"use strict";function r(t,e){t&&f._setFS(t),this._compositeOptions=c.merge({},e),e&&e.logCallback&&c._setLogCallback(e.logCallback)}var i=t("./AdobeDCXComposite"),o=(t("./AdobeDCXLocalStorage"),t("./AdobeNetworkHTTPService")),a=t("./AdobeStorageSession"),s=t("./AdobeCommunitySession"),u=t("./AdobeDCXCompositeXfer"),c=t("./AdobeDCXUtil"),l=t("./AdobeDCXError"),f=t("./AdobeDCXFS");return r.COLLABORATION={PRIVATE:i.COLLABORATION.PRIVATE,SHARED_BY_USER:i.COLLABORATION.SHARED_BY_USER,SHARED_WITH_USER:i.COLLABORATION.SHARED_WITH_USER},r.AdobeDCXError=l,r.FileContent=o.FileContent,r.StreamProvider=o.StreamProvider,r.prototype.newEmptyComposite=function(t,e,n,r){var o=new i(t,e,null,r,null,this._compositeOptions);return n&&(o.path=n),o},r.prototype.newCompositeFromLocalStorage=function(t,e){try{if("string"!=typeof t)throw new l(l.INVALID_PARAMS,"");var n=new i(null,null,t,null,null,this._compositeOptions);n.loadCurrentFromLocalStorage(function(t,r){e(t,t?void 0:n)}),n.deleteTempFiles()}catch(t){e(t)}},r.prototype.newCompositeWithHref=function(t,e,n,r,o){var a=new i(n,o,null,r,t,this._compositeOptions);return e&&(a.path=e),a},r.prototype.newCompositeAsCopyOf=function(t,e,n,r,o,a){return i.newCompositeAsCopyOf(t,e,n,r,o,a,this._compositeOptions)},r.prototype.createHTTPService=function(t){return new o(t)},r.prototype.createStorageSession=function(t,e){return new a(t,e)},r.prototype.createCommunitySession=function(t,e){return new s(t,e)},r.prototype.compositeXfer=u,r}),a("AdobeLibraryServices",["require","exports","module","./components/uuid/uuid","./components/dcx-js/src/AdobeDCX"],function(t,n,r){"use strict";function i(){void 0!==e&&(this.fs=e("fs"),this.path=e("path")),this._initDCX()}var o=t("./components/uuid/uuid"),a=t("./components/dcx-js/src/AdobeDCX");return i.prototype._initDCX=function(){var t=this;this.dcx=new a(this.fs,{preserveFileExtensions:!0,logCallback:function(e){t._log&&t._log("DCX: "+e)}})},i.prototype.uuid=function(){return o()},i.prototype.log=function(t){this._log&&this._log("CC Libraries: "+t)},i.prototype.getDisplayName=function(t){return this._getDisplayName?this._getDisplayName(t):t.name},i.prototype.hasFileSystem=function(){return void 0!==this.fs},i.prototype.setFileSystem=function(t){this.fs=t,this._initDCX()},i.prototype.getVulcanInterface=function(){return"undefined"!=typeof VulcanInterface?VulcanInterface:void 0},i.prototype.getVulcanMessage=function(){return"undefined"!=typeof VulcanMessage?VulcanMessage:void 0},i.prototype.hasCEPVulcan=function(){return void 0!==this.getVulcanInterface()&&void 0!==this.getVulcanMessage()},i.prototype.getNodeTunnelOptions=function(t){return this._getNodeTunnelOptions?this._getNodeTunnelOptions(t):{}},i.prototype.getPathSeparator=function(){return"/"},i.prototype.getFileNameFromPath=function(t){return-1===t.indexOf("/")&&-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/")),t.split("/").pop()},new i}),a("AdobeLibraryError",["require","exports","module"],function(t,e,n){"use strict";function r(t,e,n,r){Error.call(this),this.code=t,this._message=e,this.message="["+t+"] "+e,this.libraryId=n,this.underlyingError=r}return r.prototype=new Error,r.prototype.name="AdobeLibraryError",delete r.prototype.stack,r.INVALID_PARAMETER="INVALID_PARAMETER",r.READ_ONLY="READ_ONLY",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.NOT_SUPPORTED="NOT_SUPPORTED",r.REQUIRES_FILESYSTEM="REQUIRES_FILESYSTEM",r.DELETED_LOCALLY="DELETED_LOCALLY",r.NOT_ALLOWED="NOT_ALLOWED",r.FILE_TOO_LARGE="FILE_TOO_LARGE",r.EXCEEDS_MAX_LIBRARY_SIZE="EXCEEDS_MAX_LIBRARY_SIZE",r.CORRUPTED_LIBRARY="CORRUPTED_LIBRARY",r.THUMBNAIL_NOT_AVAILABLE="THUMBNAIL_NOT_AVAILABLE",r.BROKEN_LINK="BROKEN_LINK",r.FS_ERROR="FS_ERROR",r.OUT_OF_SPACE="OUT_OF_SPACE",r.LOGGED_OUT="LOGGED_OUT",r.EXCEEDS_QUOTA="EXCEEDS_QUOTA",r.RETRYABLE_SERVER_ERROR="RETRYABLE_SERVER_ERROR",r.TRANSFER_ERROR="TRANSFER_ERROR",r.TRANSFER_ABORTED="TRANSFER_ABORTED",r.NETWORK_ERROR="NETWORK_ERROR",r.ACCESS_DENIED="ACCESS_DENIED",r.URL_VALIDATION_FAILED="URL_VALIDATION_FAILED",r}),a("AdobeLibraryConfig",["require","exports","module","./AdobeLibraryError"],function(t,e,n){"use strict";function r(){this.name="config"}var i=t("./AdobeLibraryError"),o=["ROOT_DIR","POLL_INTERVAL","RENDITION_SIZES","FULL_RENDITION_CONFIG","EXTERNAL_LINK_PREFETCH","DEFAULT_LIBRARY_NAME","STORAGE_API_KEY","USER_AGENT_HEADER","SYNC_POLICY","ELEMENT_TYPE_FILTERS","AUTO_START_POLLING","SHARED_LOCAL_STORAGE","SHARED_LOCAL_STORAGE_ANALYTICS","WHITELISTED_DOMAINS","CLIENT_DESCRIPTION"];return r.prototype.VERSION=1,r.prototype.MAX_ELEMENTS=1e3,r.prototype.MAX_COMPONENT_SIZE=1073741824,r.prototype.VALID_RELATIONS=["rendition","primary","alternate"],r.prototype.VALID_LIBRARY_RENDITION_TYPES=["banner","cover"],r.prototype.VALID_SYNC_POLICIES=["manifestAndAssets","manifestOnly"],r.prototype.ELEMENT_TYPE_FILTERS=[],r.prototype.DL_NAMESPACE="library",r.prototype.DL_PREFIX=r.prototype.DL_NAMESPACE+"#",r.prototype.VERSION_KEY=r.prototype.DL_PREFIX+"version",r.prototype.RELATIONSHIP_KEY=r.prototype.DL_PREFIX+"rel",r.prototype.WIDTH_KEY=r.prototype.DL_PREFIX+"width",r.prototype.HEIGHT_KEY=r.prototype.DL_PREFIX+"height",r.prototype.LENGTH_KEY=r.prototype.DL_PREFIX+"length",r.prototype.IS_FULL_SIZE_KEY=r.prototype.DL_PREFIX+"isFullSize",r.prototype.MODIFIED_KEY=r.prototype.DL_PREFIX+"modified",r.prototype.CREATED_KEY=r.prototype.DL_PREFIX+"created",r.prototype.LINK_TYPE_KEY=r.prototype.DL_PREFIX+"linktype",r.prototype.LINK_URL_KEY=r.prototype.DL_PREFIX+"linkurl",r.prototype.REPRESENTATION_ORDER_KEY=r.prototype.DL_PREFIX+"representationOrder",r.prototype.RENDITION_TYPE_KEY=r.prototype.DL_PREFIX+"renditiontype",r.prototype.COMPOSITE_TYPE="application/vnd.adobe.library+dcx",r.prototype.LINK_REPRESENTATION_TYPE="application/vnd.adobe.library.link+dcx",r.prototype.ELEMENTS_NAME="elements",r.prototype.DATA_COLLABORATION_ROLE="collaborationRole",r.prototype.ANALYTICS_ELEMENT_UPDATE_THRESHOLD=500,r.prototype.BOOKMARKS_FILENAME="bookmarks.json",r.prototype.BOOKMARKS_PATH="/sync/adobe-libraries/"+r.prototype.BOOKMARKS_FILENAME,r.prototype.PUBLIC_USER_ID="public",r.prototype.DEFAULT_CLOUD_ID="creative_cloud",r.prototype.DEFAULT_CORESYNC_CLOUD_ID="00000000-0000-0000-0000-000000000000",r.prototype.STORAGE_ASSETS_PATH="/assets/",r.prototype.LIBRARY_SYNC_GROUP="adobe-libraries",r.prototype.PUBLIC_STORAGE_ASSETS_PATH="/public/",r.prototype.PUBLIC_LIBRARY_SYNC_GROUP="libraries",r.prototype.CP_CLOUD_ID="community-platform",r.prototype.CP_STORAGE_ASSETS_PATH="/content/2/",r.prototype.STORAGE_API_KEY="",r.prototype.USER_AGENT_HEADER=void 0,r.prototype.SYNCING_ENABLED=!0,r.prototype.DEFAULT_MAX_SYNC_INTERVAL=1e4,r.prototype.RETRY_FAIL_MAX_SYNC_INTERVAL=6e4,r.prototype.MAX_SYNC_INTERVAL=r.prototype.DEFAULT_MAX_SYNC_INTERVAL,r.prototype.POLL_INTERVAL=1,r.prototype.AUTO_START_POLLING=!1,r.prototype.RENDITION_SIZES={},r.prototype.FULL_RENDITION_CONFIG={},r.prototype.BACKOFF_INTERVALS=[1,1,2,3,5,8,13,21,34,55],r.prototype.ERROR_RETRY_INTERVALS=[30,60,120],r.prototype.NETWORK_TIMEOUT=6e5,r.prototype.RETRY_RANDOM_SECONDS=30,r.prototype.RENDITION_MAX_RETRIES=2,r.prototype.DEFAULT_RENDITION_RETRY_INTERVAL=1e3,r.prototype.RENDITION_RETRY_INTERVAL=r.prototype.DEFAULT_RENDITION_RETRY_INTERVAL,r.prototype.DEFAULT_RENDITION_404_BACKOFF=3e5,r.prototype.RENDITION_404_BACKOFF=r.prototype.DEFAULT_RENDITION_404_BACKOFF,r.prototype.LOCAL_RENDITION_MAX_RETRIES=5,r.prototype.LOCAL_RENDITION_RETRY_INTERVAL=200,r.prototype.MAX_UPDATE_CONFLICTS=5,r.prototype.WHITELISTED_DOMAINS=[],r.prototype.ADOBE_AUTHENTICATED_DOMAINS=["adobe.com","adobe.io","fotolia.net"],r.prototype.SYNC_POLICY="manifestAndAssets",r.prototype.RENDITION_CACHE_FILE="cache.json",r.prototype.RENDITION_CACHE_PLACEHOLDER="<placeholder>",r.prototype.SHARED_LOCAL_STORAGE=!0,r.prototype.SHARED_LOCAL_STORAGE_VERSION=7,r.prototype.SHARED_LOCAL_STORAGE_MIN_CLIENT_VERSION=5,r.prototype.SHARED_LOCAL_STORAGE_MAX_CLIENT_VERSION=7,r.prototype.VULCAN_PREFIX="vulcan.SuiteMessage.",r.prototype.VULCAN_STARTUP_MESSAGE="cclibraries.service.Initialized",r.prototype.VULCAN_SHUTDOWN_REQUEST="cclibraries.service.TerminateServiceRequest",r.prototype.VULCAN_QUERY_REQUEST="cclibraries.service.QueryRequest",r.prototype.VULCAN_QUERY_RESPONSE="cclibraries.service.QueryResponse",r.prototype.VULCAN_LIBRARY_CHANGED_LOCAL_TYPE="cclibraries.service.LibraryChangedLocal",r.prototype.VULCAN_LIBRARY_CHANGED_REMOTE_TYPE="cclibraries.service.LibraryChangedRemote",r.prototype.VULCAN_LIBRARY_DELETED_TYPE="cclibraries.service.LibraryDeleted",r.prototype.VULCAN_COLLECTIONS_LOADED_TYPE="cclibraries.service.LibrariesLoaded",r.prototype.VULCAN_COLLECTIONS_UNLOADED_TYPE="cclibraries.service.LibrariesUnloaded",r.prototype.VULCAN_PROXY_QUERY_REQUEST="cclibraries.service.QueryProxySettingsRequest",r.prototype.VULCAN_PROXY_QUERY_RESPONSE="cclibraries.service.QueryProxySettingsResponse",r.prototype.VULCAN_PROXY_CHANGE_MESSAGE="cclibraries.service.ProxySettingsChanged",r.prototype.STOCK_NAMESPACE="adobestock",r.prototype.STOCK_DATA_KEY="trackingdata",r.prototype.STOCK_STATE_PURCHASED="purchased",r.prototype.setParameter=function(t,e){if(-1===o.indexOf(t))throw new i(i.INVALID_PARAMETER,"Parameter not configurable");if("SYNC_POLICY"===t&&-1===this.VALID_SYNC_POLICIES.indexOf(e))throw new i(i.INVALID_PARAMETER,"Invalid value for SYNC_POLICY");"POLL_INTERVAL"===t&&(e=Math.max(1,e)),this[t]=e},new r}),a("utils/AdobeLibraryMimeTypeUtils",["require","exports","module"],function(t,e,n){"use strict";function r(t){var e=t.match(/application\/x-adobe-libraries-(.+)/);return e?[e[1]]:[]}function i(t){return["application/x-adobe-libraries-"+t]}var o={},a={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/hyperstudio":["stk"],"application/illustrator":["ai"],"application/illustrator.template":["ait"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js"],"application/json":["json"],"application/jsonml+json":["jsonml"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/photoshop":["psd"],"application/photoshop.large":["psb"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.animate-xfl+zip":["fla","xfl"],"application/vnd.adobe.characterstyle+json":["style"],"application/vnd.adobe.characterstyle+snippet":["idms"],"application/vnd.adobe.charts+zip":["zip"],"application/vnd.adobe.color+json":["ase"],"application/vnd.adobe.colortheme+json":["ase"],"application/vnd.adobe.cube+txt":["cube"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.indesign-idms":["idms"],"application/vnd.adobe.indesign.template":["indt"],"application/vnd.adobe.layerstyle":["asl"],"application/vnd.adobe.look+xml":["look"],"application/vnd.adobe.muse-collection":["muse"],"application/vnd.adobe.paragraphstyle+json":["style"],"application/vnd.adobe.paragraphstyle+snippet":["idms"],"application/vnd.adobe.ribbon.brush+zip":["brush"],"application/vnd.adobe.scatter.brush+zip":["brush"],"application/vnd.adobe.vector.brush+zip":["brush"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["dmg"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-otf":["otf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-ttf":["ttf","ttc"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/font-woff":["woff"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["iso"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lzh-compressed":["lzh","lha"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdownload":["exe","dll","com","bat","msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","wmz","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-nzb":["nzb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-research-info-systems":["ris"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-wais-source":["src"],"application/x-x509-ca-cert":["der","crt"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-wav":["wav"],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpg":["jpg"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.adobe.photoshop.template":["psdt"],"image/vnd.adobe.pattern+png":["png"],"image/vnd.adobe.shape+svg":["shape"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.dvb.subtitle":["sub"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-adobe-photoshop-brush":["abr"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-mrsid-image":["sid"],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache"],"text/calendar":["ics","ifb"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/sgml":["sgml","sgm"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-fortran":["f","for","f77","f90"],"text/x-java-source":["java"],"text/x-opml":["opml"],"text/x-pascal":["p","pas"],"text/x-nfo":["nfo"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]},s={};return Object.keys(a).forEach(function(t){a[t].forEach(function(e){s[e]=s[e]||[],s[e].push(t)})}),o.getExtensions=function(t){return t?a[t.toLowerCase()]||r(t.toLowerCase()):[]},o.getMimeTypes=function(t){return t?s[t.toLowerCase()]||i(t.toLowerCase()):[]},o}),a("utils/AdobeLibraryManifestUtils",["require","exports","module","../components/dcx-js/src/AdobeDCX","../components/dcx-js/src/AdobeDCXError","../AdobeLibraryConfig","../AdobeLibraryServices","../AdobeLibraryError"],function(t,e,n){"use strict";var r=t("../components/dcx-js/src/AdobeDCX"),i=t("../components/dcx-js/src/AdobeDCXError"),o=t("../AdobeLibraryConfig"),a=t("../AdobeLibraryServices"),s=t("../AdobeLibraryError"),u={},c={};u.isCompatibleType=function(t,e){return t===e||t===c[e]},u.validateLibraryId=function(t,e){if(e){if(t&&t.length>=30&&t.match(/^[0-9A-Z\-]+$/i))return!0}else if(t&&t.match(/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i))return!0;return!1},u.validateLibrary=function(t){return(t.current&&t.current.rootNode.getValue(o.VERSION_KEY))===o.VERSION},u.areManifestsEqual=function(t,e){try{var n=JSON.parse(t),r=JSON.parse(e);if(delete n["manifest-format-version"],delete r["manifest-format-version"],JSON.stringify(n)===JSON.stringify(r))return!0}catch(t){}return!1},u.getDCXKey=function(t,e){if(!t||!("string"==typeof t||t instanceof String)||""===t)throw new s(s.INVALID_PARAMETER,"Invalid namespace");if(!e||!("string"==typeof e||e instanceof String)||""===e)throw new s(s.INVALID_PARAMETER,"Invalid key");return t+"#"+e},u.getCustomDCXData=function(t){var e=t.getCustomKeys(),n=[];return e.forEach(function(e){var r=e.split("#"),i=r.length>=2;i&&r.forEach(function(t){""===t&&(i=!1)});var a=0===e.indexOf(o.DL_PREFIX);i&&!a&&n.push({namespace:r.shift(),key:r.join("#"),value:t.getValue(e)})}),n},u.copyCustomDCXData=function(t,e){u.getCustomDCXData(t).forEach(function(t){e.setValue(u.getDCXKey(t.namespace,t.key),t.value)});var n=t.getValue(o.REPRESENTATION_ORDER_KEY);n&&e.setValue(o.REPRESENTATION_ORDER_KEY,n)},u.checkDeletedState=function(t,e){if(t.isDeletedLocally){if(e)return e(new s(s.DELETED_LOCALLY,"deleted/orphan object")),!0;throw new s(s.DELETED_LOCALLY,"deleted/orphan object")}return!1},u.checkEncoding=function(t,e,n){if(-1===e.indexOf(t)){var r=e.join(", ");return n(new s(s.INVALID_PARAMETER,"Unsupported encoding. Supported encodings are: "+r)),!1}return!0},u.sortRepresentations=function(t){if(!(t.length<2))for(var e,n,r,i;;){for(e=!1,n=1;n<t.length;n++)r=t[n-1],i=t[n],i._getOrder()<r._getOrder()&&(t[n-1]=i,t[n]=r,e=!0);if(!e)break}},u.removeMissingComponents=function(t,e){if(t&&e){var n=0;return e.forEach(function(e){var r=e.component,i=e.error;r&&i&&i.response&&404===i.response.statusCode&&(t.removeComponent(r),n++,a.log("Removed missing component: "+r.id+" from library "+t.compositeId))}),a.log("Fixed "+n+" of "+e.length+" components that failed to download"),e.length===n?t:void 0}};var l=function(t,e){var n;return t.elements.some(function(t){return t.representations.some(function(t){return t.id===e?(n=t,!0):void 0})}),n};return u.removeMissingLocalComponents=function(t,e){if(t&&e){var n=0,r=[];e.forEach(function(e){var o=e.component,s=e.error;if(o&&s&&s.code===i.INVALID_STATE){var u=l(t,o.id);u?r.push(u):t._dcxBranch.removeComponent(o),n++,a.log("Removed missing local component: "+o.id+" from library "+t.id)}}),n>0&&(t._beginOperation(),r.forEach(function(t){t.element.removeRepresentation(t)}),t._endOperation()),a.log("Fixed "+n+" of "+e.length+" components that failed to upload")}},u.collaborationStateToDCX=function(t){return"incoming"===t?r.COLLABORATION.SHARED_WITH_USER:"outgoing"===t?r.COLLABORATION.SHARED_BY_USER:r.COLLABORATION.PRIVATE},u.collaborationStateFromDCX=function(t){return t===r.COLLABORATION.SHARED_WITH_USER?"incoming":t===r.COLLABORATION.SHARED_BY_USER?"outgoing":void 0},u.getCompositeRenditionMap=function(t){var e=t.getComponentsOf(),n={};return e&&e.forEach(function(t){if("rendition"===t.relationship){var e=t.getValue(o.RENDITION_TYPE_KEY);e&&(n[e]=t)}}),n},u}),a("utils/AdobeLibraryFileUtils",["require","exports","module","../AdobeLibraryServices"],function(t,e,n){"use strict";var r=t("../AdobeLibraryServices"),i={},o=function(t){return t+".TEMP_"+r.uuid()},a=function(t){var e=t.match(/(.*)\.TEMP_[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i);return e&&e[1]?e[1]:t};return i.ensurePathExists=function(t,e){function n(t,e,r){var a=e.slice(0,t).join(i),s=function(i){t<e.length?n(t+1,e,r):r(null)};o.exists(a,function(t){t?s():o.mkdir(a,s)})}var i=r.getPathSeparator(),o=r.fs;n(2,t.split(i),e)},i.copyFile=function(t,e,n){var i=r.fs;try{var a=o(e),s=i.createWriteStream(a),u=i.createReadStream(t),c=!1;u.on("end",function(){c||i.rename(a,e,n)}),u.on("error",function(t){c=!0,n(t)}),u.pipe(s)}catch(t){n(t)}},i.normaliseTempFileName=function(t){return a(t)},i.getFileExtension=function(t){var e=t&&t.replace(/^.*[\\\/]/,""),n=e?e.lastIndexOf("."):-1;return-1!==n?e.substr(n+1).toLowerCase():void 0},i.recursiveDeleteDirectory=function(t,e){var n=r.getPathSeparator(),o=r.fs,a=function(t){t&&"ENOENT"===t.code&&(t=null),e&&e(t)};o.exists(t,function(e){e?o.readdir(t,function(e,r){function s(e){e&&"ENOENT"===e.code&&(e=null),u=u||e,++c===r.length&&(u?a(u):o.rmdir(t,a))}if(e)return void a(e);if(!r||0===r.length)return void o.rmdir(t,a);var u=null,c=0;r.forEach(function(e){var r=t+n+e;o.stat(r,function(t,e){u=u||t,e&&e.isDirectory()?i.recursiveDeleteDirectory(r,s):o.unlink(r,s)})})}):a(null)})},i.moveLibrary=function(t,e,n){var i=r.fs;if(e===t.id)return void n(null);var o=t._collection._getCompositeDir(e),a=t._getCompositeDir(),s=t._collection._getRenditionCacheDir(e),u=t._getRenditionCacheDir();i.rename(o,a,function(e){return e?void n(e):(t._dcxComposite.path=a,void i.rename(s,u,n))})},i.readLibraryDirectory=function(t,e){var n=r.fs,o=t._getTempDir();i.recursiveDeleteDirectory(o,function(){var r=t._getCompositeDir();n.readdir(r,e)})},i.doesRootDirExist=function(t,e){var n=r.fs,i=t._getCompositeDir();n.exists(i,function(t){e(null,t)})},i.deleteLibraryFromDisk=function(t,e,n){if(r.hasFileSystem()){var o=t._getCompositeDir(e),a=t._getRenditionCacheDir(e);i.recursiveDeleteDirectory(o,function(){i.recursiveDeleteDirectory(a,n)})}else n&&n(null)},i.writeJSONData=function(t,e,n,o){var a=r.fs;i.ensurePathExists(t,function(i){if(i)return void o(i);var s=t+r.getPathSeparator()+e,u=s+".TEMP_"+r.uuid();a.writeFile(u,JSON.stringify(n,void 0,2),"utf8",function(t){return t?void o(t):void a.rename(u,s,o)})})},i.readJSONData=function(t,e){r.fs.readFile(t,"utf8",function(t,n){if(t){if("ENOENT"===t.code)return e(null)}else try{n=n&&JSON.parse(n)}catch(e){n=void 0,t=e}e(t,n)})},i}),a("utils/AdobeLibraryErrorUtils",["require","exports","module","../components/dcx-js/src/AdobeDCXError","../AdobeLibraryError"],function(t,e,n){"use strict";var r=t("../components/dcx-js/src/AdobeDCXError"),i=t("../AdobeLibraryError"),o={};return o.getErrorStatusCode=function(t){if(t){var e=t.code===r.UNEXPECTED_RESPONSE&&t.response&&t.response.statusCode;return e||(t.underlyingError?o.getErrorStatusCode(t.underlyingError):void 0)}},o.getSyncError=function(t,e,n){if(t){var a=o.getErrorStatusCode(t);return t.code===r.SERVICE_IS_INACTIVE?new i(i.LOGGED_OUT,"no access token: call updateAccessToken() and try again",e,t):t.code===r.NETWORK_ERROR?new i(i.NETWORK_ERROR,"error connecting to server",e,t):t.code===r.EXCEEDS_QUOTA?new i(i.EXCEEDS_QUOTA,"push failed due to insufficient remaining quota",e,t):t.code===r.OUT_OF_SPACE?new i(i.OUT_OF_SPACE,"not enough disk space",e,t):t.code===r.NOT_IMPLEMENTED?new i(i.NOT_IMPLEMENTED,"tried to call an API not implemented on the server",e,t):t.code===r.RETRYABLE_SERVER_ERROR?new i(i.RETRYABLE_SERVER_ERROR,"intermittent server failure - can retry later",e,t):t.code===r.INVALID_DATA||t.code===r.INVALID_JSON?new i(i.CORRUPTED_LIBRARY,"unable to read manifest",e,t):a&&n&&n[a]?new i(n[a],"server returned "+a+"response",e,t):new i(i.TRANSFER_ERROR,"something went wrong during a push/pull operation",e,t)}},o.getCommitError=function(t,e,n){if(t){var o=n?" - "+n:"";return t.code===r.INVALID_DATA||t.code===r.INVALID_JSON?new i(i.CORRUPTED_LIBRARY,"unable to read manifest"+o,e,t):t.code===r.OUT_OF_SPACE?new i(i.OUT_OF_SPACE,"not enough disk space"+o,e,t):new i(i.FS_ERROR,"filesystem error"+o,e,t)}},o.getErrorPriority=function(t){var e=[i.EXCEEDS_MAX_LIBRARY_SIZE,i.THUMBNAIL_NOT_AVAILABLE,i.BROKEN_LINK,i.URL_VALIDATION_FAILED,i.CORRUPTED_LIBRARY,i.TRANSFER_ABORTED,i.TRANSFER_ERROR,i.NETWORK_ERROR,i.EXCEEDS_QUOTA,i.RETRYABLE_SERVER_ERROR,i.LOGGED_OUT,i.FILE_TOO_LARGE,i.FS_ERROR,i.OUT_OF_SPACE,i.ACCESS_DENIED,i.NOT_ALLOWED,i.DELETED_LOCALLY,i.REQUIRES_FILESYSTEM,i.NOT_SUPPORTED,i.NOT_IMPLEMENTED,i.INVALID_PARAMETER,i.READ_ONLY],n=t&&t.code&&e.indexOf(t.code);return void 0!==n?n:-1},o.errorToString=function(t){var e="";return t&&(t.message&&(e+=t.message),t.libraryId&&(e+=" library: "+t.libraryId),t.underlyingError?e+="\n<- "+o.errorToString(t.underlyingError):t.response&&t.response.statusCode&&(e+=": "+t.response.statusCode),t.failedComponents&&(e+="\n<- Failed Components:",t.failedComponents.forEach(function(t){var n=t.component&&t.component.id,r=t.error,i=r&&r.message,o=r&&r.response&&r.response.statusCode;e+="\n    ["+n+"] "+i+(o?": "+o:"")}))),e},o.isErrorCode=function(t){return!!t&&(i.hasOwnProperty(t)&&i[t]===t)},o}),a("utils/AdobeLibrarySyncUtils",["require","exports","module","../AdobeLibraryConfig","../AdobeLibraryError","../components/dcx-js/src/AdobeDCXUtil"],function(t,e,n){"use strict";var r=t("../AdobeLibraryConfig"),i=t("../AdobeLibraryError"),o=t("../components/dcx-js/src/AdobeDCXUtil"),a={};a.getBackoffTicks=function(t){var e=r.BACKOFF_INTERVALS;return e[Math.max(0,Math.min(t,e.length-1))]-1},a.getRetryAfterHeader=function(t){if(t){var e=t["retry-after"]||t["Retry-After"];if(e)try{var n=parseInt(e,10);if(n)return Math.max(0,n);var i=Date.parse(e);if(i){var o=(new Date).valueOf();return Math.max(0,i-o)/1e3+Math.floor(Math.random()*r.RETRY_RANDOM_SECONDS)}}catch(t){}}return 0},a.getLocationHeader=function(t){if(t){var e=t.location||t.Location;if(e)return e}},a.getContentTypeHeader=function(t){if(t){var e=t["content-type"]||t["Content-Type"];if(e){var n=e.indexOf(";");return n>0&&(e=e.substring(0,n)),e}}},a.getContentLengthHeader=function(t){if(t){var e=t["content-length"]||t["Content-Length"];return Number(e)||void 0}},a.isUnrecoverableClientError=function(t,e){return!!t&&(t>=400&&500>t&&(401!==t||!!e)&&407!==t&&408!==t)};var s=function(t,e){return e.some(function(e){if(t===e)return!0;var n=t.indexOf("."+e);return-1!==n&&n===t.length-e.length-1})};return a.isAdobeDomain=function(t){return!!t&&s(t,r.ADOBE_AUTHENTICATED_DOMAINS)},a.validateURL=function(t){if(!t)return new i(i.URL_VALIDATION_FAILED,"URL not specified");var e=o.parseURI(t);return"https"!==e.scheme?new i(i.URL_VALIDATION_FAILED,"URL must be https://"):a.isAdobeDomain(e.authority)||s(e.authority,r.WHITELISTED_DOMAINS)?null:new i(i.URL_VALIDATION_FAILED,"URL domain not in whitelist")},a}),a("AdobeLibraryRepresentation",["require","exports","module","./AdobeLibraryServices","./AdobeLibraryConfig","./AdobeLibraryError","./utils/AdobeLibraryMimeTypeUtils","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryErrorUtils","./utils/AdobeLibrarySyncUtils"],function(t,e,n){"use strict";function r(t,e,n){this._element=t,this._dcxNode=e,this._dcxComponent=n,this._deletedLocally=!1,this._pendingDownloadCallbacks=[]}var i=t("./AdobeLibraryServices"),o=t("./AdobeLibraryConfig"),a=t("./AdobeLibraryError"),s=t("./utils/AdobeLibraryMimeTypeUtils"),u=t("./utils/AdobeLibraryManifestUtils"),c=t("./utils/AdobeLibraryFileUtils"),l=t("./utils/AdobeLibraryErrorUtils"),f=t("./utils/AdobeLibrarySyncUtils");return r.prototype._markDeletedLocally=function(t){this._deletedLocally=t},r.prototype._toJSON=function(){var t={id:this.id,type:this.type,relationship:this.relationship};return i.hasFileSystem()&&(t._componentPath=this._getComponentPath()),t},r.prototype._getOrder=function(){return this._getDCXElement().getValue(o.REPRESENTATION_ORDER_KEY)||0},r.prototype._setComponentInBrowser=function(t,e,n){var r=this;this._element._library._collection._syncManager.uploadNewComponentForRepresentation(t,e,this,function(t,e){return u.checkDeletedState(r,n)?void n(t):t?void n(t):(u.copyCustomDCXData(r._dcxNode,e),r._element._library._dcxBranch.removeChild(r._dcxNode),r._dcxComponent=e,delete r._dcxNode,r._commit(),void n(null))})},r.prototype._setComponentFromPath=function(t,e,n){var r=i.fs,s=this,l=t&&i.getFileNameFromPath(t),f=c.getFileExtension(l),h=this.id+"."+f;r.stat(t,function(r,c){return c&&c.size>o.MAX_COMPONENT_SIZE?void n(new a(a.FILE_TOO_LARGE,"File exceeds maximum size for a representation")):void i.storageInterface.notifyStartWrite(s._element._library,[],function(){var r=s._element._library._dcxBranch;r.addComponent(l,s.type,s.relationship,h,t,e,void 0,s._element._dcxNode,s.id,function(t,e){if(!u.checkDeletedState(s,n)){if(t)return void n(t);u.copyCustomDCXData(s._dcxNode,e),r.removeChild(s._dcxNode),s._dcxComponent=e,delete s._dcxNode,s._commit(),n(null)}})})})},r.prototype._setComponent=function(t,e,n,r){function o(t){return u.checkDeletedState(d,r)?void 0:t?void r(l.getCommitError(t,d._element._library.id,"error writing representation contents")):void d._setComponentFromPath(f,!1,r)}function a(){"buffer"===e?h.writeFile(f,t,o):h.writeFile(f,t,e,o)}var f,h=i.fs,d=this,p=this.element.library.collection._getTempDir();c.ensurePathExists(p,function(t){if(!u.checkDeletedState(d,r)){if(t)return void r(l.getCommitError(t,d._element._library.id,"error creating temp directory"));if(!n){var e=s.getExtensions(d.type)[0];n=d.id+"."+e}f=p+i.getPathSeparator()+n,a()}})},r.prototype._getCurrentComponentPath=function(){return this._dcxComponent?this._element._library._dcxBranch.assetOfComponent(this._dcxComponent):void 0},r.prototype._getComponentPath=function(t,e){if(!t)return this._getCurrentComponentPath();if(this.isExternalLink)this._getExternalLinkPath(t);else if(this._dcxComponent){var n=this._getCurrentComponentPath();if(n||e)t(null,n);else{var r=this,i=this._element._library;i._networkLock.obtain(function(e){return e?void t(e):u.checkDeletedState(r,t)?void i._networkLock.release():(i._setSyncState("downloading"),void i._collection._syncManager.downloadRepresentation(r,function(e){if(i._networkLock.release(),i._setSyncState(),!u.checkDeletedState(r,t)){if(e)return void t(l.getSyncError(e,r._element._library.id));i._commit(!0,!0),r._getComponentPath(t,!0)}}))})}}else t(null)},r.prototype._setRenditionCache=function(t,e,n,r){var i=this.element;i._lock.obtain(function(){i._setRenditionCache(t,e,n),i._lock.release(),r()})},r.prototype._getCachedExternalLinkPath=function(t){var e=null,n=this.element._lookupRenditionPath(this.id);if(t||n!==o.RENDITION_CACHE_PLACEHOLDER||(n=void 0),"RENDITION_NOT_AVAILABLE"===n&&(n=a.BROKEN_LINK),l.isErrorCode(n)&&(e=new a(n,"Broken link, or access denied",this.element.library.id),n=void 0),!e&&!n){var r=this._dcxNode.getValue(o.LINK_URL_KEY);e=f.validateURL(r)}return{err:e,path:n}},r.prototype._getExternalLinkPath=function(t){var e=this,n=this.element.library,r=n.collection,c=r._getTempDir(),h=this._getCachedExternalLinkPath();if(h.err||h.path)return void t(h.err,h.path);if(o.SHARED_LOCAL_STORAGE)return void i.storageInterface.downloadExternalLink(e,t);if(this._pendingDownloadCallbacks.push(t),!(this._pendingDownloadCallbacks.length>1)){var d=function(t,n){var r=e._pendingDownloadCallbacks;e._pendingDownloadCallbacks=[],r.forEach(function(e){e(t,n)})},p=function(t,n,i){r._updateExternalLinkDownloadProgress(e,t,n,i)},_=function(t,r){var o=function(e,n){p(void 0,void 0,t),d(e,n)};return t?void o(t):l.isErrorCode(r)?void e._setRenditionCache(e.id,r,!0,function(){o(new a(r,"Broken link, or access denied",n.id))}):void e.element.setThumbnailCache(e.id,r,function(t,n){i.storageInterface.notifyDownloadRendition(e.element),o(t,n)})},v=this._dcxNode.getValue(o.LINK_URL_KEY),m=(new Date).valueOf();i.log("Downloading from external URL: "+v),r._syncManager.getAssetFromURL(v,{},c,p,function(t,n,o,c){if(i.log("Finished downloading from external URL: "+((new Date).valueOf()-m)+"ms"),!u.checkDeletedState(e,_)){var h=t&&t.response&&t.response.statusCode;if(f.isUnrecoverableClientError(h,r.isPublic))return void _(null,a.BROKEN_LINK);if(t)return void _(l.getSyncError(t));var d=f.getContentTypeHeader(c&&c.headers)||e.type,p=s.getExtensions(d)[0]||"data",v=n+"."+p;i.fs.rename(n,v,function(t){return t?void _(l.getCommitError(t)):void _(null,v)})}})}},r.prototype._testExternalLink=function(t){var e=this,n=this._getCachedExternalLinkPath(!0);if(n.err)return void t(null,!1);if(n.path)return void t(null,!0);var r=this.element.library.collection,s=this._dcxNode.getValue(o.LINK_URL_KEY);r._updateExternalLinkDownloadProgress(this,0,1);var u=function(n,i){r._updateExternalLinkDownloadProgress(e),t(n,i)},c=(new Date).valueOf();i.log("HEAD request of external URL: "+s),i.storageInterface.doHeadRequestOfURL(r,s,function(t,n){if(i.log("Finished HEAD request of external URL: "+((new Date).valueOf()-c)+"ms"),t)return void u(null,!0);var s=n&&n.statusCode;f.isUnrecoverableClientError(s,r.isPublic)?e._setRenditionCache(e.id,a.BROKEN_LINK,!0,function(){u(null,!1)}):s&&s>=200&&400>s?e._setRenditionCache(e.id,o.RENDITION_CACHE_PLACEHOLDER,!1,function(){u(null,!0)}):u(null,!0)})},r.prototype._getDCXElement=function(){return this._dcxComponent||this._dcxNode},r.prototype._commit=function(){this._element._commit()},r.prototype.jasmineToString=function(){return this.toString()},Object.defineProperties(r.prototype,{id:{get:function(){return this._getDCXElement().id},set:function(t){throw new a(a.READ_ONLY,"Cannot change the id of an existing representation",this._element._library.id)}},element:{get:function(){return this._element},set:function(t){throw new a(a.READ_ONLY,"element is a read-only property",this._element._library.id)}},isWritable:{get:function(){return this._element.isWritable},set:function(){throw new a(a.READ_ONLY,"isWritable is a read-only property",this._element._library.id)}},type:{get:function(){var t=this._getDCXElement().type;return t===o.LINK_REPRESENTATION_TYPE&&(t=this._getDCXElement().getValue(o.LINK_TYPE_KEY)),t},set:function(t){throw new a(a.READ_ONLY,"Cannot change the content type of an existing representation",this._element._library.id)}},relationship:{get:function(){return this._dcxComponent?this._dcxComponent.relationship:this._dcxNode.getValue(o.RELATIONSHIP_KEY)||this._dcxNode.getValue("relationship")},set:function(t){this._element._validateRelationship(t,this),this._dcxComponent?this._dcxComponent.relationship=t:this._dcxNode.setValue(o.RELATIONSHIP_KEY,t)}},width:{get:function(){return this._dcxComponent?this._dcxComponent.getValue("width"):this._dcxNode.getValue(o.WIDTH_KEY)},set:function(t){if(u.checkDeletedState(this),!this.isWritable)throw new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id);if(!this._dcxComponent&&!this.isExternalLink)throw new a(a.INVALID_PARAMETER,"Cannot set width on a representation without contents",this._element._library.id);if("number"!=typeof t||0>t)throw new a(a.INVALID_PARAMETER,"Invalid width",this._element._library.id);this._dcxComponent?this._dcxComponent.setValue("width",t):this._dcxNode.setValue(o.WIDTH_KEY,t),this._commit()}},height:{get:function(){return this._dcxComponent?this._dcxComponent.getValue("height"):this._dcxNode.getValue(o.HEIGHT_KEY)},set:function(t){if(u.checkDeletedState(this),!this.isWritable)throw new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id);if(!this._dcxComponent&&!this.isExternalLink)throw new a(a.INVALID_PARAMETER,"Cannot set height on a representation without contents",this._element._library.id);if("number"!=typeof t||0>t)throw new a(a.INVALID_PARAMETER,"Invalid height",this._element._library.id);this._dcxComponent?this._dcxComponent.setValue("height",t):this._dcxNode.setValue(o.HEIGHT_KEY,t),this._commit()}},isFullSize:{get:function(){return this._getDCXElement().getValue(o.IS_FULL_SIZE_KEY)},set:function(t){if(u.checkDeletedState(this),!this.isWritable)throw new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id);if(!this._dcxComponent&&!this.isExternalLink)throw new a(a.INVALID_PARAMETER,"Cannot set isFullSize on a representation without contents",this._element._library.id);if("boolean"!=typeof t)throw new a(a.INVALID_PARAMETER,"Invalid isFullSize",this._element._library.id);this._getDCXElement().setValue(o.IS_FULL_SIZE_KEY,t),this._commit()}},contentLength:{get:function(){if(this.isExternalLink)return this._dcxNode.getValue(o.LENGTH_KEY);if(this._dcxComponent){if(void 0===this._dcxComponent.length&&i.hasFileSystem()){var t=this._getCurrentComponentPath();try{var e=i.fs.statSync(t);return e&&e.size}catch(t){}}return this._dcxComponent.length}},set:function(t){if(!this.isExternalLink)throw new a(a.READ_ONLY,"setContentLength can only be used for an externally-linked representation",this._element._library.id);if("number"!=typeof t||0>t)throw new a(a.INVALID_PARAMETER,"Invalid content length",this._element._library.id);this._dcxNode.setValue(o.LENGTH_KEY,t),this._commit()}},isDeletedLocally:{get:function(){return this._deletedLocally},set:function(t){throw new a(a.READ_ONLY,"isDeletedLocally is a read-only property",this._element._library.id)}},isExternalLink:{get:function(){return void 0!==this._dcxNode&&this._dcxNode.type===o.LINK_REPRESENTATION_TYPE},set:function(t){throw new a(a.READ_ONLY,"isExternalLink is a read-only property",this._element._library.id)}}}),r.prototype.isCompatibleType=function(t){if(this._dcxComponent){var e=c.getFileExtension(this._dcxComponent.path);if(-1===s.getExtensions(t).indexOf(e))return!1}return u.isCompatibleType(t,this.type)},r.prototype.toString=function(){return JSON.stringify(this._toJSON())},r.prototype.getValue=function(t,e){if(t===o.DL_NAMESPACE)throw new a(a.INVALID_PARAMETER,"Reserved namespace",this._element._library.id);var n=u.getDCXKey(t,e);return this._getDCXElement().getValue(n)},r.prototype.getValues=function(){return u.getCustomDCXData(this._getDCXElement())},r.prototype.setValue=function(t,e,n){if(u.checkDeletedState(this),!this.isWritable)throw new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id);if(t===o.DL_NAMESPACE)throw new a(a.INVALID_PARAMETER,"Reserved namespace",this._element._library.id);var r,i=u.getDCXKey(t,e);try{r=JSON.parse(JSON.stringify(n))}catch(t){throw new a(a.INVALID_PARAMETER,"Value cannot be serialized to JSON",this._element._library.id)}this._getDCXElement().setValue(i,r),this._commit()},r.prototype.setContent=function(t,e,n,r){if(!u.checkDeletedState(this,r)){if(!this.isWritable)return void r(new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id));if(this._dcxComponent||this.isExternalLink)return void r(new a(a.INVALID_PARAMETER,"Cannot modify representation content once set",this._element._library.id));if(i.hasFileSystem()){if(!u.checkEncoding(e,["utf8","ascii","base64","buffer"],r))return;this._setComponent(t,e,n,r)}else{if(void 0!==e)return void r(new a(a.INVALID_PARAMETER,"Encoding parameter not supported in-browser"));this._setComponentInBrowser(t,n,r)}}},r.prototype.setContentFromPath=function(t,e,n){return"function"==typeof e&&(n=e,e=!1),i.hasFileSystem()?u.checkDeletedState(this,n)?void 0:this.isWritable?this._dcxComponent||this.isExternalLink?void n(new a(a.INVALID_PARAMETER,"Cannot modify representation content once set",this._element._library.id)):void this._setComponentFromPath(t,!e,n):void n(new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id)):void n(new a(a.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this._element._library.id))},r.prototype.setContentFromURL=function(t,e,n,r){if(!i.hasFileSystem()&&!t)return void r(new a(a.NOT_IMPLEMENTED,"not yet implemented setContentFromURL without a filesystem",this._element._library.id));if(!u.checkDeletedState(this,r)){if(!this.isWritable)return void r(new a(a.NOT_ALLOWED,"you do not have write access to this library",this._element._library.id));if("boolean"!=typeof t)return void r(new a(a.INVALID_PARAMETER,"Invalid createLink parameter: must be Boolean",this._element._library.id));if(this._dcxComponent||this.isExternalLink)return void r(new a(a.INVALID_PARAMETER,"Cannot modify representation content once set",this._element._library.id));if(t)return this._dcxNode.setValue(o.LINK_TYPE_KEY,this._dcxNode.type),this._dcxNode.type=o.LINK_REPRESENTATION_TYPE,this._dcxNode.setValue(o.LINK_URL_KEY,e),this._commit(),void r(null);var c=this,h=this.element.library.collection,d=h._getTempDir();i.storageInterface.getAssetFromURL(h,e,n,d,function(t,e,n,o){if(t)return void r(l.getSyncError(t));if(!u.checkDeletedState(c,r)){var a=f.getContentTypeHeader(o&&o.headers);if(a){var h=s.getExtensions(a)[0],d=e+"."+h;i.fs.rename(e,d,function(t){return t?void r(l.getCommitError(t)):void c._setComponentFromPath(d,!1,r)})}else c._setComponentFromPath(e,!1,r)}})}},r.prototype.getContentPath=function(t){return i.hasFileSystem()?void(u.checkDeletedState(this,t)||this._getComponentPath(t)):void t(new a(a.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this._element._library.id))},r.prototype.getCachedContentPath=function(){if(i.hasFileSystem()){if(this.isExternalLink){return this._getCachedExternalLinkPath().path}return this._dcxComponent?this._getCurrentComponentPath()||void 0:void 0}},r.prototype.getContent=function(t,e){var n=i.fs,r=this;if(!u.checkDeletedState(this,e))if(i.hasFileSystem()){if(!u.checkEncoding(t,["utf8","ascii","base64","buffer"],e))return;this._getComponentPath(function(i,o){if(i||!o)return void e(i);if(!u.checkDeletedState(r,e)){var a=function(t,n){t&&l.getCommitError(t,r._element._library.id,"error reading content from disk"),e(t,n)};"buffer"===t?n.readFile(o,a):n.readFile(o,t,a)}})}else{if(!u.checkEncoding(t,["text","blob","arraybuffer"],e))return;if(!this._dcxComponent)return void e(null);var o=this._element._library._collection._syncManager;o.getSharedCloudContent(this,t,e)}},r.prototype.getContentURL=function(){if(this.isExternalLink)return this._dcxNode.getValue(o.LINK_URL_KEY);if(this._dcxComponent){return this._element._library._collection._syncManager.getSharedCloudContentURL(this._dcxComponent)}},r.prototype.getAuthenticatedContentURL=function(t){var e=this.getContentURL();this._element._library._collection._syncManager.appendAccessTokenToURL(e,t)},r.prototype.testExternalLink=function(t){return this.isExternalLink&&this.getContentURL()?void this._testExternalLink(t):void t(new a(a.INVALID_PARAMETER,"Not an external link",this._element._library.id))},r.prototype.getCachedExternalLinkError=function(){return this.isExternalLink&&this.getContentURL()?this._getCachedExternalLinkPath().err:new a(a.INVALID_PARAMETER,"Not an external link",this._element._library.id)},r.prototype.getExternalLinkDownloadProgress=function(){return this.isExternalLink?this.element.library.collection._getExternalLinkDownloadProgress(this):void 0},r}),a("AdobeLibraryAnalytics",["require","exports","module","./AdobeLibraryServices","./AdobeLibraryConfig"],function(t,e,n){"use strict";function r(t){if(t.type){var e=t.type.match(/application\/vnd\.adobe\.element\.(.*)\+dcx/);return e&&2===e.length?e[1]:t.type}return null}function i(t){if(!t)return{};var e={libraryID:t.id,libraryElementCount:t._elements.length};return t.collaboration&&(e.libraryShared=t.collaboration),e}function o(t){var e=null;return t&&t.getValues().forEach(function(t){"trackingdata"===t.key&&(e||(e={}),e[t.namespace]=t.value)}),e}function a(t){if(!t)return{};var e=i(t._library);e.elementID=t.id,e.elementType=r(t);var n=t.getPrimaryRepresentation();if(n){var a=o(n);a&&(e.trackingData=JSON.stringify(a)),e.elementPrimaryType=n.type}return e}function s(t){if(!t)return{};var e=a(t._element);return e.representationType=t.type,e}function u(){return null!==h.analytics&&void 0!==h.analytics}function c(t){u()&&t&&h.analytics.reportError(t.code+(t.underlyingError?":"+t.underlyingError.code:""))}var l,f,h=t("./AdobeLibraryServices"),d=t("./AdobeLibraryConfig"),p=function(t){u()&&h.analytics.reportEvent("createLibrary",{libraryID:t.id})},_=function(t){u()&&h.analytics.reportEvent("deleteLibrary",i(t))},v=function(t){u()&&(l=t,f=Date.now(),h.analytics.reportEvent("createElement",a(t)))},m=function(t,e){if(u()){if(t===l&&Date.now()-f<d.ANALYTICS_ELEMENT_UPDATE_THRESHOLD)return;l=t,f=Date.now();var n=a(t);n.updateType=e?"info":"representation",h.analytics.reportEvent("updateElement",n)}},y=function(t,e,n){if(u()){var r=s(t);r.opType=e,r.details=n,h.analytics.reportEvent("useElement",r)}},g=function(t,e,n){if(u()){var r=a(t);r.opType=e,r.details=n,h.analytics.reportEvent("checkoutElement",r)}},b=function(t){u()&&h.analytics.reportEvent("deleteElement",a(t))};return{reportCreateLibrary:p,reportDeleteLibrary:_,reportCreateElement:v,reportUpdateElement:m,reportCopyElement:function(t,e){if(u()){l=t,f=Date.now();var n=a(t);n.oldLibraryID=e._library.id,n.oldElementID=e.id,h.analytics.reportEvent("copyElement",n)}},reportMoveElement:function(t,e){if(u()){l=t,f=Date.now();var n=a(t);n.oldLibraryID=e._library.id,n.oldElementID=e.id,h.analytics.reportEvent("moveElement",n)}},reportUseElement:y,reportCheckoutElement:g,reportDeleteElement:b,reportCollisionElement:function(t){u()&&h.analytics.reportEvent("collisionLibrary",a(t))},reportCreateLink:function(t,e){if(u()){var n=a(t);n.opType=e,h.analytics.reportEvent("createLink",n)}},reportShareElementLink:function(t){u()&&h.analytics.reportEvent("shareElementLink",a(t))},reportShareLibraryLink:function(t){u()&&h.analytics.reportEvent("shareLibraryLink",i(t))},reportError:c,reportUnexpectedState:function(t,e){if(u()){var n=i(t);n.details=e,n.logs=!0,h.analytics.reportEvent("unexpectedState",n)}}}}),a("utils/AdobeLibraryLock",["require","exports","module"],function(t,e,n){"use strict";function r(){this._isLocked=!1,this._pendingContinuations=[]}return r.prototype.obtain=function(t,e){this._isLocked?this._pendingContinuations.push({continuation:t,thisObject:e}):(this._isLocked=!0,t.apply(e,[null]))},r.prototype.release=function(){if(this._pendingContinuations.length>0){var t=this._pendingContinuations.shift();setTimeout(function(){t.continuation.apply(t.thisObject,[null])})}else this._isLocked=!1},r.prototype.abortPendingOperations=function(t){var e=this._pendingContinuations;this._pendingContinuations=[],e.forEach(function(e){e.continuation.apply(e.thisObject,[t])})},r.prototype.isLocked=function(){return this._isLocked},r.prototype.hasPendingRequest=function(){return this._pendingContinuations.length>0},r}),a("utils/AdobeLibraryAsyncJoin",["require","exports","module","../AdobeLibraryError"],function(t,e,n){"use strict";function r(){this._operations=[],this._isRunning=!1}var i=t("../AdobeLibraryError");return r.prototype.addOperation=function(t,e,n){if(this._isRunning)throw new i(i.INVALID_PARAMETER,"Cannot add operations after calling run()");this._operations.push({operation:t,argsArray:e||[],thisObject:n})},r.prototype.run=function(t,e){function n(e,n,r){t&&t(e,n,r)}function r(t,r,f){if(t&&e&&e(t),!u){if(a=a||t,c[f])return u=!0,void n(new i(i.INVALID_PARAMETER,"Operation not valid: calls callback multiple times"));if(s++,l[f]=r,c[f]=!0,s===o){u=!0;var h=!!l.reduce(function(t,e){return t||e},!1);n(a||null,h,l)}}}if(this._isRunning)throw new i(i.INVALID_PARAMETER,"Cannot call run() more than once");this._isRunning=!0;var o=this._operations.length;0===o&&n(null,!1,[]);var a,s=0,u=!1,c=[],l=[];this._operations.forEach(function(t,e){t.argsArray.push(function(t,n){r(t,n,e)}),t.operation.apply(t.thisObject,t.argsArray)})},r}),a("utils/AdobeLibraryRenditionUtils",["require","exports","module","../AdobeLibraryConfig","../AdobeLibraryServices","./AdobeLibraryAsyncJoin","./AdobeLibraryFileUtils","./AdobeLibraryErrorUtils"],function(t,e,n){"use strict";var r=t("../AdobeLibraryConfig"),i=t("../AdobeLibraryServices"),o=t("./AdobeLibraryAsyncJoin"),a=t("./AdobeLibraryFileUtils"),s=t("./AdobeLibraryErrorUtils"),u={},c={"application/x-indesign":!0,"application/postscript":!0,"application/illustrator":!0,"application/pdf":!0,"application/vnd.adobe.psremix":!0,"application/vnd.adobe.pstouch":!0,"application/vnd.adobe.ideas":!0,"application/vnd.adobe.ase":!0,"image/jpeg":!0,"image/jpg":!0,"image/pjpeg":!0,"image/tiff":!0,"image/gif":!0,"image/bmp":!0,"image/x-ms-bmp":!0,"image/svg+xml":!0,"image/png":!0,"image/x-png":!0,"image/jp2":!0,"image/psd":!0,"image/vnd.adobe.photoshop":!0,"application/photoshop":!0,"application/x-photoshop":!0,"image/raw":!0,"image/dng":!0,"image/x-adobe-dng":!0,"video/mp4":!0,"video/mpeg":!0,"video/x-ms-wmv":!0,"video/3gpp":!0,"video/3gpp2":!0,"video/quicktime":!0,"video/x-msvideo":!0,"video/x-flv":!0,"video/x-ms-asf":!0,"video/x-m4v":!0,"video/mp2t":!0,"application/mxf":!0,"application/x-shockwave-flash":!0,"application/vnd.adobe.brushes.brush+ucf":!0,"application/vnd.adobe.collage":!0,"application/vnd.adobe.proto":!0,"application/msword":!0,"application/msexcel":!0,"application/mspowerpoint":!0,"application/vnd.ms-publisher":!0,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":!0,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":!0,"application/vnd.openxmlformats-officedocument.presentationml.presentation":!0,"application/vnd.adobe.charts+zip":!0,"text/plain":!0,"text/rtf":!0},l=function(t,e){var n=i.fs;n.stat(t,function(r,i){return r?void e(r):void(i&&i.isDirectory()?a.recursiveDeleteDirectory(t,e):n.unlink(t,e))})},f=function(t,e,n){var s=i.getPathSeparator(),u=i.fs;if(!t._dcxComposite.autoRemoveUnusedLocalFiles)return void n(null);var c={};Object.keys(e.renditions).forEach(function(n){var r=e.renditions[n];Object.keys(r).forEach(function(e){var n=r[e];c[n]=!0,delete t._pendingRenditionCacheItems[n]})});var f=t._getRenditionCacheDir();u.readdir(f,function(e,i){if(e)return void n(e);var u=new o;i.forEach(function(e){var n=a.normaliseTempFileName(e);e===r.RENDITION_CACHE_FILE||c[e]||t._pendingRenditionCacheItems[n]||u.addOperation(l,[f+s+e])}),u.run(n)})};return u.readRenditionCacheData=function(t,e){var n=i.getPathSeparator(),o=t._getRenditionCacheDir();a.readJSONData(o+n+r.RENDITION_CACHE_FILE,function(t,n){var r=n||{};r.renditions=r.renditions||{},e(null,r)})},u.writeRenditionCacheData=function(t,e,n){var i=t._getRenditionCacheDir();a.writeJSONData(i,r.RENDITION_CACHE_FILE,e,function(r){return r?void n(r):void f(t,e,n)})},u.copyRenditionCache=function(t,e,n,a){var u=e._library._getRenditionCacheDir()+i.getPathSeparator(),c=new o,l=n||{};Object.keys(l).forEach(function(e){var n=l[e];n===r.RENDITION_CACHE_PLACEHOLDER||s.isErrorCode(n)?t._renditionCache[e]=n:c.addOperation(t.setThumbnailCache,[e,u+n],t)}),r.SHARED_LOCAL_STORAGE?(c.run(),a(null)):c.run(a)},u.canComputeRenditionFromMimeType=function(t){return!!c[t]},u.canComputeRendition=function(t){return!(void 0===t._dcxComponent||!u.canComputeRenditionFromMimeType(t.type))},u.shouldPrefetchFullRendition=function(t){var e=r.FULL_RENDITION_CONFIG||{},n=e[t.type];if(!n)return!1;var i=!1;return Object.keys(n).forEach(function(e){var r=n[e];if("IF_NO_MATCHING_REPRESENTATION"===r.condition&&r.types){var o=t.representations.every(function(t){return-1===r.types.indexOf(t.type)});i=i||o}}),i},u.shouldPrefetchExternalLink=function(t){return!!t.isExternalLink&&!!(r.EXTERNAL_LINK_PREFETCH||{})[t.element.type]},u.prefetchRenditions=function(t,e){if(!i.hasFileSystem())return void(e&&e(null));var n=new o,a=r.RENDITION_SIZES||{};t.elements.forEach(function(t){(a[t.type]||a["*"]||[]).forEach(function(e){n.addOperation(t.getThumbnailPath,[e],t)}),u.shouldPrefetchFullRendition(t)&&n.addOperation(t.getThumbnailPath,[void 0],t),t.representations.forEach(function(t){u.shouldPrefetchExternalLink(t)?n.addOperation(t.getContentPath,[],t):t.isExternalLink&&n.addOperation(t.testExternalLink,[],t)})}),n.run(function(t){e&&e(t)})},u.addToRenditionSizeConfig=function(t){var e=r.RENDITION_SIZES,n=e["*"]||[];n=JSON.parse(JSON.stringify(n));var i=t["*"]||[];Object.keys(e).forEach(function(n){if(!t[n]){var r=e[n];i.forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),e[n]=r}}),Object.keys(t).forEach(function(r){var i=e[r]||JSON.parse(JSON.stringify(n));t[r].forEach(function(t){-1===i.indexOf(t)&&i.push(t)}),e[r]=i}),r.setParameter("RENDITION_SIZES",e)},u.addToFullRenditionConfig=function(t){var e=r.FULL_RENDITION_CONFIG;Object.keys(t).forEach(function(n){var r=e[n]||{};t[n].forEach(function(t){t.id&&(r[t.id]=t)}),e[n]=r}),r.setParameter("FULL_RENDITION_CONFIG",e)},u.addToPendingSetRenditionCache=function(t,e,n,r,i){t=t||{data:[],callbacks:[]};var o=[];return t.data.forEach(function(r,i){t.callbacks[i]||r.element!==e.id||r.size!==n||"CLEAR"!==r.path||o.unshift(i)}),o.forEach(function(e){t.data.splice(e,1),t.callbacks.splice(e,1)}),t.data.push({element:e.id,size:n,path:r}),t.callbacks.push(i),t},u}),a("utils/AdobeLibraryFeatureUtils",["require","exports","module","../AdobeLibraryServices"],function(t,e,n){"use strict";var r=t("../AdobeLibraryServices"),i={};return i.supportsClearRenditionCache=function(){var t=r.storageInterface.getServiceInfo();return(t?t.apiVersion:0)>=7},i}),a("utils/AdobeLibraryListenerManager",["require","exports","module","../AdobeLibraryServices","../AdobeLibraryError"],function(t,e,n){"use strict";function r(t){this._restrictedTypes=t,this._listeners={}}var i=t("../AdobeLibraryServices"),o=t("../AdobeLibraryError");return r.prototype._checkType=function(t){if(this._restrictedTypes&&-1===this._restrictedTypes.indexOf(t)){var e="["+this._restrictedTypes.join(", ")+"]";throw new o(o.INVALID_PARAMETER,t+" is not allowed. Should be one of: "+e)}},r.prototype.add=function(t,e){this._checkType(t),this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e)},r.prototype.remove=function(t,e){this._checkType(t);var n=this._listeners[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}},r.prototype.removeAll=function(t){t?(this._checkType(t),delete this._listeners[t]):this._listeners={}},r.prototype.notify=function(t,e){this._checkType(t);var n=this._listeners[t];n&&n.slice(0).forEach(function(t){try{t.apply(void 0,e||[])}catch(t){i.log("Error in listener callback: "+(t?t.toString():"")),t&&t.stack&&i.log(t.stack)}})},r.prototype.hasListeners=function(t){this._checkType(t);var e=this._listeners[t];return!!(e&&e.length>0)},r.prototype.forEach=function(t){var e=this._listeners;Object.keys(e).forEach(function(n){e[n].forEach(function(e){t(n,e)})})},r}),a("AdobeLibraryElement",["require","exports","module","./AdobeLibraryServices","./AdobeLibraryConfig","./AdobeLibraryRepresentation","./AdobeLibraryAnalytics","./AdobeLibraryError","./utils/AdobeLibraryLock","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryRenditionUtils","./utils/AdobeLibraryErrorUtils","./utils/AdobeLibraryFeatureUtils","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(t,e){this._library=t,this._renditionCache={},this._lock=new c,this._listenerManager=new _(["change"]),this._transactionCount=0,this._setDCXNode(e)}var i=t("./AdobeLibraryServices"),o=t("./AdobeLibraryConfig"),a=t("./AdobeLibraryRepresentation"),s=t("./AdobeLibraryAnalytics"),u=t("./AdobeLibraryError"),c=t("./utils/AdobeLibraryLock"),l=t("./utils/AdobeLibraryManifestUtils"),f=t("./utils/AdobeLibraryFileUtils"),h=t("./utils/AdobeLibraryRenditionUtils"),d=t("./utils/AdobeLibraryErrorUtils"),p=t("./utils/AdobeLibraryFeatureUtils"),_=t("./utils/AdobeLibraryListenerManager");return r.prototype._setDCXNode=function(t,e,n){var r=this;this._dcxNode=t,this._representations=[],this._deletedLocally=!1,this._library._dcxBranch.getChildrenOf(t).forEach(function(t){var e=new a(r,t);r._representations.push(e)}),this._library._dcxBranch.getComponentsOf(t).forEach(function(t){var e=new a(r,void 0,t);r._representations.push(e)}),l.sortRepresentations(this._representations),n||this._clearRenditionCache(e,!1),this._displayName=void 0},r.prototype._markDeletedLocally=function(t){this._deletedLocally=t,this._representations.forEach(function(e){e._markDeletedLocally(t)}),t&&this._listenerManager.removeAll()},r.prototype._removeAllListeners=function(){this._listenerManager.removeAll()},r.prototype._toJSON=function(){var t={id:this.id,name:this.name,type:this.type,representations:[]};return this._representations.forEach(function(e){t.representations.push(e._toJSON())}),t.representations.sort(function(t,e){return t.type>e.type?1:t.type<e.type?-1:0}),t},r.prototype._addRepresentation=function(t,e){void 0!==e?this._representations.splice(e,0,t):this._representations.push(t)},r.prototype._removeRepresentation=function(t){var e=this._representations.indexOf(t);-1!==e&&this._representations.splice(e,1)},r.prototype._validateRelationship=function(t,e){if(-1===o.VALID_RELATIONS.indexOf(t))throw new u(u.INVALID_PARAMETER,"Unsupported relationship",this._library.id);if(this._representations.length>0&&"primary"===t){var n=this;this._representations.forEach(function(e){if(e!==t&&"primary"===e.relationship)throw new u(u.INVALID_PARAMETER,"Cannot have more than one primary representation",n._library.id)})}},r.prototype._doCreateRepresentation=function(t,e,n){var r=this._library._dcxBranch.addChild(void 0,void 0,void 0,this._dcxNode);if(r.type=t,r.setValue(o.RELATIONSHIP_KEY,e),void 0===n){var i=this.representations[this.representations.length-1],s=Math.max(this.representations.length,i?i._getOrder()+1:0);r.setValue(o.REPRESENTATION_ORDER_KEY,s)}else r.setValue(o.REPRESENTATION_ORDER_KEY,n),this._representations.forEach(function(t,e){if(e>=n){var r=t._getDCXElement(),i=r.getValue(o.REPRESENTATION_ORDER_KEY);void 0!==i&&r.setValue(o.REPRESENTATION_ORDER_KEY,i+1)}});var u=new a(this,r);return this._addRepresentation(u,n),u},r.prototype._lookupRenditionPath=function(t){var e=i.getPathSeparator(),n=this._renditionCache[t];if(n&&n!==o.RENDITION_CACHE_PLACEHOLDER&&n){if(n===o.RENDITION_CACHE_PLACEHOLDER||d.isErrorCode(n))return n;var r=this._library._getRenditionCacheDir()+e+n;if(o.SHARED_LOCAL_STORAGE||i.fs.existsSync(r))return r}},r.prototype._getNewRenditionPath=function(t,e){var n=this,r=i.getPathSeparator(),o=this._library._getRenditionCacheDir();f.ensurePathExists(o,function(a){if(!l.checkDeletedState(n,e)){var s=i.uuid()+"."+(t||"png");e(a,o+r+s,s)}})},r.prototype._updateModifiedTime=function(){var t=(new Date).valueOf();this._dcxNode.setValue(o.MODIFIED_KEY,t)},r.prototype._updateCreatedTime=function(){var t=(new Date).valueOf();this._dcxNode.setValue(o.CREATED_KEY,t),this._dcxNode.setValue(o.MODIFIED_KEY,t)},r.prototype._clearRenditionCache=function(t,e){var n=this,r=this._renditionCache;this._renditionCache={};var a=e&&o.SHARED_LOCAL_STORAGE&&p.supportsClearRenditionCache();Object.keys(r).forEach(function(e){!t&&!n.getRepresentationById(e)||d.isErrorCode(r[e])?a&&i.storageInterface.setThumbnailCache(n,e,"CLEAR"):n._renditionCache[e]=r[e]})},r.prototype._commit=function(t){this._displayName=void 0,this._updateModifiedTime(),this._clearRenditionCache(!0,!0),this._library._commit(),this._listenerManager.notify("change"),s.reportUpdateElement(this,t)},r.prototype._commitRenditionCache=function(){this._library._commit(!0,!0),this._listenerManager.notify("change")},r.prototype._setRenditionCache=function(t,e,n){this._renditionCache[t]=e,this._commitRenditionCache(),n&&(i.storageInterface.notifyDownloadRendition(this),this._listenerManager.notify("change"))},r.prototype._wrapOperation=function(t,e){var n=this._library._wrapOperation(function(){var n=this._library._wrapOperation(t,e);return this._updateModifiedTime(),n},this);return this._listenerManager.notify("change"),n},r.prototype.jasmineToString=function(){return this.toString()},Object.defineProperties(r.prototype,{id:{get:function(){return this._dcxNode.id},set:function(t){throw new u(u.READ_ONLY,"Cannot change the id of an existing element",this._library.id)}},library:{get:function(){return this._library},set:function(t){throw new u(u.READ_ONLY,"library is a read-only property",this._library.id)}},isWritable:{get:function(){return this._library.isWritable},set:function(){throw new u(u.READ_ONLY,"isWritable is a read-only property",this.id)}},name:{get:function(){return this._dcxNode.name||""},set:function(t){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this._library.id);this._dcxNode.name=t,this._commit(!0)}},displayName:{get:function(){return void 0===this._displayName&&(this._displayName=i.getDisplayName(this)||""),this._displayName},set:function(t){throw new u(u.READ_ONLY,"displayName is a read-only property",this._library.id)}},type:{get:function(){return this._dcxNode.type},set:function(t){throw new u(u.READ_ONLY,"Cannot change the type of an existing element",this._library.id)}},tags:{get:function(){return this._dcxNode.getValue("tags")||[]},set:function(t){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this._library.id);if(!t||t.constructor!==Array)throw new u(u.INVALID_PARAMETER,"tags must be an array",this._library.id);if(!t.every(function(t){return"string"==typeof t}))throw new u(u.INVALID_PARAMETER,"tags must be an array of strings",this._library.id);this._dcxNode.setValue("tags",t),this._commit()}},modified:{get:function(){return this._dcxNode.getValue(o.MODIFIED_KEY)},set:function(t){throw new u(u.READ_ONLY,"Cannot change the modified timestamp of an element directly",this._library.id)}},created:{get:function(){return this._dcxNode.getValue(o.CREATED_KEY)},set:function(t){throw new u(u.READ_ONLY,"Cannot change the created timestamp of an element directly",this._library.id)}},representations:{get:function(){return this._representations},set:function(){throw new u(u.READ_ONLY,"Cannot modify representation list directly",this._library.id)}},isDeletedLocally:{get:function(){return this._deletedLocally},set:function(t){throw new u(u.READ_ONLY,"isDeletedLocally is a read-only property",this._library.id)}}}),r.prototype.toString=function(){return JSON.stringify(this._toJSON())},r.prototype.addChangeListener=function(t){l.checkDeletedState(this),this._listenerManager.add("change",t)},r.prototype.removeChangeListener=function(t){this._listenerManager.remove("change",t)},r.prototype.beginOperation=function(){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);this._transactionCount++,this._library._beginOperation()},r.prototype.endOperation=function(){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);this._transactionCount>0&&(this._transactionCount--,this._library._endOperation())},r.prototype.createRepresentation=function(t,e,n,r){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this._library.id);return this._wrapOperation(function(){if(t===o.LINK_REPRESENTATION_TYPE)throw new u(u.INVALID_PARAMETER,"Cannot create external link representation directly - use setContentFromURL instead",this._library.id);if(void 0!==n&&(0>n||n>this._representations.length))throw new u(u.INVALID_PARAMETER,"Invalid index",this._library.id);this._validateRelationship(e);var i=this._doCreateRepresentation(t,e,n);return r||this._clearRenditionCache(!1,!0),i},this)},r.prototype.removeRepresentation=function(t){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this._library.id);return this._wrapOperation(function(){this._removeRepresentation(t),t._dcxComponent?this._library._dcxBranch.removeComponent(t._dcxComponent):this._library._dcxBranch.removeChild(t._dcxNode),this._clearRenditionCache(!1,!0),t._markDeletedLocally(!0)},this)},r.prototype.removeAllRepresentations=function(){if(l.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this._library.id);return this._wrapOperation(function(){for(;this._representations[0];)this.removeRepresentation(this._representations[0])},this)},r.prototype.getPrimaryRepresentation=function(){var t;return this._representations.forEach(function(e){t||"primary"!==e.relationship||(t=e)}),t},r.prototype._getRenditionCandidate=function(t){var e,n,r,i,o,a,s,u,c=0;for(n=0;n<this._representations.length&&(r=this._representations[n],i=Math.max(r.width||0,r.height||0),o=r.isFullSize?Number.POSITIVE_INFINITY:i,a="primary"===r.relationship,s="rendition"===r.relationship,u=!e||a&&"primary"!==e.relationship||s&&"primary"!==e.relationship&&"rendition"!==e.relationship||s&&"rendition"===e.relationship&&o>c,u&&h.canComputeRendition(r)&&(e=r,c=o),!s||"image/png"!==r.type||!t||i!==t);n++);return e},r.prototype.getThumbnailURL=function(t,e){var n=this;l.checkDeletedState(this,e)||this._library._waitForCommit(function(){if(!l.checkDeletedState(n,e)){var r=n._getRenditionCandidate(t);if(r){return void n._library._collection._syncManager.getSharedCloudRenditionUrl(r,t,e)}e(new u(u.THUMBNAIL_NOT_AVAILABLE,"no representation that can be converted into a thumbnail",n._library.id))}})},r.prototype.getThumbnailPath=function(t,e){var n=this;return i.hasFileSystem()?void(l.checkDeletedState(this,e)||this._library._waitForCommit(function(){if(!l.checkDeletedState(n,e)){if(o.SHARED_LOCAL_STORAGE)return void i.storageInterface.getRenditionPath(n,t,e);var r=function(t,r){n._lock.release(),e(t,r)};n._lock.obtain(function(){if(!l.checkDeletedState(n,r)){var e=this._lookupRenditionPath(t||"full");if(e)return void r(null,e);var o=this._getRenditionCandidate(t);if(o){if("rendition"===o.relationship&&"image/png"===o.type&&t&&Math.max(o.width||0,o.height||0)===t)return void o.getContentPath(r);return void this._library._collection._syncManager.getSharedCloudRendition(o,t,function(e,o){return l.checkDeletedState(n,r)?void 0:e?void r(new u(u.THUMBNAIL_NOT_AVAILABLE,"error generating thumbnail from shared cloud",n._library.id,e)):void n._getNewRenditionPath(void 0,function(e,a,s){if(!l.checkDeletedState(n,r)){if(e)return void r(d.getCommitError(e,n._library.id,"unable to create thumbnail cache directory"));n._library._pendingRenditionCacheItems[s]=!0,i.fs.rename(o,a,function(e){if(!l.checkDeletedState(n,r)){if(e)return void r(d.getCommitError(e,n._library.id,"unable to write thumbnail to cache"));n._setRenditionCache(t||"full",s,!0),r(null,a)}})}})})}r(new u(u.THUMBNAIL_NOT_AVAILABLE,"no representation that can be converted into a thumbnail",n._library.id))}},n)}})):void e(new u(u.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this._library.id))},r.prototype.setThumbnailCache=function(t,e,n){if("string"!=typeof e)return void n(new u(u.INVALID_PARAMETER,"path must be a string",this._library.id));if(!i.hasFileSystem())return void n(new u(u.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this._library.id));if(!l.checkDeletedState(this,n)){if(o.SHARED_LOCAL_STORAGE)return void i.storageInterface.setRenditionCache(this,t,e,n);var r=this,a=function(t,e){r._lock.release(),n(t,e)};this._lock.obtain(function(){l.checkDeletedState(r,a)||this._getNewRenditionPath(f.getFileExtension(e),function(n,i,o){if(!l.checkDeletedState(r,a)){if(n)return void a(d.getCommitError(n,r._library.id,"unable to create thumbnail cache directory"));r._library._pendingRenditionCacheItems[o]=!0,f.copyFile(e,i,function(e){if(!l.checkDeletedState(r,a)){if(e)return void a(d.getCommitError(e,r._library.id,"unable to write thumbnail to cache"));r._setRenditionCache(t||"full",o,!1),a(null,i)}})}})},this)}},r.prototype.getReference=function(){return"cloud-asset://"+this._library._collection._syncManager.getElementRefDomain()+this._library._collection._syncManager.getElementRefPath()+"/"+this._library.id+";node="+this.id},r.prototype.getRepresentationById=function(t){var e;return this.representations.forEach(function(n){n.id===t&&(e=n)}),e},r}),a("AdobeLibraryFolder",["require","exports","module","./components/dcx-js/src/AdobeDCXError","./AdobeLibraryElement","./AdobeLibraryConfig","./AdobeLibraryAnalytics","./AdobeLibraryError","./AdobeLibraryServices","./utils/AdobeLibraryAsyncJoin","./utils/AdobeLibraryLock","./utils/AdobeLibraryRenditionUtils","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryErrorUtils","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryMimeTypeUtils","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(t,e){this._collection=t,this._dcxComposite=e,this._dcxBranch=e.current,this._listenerManager=new m(["change"]),this._writable=!0,this._filterCache={},this._transactionCount=0,this._commitInProgress=!1,this._pendingCommit=!1,this._onCommitCallbacks=[],this._dcxLock=new f,this._renditionCacheLock=new f,this._pendingRenditionCacheItems={},this._networkLock=new f,this._syncState=void 0,this._deletedLocally=!1,this._deletedFromServer=!1,this._waitForSyncToFinishCallbacks=[],this._errors=[],this._pushFailedDueToQuota=!1,this._numUpdateConflicts=0,this._dcxBranch.getChildrenOf().forEach(function(t){t.name===a.ELEMENTS_NAME&&(this._dcxElementsNode=t)},this),this._dcxElementsNode||(this._dcxElementsNode=this._dcxBranch.addChild(a.ELEMENTS_NAME)),this._dcxCompositeRenditionMap=d.getCompositeRenditionMap(this._dcxBranch),this._elements=[],this._dcxBranch.getChildrenOf(this._dcxElementsNode).forEach(function(t){var e=new o(this,t);this._addElementToFilter(e),this._elements.push(e)},this),c.hasFileSystem()||(this._dcxBaseBranch=this._dcxBranch.copy())}var i=t("./components/dcx-js/src/AdobeDCXError"),o=t("./AdobeLibraryElement"),a=t("./AdobeLibraryConfig"),s=t("./AdobeLibraryAnalytics"),u=t("./AdobeLibraryError"),c=t("./AdobeLibraryServices"),l=t("./utils/AdobeLibraryAsyncJoin"),f=t("./utils/AdobeLibraryLock"),h=t("./utils/AdobeLibraryRenditionUtils"),d=t("./utils/AdobeLibraryManifestUtils"),p=t("./utils/AdobeLibraryErrorUtils"),_=t("./utils/AdobeLibraryFileUtils"),v=t("./utils/AdobeLibraryMimeTypeUtils"),m=t("./utils/AdobeLibraryListenerManager");return r.prototype._markDeletedLocally=function(t){this._deletedLocally=t,this._elements.forEach(function(e){e._markDeletedLocally(t)}),t&&this._listenerManager.removeAll()},r.prototype._removeAllListeners=function(){this._listenerManager.removeAll(),this._elements.forEach(function(t){t._removeAllListeners()})},r.prototype._toJSON=function(){var t={id:this.id,name:this.name,elements:[],renditionCache:{}};return this._elements.forEach(function(e){t.elements.push(e._toJSON()),t.renditionCache[e.id]=JSON.parse(JSON.stringify(e._renditionCache))}),t},r.prototype._getRenditionCache=function(){var t={};return this._elements.forEach(function(e){t[e.id]=JSON.parse(JSON.stringify(e._renditionCache))}),t},r.prototype._setRenditionCache=function(t){this._elements.forEach(function(e){t[e.id]&&(e._renditionCache=t[e.id])})},r.prototype._loadRenditionCache=function(t){var e=this;h.readRenditionCacheData(this,function(n,r){!n&&r&&e._setRenditionCache(r.renditions),t(null)})},r.prototype._saveRenditionCache=function(t){var e=this;if(!c.hasFileSystem()||a.SHARED_LOCAL_STORAGE)return void(t&&t(null));var n=function(n){e._renditionCacheLock.release(),t&&t(n)};this._renditionCacheLock.obtain(function(){var t={};t.renditions=this._getRenditionCache(),h.writeRenditionCacheData(this,t,n)},this)},r.prototype._doCommit=function(t){function e(){if(t&&!a.SHARED_LOCAL_STORAGE){if(i._deletedLocally)return;i._collection._clearSyncErrors(),i._push(),i._collection._resetPollBackoff()}}function n(){var t=i._onCommitCallbacks;i._onCommitCallbacks=[],t.forEach(function(t){i._waitForCommit(t)}),e()}function r(t,e){t&&(t=p.getCommitError(t,i.id,e)),i._collection._reportCommitError(t)}var i=this;return c.hasFileSystem()?this._commitInProgress?void(this._pendingCommit=!0):(this._commitInProgress=!0,void c.storageInterface.commitManifest(this,function(e){r(e,"Failed to write composite to disk"),i._saveRenditionCache(function(e){r(e,"Failed to write rendition cache to disk"),i._commitInProgress=!1,i._pendingCommit?(i._pendingCommit=!1,0===i._transactionCount&&i._doCommit(t)):n()})})):void n()},r.prototype._waitForCommit=function(t){this._commitInProgress||this._transactionCount>0?this._onCommitCallbacks.push(t):t()},r.prototype._notifyChange=function(){this._listenerManager.notify("change"),this._collection._notifyChange()},r.prototype._commit=function(t,e){0===this._transactionCount&&(e||(this._updateModifiedTime(),this._notifyChange()),this._doCommit(!t))},r.prototype._wrapOperation=function(t,e){this._beginOperation();var n;try{n=t.call(e)}catch(t){throw this._transactionCount--,t}return this._endOperation(),n},r.prototype._beginOperation=function(){this._transactionCount++},r.prototype._endOperation=function(){this._transactionCount--,this._commit()},r.prototype._updateModifiedTime=function(){var t=(new Date).valueOf();this._dcxBranch.rootNode.setValue(a.MODIFIED_KEY,t)},r.prototype._updateCreatedTime=function(){var t=(new Date).valueOf();this._dcxBranch.rootNode.setValue(a.CREATED_KEY,t),this._dcxBranch.rootNode.setValue(a.MODIFIED_KEY,t)},r.prototype._checkRenditionType=function(t,e){if(!t||-1===a.VALID_LIBRARY_RENDITION_TYPES.indexOf(t)){if(e)return e(new u(u.INVALID_PARAMETER,"composite rendition type not supported: "+t)),!1;throw new u(u.INVALID_PARAMETER,"composite rendition type not supported: "+t)}return!0},r.prototype._setRenditionFromPath=function(t,e,n,r){if(!d.checkDeletedState(this,r)){var i=this._dcxCompositeRenditionMap[t],o=c.fs,s=this,l=e&&c.getFileNameFromPath(e),f=_.getFileExtension(l),h=c.uuid()+"."+f;o.stat(e,function(o,f){return o?void r(o):f&&f.size>a.MAX_COMPONENT_SIZE?void r(new u(u.FILE_TOO_LARGE,"File exceeds maximum size for a thumbnail")):void c.storageInterface.notifyStartWrite(s,[],function(){s._dcxBranch.addComponent(l,n,"rendition",h,e,!0,void 0,s._dcxBranch.rootNode,void 0,function(e,n){return e?void r(e):void(d.checkDeletedState(s,r)||(n.setValue(a.MODIFIED_KEY,(new Date).valueOf()),n.setValue(a.RENDITION_TYPE_KEY,t),i&&s._dcxBranch.removeComponent(i),s._dcxCompositeRenditionMap=d.getCompositeRenditionMap(s._dcxBranch),s._commit(),r(null)))})})})}},r.prototype._setRendition=function(t,e,n,r,i){function o(e){return e?void i(p.getCommitError(e,l.id,"error writing library rendition")):void(d.checkDeletedState(l,i)||l._setRenditionFromPath(t,s,r,i))}function a(){"buffer"===n?u.writeFile(s,e,o):u.writeFile(s,e,n,o)}var s,u=c.fs,l=this,f=this.collection._getTempDir();_.ensurePathExists(f,function(t){if(t)return void i(p.getCommitError(t,l.id,"error creating temp directory"));if(!d.checkDeletedState(l,i)){var e=v.getExtensions(r)[0],n=c.uuid()+"."+e;s=f+c.getPathSeparator()+n,a()}})},r.prototype._setRenditionInBrowser=function(t,e,n,r){var i=this,o=this._dcxCompositeRenditionMap[t],s=this._collection._syncManager,u=c.uuid();s.uploadNewComponentForLibrary(e,u,n,"rendition",this,function(e,n){return e?void r(e):void(d.checkDeletedState(i,r)||(n.setValue(a.MODIFIED_KEY,(new Date).valueOf()),n.setValue(a.RENDITION_TYPE_KEY,t),o&&i._dcxBranch.removeComponent(o),i._dcxCompositeRenditionMap=d.getCompositeRenditionMap(i._dcxBranch),i._commit(),r(null)))})},r.prototype._getFilterKey=function(t){return t&&-1!==a.ELEMENT_TYPE_FILTERS.indexOf(t)?t:"*"},r.prototype._removeElementFromFilter=function(t){var e=this._getFilterKey(t.type);if(this._filterCache[e]){var n=this._filterCache[e].indexOf(t);-1!==n&&this._filterCache[e].splice(n,1)}},r.prototype._addElementToFilter=function(t){var e=this._getFilterKey(t.type);this._filterCache[e]=this._filterCache[e]||[],this._filterCache[e].push(t)},r.prototype._doCreateElement=function(t,e){var n=this._dcxBranch.addChild(t,void 0,void 0,this._dcxElementsNode);n.path=n.id,n.type=e;var r=new o(this,n);return r._updateCreatedTime(),this._elements.push(r),this._addElementToFilter(r),r},r.prototype._doRemoveElement=function(t,e){var n=this._elements.indexOf(t);-1!==n&&this._elements.splice(n,1),this._removeElementFromFilter(t),e&&this._dcxBranch.removeChild(t._dcxNode),t._markDeletedLocally(!0)},r.prototype._doCopyDCXElement=function(t,e,n,r,i){var a=this;e._beginOperation(),c.storageInterface.notifyStartWrite(e,[this],function(){e._dcxBranch.copyChild(t._dcxNode,e._dcxElementsNode,void 0,r,r,function(r,s){if(!d.checkDeletedState(a,i)){if(r)return e._endOperation(),void i(r);var u=new o(e,s);e._addElementToFilter(u),e._elements.push(u);var l=function(){d.checkDeletedState(a,i)||(e._endOperation(),n&&a._wrapOperation(function(){a._doRemoveElement(t,!0)}),i(null,u))};c.hasFileSystem()?h.copyRenditionCache(u,t,t._renditionCache,l):l()}})})},r.prototype._doCopyElement=function(t,e,n,r){if(t._library!==this||-1===this._elements.indexOf(t))return void r(new u(u.INVALID_PARAMETER,"element doesn't exist in library",this.id));if(e._elements.length>=a.MAX_ELEMENTS)return void r(new u(u.EXCEEDS_MAX_LIBRARY_SIZE,"Library cannot have more than "+a.MAX_ELEMENTS+" elements",this.id));var i=t.id;e._elements.every(function(t){return t.id!==i})||(i=c.uuid()),this._doCopyDCXElement(t,e,n,i,r)},r.prototype.jasmineToString=function(){return this.toString()},r.prototype._setSyncState=function(t){this._syncState!==t&&(this._syncState=t,this._collection._updateSyncState(),this._checkSyncFinishedAndNotify())},r.prototype._isSyncing=function(){return void 0!==this._syncState},r.prototype._checkSyncFinishedAndNotify=function(){if(!this._isSyncing()){var t=this._waitForSyncToFinishCallbacks;this._waitForSyncToFinishCallbacks=[],t.forEach(function(t){t()})}},r.prototype._waitForSyncToFinish=function(t){this._waitForSyncToFinishCallbacks.push(t),this._checkSyncFinishedAndNotify()},r.prototype._getClientData=function(){var t={};if(this._dcxComposite.clientDataString)try{t=JSON.parse(this._dcxComposite.clientDataString)}catch(t){}return t},r.prototype._getClientDataValue=function(t){return this._getClientData()[t]},r.prototype._setClientDataValue=function(t,e){var n=this._getClientData();n[t]=e,this._dcxComposite.clientDataString=JSON.stringify(n)},r.prototype._setCollaboration=function(t){var e=t&&t.collaboration&&t.collaboration.toLowerCase(),n=t&&t.collaboration_role&&t.collaboration_role.toLowerCase(),r=this._getClientDataValue(a.DATA_COLLABORATION_ROLE);if(this.collaboration!==e||r!==n){var i=d.collaborationStateToDCX(e);this._dcxComposite.collaborationType=i,this._setClientDataValue(a.DATA_COLLABORATION_ROLE,n),this._commit(!0,!0),this._notifyChange()}},r.prototype._isDeletedError=function(t){var e=t&&(t.code===i.NO_COMPOSITE||t.code===i.DELETED_COMPOSITE),n=t&&t.code===i.UNEXPECTED_RESPONSE&&t.response&&401===t.response.statusCode;return e||this.collection.isPublic&&n},r.prototype._isReadOnlyError=function(t){if("incoming"!==this.collaboration)return!1;var e=!1;return!t||t.code!==i.COMPONENT_UPLOAD_ERROR&&t.code!==i.UNEXPECTED_RESPONSE||(t.code===i.UNEXPECTED_RESPONSE&&t.response&&403===t.response.statusCode&&(e=!0),t.code===i.COMPONENT_UPLOAD_ERROR&&Array.isArray(t.failedComponents)&&t.failedComponents.length>0&&(e=!0,t.failedComponents.forEach(function(t){t.error&&t.error.code===i.UNEXPECTED_RESPONSE&&t.error.response&&403===t.error.response.statusCode||(e=!1)}))),e},r.prototype._mergeAndSwitchToBranch=function(t,e,n){function r(e,r){if(!d.checkDeletedState(i,n)){if(e)return void n(p.getCommitError(e,i.id));c.log("Starting merge "+(u?"(local)":"(remote)")),r.name!==i.name&&(t.name=i.name);var _=t.rootNode.getValue(a.MODIFIED_KEY),v=Math.max(_||0,i.modified||0);r!==i._dcxBranch&&v&&_!==v&&t.rootNode.setValue(a.MODIFIED_KEY,v);var m=d.getCompositeRenditionMap(t),y=d.getCompositeRenditionMap(r);Object.keys(i._dcxCompositeRenditionMap).forEach(function(e){var n=i._dcxCompositeRenditionMap[e],r=y[e],o=m[e];if(!r||n.id!==r.id)if(o){var s=n.getValue(a.MODIFIED_KEY)||0,u=o.getValue(a.MODIFIED_KEY)||0;s>u&&(t.removeComponent(o),t.copyComponent(n,t.rootNode))}else t.copyComponent(n,t.rootNode)}),Object.keys(y).forEach(function(e){var n=i._dcxCompositeRenditionMap[e],r=y[e],o=m[e];!n&&o&&o.id===r.id&&t.removeComponent(o)});var g;t.getChildrenOf().forEach(function(t){t.name===a.ELEMENTS_NAME&&(g=t)}),g||(g=t.addChild(a.ELEMENTS_NAME));var b={},A=[],w=[],E=new l;i._elements.forEach(function(e){var n=e.id,l=e._dcxNode,f=e.modified,d=t.getChildWithId(n),p=d&&d.getValue(a.MODIFIED_KEY),_=r&&r.getChildWithId(n),v=_&&_.getValue(a.MODIFIED_KEY);if(f&&p&&!v&&(v=0),i._dcxBranch=t,!v&&!p||v&&!p&&f!==v){c.log("1: created locally");var m=t.copyChild(l,g,void 0,void 0,void 0);e._setDCXNode(m,!0)}else if(v&&!p&&f===v)c.log("2: deleted on server"),w.push(e);else if(v===f&&v===p)c.log("3: no changes"),e._setDCXNode(d,!0,!0);else if(v===f&&v!==p)c.log("4: updated on server"),e._setDCXNode(d,u),A.push(e);else if(v!==f&&v===p){c.log("5: updated locally");var y=t.replaceChild(l,void 0,void 0);e._setDCXNode(y,!0)}else if(v!==f&&v!==p){c.log("6: updated locally and on server (conflict)");var C=e._renditionCache;e._setDCXNode(d),A.push(e);var S=c.uuid(),k=t.copyChild(l,g,void 0,S,S),L=new o(i,k);i._addElementToFilter(L),i._elements.push(L),b[L.id]=!0,c.hasFileSystem()&&E.addOperation(h.copyRenditionCache,[L,e,C]),s.reportCollisionElement(e)}else c.log("ERROR: unexpected merge case: base="+v+", current="+f+", pulled="+p);i._dcxBranch=i._dcxComposite.current,b[n]=!0}),w.forEach(function(t){i._doRemoveElement(t,!1)}),i._dcxBranch=t,i._dcxElementsNode=g,i._dcxCompositeRenditionMap=d.getCompositeRenditionMap(t);i._dcxBranch.getChildrenOf(i._dcxElementsNode).forEach(function(e){if(!b[e.id]){var n=e.getValue(a.MODIFIED_KEY),s=r&&r.getChildWithId(e.id),u=s&&s.getValue(a.MODIFIED_KEY);if(u&&n&&u===n)c.log("7: deleted locally"),t.removeChild(e);else{c.log("8: created on server");var l=new o(i,e);i._addElementToFilter(l),i._elements.push(l)}}}),i._transactionCount++,E.run(function(){d.checkDeletedState(i,n)||(i._transactionCount--,c.storageInterface.resolvePullWithBranch(i,t,f,u,function(e){if(!d.checkDeletedState(i,n)){if(e)return void n(p.getCommitError(e,i.id));c.hasFileSystem()||(i._dcxBaseBranch=t.copy()),a.SHARED_LOCAL_STORAGE||u||h.prefetchRenditions(i),A.forEach(function(t){t._listenerManager.notify("change")}),i._notifyChange(),n(null)}}))})}}var i=this,u=void 0!==e,f=t.localData;this._waitForCommit(function(){d.checkDeletedState(i,n)||(e?r(null,e):"unmodified"===i._dcxBranch.compositeState?r(null,i._dcxBranch):i._loadBaseBranch(r))})},r.prototype._pull=function(t){var e=this;if(!this._dcxComposite.href||!this._dcxBranch.isBound)return void t(null,!1);if(this._deletedFromServer)return void t(null,!1);var n=function(n,r){d.checkDeletedState(e,t)||(n&&e._collection._reportSyncError(n),e._setSyncState(),e._networkLock.release(),t(n,r))};this._networkLock.obtain(function(r){return r?void t(null):void(d.checkDeletedState(e,t)||(this._setSyncState("downloading"),this._collection._syncManager.pullComposite(this._dcxComposite,this._collection,function(r,i){return d.checkDeletedState(e,t)?void 0:e._isDeletedError(r)?void(c.hasFileSystem()&&"modified"===e._dcxBranch.compositeState&&"incoming"!==e.collaboration?(e._doRebindToServer(t),e._networkLock.release()):(e._deletedFromServer=!0,e._notifyChange(),n(null,!0))):r?void n(p.getSyncError(r,e.id)):i?void e._mergeAndSwitchToBranch(i,void 0,function(r){d.checkDeletedState(e,t)||n(r,!0)}):void n(null,!1)})))},this)},r.prototype._pushWithParameters=function(t,e){var n=this,r=function(t,n){e&&e(null,n)};if(!a.SYNCING_ENABLED)return void r(0,!1);if(this._collection._retryTimeoutId)return void r(0,!1);if(this._dcxBranch.isBound&&"modified"!==this._dcxBranch.compositeState)return void r(0,!1);if(this._deletedFromServer)return void r(0,!1);if(!this.isWritable)return void r(0,!1);if(this._pushPending)return void r(0,!1);var o=function(t,e){d.checkDeletedState(n,r)||(n._pushFailedDueToQuota=!1,t&&(n._collection._reportSyncError(t),t.code===u.EXCEEDS_QUOTA&&(n._pushFailedDueToQuota=!0)),n._setSyncState(),n._networkLock.release(),r(0,e))};this._pushPending=!0,this._networkLock.obtain(function(e){return e?void r(0,!1):void this._waitForCommit(function(){if(!d.checkDeletedState(n,r)){n._pushPending=!1;var e;c.hasFileSystem()||(e=n._dcxBranch.copy()),n._setSyncState("uploading"),n._collection._syncManager.pushComposite(n._dcxComposite,n._collection,t,function(t){if(!d.checkDeletedState(n,r)){if(n._isDeletedError(t))return void(c.hasFileSystem()&&"modified"===n._dcxBranch.compositeState&&"incoming"!==n.collaboration?(n._doRebindToServer(r),n._networkLock.release()):(n._deletedFromServer=!0,n._notifyChange(),o(null,!0)));if(n._isReadOnlyError(t))return c.log("Push failed due to read only. Reverting: "+n.id),void n._revert(function(t){t?(c.log("Error Reverting: "+n.id),o(t)):(n._setClientDataValue(a.DATA_COLLABORATION_ROLE,"viewer"),n._commit(!0,!0),n._waitForCommit(function(){n._notifyChange(),o(null,!1)}))});if(t&&t.code===u.TRANSFER_ABORTED)return void o(null,!0);if(t&&t.code===i.UPDATE_CONFLICT){if(c.log("Push failed due to conflict: "+n.id),++n._numUpdateConflicts<=a.MAX_UPDATE_CONFLICTS)return n._sync(!1,r),void n._networkLock.release();s.reportUnexpectedState(n,"updateConflict"),c.log("Reached maximum number of update-conflict retries: "+n.id)}return n._numUpdateConflicts=0,t&&t.code===i.COMPONENT_UPLOAD_ERROR&&(c.log("Push failed due to component upload failure: "+n.id),d.removeMissingLocalComponents(n,t.failedComponents)),t?void o(p.getSyncError(t,n.id)):void c.storageInterface.acceptPush(n,function(t){if(!d.checkDeletedState(n,r)){if(t)return void o(p.getCommitError(t,n.id),!0);c.hasFileSystem()||(n._dcxBaseBranch=e),o(null,!0)}})}})}})},this)},r.prototype._loadBaseBranch=function(t){var e=this;c.hasFileSystem()?e._dcxComposite.loadBaseBranch(function(n,r){e._waitForCommit(function(){t(n,r)})}):t(null,e._dcxBaseBranch)},r.prototype._revert=function(t){var e=this,n=e.collaboration,r=this._getClientDataValue(a.DATA_COLLABORATION_ROLE);e._loadBaseBranch(function(i,o){var s=o.copy();o.hasLocalStorage&&(s._localStorage=o._localStorage),e._mergeAndSwitchToBranch(s,e._dcxBranch,function(i){if(!i){var o=d.collaborationStateToDCX(n);e._dcxComposite.collaborationType=o,e._setClientDataValue(a.DATA_COLLABORATION_ROLE,r)}t(i)})})},r.prototype._push=function(t){this._pushWithParameters(!1,t)},r.prototype._abortPushOrPull=function(){this._networkLock.abortPendingOperations(new u(u.TRANSFER_ABORTED)),this._collection._syncManager.abortPushOrPull(this.id)},r.prototype._deleteFromServer=function(t,e){var n=this;if(!this._dcxComposite.href||!this._dcxBranch.isBound)return void e(null);if(this._deletedFromServer)return void e(null);this._deletingFromServerInProgress||this._abortPushOrPull(),this._deletingFromServerInProgress=!0;var r=function(t){n._deletingFromServerInProgress=!1,n._networkLock.release(),e(t)};this._networkLock.obtain(function(o){return o?void e(null):this._deletedFromDisk?void r(null):(this._setSyncState("uploading"),this._dcxBranch.compositeState="pendingDelete",this._commit(!0,!0),void this._waitForCommit(function(){return n._deletedFromDisk?void r(null):void n._collection._syncManager.pushDeletedComposite(n._dcxComposite,n._collection,n.collaboration,t,function(e){e?n._isDeletedError(e)?e=null:(t||e.code!==i.UPDATE_CONFLICT)&&(e=p.getSyncError(e,n.id),n._collection._reportSyncError(e)):n._deletedFromServer=!0,n._setSyncState(),r(e)})}))},this)},r.prototype._doRebindToServer=function(t){var e=this;this._deletedFromServer=!1;var n="incoming"===this.collaboration?"resetIdentity":"resetBinding",r=this.id;this._dcxComposite[n](function(n){if(!d.checkDeletedState(e,t)){if(n)return void t(n);e._transactionCount++,e.id!==r&&(e._collection._libraryIdMap[e.id]=e,delete e._collection._libraryIdMap[r]),_.moveLibrary(e,r,function(n){if(!d.checkDeletedState(e,t)){if(e._transactionCount--,n)return void t(n);e._collection._syncManager.prepareCompositeForPush(e._dcxComposite),e._setCollaboration(),e._commit(!1,!0),e._pushWithParameters(!0,t)}})}})},r.prototype._sync=function(t,e){function n(t,n){e&&i._waitForSyncToFinish(function(){e(t,n)})}function r(t,e){return d.checkDeletedState(i,n)?void 0:t?void n(t,e):void i._push(function(t,r){d.checkDeletedState(i,n)||n(t,e||r)})}var i=this;return a.SHARED_LOCAL_STORAGE||!a.SYNCING_ENABLED?void n(null,!1):this._collection._retryTimeoutId?void n(null,!1):(this._collection._clearSyncErrors(this.id),void(t?r(null,!1):this._pull(r)))},r.prototype._getCompositeDir=function(){return this._collection._getCompositeDir(this.id)},r.prototype._getRenditionCacheDir=function(){return this._collection._getRenditionCacheDir(this.id)},Object.defineProperties(r.prototype,{id:{get:function(){return this._publicId||this._dcxComposite.id},set:function(t){throw new u(u.READ_ONLY,"Cannot change the id of an existing library",this.id)}},collection:{get:function(){return this._collection},set:function(t){throw new u(u.READ_ONLY,"collection is a read-only property",this.id)}},isWritable:{get:function(){var t=this._getClientDataValue(a.DATA_COLLABORATION_ROLE);return this._writable&&"viewer"!==t},set:function(t){throw new u(u.READ_ONLY,"isWritable is a read-only property",this.id)}},name:{get:function(){return this._dcxComposite.name||""},set:function(t){if(d.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);this._dcxComposite.name=t,this._commit()}},modified:{get:function(){return this._dcxBranch.rootNode.getValue(a.MODIFIED_KEY)},set:function(t){throw new u(u.READ_ONLY,"Cannot change the modified timestamp of a library directly",this.id)}},created:{get:function(){return this._dcxBranch.rootNode.getValue(a.CREATED_KEY)},set:function(t){throw new u(u.READ_ONLY,"Cannot change the created timestamp of a library directly",this.id)}},elements:{get:function(){return this._elements},set:function(){throw new u(u.READ_ONLY,"Cannot modify elements list directly",this.id)}},isDeletedFromServer:{get:function(){return this._deletedFromServer},set:function(){throw new u(u.READ_ONLY,"isDeletedFromServer is a read-only property",this.id)}},isDeletedLocally:{get:function(){return this._deletedLocally},set:function(t){throw new u(u.READ_ONLY,"isDeletedLocally is a read-only property",this.id)}},isQuotaExceeded:{get:function(){return this._pushFailedDueToQuota},set:function(){throw new u(u.READ_ONLY,"isQuotaExceeded is a read-only property",this.id)}},collaboration:{get:function(){var t=this._dcxComposite.collaborationType;return d.collaborationStateFromDCX(t)},set:function(){throw new u(u.READ_ONLY,"collaboration is a read-only property",this.id)}},syncState:{get:function(){return this._syncState},set:function(){throw new u(u.READ_ONLY,"syncState is a read-only property")}},syncProgress:{get:function(){var t=this._collection._syncProgressMap[this.id];return t&&t.progress},set:function(){throw new u(u.READ_ONLY,"syncProgress is a read-only property")}}}),r.prototype.toString=function(){return JSON.stringify(this._toJSON())},r.prototype.addChangeListener=function(t){d.checkDeletedState(this),this._listenerManager.add("change",t)},r.prototype.removeChangeListener=function(t){this._listenerManager.remove("change",t)},r.prototype.createElement=function(t,e){if(d.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);if(this._elements.length>=a.MAX_ELEMENTS)throw new u(u.EXCEEDS_MAX_LIBRARY_SIZE,"Library cannot have more than "+a.MAX_ELEMENTS+" elements",this.id);return this._wrapOperation(function(){var n=this._doCreateElement(t,e);return s.reportCreateElement(n),n.beginOperation(),n},this)},r.prototype.removeElement=function(t){if(d.checkDeletedState(this),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);return this._wrapOperation(function(){for(;t._transactionCount>0;)t.endOperation();this._doRemoveElement(t,!0),s.reportDeleteElement(t)},this)},r.prototype.copyElement=function(t,e,n){return d.checkDeletedState(this,n)?void 0:t?e?e.isWritable?this._doCopyElement(t,e,!1,function(e,r){return e?void n(e):(s.reportCopyElement(r,t),void n(null,r))}):void n(new u(u.NOT_ALLOWED,"you do not have write access to this library",e.id)):void n(new u(u.INVALID_PARAMETER,"No destination library specified",this.id)):void n(new u(u.INVALID_PARAMETER,"No element specified",this.id))},r.prototype.moveElement=function(t,e,n){return d.checkDeletedState(this,n)?void 0:this.isWritable?t?e?this===e?void n(new u(u.INVALID_PARAMETER,"Move must have a different destination library",this.id)):this._doCopyElement(t,e,!0,function(e,r){return e?void n(e):(s.reportMoveElement(r,t),void n(null,r))}):void n(new u(u.INVALID_PARAMETER,"No destination library specified",this.id)):void n(new u(u.INVALID_PARAMETER,"No element specified",this.id)):void n(new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id))},r.prototype.getRenditionPath=function(t,e){if(!c.hasFileSystem())return void e(new u(u.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this.id));if(!d.checkDeletedState(this,e)&&this._checkRenditionType(t,e)){var n=this._dcxCompositeRenditionMap[t];if(!n)return e(null);var r=this._dcxBranch.assetOfComponent(n);if(r)return e(null,r);var i=this;this._networkLock.obtain(function(t){return t?void e(t):d.checkDeletedState(i,e)?void i._networkLock.release():(i._setSyncState("downloading"),void i._collection._syncManager.downloadComponent(i._dcxBranch,n,function(t){return i._networkLock.release(),i._setSyncState(),t?void e(p.getSyncError(t,i.id)):void(d.checkDeletedState(i,e)||(i._commit(!0,!0),e(null,i._dcxBranch.assetOfComponent(n))))}))})}},r.prototype.getRenditionURL=function(t){d.checkDeletedState(this),this._checkRenditionType(t);var e=this._dcxCompositeRenditionMap[t];if(e){return this._collection._syncManager.getSharedCloudContentURL(e)}},r.prototype.getAuthenticatedRenditionURL=function(t,e){if(!d.checkDeletedState(this,e)&&this._checkRenditionType(t,e)){var n=this.getRenditionURL(t);if(!n)return e(null);this._collection._syncManager.appendAccessTokenToURL(n,e)}},r.prototype.setRendition=function(t,e,n,r,i){if(!d.checkDeletedState(this,i)&&this._checkRenditionType(t,i)){if(!e)return void i(new u(u.INVALID_PARAMETER,"content must exist",this.id));if(!this.isWritable)return void i(new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id));if(c.hasFileSystem()){if(!d.checkEncoding(n,["utf8","ascii","base64","buffer"],i))return;this._setRendition(t,e,n,r,i)}else{if(void 0!==n)return void i(new u(u.INVALID_PARAMETER,"Encoding parameter not supported in-browser"));this._setRenditionInBrowser(t,e,r,i)}}},r.prototype.setRenditionFromPath=function(t,e,n,r){return!d.checkDeletedState(this,r)&&this._checkRenditionType(t,r)?"string"!=typeof e?void r(new u(u.INVALID_PARAMETER,"path must be a string",this.id)):c.hasFileSystem()?this.isWritable?void this._setRenditionFromPath(t,e,n,r):void r(new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id)):void r(new u(u.REQUIRES_FILESYSTEM,"path-based APIs require a filesystem",this.id)):void 0},r.prototype.removeRendition=function(t){if(d.checkDeletedState(this),this._checkRenditionType(t),!this.isWritable)throw new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id);var e=this._dcxCompositeRenditionMap[t];return e?this._wrapOperation(function(){this._dcxBranch.removeComponent(e),this._dcxCompositeRenditionMap=d.getCompositeRenditionMap(this._dcxBranch),this._commit()},this):void 0},r.prototype.getFilteredElements=function(t){if(!t)throw new u(u.INVALID_PARAMETER,"must specify element type to filter",this.id);if("*"!==t&&-1===a.ELEMENT_TYPE_FILTERS.indexOf(t))throw new u(u.INVALID_PARAMETER,"must specify '*', or an element type in config.ELEMENT_TYPE_FILTERS",this.id);var e=this._getFilterKey(t);return this._filterCache[e]=this._filterCache[e]||[],this._filterCache[e]},r.prototype.sync=function(t){d.checkDeletedState(this,t)||this._sync(!1,t)},r.prototype.rebindToServer=function(t){return c.hasFileSystem()?d.checkDeletedState(this,t)?void 0:this.isWritable?this._deletedFromServer?void this._doRebindToServer(t):void t(null):void t(new u(u.NOT_ALLOWED,"you do not have write access to this library",this.id)):void t(new u(u.REQUIRES_FILESYSTEM,"rebindToServer requires a filesystem",this.id))},r.prototype.getElementById=function(t){var e;return this.elements.forEach(function(n){n.id===t&&(e=n)}),e},r}),a("AdobeLibrarySyncManager",["require","exports","module","./components/dcx-js/src/AdobeStorageSession","./components/dcx-js/src/AdobeDCXCompositeXfer","./components/dcx-js/src/AdobeDCXUtil","./components/dcx-js/src/AdobeDCXError","./AdobeLibraryConfig","./AdobeLibraryError","./AdobeLibraryServices","./utils/AdobeLibrarySyncUtils","./utils/AdobeLibraryErrorUtils","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryMimeTypeUtils"],function(t,e,n){"use strict";function r(t,e){this._collection=t,this._isPublic=e.IS_PUBLIC,this._storageHost=e.STORAGE_HOSTNAME,this._storageAssetsPath=this._isPublic?e.STORAGE_ASSETS_PATH:u.STORAGE_ASSETS_PATH,this._apiKey=u.STORAGE_API_KEY,this._syncGroup=this._isPublic?e.SYNC_GROUP:u.LIBRARY_SYNC_GROUP,this._XHR=e.XHR,this._requiresCommunitySession=e.REQUIRES_COMMUNITY_SESSION,this._getAccessToken=e.getAccessToken,this._httpServices=[],this._storageService=this._createStorageSession(),this._renditionStorageService=this._createStorageSession(),this._temporaryStorageServices={},this._lastSyncGroupState={},this._hasSetAuthToken=!1,this._authToken=void 0,this._inProgressSyncMap={},u.SHARED_LOCAL_STORAGE||this._isPublic||this._updateAuthToken()}var i=t("./components/dcx-js/src/AdobeStorageSession"),o=t("./components/dcx-js/src/AdobeDCXCompositeXfer"),a=t("./components/dcx-js/src/AdobeDCXUtil"),s=t("./components/dcx-js/src/AdobeDCXError"),u=t("./AdobeLibraryConfig"),c=t("./AdobeLibraryError"),l=t("./AdobeLibraryServices"),f=t("./utils/AdobeLibrarySyncUtils"),h=t("./utils/AdobeLibraryErrorUtils"),d=t("./utils/AdobeLibraryFileUtils"),p=t("./utils/AdobeLibraryManifestUtils"),_=t("./utils/AdobeLibraryMimeTypeUtils");return r.prototype._getCommonRequestHeaders=function(){var t={};return u.USER_AGENT_HEADER&&(t["User-Agent"]=u.USER_AGENT_HEADER),t},r.prototype._setAuthToken=function(t){this._hasSetAuthToken=!0,this._authToken=t,this._httpServices.forEach(function(e){t?(e.isActive=!0,e.setAuthToken(t)):e.isActive=!1})},r.prototype._updateAuthToken=function(t){var e=this;this._getAccessToken(this._authToken,function(n,r){!n&&r?e._setAuthToken(r):(n&&n.code===c.ACCESS_DENIED&&(e._collection._reportSyncError(n),e._collection._updateSyncState()),e._setAuthToken()),t&&t(null,r)})},r.prototype._getAuthToken=function(t){this._isPublic?t(null,void 0):this._hasSetAuthToken?t(null,this._authToken):this._updateAuthToken(t)},r.prototype._authHandler=function(){this._updateAuthToken()},r.prototype._createStorageSession=function(){var t;return this._isPublic?t=l.dcx.createHTTPService():(t=l.dcx.createHTTPService(this._authHandler.bind(this)),this._httpServices.push(t)),t.setApiKey(this._apiKey),t.setTimeout(u.NETWORK_TIMEOUT),t.setAdditionalNodeOptions(l.getNodeTunnelOptions(this.getStorageHost())),t.setAdditionalHeaders(this._getCommonRequestHeaders()),this._XHR&&t._forceXhr(this._XHR),this._requiresCommunitySession?l.dcx.createCommunitySession(t,this.getStorageHost()):l.dcx.createStorageSession(t,this.getStorageHost())},r.prototype._createTemporaryStorageSession=function(t,e){var n;return e&&this._getAccessToken?(n=l.dcx.createHTTPService(this._authHandler.bind(this)),n.setApiKey(this._apiKey),n.setAdditionalHeaders(this._getCommonRequestHeaders()),n.setAuthToken(this._authToken),this._httpServices.push(n)):n=l.dcx.createHTTPService(),n.setTimeout(u.NETWORK_TIMEOUT),n.setAdditionalNodeOptions(l.getNodeTunnelOptions(t)),l.dcx.createStorageSession(n,t)},r.prototype._getTemporaryStorageSession=function(t){var e=a.parseURI(t),n=e.scheme+"://"+e.authority,r=f.isAdobeDomain(e.authority);return this._temporaryStorageServices[n]||(this._temporaryStorageServices[n]=this._createTemporaryStorageSession(n,r)),this._temporaryStorageServices[n]},r.prototype.getServerComposites=function(t){var e=this,n=this._lastSyncGroupState.etag;this._storageService.getCollection(this.getSyncGroupPath(),n,function(n,r,i,o){if(n)return void(n.response&&404===n.response.statusCode?t(null,[]):t(n));if(!r){var a=Math.max(u.DEFAULT_MAX_SYNC_INTERVAL,1e3*f.getRetryAfterHeader(o));return u.MAX_SYNC_INTERVAL=a,void t(null,[])}u.MAX_SYNC_INTERVAL=u.DEFAULT_MAX_SYNC_INTERVAL;var s=e._lastSyncGroupState.compositeEtags||{},c={},l=[],h={};(r.children||[]).forEach(function(t){t&&p.validateLibraryId(t.name,!1)&&(t.isUnmodified=t.etag&&s[t.name]===t.etag,l.push(t),h[t.name]=t,c[t.name]=t.etag)}),e._lastSyncGroupState={etag:i,compositeEtags:c},t(null,l,h)})},r.prototype.clearSyncGroupCache=function(){this._lastSyncGroupState={}},r.prototype.doHeadRequest=function(t,e){var n;try{n=this._storageService.getCompositeManifestHref(t)}catch(t){return void e(t)}this._storageService.headRequest(n,e)},r.prototype.hasCompositeChangedOnServer=function(t,e){this.doHeadRequest(t,function(n,r){if(n)return void e(!0);var i=r&&r.headers&&r.headers.etag,o=t.current&&t.current.manifestEtag;e(i!==o)})},r.prototype.downloadComponent=function(t,e,n){o.downloadComponents([e],t,this._storageService,n)},r.prototype.downloadRepresentation=function(t,e){var n=t._dcxComponent,r=t.element.library._dcxBranch;this.downloadComponent(r,n,e)},r.prototype.abortPushOrPull=function(t){this._inProgressSyncMap[t]&&(this._inProgressSyncMap[t].abort(new c(c.TRANSFER_ABORTED,"abort push or pull operation")),delete this._inProgressSyncMap[t])},r.prototype.pullComposite=function(t,e,n){var r=this,i=t.id;if(!i&&t.href){var a=t.href.split("/");i=a&&a[a.length-1]}var f="manifestOnly"===u.SYNC_POLICY||!l.hasFileSystem(),h=f?"pullCompositeManifestOnly":"pullComposite";l.log("Started pulling: "+i+(f?" (manifest only)":""));var d=(new Date).valueOf();e._updateProgress(i),this._inProgressSyncMap[i]=o[h](t,this._storageService,function(o,a){var u=(new Date).valueOf()-d;return l.log("Finished pulling: "+i+(o?" ["+o.code+"]":"")+" duration="+u),delete r._inProgressSyncMap[i],e._updateProgress(i),o&&o.code===s.COMPONENT_DOWNLOAD_ERROR?void r.doHeadRequest(t,function(t,e){if(!t&&e&&200===e.statusCode){var r=p.removeMissingComponents(o.pulledBranch,o.failedComponents);if(r)return void n(null,r)}n(o,a)}):o&&o.code===c.TRANSFER_ABORTED?void n(null,void 0):void n(o,a)}),this._inProgressSyncMap[i].onProgress=function(t,n){0!==n&&e._updateProgress(i,t,n)}},r.prototype.pushComposite=function(t,e,n,r){var i=this,a=t.id;l.log("Started pushing: "+a);var s=(new Date).valueOf();e._updateProgress(a),this._inProgressSyncMap[a]=o.pushComposite(t,n,this._storageService,function(t){var n=(new Date).valueOf()-s;l.log("Finished pushing: "+a+(t?" ["+t.code+"]":"")+" duration="+n),delete i._inProgressSyncMap[a],e._updateProgress(a),r(t)}),this._inProgressSyncMap[a].onProgress=function(t,n){0!==n&&e._updateProgress(a,t,n)}},r.prototype.pushDeletedComposite=function(t,e,n,r,i){var o=this;"incoming"===n?(l.log("Deleting incoming collaboration without pushing: "+t.id),this._storageService.deleteCompositeDirectory(t,i)):(l.log("Pushing deleted composite: "+t.id),this.pushComposite(t,e,r,function(n){if(n){if(n.code===s.UNEXPECTED_RESPONSE&&n.response&&404===n.response.statusCode)return void o._storageService.deleteCompositeDirectory(t,i);if(n.code===s.UPDATE_CONFLICT){var r=n;return void o.pullComposite(t,e,function(e){return e&&e.code===s.NO_COMPOSITE?void o._storageService.deleteCompositeDirectory(t,i):e&&e.code===s.DELETED_COMPOSITE?void i(null):e?void i(e):void i(r)})}}i(n)}))},r.prototype.getStorageHost=function(){return"https://"+this._storageHost},r.prototype.getSyncGroupPath=function(){var t=this.getStorageHost()+(this._storageAssetsPath||"");return this._syncGroup?a.appendPathElements(t,this._syncGroup):t},r.prototype.getCompositePath=function(t){return a.appendPathElements(this.getSyncGroupPath(),t)},r.prototype.getComponentPath=function(t,e){return a.appendPathElements(this.getSyncGroupPath(),t,e)},r.prototype.getElementRefDomain=function(){return this._requiresCommunitySession?u.CP_CLOUD_ID:this._storageHost},r.prototype.getElementRefPath=function(){return u.STORAGE_ASSETS_PATH+u.LIBRARY_SYNC_GROUP},r.prototype._getSharedCloudRenditionUrl=function(t,e,n,r){if(!t._dcxComponent)return void r("representation must be a component to generate a rendition");var i;if(this._requiresCommunitySession)try{i=this._storageService.getComponentRenditionHref(t._dcxComponent,t._dcxComponent.version,"image/png","width",e||"full")}catch(t){return void r(t)}else if(i=this.getComponentPath(t._element._library.id,t.id)+"/:rendition",i+=";size="+(e||"full"),void 0!==t._dcxComponent.version&&(i+=";version="+t._dcxComponent.version),n){var o=this._apiKey;return void this._getAuthToken(function(t,e){i+="?accept=image/png&api_key="+o+(e?"&user_token="+e:""),r(null,i)})}r(null,i)},r.prototype._getAssetAsType=function(t,e,n,r,o,a){var s=this;a=a||0;var c=function(){s._getAssetAsType(t,e,n,r,o,a)};if(a>0&&"uploading"===t.element.library.syncState)return void setTimeout(c,u.RENDITION_RETRY_INTERVAL);var d=n+l.getPathSeparator()+l.uuid()+".png",p=new i.FileContent(d);this._renditionStorageService.getAssetAsType(e,p,r,function(e){var n=e&&e.response&&e.response.headers,r=1e3*f.getRetryAfterHeader(n);if(u.RENDITION_RETRY_INTERVAL=Math.max(u.DEFAULT_RENDITION_RETRY_INTERVAL,r),u.RENDITION_404_BACKOFF=Math.max(u.DEFAULT_RENDITION_404_BACKOFF,r),404===h.getErrorStatusCode(e)){if(a<u.RENDITION_MAX_RETRIES)return l.log("404 fetching rendition: retrying"),a++,void setTimeout(c,u.RENDITION_RETRY_INTERVAL);l.log("404 fetching rendition: reached maximum retries"),l.log("Backing off rendition fetch of "+t.id+" for "+u.RENDITION_404_BACKOFF+"ms"),t._lastRendition404=(new Date).valueOf()}o(e,d)})},r.prototype.getSharedCloudRenditionUrl=function(t,e,n){var r=!u.SHARED_LOCAL_STORAGE;this._getSharedCloudRenditionUrl(t,e,r,n)},r.prototype.getSharedCloudRendition=function(t,e,n){var r=this;return t.element.library.isDeletedFromServer?(l.log("Error: Trying to fetch rendition from deleted library."),void n("Error: library deleted")):(new Date).valueOf()-(t._lastRendition404||0)<u.RENDITION_404_BACKOFF?void n("Error: got 404 on last rendition attempt - backing off"):void this._getSharedCloudRenditionUrl(t,e,!1,function(e,i){if(e)return void n(e);var o={Accept:"image/png"},a=t.element.library.collection._getTempDir();d.ensurePathExists(a,function(e){return e?void n(e):void r._getAssetAsType(t,i,a,o,n)})})},r.prototype.getSharedCloudContentURL=function(t){return this._storageService.getComponentHref(t,t.version)},r.prototype.appendAccessTokenToURL=function(t,e){if(!t)return void e(null,void 0);var n=this._apiKey;this._getAuthToken(function(r,i){t+="?api_key="+n+(i?"&user_token="+i:""),e(null,t)})},r.prototype.getSharedCloudContent=function(t,e,n){var r=this._storageService.getComponentHref(t._dcxComponent,t._dcxComponent.version),i={};this._storageService.getAssetAsType(r,e,i,function(t,e){return t?void n(t):void n(null,e)})},r.prototype.getAssetFromURL=function(t,e,n,r,o,a){var u=this;l.log("getAssetFromURL: "+t);var c=this._getTemporaryStorageSession(t),h=n+l.getPathSeparator()+l.uuid(),p=new i.FileContent(h);a=a||0,e=e||{},d.ensurePathExists(n,function(i){if(i)return void o(i);var d=c.getAssetAsType(t,p,e,function(i,c,p,_){if(delete d.progress,i&&i.code===s.UNEXPECTED_RESPONSE){var v=i.response&&i.response.statusCode;if(l.log("getAssetFromURL: Unexpected Response "+v+" from "+t),301===v||302===v||303===v||307===v){var m=f.getLocationHeader(i.response.headers);if(m&&5>a)return void u.getAssetFromURL(m,e,n,r,o,a+1)}}o(i,h,p,_)});if(r){var _,v=0;d.progress=function(t){v+=t,!_&&d.response&&d.response.headers&&(_=f.getContentLengthHeader(d.response.headers)),r(v,_||1)},r(0,1)}})},r.prototype.doHeadRequestOfURL=function(t,e){this._getTemporaryStorageSession(t).headRequest(t,function(n,r){var i=r&&r.statusCode;l.log("doHeadRequestOfURL: "+t+" -> "+i),e(n,r)})},r.prototype.prepareCompositeForPush=function(t){t.href=this.getCompositePath(t.id)},r.prototype.updateAccessToken=function(t){this._setAuthToken(t)},r.prototype.isLoggedIn=function(){return this._isPublic||this._httpServices[0].isActive},r.prototype.uploadNewComponentForRepresentation=function(t,e,n,r){var i=n._element._library._dcxComposite;o.uploadNewComponent(t,n.type,i,n.id,this._storageService,function(t,o){if(t)return void r(t);var a=e?e.lastIndexOf("."):-1,s=-1!==a&&e.substr(a+1).toLowerCase(),u=n.id+"."+s,c=i.current.addComponentWithUploadResults(e,n.relationship,u,n._element._dcxNode,o);r(null,c)})},r.prototype.uploadNewComponentForLibrary=function(t,e,n,r,i,a){var s=i._dcxComposite;o.uploadNewComponent(t,n,s,e,this._storageService,function(t,i){if(t)return void a(t);var o=_.getExtensions(n)[0],u=e+"."+o,c=s.current.addComponentWithUploadResults(u,r,u,s,i);a(null,c)})},r}),a("AdobeLibraryBookmark",["require","exports","module","./AdobeLibraryError"],function(t,e,n){"use strict";function r(t,e){this._id=t,this._url=e}var i=t("./AdobeLibraryError");return Object.defineProperties(r.prototype,{id:{get:function(){return this._id},set:function(t){throw new i(i.READ_ONLY,"Cannot change the id of an existing bookmark")}},url:{get:function(){return this._url},set:function(t){throw new i(i.READ_ONLY,"Cannot change the url of an existing bookmark")}}}),r}),a("AdobeLibraryBookmarkManager",["require","exports","module","./AdobeLibraryBookmark","./AdobeLibraryServices","./AdobeLibraryConfig","./utils/AdobeLibraryLock","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryErrorUtils"],function(t,e,n){"use strict";function r(t){this._collection=t,this._bookmarks=[],this._bookmarksEtag=void 0,this._bookmarksBase=void 0,this._syncModified=!1,this._lock=new l,this._service=t._syncManager._storageService._service,this._bookmarksURL=t._syncManager.getStorageHost()+c.BOOKMARKS_PATH}function i(t,e){var n;return t.some(function(t){return t.id===e?(n=t,!0):void 0}),n}function o(t){var e=[];return t.forEach(function(t){e.push({id:t.id,url:t.url})}),e}function a(t){var e=[];return t&&t.forEach(function(t){e.push(new s(t.id,t.url))}),e}var s=t("./AdobeLibraryBookmark"),u=t("./AdobeLibraryServices"),c=t("./AdobeLibraryConfig"),l=t("./utils/AdobeLibraryLock"),f=t("./utils/AdobeLibraryFileUtils"),h=t("./utils/AdobeLibraryErrorUtils");return r.prototype._getBookmarksDir=function(){return this._collection._getBaseDir()},r.prototype._saveBookmarks=function(t){if(u.hasFileSystem()){var e={bookmarks:o(this._bookmarks),etag:this._bookmarksEtag};this._bookmarksBase&&(e.bookmarks_base=this._bookmarksBase),f.writeJSONData(this._getBookmarksDir(),c.BOOKMARKS_FILENAME,e,function(e){e&&(e=h.getCommitError(e,null,"bookmarks could not be saved")),t(e)})}else t(null)},r.prototype._loadBookmarks=function(t){if(u.hasFileSystem()){var e=this,n=this._getBookmarksDir()+u.getPathSeparator()+c.BOOKMARKS_FILENAME;f.readJSONData(n,function(n,r){return n?(n=h.getCommitError(n,null,"bookmarks could not be loaded"),t(n)):(r&&(e._bookmarks=a(r.bookmarks),e._bookmarksEtag=r.etag,e._bookmarksBase=r.bookmarks_base&&a(r.bookmarks_base)),void t(null))})}else t(null)},r.prototype._pullBookmarks=function(t){function e(e,n){if(e)return t(e);if(200===n.statusCode)try{var i=JSON.parse(n.response);r._syncModified=!0,t(null,a(i.bookmarks),n.headers.etag)}catch(e){t("Cannot parse data: "+n.response)}else 304===n.statusCode||404===n.statusCode?t(null,void 0,n.headers.etag):t("Unexpected response getting bookmarks: "+n.statusCode)}u.log("Pulling bookmarks");var n={},r=this;this._bookmarksEtag&&(n["If-None-Match"]=this._bookmarksEtag),this._service.invoke("GET",this._bookmarksURL,void 0,void 0,{responseType:"text"},e)},r.prototype._mergeBookmarks=function(t,e){if(u.log("Merging bookmarks"),t){if(this._bookmarksBase){var n=this;t.forEach(function(e){var r=i(n._bookmarks,e.id),o=i(n._bookmarksBase,e.id);!r&&o&&t.splice(t.indexOf(e),1)}),this._bookmarks.forEach(function(e){var r=i(t,e.id),o=i(n._bookmarksBase,e.id);r||o||t.push(e)})}this._bookmarks=t}this._bookmarksEtag=e},r.prototype._pushBookmarks=function(t){u.log("Pushing bookmarks");var e={"Content-Type":"application/json"};this._bookmarksEtag&&(e["If-Match"]=this._bookmarksEtag);var n=this,r=JSON.stringify({bookmarks:o(this._bookmarks)});this._service.invoke("PUT",this._bookmarksURL,e,r,void 0,function(e,r){if(e)return t(e);var i=r.statusCode;!r.headers.etag||200!==i&&201!==i&&204!==i?409===i||412===i?n._pullBookmarks(function(e,r,i){return e?t(e):(n._mergeBookmarks(r,i),void n._pushBookmarks(t))}):t("Unexpected response updating bookmarks: "+i):t(null,r.headers.etag)})},r.prototype._commit=function(t){u.log("Commiting bookmarks");var e=this;this._lock.obtain(function(){e._saveBookmarks(function(n){return e._lock.release(),n?void e._collection._reportCommitError(n):void(t&&e.sync(function(t){t&&e._collection._reportSyncError(t)}))})})},r.prototype._sync=function(t){var e=this;this._bookmarksBase?e._pushBookmarks(function(n,r){return n?t(n):(e._bookmarksEtag=r,e._bookmarksBase=void 0,e._commit(),void t(null))}):e._pullBookmarks(function(n,r,i){return n?t(n):(r&&(e._bookmarks=r,e._bookmarksEtag=i,e._bookmarksBase=void 0,e._commit()),void t(null))})},r.prototype._createBase=function(){this._bookmarksBase||(this._bookmarksBase=this._bookmarks.slice())},r.prototype.load=function(t){u.log("Loading bookmarks");var e=this;this._lock.obtain(function(){e._loadBookmarks(function(n){e._lock.release(),t(n)})})},r.prototype.sync=function(t){u.log("Syncing bookmarks");var e=this;this._lock.obtain(function(){e._syncModified=!1,e._sync(function(n){return e._lock.release(),n?(n=h.getSyncError(n,null),t(n)):(t(null),void(e._syncModified&&e._collection._notifyChange(!0)))})})},r.prototype.createBookmark=function(t,e,n){if(c.SHARED_LOCAL_STORAGE)return void u.storageInterface.createBookmark(this._collection,t,e,n);u.log("Creating bookmark: "+t+" url: "+e);var r=this;this._lock.obtain(function(){var o=i(r._bookmarks,t),a=!1;o||(r._createBase(),o=new s(t,e),r._bookmarks.push(o),a=!0),r._lock.release(),n(null,o,a),a&&(r._commit(c.SYNCING_ENABLED),r._collection._notifyChange(!0))})},r.prototype.removeBookmark=function(t,e){if(c.SHARED_LOCAL_STORAGE)return void u.storageInterface.removeBookmark(this._collection,t,e);u.log("Removing bookmark: "+t.id+" url: "+t.id);var n=this;this._lock.obtain(function(){t=i(n._bookmarks,t.id),t&&(n._createBase(),n._bookmarks.splice(n._bookmarks.indexOf(t),1)),n._lock.release(),e(null),t&&(n._commit(c.SYNCING_ENABLED),n._collection._notifyChange(!0))})},r.prototype.getBookmarks=function(){return this._bookmarks.slice()},r}),a("AdobeLibraryCollection",["require","exports","module","./components/dcx-js/src/AdobeDCXError","./AdobeLibraryFolder","./AdobeLibraryServices","./AdobeLibraryConfig","./AdobeLibrarySyncManager","./AdobeLibraryBookmarkManager","./AdobeLibraryAnalytics","./AdobeLibraryError","./utils/AdobeLibraryAsyncJoin","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryErrorUtils","./utils/AdobeLibrarySyncUtils","./utils/AdobeLibraryRenditionUtils","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(t){this._rootDir=s.ROOT_DIR,this._userId=t.USER_ID,this._cloudId=t.CLOUD_ID,this._cloudInfo=t.CLOUD_INFO||{},this._syncManager=new u(this,t),this._libraries=[],this._syncState="syncing",this._syncProgressMap={},this._externalLinkDownloadProgressMap={},this._initialSyncInProgress=!1,this._syncErrors=[],this._listenerManager=new y(["change","deepchange","sync","commitError"]),this._libraryIdMap={},this._pendingDeletes=[],this._loaded=!1,this._syncing=!1,this._lastSyncTime=0,this._pendingSyncs=[],this._backoffTicks=0,this._numBackoffs=0,this._numRetries=0,this.isPublic||(this._bookmarkManager=new c(this))}var i=t("./components/dcx-js/src/AdobeDCXError"),o=t("./AdobeLibraryFolder"),a=t("./AdobeLibraryServices"),s=t("./AdobeLibraryConfig"),u=t("./AdobeLibrarySyncManager"),c=t("./AdobeLibraryBookmarkManager"),l=t("./AdobeLibraryAnalytics"),f=t("./AdobeLibraryError"),h=t("./utils/AdobeLibraryAsyncJoin"),d=t("./utils/AdobeLibraryFileUtils"),p=t("./utils/AdobeLibraryManifestUtils"),_=t("./utils/AdobeLibraryErrorUtils"),v=t("./utils/AdobeLibrarySyncUtils"),m=t("./utils/AdobeLibraryRenditionUtils"),y=t("./utils/AdobeLibraryListenerManager");return r.prototype._removeAllListeners=function(){this._listenerManager.removeAll(),this._libraries.forEach(function(t){t._removeAllListeners()})},r.prototype._notifyChange=function(t){this._listenerManager.notify("deepchange"),t&&this._listenerManager.notify("change")},r.prototype._load=function(t){if(this._loaded)return void t(null);this._loaded=!0;var e=this;d.readLibraryDirectory(this,function(n,r){function i(t,n){if(p.validateLibraryId(t,e.isPublic)){var r=e._getCompositeDir(t);a.dcx.newCompositeFromLocalStorage(r,function(r,i){if(r)return a.log("Load error: DCX error loading composite for "+t),void n(_.getCommitError(r,t));if(!i||!i.current)return a.log("Load error: composite/branch not loaded for "+t),d.deleteLibraryFromDisk(e,t),void n(null);if(!p.validateLibrary(i))return a.log("Load error: failed validation for "+t),void n(null);if(!e.isPublic&&i.id!==t)return a.log("Load error: library id "+i.id+"doesn't match folder on disk "+t),void n(null);var s=new o(e,i);e.isPublic&&(s._publicId=t,s._writable=!1),"pendingDelete"===i.current.compositeState?(e._pendingDeletes.push(s),n(null)):(e._libraries.push(s),e._libraryIdMap[s.id]=s,s._loadRenditionCache(n))})}else n(null)}if(n||!r)return void t(null);var s=new h;r.forEach(function(t){s.addOperation(i,[t])}),e.isPublic||s.addOperation(e._bookmarkManager.load,[],e._bookmarkManager),s.run(function(n){a.log("Loaded "+e._libraries.length+" libraries and "+e._pendingDeletes.length+" pending deletes"),t(null)},function(t){e._reportCommitError(t)})})},r.prototype._removeFromPendingDeletes=function(t){var e=this._pendingDeletes.indexOf(t);-1!==e&&this._pendingDeletes.splice(e,1)},r.prototype._handlePendingDeletes=function(t){var e=this,n=new h;this._pendingDeletes.forEach(function(t){n.addOperation(function(n){t._deleteFromServer(!1,function(r){return r&&r.code===i.UPDATE_CONFLICT?(e._removeFromPendingDeletes(t),e._libraries.push(t),e._libraryIdMap[t.id]=t,t._markDeletedLocally(!1),e._updateSyncState(),e._notifyChange(!0),void n(null,!0)):r?void n(r):(e._removeFromPendingDeletes(t),t._deletedFromDisk=!0,void d.deleteLibraryFromDisk(e,t.id,function(t){n(t,!0)}))})})}),n.run(t)},r.prototype._doesLibraryExist=function(t){if(this._libraryIdMap[t])return!0;var e;for(e=0;e<this._pendingDeletes.length;e++)if(this._pendingDeletes[e].id===t)return!0;return!1},r.prototype._syncNewLibrary=function(t,e,n,r){var s=this,u=e||this._syncManager.getCompositePath(t),c=a.hasFileSystem()&&this._getCompositeDir(t),l=a.dcx.newCompositeWithHref(u,c);s._libraryIdMap[t]="pending",s._updateSyncState(),s._syncManager.pullComposite(l,s,function(e,a){return e||!a?(delete s._libraryIdMap[t],s._updateSyncState(),e=e?e.code===i.NO_COMPOSITE||e.code===i.DELETED_COMPOSITE?null:_.getSyncError(e,t):new f(f.NETWORK_ERROR,"No pulled branch"),void r(e,!0)):void l.resolvePullWithBranch(a,function(e){if(e||!s.isPublic&&l.id!==t)return delete s._libraryIdMap[t],s._updateSyncState(),e=e?_.getCommitError(e,t):new f(f.CORRUPTED_LIBRARY,"Library id does not match sync group id"),void r(e,!0);var i=new o(s,l);s.isPublic&&(i._publicId=t,i._writable=!1),s._libraries.push(i),s._libraryIdMap[i.id]=i,s._updateSyncState(),i._setCollaboration(n),m.prefetchRenditions(i),s._notifyChange(!0),r(null,!0)})})},r.prototype._syncNewLibraries=function(t,e){var n=this,r=new h;if(this._loadingHint){var i=[];t.forEach(function(t){-1!==n._loadingHint.indexOf(t.name)&&i.push(t)}),t.forEach(function(t){-1===n._loadingHint.indexOf(t.name)&&i.push(t)}),t=i}t.forEach(function(t){var e=t.name;n._doesLibraryExist(t.name)||r.addOperation(n._syncNewLibrary,[e,void 0,t],n)}),r.run(e)},r.prototype._syncExistingLibraries=function(t,e){var n=this,r=new h;this._libraries.forEach(function(e){var i=t&&t[e.id];i&&(e._setCollaboration(i),e._deletedFromServer&&(e._deletedFromServer=!1,e._notifyChange()));var o=!t||i&&i.isUnmodified;void 0===e.collaboration?r.addOperation(e._sync,[o],e):o?r.addOperation(function(t){n._syncManager.hasCompositeChangedOnServer(e._dcxComposite,function(n){e._sync(!n,t)})}):r.addOperation(e._sync,[!1],e)}),r.run(e)},r.prototype._dosync=function(t){var e=this;this._clearSyncErrors(),this._syncManager.getServerComposites(function(n,r,i){if(n)return n=_.getSyncError(n,void 0,{403:f.ACCESS_DENIED}),e._reportSyncError(n),void t(null,!1);var o=new h;o.addOperation(e._syncNewLibraries,[r],e),o.addOperation(e._syncExistingLibraries,[i],e),o.addOperation(e._handlePendingDeletes,[],e),o.addOperation(e._bookmarkManager.sync,[],e._bookmarkManager),o.run(function(e,n){t(null,n)},function(t){e._reportSyncError(t)})})},r.prototype._reportSyncError=function(t){t&&(a.log("Sync error: "+_.errorToString(t)),this._syncErrors.push(t))},r.prototype._clearSyncErrors=function(t){if(t){var e=[];this._syncErrors.forEach(function(n){n.libraryId!==t&&e.push(n)}),this._syncErrors=e}else this._syncErrors=[]},r.prototype._reportCommitError=function(t){this._lastCommitError=t,t&&(a.log("Commit error: "+_.errorToString(t)),this._listenerManager.notify("commitError",[t]))},r.prototype._updateRetryState=function(){if(!this._retryTimeoutId&&"syncing"!==this._syncState){if("error"===this._syncState){var t=this.getPrimarySyncError();if(t&&t.code===f.RETRYABLE_SERVER_ERROR){if(++this._numRetries>s.ERROR_RETRY_INTERVALS.length)return this._retryTime="never",a.log("Retry Failed"),void(s.MAX_SYNC_INTERVAL=s.RETRY_FAIL_MAX_SYNC_INTERVAL);a.log("Retry "+this._numRetries);var e=t.underlyingError&&t.underlyingError.response&&t.underlyingError.response.headers,n=1e3*v.getRetryAfterHeader(e);n>0?(this._numRetries=s.ERROR_RETRY_INTERVALS.length,a.log("Got Retry-After header")):n=1e3*s.ERROR_RETRY_INTERVALS[this._numRetries-1],a.log("Retrying after "+n+"ms"),this._retryTime=(new Date).valueOf()+n;var r=this;return void(this._retryTimeoutId=setTimeout(function(){r._retryTimeoutId=void 0,r._retryTime=void 0,a.log("Starting retry"),r._syncWithParameters(!1)},n))}if(t&&t.code===f.EXCEEDS_QUOTA)return s.MAX_SYNC_INTERVAL=s.RETRY_FAIL_MAX_SYNC_INTERVAL,this._numRetries=s.ERROR_RETRY_INTERVALS.length+1,void(this._retryTime="never")}this._numRetries=0,this._retryTime=void 0}},r.prototype._updateSyncState=function(){var t=this,e=this._initialSyncInProgress;Object.keys(this._libraryIdMap).forEach(function(n){var r=t._libraryIdMap[n],i="pending"===r||r._isSyncing();e=e||i});var n;e?n="syncing":(this._syncErrors.length>0?(n="error",t._syncManager.clearSyncGroupCache(),l.reportError(this.getPrimarySyncError())):n="ok",this._syncProgressMap={},this._syncProgress=void 0);var r=this._syncState;this._syncState=n,this._updateRetryState(),(r!==n||"error"===this._syncState)&&this._listenerManager.notify("sync"),t._ensureDefaultLibrary()},r.prototype._updateProgress=function(t,e,n){n?this._syncProgressMap[t]={bytesLoaded:e||0,bytesTotal:n}:this._syncProgressMap[t]?(0===this._syncProgressMap[t].bytesTotal&&(this._syncProgressMap[t].bytesTotal=1e4),this._syncProgressMap[t].bytesLoaded=this._syncProgressMap[t].bytesTotal):this._syncProgressMap[t]={bytesLoaded:0,bytesTotal:0};var r=!1,i=e||0,o=n||0,a=o>0?Math.max(0,Math.min(100,Math.round(i/n*100))):void 0;this._syncProgressMap[t].progress!==a&&(this._syncProgressMap[t].progress=a,r=!0);var s=0,u=0,c=0,l=0,f=this._syncProgressMap;Object.keys(f).forEach(function(t){s++,f[t].bytesTotal>0&&u++,c+=f[t].bytesLoaded,l+=f[t].bytesTotal});var h=l>0?c*u/(l*s):0,d=Math.max(0,Math.min(100,Math.round(100*h)));(!this._syncProgress||this._syncProgress<d||100===this._syncProgress&&100>d)&&(this._syncProgress=d,r=!0),r&&this._listenerManager.notify("sync")},r.prototype._updateExternalLinkDownloadProgress=function(t,e,n,r){var i,o=t.element.library.id+"."+t.element.id+"."+t.id;n?(e=e||0,i=Math.max(0,Math.min(100,Math.round(e/n*100)))):r&&(i=-1),i!==this._externalLinkDownloadProgressMap[o]&&(void 0===i?delete this._externalLinkDownloadProgressMap[o]:this._externalLinkDownloadProgressMap[o]=i,this._listenerManager.notify("sync"))},r.prototype._getExternalLinkDownloadProgress=function(t){var e=t.element.library.id+"."+t.element.id+"."+t.id;return this._externalLinkDownloadProgressMap[e]},r.prototype._setInitialSyncState=function(t,e){this._initialSyncInProgress=t,this._loadingHint=e,this._updateSyncState()},r.prototype._resetPollBackoff=function(){this._backoffTicks=0,this._numBackoffs=0},r.prototype._getBaseDir=function(){var t=a.getPathSeparator(),e=this._userId.replace(/@/g,"_"),n=this._rootDir+t+e;return this._isPublic&&e!==s.PUBLIC_USER_ID&&(n+=t+s.PUBLIC_USER_ID),n+t+this._cloudId},r.prototype._getCompositeDir=function(t){var e=a.getPathSeparator(),n=this._getBaseDir()+e+"dcx";return t&&(n+=e+t),n},r.prototype._getTempDir=function(){var t=a.getPathSeparator();return this._getBaseDir()+t+".tmp"},r.prototype._getRenditionCacheDir=function(t){var e=a.getPathSeparator(),n=this._getBaseDir()+e+"renditions";return t&&(n+=e+t),n},r.prototype._ensureDefaultLibrary=function(){var t="ok"===this.syncState&&!this.isInitialSyncInProgress&&s.SYNCING_ENABLED,e=0;this.libraries.forEach(function(t){t.isDeletedLocally||t.isDeletedFromServer||e++}),!this.isPublic&&s.DEFAULT_LIBRARY_NAME&&t&&0===e&&(a.log("Creating default library: "+s.DEFAULT_LIBRARY_NAME),this.createLibrary(s.DEFAULT_LIBRARY_NAME))},r.prototype._doRemoveLibrary=function(t,e){var n=this,r=function(t){e&&e(t)},i=this._libraries.indexOf(t);-1!==i&&(this._libraries.splice(i,1),delete this._libraryIdMap[t.id]),t._removeAllListeners(),s.SHARED_LOCAL_STORAGE?(t._dcxBranch.compositeState="pendingDelete",t._commit(!1,!0),t._markDeletedLocally(!0),r(null)):(n._pendingDeletes.push(t),s.SYNCING_ENABLED?t._deleteFromServer(!0,function(e){return t._markDeletedLocally(!0),e?void r(null):(n._removeFromPendingDeletes(t),t._deletedFromDisk=!0,void d.deleteLibraryFromDisk(n,t.id,r))}):(t._dcxBranch.compositeState="pendingDelete",t._commit(!0,!0),t._markDeletedLocally(!0),r(null))),this._notifyChange(!0)},Object.defineProperties(r.prototype,{libraries:{get:function(){return this._libraries},set:function(){throw new f(f.READ_ONLY,"Cannot modify libraries list directly")}},commitError:{get:function(){return this._lastCommitError},set:function(){throw new f(f.READ_ONLY,"commitError is a read-only property")}},syncState:{get:function(){return this._syncState},set:function(){throw new f(f.READ_ONLY,"syncState is a read-only property")}},syncErrors:{get:function(){return this._syncErrors},set:function(){throw new f(f.READ_ONLY,"syncErrors is a read-only property")}},syncProgress:{get:function(){return this._syncProgress},set:function(){throw new f(f.READ_ONLY,"syncProgress is a read-only property")}},isInitialSyncInProgress:{get:function(){return this._initialSyncInProgress},set:function(){throw new f(f.READ_ONLY,"isInitialSyncInProgress is a read-only property")}},isPolling:{get:function(){return void 0!==this._pollTimerId},set:function(){throw new f(f.READ_ONLY,"isPolling is a read-only property")}},isLoggedIn:{get:function(){return s.SHARED_LOCAL_STORAGE?void 0:this._syncManager.isLoggedIn()},set:function(){throw new f(f.READ_ONLY,"isLoggedIn is a read-only property")}},retryTime:{get:function(){return"never"!==this._retryTime?this._retryTime:void 0},set:function(){throw new f(f.READ_ONLY,"retryTime is a read-only property")}},userId:{get:function(){return this._userId},set:function(){throw new f(f.READ_ONLY,"userId is a read-only property")}},cloudId:{get:function(){return this._cloudId},set:function(){throw new f(f.READ_ONLY,"cloudId is a read-only property")}},cloudInfo:{get:function(){return this._cloudInfo},set:function(){throw new f(f.READ_ONLY,"cloudInfo is a read-only property")}},isPublic:{get:function(){return!1},set:function(){throw new f(f.READ_ONLY,"isPublic is a read-only property")}},bookmarks:{get:function(){return this._bookmarkManager.getBookmarks()},set:function(){throw new f(f.READ_ONLY,"bookmarks is a read-only property")}}}),r.prototype.addChangeListener=function(t){this._listenerManager.add("change",t)},r.prototype.removeChangeListener=function(t){this._listenerManager.remove("change",t)},r.prototype.addDeepChangeListener=function(t){this._listenerManager.add("deepchange",t)},r.prototype.removeDeepChangeListener=function(t){this._listenerManager.remove("deepchange",t)},r.prototype.createLibrary=function(t){var e=a.uuid(),n=s.COMPOSITE_TYPE,r=this._getCompositeDir(e),i=a.dcx.newEmptyComposite(t,n,r,e);i.current.rootNode.setValue(s.VERSION_KEY,s.VERSION),this._syncManager.prepareCompositeForPush(i);var u=new o(this,i);return u._updateCreatedTime(),this._libraries.push(u),this._libraryIdMap[u.id]=u,this._notifyChange(!0),u._commit(!1,!0),l.reportCreateLibrary(u),u},r.prototype.removeLibrary=function(t,e){this._doRemoveLibrary(t,e),l.reportDeleteLibrary(t)},r.prototype.removeDeletedLibraries=function(t,e){function n(t,e){var n=r._libraries.indexOf(t);-1!==n&&(r._libraries.splice(n,1),delete r._libraryIdMap[t.id]),t._deletedFromDisk=!0,d.deleteLibraryFromDisk(r,t.id,e),t._markDeletedLocally(!0)}var r=this;"function"==typeof t&&(e=t,t=void 0);var i=t&&t.exclude||[],o=new h,a=!1;this._libraries.forEach(function(t){if(t.isDeletedFromServer){var e=!0;i.forEach(function(n){e=e&&t!==n}),e&&(a=!0,o.addOperation(n,[t]))}}),o.run(function(t){a&&r._notifyChange(!0),e(t)})},r.prototype.sync=function(t){this._syncWithParameters(!1,!1,t)},r.prototype.syncFull=function(t){this._syncManager.clearSyncGroupCache(),this._syncWithParameters(!1,!1,t)},r.prototype.syncBookmarks=function(t){var e=function(e){t&&t(e)};this._bookmarkManager.sync(e)},r.prototype._syncWithParameters=function(t,e,n){var r=this,i=function(){n&&n(null)};if(s.SHARED_LOCAL_STORAGE)return a.storageInterface.sync(this),void i();if(!s.SYNCING_ENABLED)return void i();if(this._retryTimeoutId)return void i();if(t||this._resetPollBackoff(),this.isPolling){if(this._syncing)return void i()}else if(this._syncing)return void r._pendingSyncs.push(i);return(new Date).valueOf()<this._lastSyncTime+s.MAX_SYNC_INTERVAL?e?void i():void setTimeout(function(){r._syncWithParameters(t,!0,i)},s.MAX_SYNC_INTERVAL):(a.log("Start Sync: "+this.cloudId+(t?" [polling]":"")),this._syncing=!0,this._lastSyncTime=(new Date).valueOf(),void this._dosync(function(t,e){if(r._syncing=!1,r._updateSyncState(),a.log("End Sync: "+r.cloudId),e&&(r._backoffTicks=0,r._numBackoffs=0),r._pendingSyncs.length>0){var n=r._pendingSyncs;r._pendingSyncs=[],r.sync(function(){n.forEach(function(t){t()})})}i()}))},r.prototype.addSyncListener=function(t){this._listenerManager.add("sync",t)},r.prototype.removeSyncListener=function(t){this._listenerManager.remove("sync",t)},r.prototype.getPrimarySyncError=function(){var t=this._syncErrors[0];return this._syncErrors.forEach(function(e){var n=_.getErrorPriority(e),r=_.getErrorPriority(t);n>r?t=e:n===r&&t.code===e.code&&t.libraryId!==e.libraryId&&(t=new f(t.code,"multiple errors (see libraryCollection.syncErrors)",void 0))}),t},r.prototype.getNewLibrarySyncProgress=function(){var t=this;if(this._newLibraryProgress)return this._newLibraryProgress;var e=[];return Object.keys(this._libraryIdMap).forEach(function(n){"pending"===t._libraryIdMap[n]&&e.push({id:n,progress:t._syncProgressMap[n]&&t._syncProgressMap[n].progress})}),e},r.prototype.addCommitErrorListener=function(t){this._listenerManager.add("commitError",t)},r.prototype.removeCommitErrorListener=function(t){this._listenerManager.remove("commitError",t)},r.prototype.startPolling=function(){if(s.SHARED_LOCAL_STORAGE)throw new f(f.NOT_SUPPORTED,"startPolling() not supported with shared local storage");if(!this.isPolling){var t=this,e=6e4*s.POLL_INTERVAL;this._pollTimerId=setInterval(function(){if("never"!==t._retryTime){if(t._backoffTicks>0)return void t._backoffTicks--;0===t._backoffTicks&&(t._numBackoffs++,t._backoffTicks=v.getBackoffTicks(t._numBackoffs)),t._syncWithParameters(!0)}},e)}},r.prototype.stopPolling=function(){if(s.SHARED_LOCAL_STORAGE)throw new f(f.NOT_SUPPORTED,"stopPolling() not supported with shared local storage");this.isPolling&&(clearInterval(this._pollTimerId),delete this._pollTimerId),this._retryTimeoutId&&(clearTimeout(this._retryTimeoutId),delete this._retryTimeoutId)},r.prototype.createBookmark=function(t,e,n){this._bookmarkManager.createBookmark(t,e,n)},r.prototype.removeBookmark=function(t,e){this._bookmarkManager.removeBookmark(t,e)},r.prototype.findBookmark=function(t){var e;return this.bookmarks&&this.bookmarks.some(function(n){return n.url===t._dcxComposite.href?(e=n,!0):void 0}),e},r.prototype.getDefaultLibrary=function(){var t;return this.libraries.forEach(function(e){"incoming"!==e.collaboration&&(!t||(t.created||0)>(e.created||0))&&(t=e)}),t},r.prototype.getLibraryById=function(t){var e;return this.libraries.forEach(function(n){n.id===t&&(e=n)}),e},r.prototype.updateAccessToken=function(t){if(s.SHARED_LOCAL_STORAGE)throw new f(f.NOT_SUPPORTED,"updateAccessToken() not supported with shared local storage");this._syncManager.updateAccessToken(t),a.log("defined")},r.prototype.getTempDir=function(t){if(!a.hasFileSystem())return void t(new f(f.REQUIRES_FILESYSTEM,"getTempDir only supported when you have a filesystem"));var e=this._getTempDir();d.ensurePathExists(e,function(n){t(n,e)})},r}),a("AdobeLibraryPublicCollection",["require","exports","module","./AdobeLibraryCollection","./AdobeLibraryError","./AdobeLibraryConfig","./AdobeLibraryServices","./utils/AdobeLibraryAsyncJoin","./utils/AdobeLibraryFileUtils"],function(t,e,n){"use strict";function r(t){t.IS_PUBLIC=!0,t.USER_ID=t.USER_ID||a.PUBLIC_USER_ID,this._newLibrariesLoading={},i.call(this,t)}var i=t("./AdobeLibraryCollection"),o=t("./AdobeLibraryError"),a=t("./AdobeLibraryConfig"),s=t("./AdobeLibraryServices"),u=t("./utils/AdobeLibraryAsyncJoin"),c=t("./utils/AdobeLibraryFileUtils");return Object.keys(i.prototype).forEach(function(t){0===t.indexOf("_")&&(r.prototype[t]=i.prototype[t])}),r.prototype._dosync=function(t){var e=this;this._clearSyncErrors();var n=new u;this._libraries.forEach(function(t){n.addOperation(function(n){e._syncManager.hasCompositeChangedOnServer(t._dcxComposite,function(e){t._sync(!e,n)})})}),n.run(function(e,n){t(null,n)},function(t){e._reportSyncError(t)})},Object.defineProperties(r.prototype,{libraries:{get:function(){return this._libraries},set:function(){throw new o(o.READ_ONLY,"Cannot modify libraries list directly")}},commitError:{get:function(){return this._lastCommitError},set:function(){throw new o(o.READ_ONLY,"commitError is a read-only property")}},syncState:{get:function(){return this._syncState},set:function(){throw new o(o.READ_ONLY,"syncState is a read-only property")}},syncErrors:{get:function(){return this._syncErrors},set:function(){throw new o(o.READ_ONLY,"syncErrors is a read-only property")}},syncProgress:{get:function(){return this._syncProgress},set:function(){throw new o(o.READ_ONLY,"syncProgress is a read-only property")}},isPolling:{get:function(){return void 0!==this._pollTimerId},set:function(){throw new o(o.READ_ONLY,"isPolling is a read-only property")}},retryTime:{get:function(){return"never"!==this._retryTime?this._retryTime:void 0},set:function(){throw new o(o.READ_ONLY,"retryTime is a read-only property")}},userId:{get:function(){return this._userId},set:function(){throw new o(o.READ_ONLY,"userId is a read-only property")}},cloudId:{get:function(){return this._cloudId},set:function(){throw new o(o.READ_ONLY,"cloudId is a read-only property")}},cloudInfo:{get:function(){return this._cloudInfo},set:function(){throw new o(o.READ_ONLY,"cloudInfo is a read-only property")}},isPublic:{get:function(){return!0},set:function(){throw new o(o.READ_ONLY,"isPublic is a read-only property")}}}),r.prototype.addChangeListener=function(t){i.prototype.addChangeListener.call(this,t)},r.prototype.removeChangeListener=function(t){i.prototype.removeChangeListener.call(this,t)},r.prototype.addDeepChangeListener=function(t){i.prototype.addDeepChangeListener.call(this,t)},r.prototype.removeDeepChangeListener=function(t){i.prototype.removeDeepChangeListener.call(this,t)},r.prototype.canLoadLibrary=function(t){var e=new RegExp(this._syncManager.getSyncGroupPath()+"/(.+)");return!!t.match(e)},r.prototype.loadLibrary=function(t,e,n){function r(e,n){var r=i._newLibrariesLoading[t];delete i._newLibrariesLoading[t],r.forEach(function(t){t(e,n)})}var i=this,u=this.getLibraryById(t);if(u)return void n(null,u);if(e&&!this.canLoadLibrary(e))return void n(new o(o.INVALID_PARAMETER,"Invalid library url"));var c=this._newLibrariesLoading[t];return c?void c.push(n):(this._newLibrariesLoading[t]=[n],a.SHARED_LOCAL_STORAGE?void s.storageInterface.loadPublicLibrary(this,t,e,r):void this._syncNewLibrary(t,e,void 0,function(e){return e?void r(e):(u=i.getLibraryById(t),u&&(u._loadedExternally=!0),void r(null,u))}))},r.prototype.unloadLibrary=function(t,e){var n=this._libraries.indexOf(t);return-1===n?void e(null):(this._libraries.splice(n,1),delete this._libraryIdMap[t.id],t._markDeletedLocally(!0),a.SHARED_LOCAL_STORAGE?s.storageInterface.unloadPublicLibrary(t,e):(t._deletedFromDisk=!0,c.deleteLibraryFromDisk(this,t.id,e)),void this._listenerManager.notify("change"))},r.prototype.removeDeletedLibraries=function(t,e){i.prototype.removeDeletedLibraries.call(this,t,e)},r.prototype.sync=function(t){i.prototype.sync.call(this,t)},r.prototype.addSyncListener=function(t){i.prototype.addSyncListener.call(this,t)},r.prototype.removeSyncListener=function(t){i.prototype.removeSyncListener.call(this,t)},r.prototype.getPrimarySyncError=function(){return i.prototype.getPrimarySyncError.call(this)},r.prototype.getNewLibrarySyncProgress=function(){return i.prototype.getNewLibrarySyncProgress.call(this)},r.prototype.addCommitErrorListener=function(t){i.prototype.addCommitErrorListener.call(this,t)},r.prototype.removeCommitErrorListener=function(t){i.prototype.removeCommitErrorListener.call(this,t)},r.prototype.startPolling=function(){i.prototype.startPolling.call(this)},r.prototype.stopPolling=function(){i.prototype.stopPolling.call(this)},r.prototype.getLibraryById=function(t){return i.prototype.getLibraryById.call(this,t)},r.prototype.getTempDir=function(t){i.prototype.getTempDir.call(this,t)},r}),a("AdobeLibraryCollectionManager",["require","exports","module","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(){this._collections=[],this._listenerManager=new i(["change"])}var i=t("./utils/AdobeLibraryListenerManager");return r.prototype.getLibraryCollection=function(t,e){var n;return this._collections.forEach(function(r){r.isPublic||r.userId!==t||r.cloudId!==e||(n=r)}),n},r.prototype.getPublicLibraryCollection=function(t){var e;return this._collections.forEach(function(n){n.isPublic&&n.cloudId===t&&(e=n)}),e},r.prototype.addLibraryCollection=function(t){this._collections.push(t),this._listenerManager.notify("change")},r.prototype.removeLibraryCollection=function(t){var e=this._collections.indexOf(t);-1!==e&&(this._collections.splice(e,1),this._listenerManager.notify("change"))},r.prototype.removeAllLibraryCollections=function(){this._collections=[],this._listenerManager.notify("change")},r.prototype.getLoadedCollections=function(){return this._collections},r.prototype.addLoadedCollectionsListener=function(t){this._listenerManager.add("change",t)},r.prototype.removeLoadedCollectionsListener=function(t){this._listenerManager.remove("change",t)},r}),a("AdobeLibraryMessageChannel",["require","exports","module","./AdobeLibraryServices","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(t){this._socket=t,this._listenerManager=new u,this._socketListenerManager=new u,this._pendingWriteState={},this._pendingWriteDependencyMap={},this._init()}function i(t){return t+"_req"}function o(t){return t+"_res"}function a(t,e,n){return t+"#"+e+"#"+n}var s=t("./AdobeLibraryServices"),u=t("./utils/AdobeLibraryListenerManager");return r.prototype._init=function(){var t=this;this._addSocketListener("message",function(e){var n=JSON.parse(e);t._logReceive(n.type),t._listenerManager.notify(n.type,[n.data])})},r.prototype._addSocketListener=function(t,e){this._socketListenerManager.add(t,e),this._socket.addListener(t,e)},r.prototype._removeSocketListeners=function(){var t=this;this._socketListenerManager.forEach(function(e,n){t._socket.removeListener(e,n)}),this._socketListenerManager.removeAll()},r.prototype._logSend=function(t){this._logCallback&&this._logCallback("SEND "+t)},r.prototype._logReceive=function(t){this._logCallback&&this._logCallback("RECEIVE "+t)},r.prototype._logError=function(t){this._logCallback&&this._logCallback("ERROR "+t)},r.prototype.setPendingWriteState=function(t,e,n){var r=a(t,e,n);this._pendingWriteState[r]=!0},r.prototype.setPendingWriteDependency=function(t,e,n,r,i,o){var s=a(t,e,n),u=a(r,i,o);s!==u&&(this._pendingWriteDependencyMap[s]=this._pendingWriteDependencyMap[s]||{},this._pendingWriteDependencyMap[s][u]={userId:r,cloudId:i,id:o})},r.prototype.clearPendingWriteState=function(t,e,n){var r=a(t,e,n),i=[];return Object.keys(this._pendingWriteDependencyMap[r]||{}).forEach(function(t){i.push(this._pendingWriteDependencyMap[r][t])},this),delete this._pendingWriteState[r],delete this._pendingWriteDependencyMap[r],i},r.prototype.getPendingWriteState=function(t,e,n,r){var i=a(t,e,n),o=!1;return!r&&this._pendingWriteState[i]&&(o=this._pendingWriteState[i]),Object.keys(this._pendingWriteDependencyMap).forEach(function(t){this._pendingWriteDependencyMap[t][i]&&(o=this._pendingWriteState[t]||o)},this),o},r.prototype.setLogCallback=function(t){this._logCallback=t},r.prototype.addListener=function(t,e){this._listenerManager.add(t,e)},r.prototype.removeListener=function(t,e){this._listenerManager.remove(t,e)},r.prototype.send=function(t,e){try{this._logSend(t),this._socket.send(JSON.stringify({type:t,data:e}))}catch(t){this._logError(t),this._socketListenerManager.notify("error",[t])}},r.prototype.addCallListener=function(t,e){var n=this;this.addListener(i(t),function(r){var i=r.id;e(r.data,function(e){n.send(o(t),{id:i,data:e})})})},r.prototype.removeCallListener=function(t,e){this.removeListener(i(t),e)},r.prototype.call=function(t,e,n){var r=this,a=s.uuid(),u=function(e){e.id===a&&(r.removeListener(o(t),u),n(e.data))};this.addListener(o(t),u),this.send(i(t),{id:a,data:e})},r.prototype.onOpen=function(t){this._addSocketListener("open",t)},r.prototype.onClose=function(t){this._addSocketListener("close",t)},r.prototype.onError=function(t){this._addSocketListener("error",t)},r.prototype.shutdown=function(){var t=this;this._addSocketListener("close",function(){t._removeSocketListeners(),t._listenerManager.removeAll()}),this._socket.close()},r}),a("AdobeLibraryWebSocket",["require","exports","module","./AdobeLibraryConfig","./utils/AdobeLibraryListenerManager"],function(t,e,n){"use strict";function r(t,e){var n="ws://127.0.0.1:"+t+"/?version="+i.SHARED_LOCAL_STORAGE_VERSION;e&&(n+="&token="+e),this._socket=new WebSocket(n),this._socket.onopen=this._onSocketOpen.bind(this),this._socket.onclose=this._onSocketClose.bind(this),this._socket.onmessage=this._onSocketMessage.bind(this),this._socket.onerror=this._onSocketError.bind(this),this._listenerManager=new o(["open","close","message","error"])}var i=t("./AdobeLibraryConfig"),o=t("./utils/AdobeLibraryListenerManager");return r.prototype._onSocketOpen=function(t){this._listenerManager.notify("open")},r.prototype._onSocketClose=function(t){this._listenerManager.notify("close")},r.prototype._onSocketMessage=function(t){this._listenerManager.notify("message",[t.data])},r.prototype._onSocketError=function(t){this._listenerManager.notify("error",[t])},r.prototype.send=function(t){this._socket.send(t)},r.prototype.addListener=function(t,e){this._listenerManager.add(t,e)},r.prototype.removeListener=function(t,e){this._listenerManager.remove(t,e)},r.prototype.close=function(){this._socket.close(),this._socket.onopen=void 0,this._socket.onclose=void 0,this._socket.onmessage=void 0,this._socket.onerror=void 0,this._listenerManager.removeAll()},r}),a("AdobeLibraryStorageInterfaceFS",["require","exports","module","./AdobeLibraryError"],function(t,e,n){"use strict";function r(t){return function(e,n){t&&t(e,n)}}function i(t){this._storageInterface=t}var o=t("./AdobeLibraryError"),a={rename:!0,renameSync:!1,ftruncate:!1,ftruncateSync:!1,truncate:!1,truncateSync:!1,chown:!1,chownSync:!1,fchown:!1,fchownSync:!1,lchown:!1,lchownSync:!1,chmod:!1,chmodSync:!1,fchmod:!1,fchmodSync:!1,lchmod:!1,lchmodSync:!1,stat:!0,lstat:!1,fstat:!1,statSync:!1,lstatSync:!1,fstatSync:!1,link:!1,linkSync:!1,symlink:!1,symlinkSync:!1,readlink:!1,readlinkSync:!1,realpath:!1,realpathSync:!1,unlink:!0,unlinkSync:!1,rmdir:!0,rmdirSync:!1,mkdir:!0,mkdirSync:!1,readdir:!0,readdirSync:!1,close:!1,closeSync:!1,open:!1,openSync:!1,utimes:!0,utimesSync:!1,futimes:!1,futimesSync:!1,fsync:!1,fsyncSync:!1,write:!1,writeSync:!1,read:!1,readSync:!1,readFile:!0,readFileSync:!1,writeFile:!0,writeFileSync:!1,appendFile:!1,appendFileSync:!1,watchFile:!1,unwatchFile:!1,watch:!1,exists:!0,existsSync:!1,createReadStream:!1,createWriteStream:!1};return i.prototype._fsCall=function(t,e,n){var i=r(n),o={method:t,args:e};this._storageInterface._channel.call("fscall",o,function(t){i.apply(null,t)})},i.prototype._pipeCall=function(t,e,n,i){var o=r(i),a={readStream:{path:t,options:e},writeStream:n};this._storageInterface._channel.call("fspipe",a,o)},Object.keys(a).forEach(function(t){i.prototype[t]=a[t]?function(){var e,n=Array.prototype.slice.call(arguments);"function"==typeof n[n.length-1]&&(e=n.pop()),this._fsCall(t,n,e)}:function(){var e=new o(o.NOT_IMPLEMENTED,t+" is not implemented in shared local storage"),n=arguments[arguments.length-1];if("function"==typeof n)return void n(e);throw e}}),i.prototype.createReadStream=function(t,e){var n=this,r={};return r.on=function(t,e){r[t]=e},r.pipe=function(e,i){n._pipeCall(t,i,e,function(t){r[t.event]&&r[t.event].apply(null,t.args)})},r},i.prototype.createWriteStream=function(t,e){return{path:t,options:e}},i}),a("AdobeLibraryStorageInterface",["require","exports","module","./components/dcx-js/src/AdobeDCXComposite","./components/dcx-js/src/AdobeDCXBranch","./AdobeLibraryCollection","./AdobeLibraryPublicCollection","./AdobeLibraryFolder","./AdobeLibraryBookmark","./AdobeLibraryError","./AdobeLibraryConfig","./AdobeLibraryServices","./AdobeLibraryMessageChannel","./AdobeLibraryWebSocket","./AdobeLibraryStorageInterfaceFS","./utils/AdobeLibraryAsyncJoin","./utils/AdobeLibraryManifestUtils","./utils/AdobeLibraryRenditionUtils"],function(t,e,n){"use strict";function r(t){this._collectionManager=t,this._acceptPushedBranchListeners=[],this._downloadRenditionListeners=[],this._rootListeners=[],this._baseBranches={},this._pendingSetRenditionCache={},this._portDiagnosis="UNKNOWN",this._logIndex=0,h.SHARED_LOCAL_STORAGE&&(this._connect(),this.fs=new v(this),d.hasFileSystem()||d.setFileSystem(this.fs))}function i(t){return function(e,n){t&&t(e,n)}}var o=t("./components/dcx-js/src/AdobeDCXComposite"),a=t("./components/dcx-js/src/AdobeDCXBranch"),s=t("./AdobeLibraryCollection"),u=t("./AdobeLibraryPublicCollection"),c=t("./AdobeLibraryFolder"),l=t("./AdobeLibraryBookmark"),f=t("./AdobeLibraryError"),h=t("./AdobeLibraryConfig"),d=t("./AdobeLibraryServices"),p=t("./AdobeLibraryMessageChannel"),_=t("./AdobeLibraryWebSocket"),v=t("./AdobeLibraryStorageInterfaceFS"),m=t("./utils/AdobeLibraryAsyncJoin"),y=t("./utils/AdobeLibraryManifestUtils"),g=t("./utils/AdobeLibraryRenditionUtils");return r.prototype._getBase=function(t){var e=this._baseBranches[t];return e&&e.base},r.prototype._setBase=function(t,e){this._baseBranches[t]=this._baseBranches[t]||{},this._baseBranches[t].base=e},r.prototype._getLogIndex=function(){return this._logIndex++},r.prototype._getServicePort=function(t){function e(e){var n;try{n=JSON.parse(e)}catch(t){}return n?void t(null,n):void t("NO_DATA")}var n=h.VULCAN_PREFIX+h.VULCAN_QUERY_REQUEST,r=h.VULCAN_PREFIX+h.VULCAN_QUERY_RESPONSE;if(d.hasCEPVulcan()){var i,o=d.getVulcanInterface(),a=d.getVulcanMessage(),s=function(n){return o.removeMessageListener(r,s),clearTimeout(i),n?void e(o.getPayload(n)):void t("NO_VULCAN_MESSAGE")};o.addMessageListener(r,s),i=setTimeout(s,3e3);var u=new a(n);u.setPayload(""),o.dispatchMessage(u)}else d.vulcanCall&&d.vulcanCall(n,"",r,e)},r.prototype._connectToPort=function(t,e){var n=e&&e.port,r=e&&e.token;if(this._portDiagnosis=e?e.portdiagnosis:"UNKNOWN",this._connectionPort=n,!this._isConnected&&n&&"SIMPLE_HOSTNAME_GOING_TO_PROXY"!==this._portDiagnosis&&"DNS_RESOLUTION_FAILED"!==this._portDiagnosis){try{var i=new _(n,r);this._channel=new p(i),this._isConnected=!0}catch(t){}this._isConnected&&(this._channel.addListener("environmentinfo",this._onEnvironmentInfo.bind(this)),this._channel.addListener("collectionadded",this._onCollectionAdded.bind(this)),this._channel.addListener("collectionremoved",this._onCollectionRemoved.bind(this)),this._channel.addListener("clearcollections",this._onClearCollections.bind(this)),this._channel.addListener("syncstate",this._onSyncState.bind(this)),this._channel.addListener("librarychange",this._onLibraryChange.bind(this)),this._channel.addListener("renditioncachechange",this._onRenditionCacheChange.bind(this)),this._channel.addListener("librarydeleted",this._onLibraryDeleted.bind(this)),this._channel.addListener("bookmarkschanged",this._onBookmarksChanged.bind(this)),this._channel.onOpen(this._sendConfiguration.bind(this)),this._channel.onClose(this._onDisconnect.bind(this)))}},r.prototype._connect=function(){this._getServicePort(this._connectToPort.bind(this))},r.prototype.shutdown=function(){this._collectionManager.removeAllLibraryCollections(),this._isConnected&&this._onDisconnect()},r.prototype._onDisconnect=function(){this._isConnected=!1,this._collectionManager.removeAllLibraryCollections(),this._channel.shutdown(),this._channel=void 0},r.prototype._sendConfiguration=function(){this._channel.send("configure",{CLIENT_DESCRIPTION:h.CLIENT_DESCRIPTION,RENDITION_SIZES:h.RENDITION_SIZES,FULL_RENDITION_CONFIG:h.FULL_RENDITION_CONFIG,DEFAULT_LIBRARY_NAME:h.DEFAULT_LIBRARY_NAME,SHARED_LOCAL_STORAGE_ANALYTICS:h.SHARED_LOCAL_STORAGE_ANALYTICS})},r.prototype._onEnvironmentInfo=function(t){this._serviceInfo=t,t.whitelistedDomains&&(h.WHITELISTED_DOMAINS=t.whitelistedDomains),this._collectionManager._collections.forEach(function(t){t._listenerManager.notify("sync")})},r.prototype._onCollectionAdded=function(t){var e=this;h.ROOT_DIR=t.rootDir;var n,r=new m,i={USER_ID:t.userId,CLOUD_ID:t.cloudId,CLOUD_INFO:t.cloudInfo,STORAGE_HOSTNAME:t.storageHost,REQUIRES_COMMUNITY_SESSION:t.requiresCommunitySession};n=t.isPublic?new u(i):new s(i),t.libraries.forEach(function(t){r.addOperation(e.loadExistingLibrary,[n,t.id,t.path,t.manifest,t.isDeletedFromServer,t.renditionCache],e)}),r.run(function(){e._collectionManager.addLibraryCollection(n)})},r.prototype._getLibraryCollection=function(t){return t.isPublic?this._collectionManager.getPublicLibraryCollection(t.cloudId):this._collectionManager.getLibraryCollection(t.userId,t.cloudId)},r.prototype._onCollectionRemoved=function(t){var e=this._getLibraryCollection(t);e&&this._collectionManager.removeLibraryCollection(e)},r.prototype._onClearCollections=function(){this._collectionManager.removeAllLibraryCollections()},r.prototype._onSyncState=function(t){var e=this._getLibraryCollection(t);e&&(e._syncState=t.state,e._syncProgress=t.progress,e._syncProgressMap=t.progressMap,e._externalLinkDownloadProgressMap=t.externalLinkDownloadProgressMap||{},e._newLibraryProgress=t.newLibraryProgress,e._initialSyncInProgress=t.initialSyncInProgress,e._syncErrors=[],t.errors.forEach(function(t){e._syncErrors.push(new f(t.code,t.message,t.libraryId))}),t.libraryStates.forEach(function(t){var n=e.getLibraryById(t.id);n&&(n._syncState=t.state)}),e._listenerManager.notify("sync"))},r.prototype._onLibraryChange=function(t){var e=this._getLibraryCollection(t);if(e){var n=e.getLibraryById(t.id);n?(n._deletedFromServer=t.deletedFromServer,t.renditionCache=t.renditionCache||{},n._setRenditionCache(t.renditionCache),this.updateExistingLibrary(e,n,t.manifest,void 0,function(){n._setRenditionCache(t.renditionCache)})):this.loadExistingLibrary(e,t.id,t.path,t.manifest,t.deletedFromServer,t.renditionCache)}},r.prototype._onRenditionCacheChange=function(t){var e=this._getLibraryCollection(t),n=e&&e.getLibraryById(t.id),r=n&&n.getElementById(t.elementId);r&&t.renditionCache&&(r._renditionCache=t.renditionCache)},r.prototype._onLibraryDeleted=function(t){var e=this._getLibraryCollection(t);e&&this._deleteLibrary(e,t.id)},r.prototype._onBookmarksChanged=function(t){var e=this._getLibraryCollection(t);if(e&&t.bookmarks){var n=[];t.bookmarks.forEach(function(t){n.push(new l(t._id,t._url))}),e._bookmarkManager._bookmarks=n}},r.prototype.isConnected=function(){return this._isConnected},r.prototype.reconnect=function(){this._isConnected||this._connect()},r.prototype.getServiceInfo=function(){return this._serviceInfo?{updateRequired:this._serviceInfo.updateRequired,version:this._serviceInfo.codeVersion,buildNumber:this._serviceInfo.buildNumber,apiVersion:this._serviceInfo.version,environment:this._serviceInfo.environment,syncingEnabled:this._serviceInfo.syncingEnabled,portDiagnosis:this._portDiagnosis,connectionPort:this._connectionPort}:{portDiagnosis:this._portDiagnosis,connectionPort:this._connectionPort}},r.prototype.updateConfiguration=function(){h.SHARED_LOCAL_STORAGE&&this._isConnected&&this._channel&&this._sendConfiguration()},r.prototype.sync=function(t){this._channel.send("sync",{isPublic:t.isPublic,userId:t.userId,cloudId:t.cloudId})},r.prototype.commitManifest=function(t,e){var n=this;if(h.SHARED_LOCAL_STORAGE){var r=t._dcxBranch.localData,i=this._pendingSetRenditionCache[t.id]||{data:[],callbacks:[]};delete this._pendingSetRenditionCache[t.id];var o={isPublic:t.collection.isPublic,userId:t.collection.userId,cloudId:t.collection.cloudId,id:t.id,current:r,base:this._getBase(t.id),renditions:i.data};d.log("Start commit"),this._channel.call("commit",o,function(o){d.log("Finish commit: "+(o.success?"success":"fail")),o.success?(d.log("Update base after commit"),n._setBase(t.id,r),o.renditions&&o.renditions.forEach(function(e,n){if(e){var r=e.split("/").pop(),o=i.data[n],a=t.getElementById(o.element);a&&(a._renditionCache=a._renditionCache||{},a._renditionCache[o.size]=r);var s=i.callbacks[n];s&&s(null,e)}})):(n._pendingSetRenditionCache[t.id]=i,t._waitForCommit(function(){n.notifyStartWrite(t,[],function(){t._deletedFromServer=o.deletedFromServer,n.updateExistingLibrary(t.collection,t,o.manifest,void 0,function(){t._commit(!0,!0)})})})),e()})}else t._dcxLock.obtain(function(){t._dcxComposite.commitChanges(function(n){t._dcxLock.release(),e(n)})})},r.prototype.resolvePullWithBranch=function(t,e,n,r,i){d.log("resolvePullWithBranch"),h.SHARED_LOCAL_STORAGE?(t._dcxComposite._current=e,this._setBase(t.id,n),d.log("Finished resolvePullWithBranch: shared local storage"),i()):r?t._dcxLock.obtain(function(){t._dcxComposite._current=e,t._dcxLock.release(),d.log("Finished resolvePullWithBranch: local merge"),i()}):t._dcxLock.obtain(function(){t._dcxComposite.resolvePullWithBranch(e,function(e,n){t._dcxLock.release(),d.log("Finished resolvePullWithBranch: remote merge"),i(e,n)})})},r.prototype.acceptPush=function(t,e){var n=this;d.log("acceptPush"),t._dcxLock.obtain(function(){t._dcxComposite.acceptPush(function(r){t._dcxLock.release(),d.log("Finished acceptPush"),n._acceptPushedBranchListeners.forEach(function(e){e(t)}),e(r)})})},r.prototype.onAcceptPushedBranch=function(t){this._acceptPushedBranchListeners.push(t)},r.prototype.removeOnAcceptPushedBranchListeners=function(){this._acceptPushedBranchListeners=[]},r.prototype._deleteLibrary=function(t,e,n){d.log("deleteLibrary");var r=t.getLibraryById(e);if(r){var i=t._libraries.indexOf(r);-1!==i&&(t._libraries.splice(i,1),delete t._libraryIdMap[r.id]),r._markDeletedLocally(!0),t._notifyChange(!0)}},r.prototype._loadBranch=function(t,e,n){var r;try{r=new a(void 0,n).parse(e),r._localStorage=t._localStorage}catch(t){}return r},r.prototype._addLibrary=function(t,e,n,r,i){n=n||t._getCompositeDir(e);var a=new o(null,null,n,null,null,{preserveFileExtensions:!0}),s=this._loadBranch(a,r,!1);if(!s)return void i(new f(f.CORRUPTED_LIBRARY,"Library corrupted in local storage",e));if("pendingDelete"===s.compositeState)return void i(null);a._current=s,this._setBase(e,r);var u=new c(t,a);t.isPublic&&(u._publicId=e,u._writable=!1),t._libraries.push(u),t._libraryIdMap[u.id]=u,t._notifyChange(!0),i(null,u)},r.prototype.createNewLibrary=function(t,e,n,r){var o=i(r);d.log("createNewLibrary"),this._addLibrary(t,e,void 0,n,function(t,e){return t||!e?void o(t):(e._commit(!1,!0),void e._waitForCommit(o))})},r.prototype.loadExistingLibrary=function(t,e,n,r,o,a,s){var u=i(s);d.log("loadExistingLibrary"),this._addLibrary(t,e,void 0,r,function(t,e){return t||!e?void u(t):(e._deletedFromServer=o,a&&e._setRenditionCache(a),void u(null,e))})},r.prototype.updateExistingLibrary=function(t,e,n,r,o){var a=this,s=i(o),u="updateExistingLibrary["+this._getLogIndex()+"]: ";if(y.areManifestsEqual(e._dcxBranch.localData,n))return d.log(u+"already up-to-date"),void s();d.log(u+"changes to update");var c=this._loadBranch(e._dcxComposite,n,!1);return c?void("pendingDelete"===c.compositeState?(t._doRemoveLibrary(e),s()):e._waitForCommit(function(){if(r){if(!y.areManifestsEqual(e._dcxBranch.localData,r))return d.log(u+"Commit aborting: something changed and it's no longer a fast-forward"),void s(!0)}else r=a._getBase(e.id);var t=a._loadBranch(e._dcxComposite,r,!0)||c;d.log(u+"base "+t.changeCount+" -> updated "+c.changeCount),e._mergeAndSwitchToBranch(c,t,function(){d.log(u+"finished merge"),h.SHARED_LOCAL_STORAGE?s(null):(e._commit(!1,!0),e._waitForCommit(s))})})):void s(new f(f.CORRUPTED_LIBRARY,"Invalid manifest",e.id))},r.prototype.setRenditionCache=function(t,e,n,r){var i=this._pendingSetRenditionCache[t.library.id],o=g.addToPendingSetRenditionCache(i,t,e,n,r);this._pendingSetRenditionCache[t.library.id]=o},r.prototype.getRenditionPath=function(t,e,n,r){r=r||0;var o=this,a=i(n),s=t._lookupRenditionPath(e||"full");if(s)return void a(null,s);var u={isPublic:t.library.collection.isPublic,userId:t.library.collection.userId,cloudId:t.library.collection.cloudId,id:t.library.id,element:t.id,size:e};d.log("Get rendition path from CCLibrary process"),this._channel.call("getrenditionpath",u,function(i){return!i&&r<h.LOCAL_RENDITION_MAX_RETRIES?(d.log("getrenditionpath: rendition not found"),void setTimeout(function(){o.getRenditionPath(t,e,n,r+1)},h.LOCAL_RENDITION_RETRY_INTERVAL)):void a(null,i)})},r.prototype.notifyDownloadRendition=function(t){this._downloadRenditionListeners.forEach(function(e){e(t)})},r.prototype.onDownloadRendition=function(t){this._downloadRenditionListeners.push(t)},r.prototype.removeOnDownloadRenditionListeners=function(){this._downloadRenditionCacheListeners=[]},r.prototype.notifyStartWrite=function(t,e,n){var r=i(n);if(!h.SHARED_LOCAL_STORAGE)return void r(null);var o={userId:t.collection.userId,cloudId:t.collection.cloudId,id:t.id,dependencies:[]};e.forEach(function(t){o.dependencies.push({userId:t.collection.userId,cloudId:t.collection.cloudId,id:t.id})}),this._channel.call("startcomponentwrite",o,function(){r(null)})},r.prototype.loadPublicLibrary=function(t,e,n,r){var o=i(r),a={isPublic:t.isPublic,cloudId:t.cloudId,id:e,url:n};this._channel.call("loadpubliclibrary",a,function(){o(null)})},r.prototype.unloadPublicLibrary=function(t,e){var n=i(e),r={isPublic:t.collection.isPublic,cloudId:t.collection.cloudId,id:t.id};this._channel.call("unloadpubliclibrary",r,function(){n(null)})},r.prototype.getAssetFromURL=function(t,e,n,r,i){if(h.SHARED_LOCAL_STORAGE){var o={isPublic:t.isPublic,userId:t.userId,cloudId:t.cloudId,url:e,headers:n,tempDir:r};this._channel.call("downloadfile",o,function(t){i(t.err,t.tempFilePath,t.etag,{headers:t.responseHeaders})})}else t._syncManager.getAssetFromURL(e,n,r,void 0,i)},r.prototype.doHeadRequestOfURL=function(t,e,n){h.SHARED_LOCAL_STORAGE?n(null):t._syncManager.doHeadRequestOfURL(e,n)},r.prototype.downloadExternalLink=function(t,e){var n={isPublic:t.element.library.collection.isPublic,userId:t.element.library.collection.userId,cloudId:t.element.library.collection.cloudId,id:t.element.library.id,element:t.element.id,representation:t.id};d.log("Download external link from CCLibrary process"),this._channel.call("downloadexternallink",n,function(t){e(t.err,t.path)})},r.prototype.createBookmark=function(t,e,n,r){var o=i(r),a={isPublic:t.isPublic,cloudId:t.cloudId,userId:t.userId,id:e,url:n};this._channel.call("createBookmark",a,function(t){var e=t&&t.err,n=t&&t.bookmark;n&&(n=new l(n._id,n._url)),o(e,n)})},r.prototype.removeBookmark=function(t,e,n){var r=i(n),o={isPublic:t.isPublic,cloudId:t.cloudId,userId:t.userId,id:e.id};this._channel.call("removeBookmark",o,function(t){r(t)})},r}),a("AdobeLibraryExternalUtils",["require","exports","module","./AdobeLibraryServices","./utils/AdobeLibraryMimeTypeUtils","./utils/AdobeLibraryRenditionUtils"],function(t,e,n){"use strict";var r=t("./AdobeLibraryServices"),i=t("./utils/AdobeLibraryMimeTypeUtils"),o=t("./utils/AdobeLibraryRenditionUtils"),a={};return a.mimeTypeToExtensions=function(t){return i.getExtensions(t)},a.extensionToMimeTypes=function(t){return i.getMimeTypes(t)},a.canGenerateRenditionFromMimeType=function(t){return o.canComputeRenditionFromMimeType(t)},a.generateUuid=function(){return r.uuid()},a}),a("AdobeLibraryExternalAnalyticsUtils",["require","exports","module","./AdobeLibraryAnalytics"],function(t,e,n){"use strict";var r=t("./AdobeLibraryAnalytics"),i={};return i.reportUseElement=function(t,e,n){r.reportUseElement(t,e,n)},i.reportCheckoutElement=function(t,e,n){r.reportCheckoutElement(t,e,n)},i.reportCreateLink=function(t,e){r.reportCreateLink(t,e)},i.reportShareElementLink=function(t){r.reportShareElementLink(t)},i.reportShareLibraryLink=function(t){r.reportShareLibraryLink(t)},i}),a("main",["require","exports","module","./AdobeLibraryServices","./AdobeLibraryConfig","./AdobeLibraryCollection","./AdobeLibraryPublicCollection","./AdobeLibraryCollectionManager","./AdobeLibraryError","./AdobeLibraryStorageInterface","./AdobeLibraryExternalUtils","./AdobeLibraryExternalAnalyticsUtils","./utils/AdobeLibraryFileUtils","./utils/AdobeLibraryManifestUtils"],function(t,e,n){"use strict";function r(t,e,n){var r=t+"/"+e,i=void 0!==m[r];return m[r]=m[r]||[],m[r].push(n),i}function i(t,e){var n;n=t===a.PUBLIC_USER_ID?v.getPublicLibraryCollection(e):v.getLibraryCollection(t,e);var r=t+"/"+e,i=m[r];i&&(delete m[r],i.forEach(function(t){t(null,n)}))}var o=t("./AdobeLibraryServices"),a=t("./AdobeLibraryConfig"),s=t("./AdobeLibraryCollection"),u=t("./AdobeLibraryPublicCollection"),c=t("./AdobeLibraryCollectionManager"),l=t("./AdobeLibraryError"),f=t("./AdobeLibraryStorageInterface"),h=t("./AdobeLibraryExternalUtils"),d=t("./AdobeLibraryExternalAnalyticsUtils"),p=t("./utils/AdobeLibraryFileUtils"),_=t("./utils/AdobeLibraryManifestUtils"),v=new c,m={},y={};return y.configure=function(t,e){if(o.hasFileSystem()||void 0!==e.SHARED_LOCAL_STORAGE||(e.SHARED_LOCAL_STORAGE=!1),o.hasFileSystem()&&!e.ROOT_DIR&&!1===e.SHARED_LOCAL_STORAGE)throw new l(l.INVALID_PARAMETER,"Missing ROOT_DIR option");if(o.hasFileSystem()&&e.ROOT_DIR&&!1!==e.SHARED_LOCAL_STORAGE)throw new l(l.INVALID_PARAMETER,"ROOT_DIR option doesn't apply when using shared local storage");if(!o.hasFileSystem()&&e.ROOT_DIR)throw new l(l.REQUIRES_FILESYSTEM,"ROOT_DIR option only applies when you have a filesystem");if(!1===e.SHARED_LOCAL_STORAGE&&!e.STORAGE_API_KEY)throw new l(l.INVALID_PARAMETER,"Missing STORAGE_API_KEY option");if(!1!==e.SHARED_LOCAL_STORAGE&&!o.hasCEPVulcan()&&!t.vulcanCall)throw new l(l.INVALID_PARAMETER,"Shared local storage requires either the CEP VulcanInterface/VulcanMessage as globals, or for you to pass in the vulcanCall dependency");if(e.ROOT_DIR)for(;-1!==["/","\\"].indexOf(e.ROOT_DIR.substr(-1));)e.ROOT_DIR=e.ROOT_DIR.slice(0,-1);Object.keys(e).forEach(function(t){a.setParameter(t,e[t])}),o.analytics=t.analytics,o.vulcanCall=t.vulcanCall,o._log=t.log,o._getDisplayName=t.getDisplayName,o._getNodeTunnelOptions=t.getNodeTunnelOptions,o.storageInterface&&o.storageInterface.shutdown(),o.storageInterface=new f(v),o.log("Configure: "+(a.SHARED_LOCAL_STORAGE?"<shared local storage>":a.ROOT_DIR))},y.setOption=function(t,e){if(-1!==["ROOT_DIR","SHARED_LOCAL_STORAGE","ELEMENT_TYPE_FILTERS","STORAGE_API_KEY"].indexOf(t))throw new l(l.INVALID_PARAMETER,"Cannot reconfigure "+t);a.setParameter(t,e),o.storageInterface.updateConfiguration()},y.getLoadedCollections=function(){return v.getLoadedCollections().slice(0)},y.getLoadedCollectionById=function(t,e){return v.getLibraryCollection(t,e)},y.getLoadedPublicCollectionById=function(t){return v.getPublicLibraryCollection(t)},y.addLoadedCollectionsListener=function(t){v.addLoadedCollectionsListener(t)},y.removeLoadedCollectionsListener=function(t){v.removeLoadedCollectionsListener(t)},y.getRootDir=function(){if(!o.hasFileSystem())throw new l(l.REQUIRES_FILESYSTEM,"ROOT_DIR option only applies when you have a filesystem");return a.ROOT_DIR},y.unloadLibraryCollection=function(t){if(a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"unloadLibraryCollection() not supported with shared local storage");t.stopPolling(),t._removeAllListeners(),v.removeLibraryCollection(t)},y.loadLibraryCollection=function(t,e){function n(){v.addLibraryCollection(u),a.AUTO_START_POLLING&&u.startPolling(),i(t.USER_ID,t.CLOUD_ID)}if("function"==typeof t)return void(e=t)(new l(l.INVALID_PARAMETER,"options argument not specified"));if(a.SHARED_LOCAL_STORAGE)return void e(new l(l.NOT_SUPPORTED,"loadLibraryCollection() not supported with shared local storage"));if(o.hasFileSystem()&&!a.SHARED_LOCAL_STORAGE&&!a.ROOT_DIR)return void e(new l(l.INVALID_PARAMETER,"ROOT_DIR not configured. Make sure you call CCLibraries.configure()"));if(t=t||{},o.hasFileSystem()&&!t.USER_ID)return void e(new l(l.INVALID_PARAMETER,"Missing USER_ID option"));if(t.CLOUD_ID=t.CLOUD_ID||a.DEFAULT_CLOUD_ID,!t.STORAGE_HOSTNAME)return void e(new l(l.INVALID_PARAMETER,"Missing STORAGE_HOSTNAME option"));var u=v.getLibraryCollection(t.USER_ID,t.CLOUD_ID),c=r(t.USER_ID,t.CLOUD_ID,e);if(u&&!c)return void i(t.USER_ID,t.CLOUD_ID);if(!c)if(u=new s(t),o.hasFileSystem())p.doesRootDirExist(u,function(t,e){u._load(function(){e||u._setInitialSyncState(!0),u.sync(function(){u._setInitialSyncState(!1)}),n()})});else if("all"===t.WAIT_FOR)u._setInitialSyncState(!0),u.sync(function(){u._setInitialSyncState(!1),n()});else if(_.validateLibraryId(t.WAIT_FOR,!1)){u._setInitialSyncState(!0,[t.WAIT_FOR]),u.sync(function(){u._setInitialSyncState(!1)});var f=function(){("syncing"!==u.syncState||"pending"!==u._libraryIdMap[t.WAIT_FOR])&&(u.removeChangeListener(f),u.removeSyncListener(f),n())};u.addChangeListener(f),u.addSyncListener(f)}else u._setInitialSyncState(!0),u.sync(function(){u._setInitialSyncState(!1)}),n()},y.loadPublicLibraryCollection=function(t,e){function n(){v.addLibraryCollection(s),a.AUTO_START_POLLING&&s.startPolling(),i(a.PUBLIC_USER_ID,t.CLOUD_ID)}if("function"==typeof t)return void(e=t)(new l(l.INVALID_PARAMETER,"options argument not specified"));if(a.SHARED_LOCAL_STORAGE)return void e(new l(l.NOT_SUPPORTED,"loadPublicLibraryCollection() not supported with shared local storage"));if(o.hasFileSystem()&&!a.SHARED_LOCAL_STORAGE&&!a.ROOT_DIR)return void e(new l(l.INVALID_PARAMETER,"ROOT_DIR not configured. Make sure you call CCLibraries.configure()"));if(t=t||{},t.CLOUD_ID=t.CLOUD_ID||a.DEFAULT_CLOUD_ID,!t.STORAGE_HOSTNAME)return void e(new l(l.INVALID_PARAMETER,"Missing STORAGE_HOSTNAME option"));var s=v.getPublicLibraryCollection(t.CLOUD_ID),c=r(a.PUBLIC_USER_ID,t.CLOUD_ID,e);return s&&!c?void i(a.PUBLIC_USER_ID,t.CLOUD_ID):void(c||(s=new u(t),o.hasFileSystem()?s._load(function(){s.sync(),n()}):n()))},y.isConnected=function(){if(!a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"isConnected() is only applicable if using shared local storage");return o.storageInterface&&o.storageInterface.isConnected()},y.reconnect=function(){if(!a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"reconnect() is only applicable if using shared local storage");o.storageInterface&&o.storageInterface.reconnect()},y.getServiceInfo=function(){if(!a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"getServiceInfo() is only applicable if using shared local storage");return o.storageInterface&&o.storageInterface.getServiceInfo()},y.isSyncingEnabled=function(){if(a.SHARED_LOCAL_STORAGE){var t=y.getServiceInfo();return!(!t||!t.syncingEnabled)}return a.SYNCING_ENABLED},y.enableSyncing=function(){if(a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"enableSyncing() not supported with shared local storage");a.SYNCING_ENABLED=!0,y.getLoadedCollections().forEach(function(t){t.sync()})},y.disableSyncing=function(){if(a.SHARED_LOCAL_STORAGE)throw new l(l.NOT_SUPPORTED,"disableSyncing() not supported with shared local storage");a.SYNCING_ENABLED=!1},y.resolveElementReference=function(t){t=t||"";var e,n=new RegExp("cloud-asset://([^/]+)(.+)/([A-Za-z0-9-]+);node=([A-Za-z0-9-]+)"),r=t.match(n);if(r){var i=r[1],o=r[2],a=r[3],s=r[4];y.getLoadedCollections().every(function(t){if(t._syncManager.getElementRefDomain()===i&&t._syncManager.getElementRefPath()===o){var n=t.getLibraryById(a);return n&&(e=n.getElementById(s)),!1}return!0})}return e},y.errors=l,y.utils=h,y.analyticsUtils=d,y}),o("main")})}).call(e,n(165).Buffer,n(43))},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,a,s=t.length;o=r(t),a=new f(3*s/4-o),n=o>0?s-4:s;var u=0;for(e=0;e<n;e+=4)i=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function a(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i="",o=[],a=0,u=n-r;a<u;a+=16383)o.push(s(t,a,a+16383>u?u:a+16383));return 1===r?(e=t[n-1],i+=c[e>>2],i+=c[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=c[e>>10],i+=c[e>>4&63],i+=c[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=u;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;d<p;++d)c[d]=h[d],l[h.charCodeAt(d)]=d;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*_}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,,,,function(t,e,n){n(486),t.exports=n(16).Math.log2},function(t,e,n){var r=n(20);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},,,,function(t,e,n){var r=n(491),i=n(492),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e,n){function r(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var a=void 0!==t.clockseq?t.clockseq:u,f=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:l+1,d=f-c+(h-l)/1e4;if(d<0&&void 0===t.clockseq&&(a=a+1&16383),(d<0||f>c)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=h,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+h)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var _=f/4294967296*1e4&268435455;i[r++]=_>>>8&255,i[r++]=255&_,i[r++]=_>>>24&15|16,i[r++]=_>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var v=t.node||s,m=0;m<6;++m)i[r+m]=v[m];return e||o(i)}var i=n(237),o=n(238),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;t.exports=r},function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var a=t.random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[r+s]=a[s];return e||o(a)}var i=n(237),o=n(238);t.exports=r},function(t,e,n){t.exports={h32:n(494),h64:n(497)}},function(t,e,n){(function(e){function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}function i(){return 2==arguments.length?new i(arguments[1]).update(arguments[0]).digest():this instanceof i?void o.call(this,arguments[0]):new i(arguments[0])}function o(t){return this.seed=t instanceof a?t.clone():a(t),this.v1=this.seed.clone().add(s).add(u),this.v2=this.seed.clone().add(u),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(s),this.total_len=0,this.memsize=0,this.memory=null,this}var a=n(239).UINT32;a.prototype.xxh_update=function(t,e){var n,r,i=u._low,o=u._high;r=t*i,n=r>>>16,n+=e*i,n&=65535,n+=t*o;var a=this._low+(65535&r),c=a>>>16;c+=this._high+(65535&n);var l=c<<16|65535&a;l=l<<13|l>>>19,a=65535&l,c=l>>>16,i=s._low,o=s._high,r=a*i,n=r>>>16,n+=c*i,n&=65535,n+=a*o,this._low=65535&r,this._high=65535&n};var s=a("2654435761"),u=a("2246822519"),c=a("3266489917"),l=a("668265263"),f=a("374761393");i.prototype.init=o,i.prototype.update=function(t){var n,i="string"==typeof t;i&&(t=r(t),i=!1,n=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(n=!0,t=new Uint8Array(t));var o=0,a=t.length,s=o+a;if(0==a)return this;if(this.total_len+=a,0==this.memsize&&(this.memory=i?"":n?new Uint8Array(16):new e(16)),this.memsize+a<16)return i?this.memory+=t:n?this.memory.set(t.subarray(0,a),this.memsize):t.copy(this.memory,this.memsize,0,a),this.memsize+=a,this;if(this.memsize>0){i?this.memory+=t.slice(0,16-this.memsize):n?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var u=0;i?(this.v1.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v2.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v3.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2)),u+=4,this.v4.xxh_update(this.memory.charCodeAt(u+1)<<8|this.memory.charCodeAt(u),this.memory.charCodeAt(u+3)<<8|this.memory.charCodeAt(u+2))):(this.v1.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v2.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v3.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2]),u+=4,this.v4.xxh_update(this.memory[u+1]<<8|this.memory[u],this.memory[u+3]<<8|this.memory[u+2])),o+=16-this.memsize,this.memsize=0,i&&(this.memory="")}if(o<=s-16){var c=s-16;do{i?(this.v1.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v2.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v3.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2)),o+=4,this.v4.xxh_update(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2))):(this.v1.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v2.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v3.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2]),o+=4,this.v4.xxh_update(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2])),o+=4}while(o<=c)}return o<s&&(i?this.memory+=t.slice(o):n?this.memory.set(t.subarray(o,s),this.memsize):t.copy(this.memory,this.memsize,o,s),this.memsize=s-o),this},i.prototype.digest=function(){var t,e,n=this.memory,r="string"==typeof n,i=0,o=this.memsize,h=new a;for(t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(f),t.add(h.fromNumber(this.total_len));i<=o-4;)r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2)):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2]),t.add(h.multiply(c)).rotl(17).multiply(l),i+=4;for(;i<o;)h.fromBits(r?n.charCodeAt(i++):n[i++],0),t.add(h.multiply(f)).rotl(11).multiply(s);return e=t.clone().shiftRight(15),t.xor(e).multiply(u),e=t.clone().shiftRight(13),t.xor(e).multiply(c),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t},t.exports=i}).call(e,n(165).Buffer)},function(t,e,n){var r,i;!function(n){function o(t,e){return this instanceof o?(this._low=0,this._high=0,this.remainder=null,void 0===e?s.call(this,t):"string"==typeof t?u.call(this,t,e):void a.call(this,t,e)):new o(t,e)}function a(t,e){return this._low=0|t,this._high=0|e,this}function s(t){return this._low=65535&t,this._high=t>>>16,this}function u(t,e){var n=parseInt(t,e||10);return this._low=65535&n,this._high=n>>>16,this}o(Math.pow(36,5)),o(Math.pow(16,7)),o(Math.pow(10,9)),o(Math.pow(2,30)),o(36),o(16),o(10),o(2);o.prototype.fromBits=a,o.prototype.fromNumber=s,o.prototype.fromString=u,o.prototype.toNumber=function(){return 65536*this._high+this._low},o.prototype.toString=function(t){return this.toNumber().toString(t||10)},o.prototype.add=function(t){var e=this._low+t._low,n=e>>>16;return n+=this._high+t._high,this._low=65535&e,this._high=65535&n,this},o.prototype.subtract=function(t){return this.add(t.clone().negate())},o.prototype.multiply=function(t){var e,n,r=this._high,i=this._low,o=t._high,a=t._low;return n=i*a,e=n>>>16,e+=r*a,e&=65535,e+=i*o,this._low=65535&n,this._high=65535&e,this},o.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new o(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new o(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},o.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},o.prototype.greaterThan=o.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},o.prototype.lessThan=o.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},o.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},o.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},o.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},o.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},o.prototype.shiftRight=o.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},o.prototype.shiftLeft=o.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},o.prototype.rotateLeft=o.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},o.prototype.clone=function(){return new o(this._low,this._high)},r=[],void 0!==(i=function(){return o}.apply(e,r))&&(t.exports=i)}()},function(t,e,n){var r,i;!function(n){function o(t,e,n,r){return this instanceof o?(this.remainder=null,"string"==typeof t?u.call(this,t,e):void 0===e?s.call(this,t):void a.apply(this,arguments)):new o(t,e,n,r)}function a(t,e,n,r){return void 0===n?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|n,this._a48=0|r,this)}function s(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function u(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=c[e]||new o(Math.pow(e,5)),r=0,i=t.length;r<i;r+=5){var a=Math.min(5,i-r),s=parseInt(t.slice(r,r+a),e);this.multiply(a<5?new o(Math.pow(e,a)):n).add(new o(s))}return this}var c={16:o(Math.pow(16,5)),10:o(Math.pow(10,5)),2:o(Math.pow(2,5))},l={16:o(16),10:o(10),2:o(2)};o.prototype.fromBits=a,o.prototype.fromNumber=s,o.prototype.fromString=u,o.prototype.toNumber=function(){return 65536*this._a16+this._a00},o.prototype.toString=function(t){t=t||10;var e=l[t]||new o(t);if(!this.gt(e))return this.toNumber().toString(t);for(var n=this.clone(),r=new Array(64),i=63;i>=0&&(n.div(e),r[i]=n.remainder.toNumber().toString(t),n.gt(e));i--);return r[i-1]=n.toNumber().toString(t),r.join("")},o.prototype.add=function(t){var e=this._a00+t._a00,n=e>>>16;n+=this._a16+t._a16;var r=n>>>16;r+=this._a32+t._a32;var i=r>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},o.prototype.subtract=function(t){return this.add(t.clone().negate())},o.prototype.multiply=function(t){var e=this._a00,n=this._a16,r=this._a32,i=this._a48,o=t._a00,a=t._a16,s=t._a32,u=t._a48,c=e*o,l=c>>>16;l+=e*a;var f=l>>>16;l&=65535,l+=n*o,f+=l>>>16,f+=e*s;var h=f>>>16;return f&=65535,f+=n*a,h+=f>>>16,f&=65535,f+=r*o,h+=f>>>16,h+=e*u,h&=65535,h+=n*s,h&=65535,h+=r*a,h&=65535,h+=i*o,this._a00=65535&c,this._a16=65535&l,this._a32=65535&f,this._a48=65535&h,this},o.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new o(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new o(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},o.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},o.prototype.greaterThan=o.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},o.prototype.lessThan=o.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},o.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},o.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},o.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},o.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},o.prototype.shiftRight=o.prototype.shiftr=function(t){return t%=64,t>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},o.prototype.shiftLeft=o.prototype.shiftl=function(t,e){return t%=64,t>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},o.prototype.rotateLeft=o.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<t|r>>>32-t,o=r<<t|n>>>32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>t|r<<32-t,o=r>>>t|n<<32-t;return this._a00=65535&o,this._a16=o>>>16,this._a32=65535&i,this._a48=i>>>16,this},o.prototype.clone=function(){return new o(this._a00,this._a16,this._a32,this._a48)},r=[],void 0!==(i=function(){return o}.apply(e,r))&&(t.exports=i)}()},function(t,e,n){(function(e){function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return new Uint8Array(e)}function i(){return 2==arguments.length?new i(arguments[1]).update(arguments[0]).digest():this instanceof i?void o.call(this,arguments[0]):new i(arguments[0])}function o(t){return this.seed=t instanceof a?t.clone():a(t),this.v1=this.seed.clone().add(s).add(u),this.v2=this.seed.clone().add(u),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(s),this.total_len=0,this.memsize=0,this.memory=null,this}var a=n(239).UINT64,s=a("11400714785074694791"),u=a("14029467366897019727"),c=a("1609587929392839161"),l=a("9650029242287828579"),f=a("2870177450012600261");i.prototype.init=o,i.prototype.update=function(t){var n,i="string"==typeof t;i&&(t=r(t),i=!1,n=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(n=!0,t=new Uint8Array(t));var o=0,c=t.length,l=o+c;if(0==c)return this;if(this.total_len+=c,0==this.memsize&&(this.memory=i?"":n?new Uint8Array(32):new e(32)),this.memsize+c<32)return i?this.memory+=t:n?this.memory.set(t.subarray(0,c),this.memsize):t.copy(this.memory,this.memsize,0,c),this.memsize+=c,this;if(this.memsize>0){i?this.memory+=t.slice(0,32-this.memsize):n?this.memory.set(t.subarray(0,32-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,32-this.memsize);var f=0;if(i){var h;h=a(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v1.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v2.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v3.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v4.add(h.multiply(u)).rotl(31).multiply(s)}else{var h;h=a(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v1.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v2.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v3.add(h.multiply(u)).rotl(31).multiply(s),f+=8,h=a(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v4.add(h.multiply(u)).rotl(31).multiply(s)}o+=32-this.memsize,this.memsize=0,i&&(this.memory="")}if(o<=l-32){var d=l-32;do{if(i){var h;h=a(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v1.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v2.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v3.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t.charCodeAt(o+1)<<8|t.charCodeAt(o),t.charCodeAt(o+3)<<8|t.charCodeAt(o+2),t.charCodeAt(o+5)<<8|t.charCodeAt(o+4),t.charCodeAt(o+7)<<8|t.charCodeAt(o+6)),this.v4.add(h.multiply(u)).rotl(31).multiply(s)}else{var h;h=a(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v1.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v2.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v3.add(h.multiply(u)).rotl(31).multiply(s),o+=8,h=a(t[o+1]<<8|t[o],t[o+3]<<8|t[o+2],t[o+5]<<8|t[o+4],t[o+7]<<8|t[o+6]),this.v4.add(h.multiply(u)).rotl(31).multiply(s)}o+=8}while(o<=d)}return o<l&&(i?this.memory+=t.slice(o):n?this.memory.set(t.subarray(o,l),this.memsize):t.copy(this.memory,this.memsize,o,l),this.memsize=l-o),this},i.prototype.digest=function(){var t,e,n=this.memory,r="string"==typeof n,i=0,o=this.memsize,h=new a;for(this.total_len>=32?(t=this.v1.clone().rotl(1),t.add(this.v2.clone().rotl(7)),t.add(this.v3.clone().rotl(12)),t.add(this.v4.clone().rotl(18)),t.xor(this.v1.multiply(u).rotl(31).multiply(s)),t.multiply(s).add(l),t.xor(this.v2.multiply(u).rotl(31).multiply(s)),t.multiply(s).add(l),t.xor(this.v3.multiply(u).rotl(31).multiply(s)),t.multiply(s).add(l),t.xor(this.v4.multiply(u).rotl(31).multiply(s)),t.multiply(s).add(l)):t=this.seed.clone().add(f),t.add(h.fromNumber(this.total_len));i<=o-8;)r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2),n.charCodeAt(i+5)<<8|n.charCodeAt(i+4),n.charCodeAt(i+7)<<8|n.charCodeAt(i+6)):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2],n[i+5]<<8|n[i+4],n[i+7]<<8|n[i+6]),h.multiply(u).rotl(31).multiply(s),t.xor(h).rotl(27).multiply(s).add(l),i+=8;for(i+4<=o&&(r?h.fromBits(n.charCodeAt(i+1)<<8|n.charCodeAt(i),n.charCodeAt(i+3)<<8|n.charCodeAt(i+2),0,0):h.fromBits(n[i+1]<<8|n[i],n[i+3]<<8|n[i+2],0,0),t.xor(h.multiply(s)).rotl(23).multiply(u).add(c),i+=4);i<o;)h.fromBits(r?n.charCodeAt(i++):n[i++],0,0,0),t.xor(h.multiply(f)).rotl(11).multiply(s);return e=t.clone().shiftRight(33),t.xor(e).multiply(u),e=t.clone().shiftRight(29),t.xor(e).multiply(c),e=t.clone().shiftRight(32),t.xor(e),this.init(this.seed),t},t.exports=i}).call(e,n(165).Buffer)},function(t,e,n){var r;void 0!==(r=function(t,e,r){"use strict";var i=n(499),o={};return o.createInstance=function(t,e){return new i(t,e)},o}.call(e,n,e,t))&&(t.exports=r)},function(t,e,n){(function(r){var i;void 0!==(i=function(t,e,n){"use strict";function i(){return void 0!==r&&r.Buffer}function o(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function a(t,e){var n=t;if(t&&t.length>e&&e>0){var r=t.length-e;n=t.slice(r,t.length)}return n}function s(t,e){var n=t.toString();if(n.length<e){var r=[];r.length=e-n.length+1,n=r.join("0")+n}return n}function u(t,e){return Object.getOwnPropertyNames(e).forEach(function(n){if("object"==typeof e[n])"object"!=typeof t[n]&&(t[n]={}),u(t[n],e[n]);else{var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}}),t}function c(t){var e=function(){};t.on("data",e),t.on("end",e)}function l(t,e,n){t.forEach(function(t){setTimeout(function(){t(e,n)})})}function f(t,e){var n=this;t=t||{},e=e||{};var r=function(t){throw n._log(t),new Error("ERROR: "+t)};this._queuedEvents=[],this._queuedCallbacks=[],this._lastSendTime=0,this._isEnabled=!1,this._dependencies=u({},t),t.getAccessToken&&"function"==typeof t.getAccessToken||r("Missing dependency: getAccessToken"),this._options={},Object.keys(d).forEach(function(t){this._options[t]=e[t]||d[t]},this),p.forEach(function(t){this._options[t]||r("Missing option: "+t)},this)}var h={prod:"cc-api-data.adobe.io",stage:"cc-api-data-stage.adobe.io",dev:"cc-api-data-dev.adobe.io"},d={ENVIRONMENT:"prod",ALLOW_NO_TOKEN:!1,ANALYTICS_INGEST_TYPE:"dunamis",ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:1e4,ANALYTICS_API_KEY:null,ANALYTICS_X_PRODUCT:null,ANALYTICS_X_PRODUCT_LOCATION:void 0,ANALYTICS_PROJECT:null,ANALYTICS_USER_REGION:"UNKNOWN",TIMESTAMP_PROPERTY_NAME:"event.dts_end"},p=["ANALYTICS_API_KEY","ANALYTICS_X_PRODUCT","ANALYTICS_PROJECT"];return f.prototype._log=function(t){(this._dependencies.log||console.log.bind(console))("Ingest :: "+t)},f.prototype._getAgent=function(t,e){if(this._dependencies.getAgent)return void this._dependencies.getAgent(t,e);e(null,{})},f.prototype._getAccessToken=function(t){this._dependencies.getAccessToken(t)},f.prototype._clearAccessToken=function(t){this._dependencies.clearAccessToken&&this._dependencies.clearAccessToken()},f.prototype._getEnvironment=function(){return h[this._options.ENVIRONMENT]?this._options.ENVIRONMENT:"prod"},f.prototype._getAnalyticsHost=function(){return h[this._getEnvironment()]},f.prototype._formatTimestamp=function(t){var e=t.getFullYear(),n=s(t.getMonth()+1,2),r=s(t.getDate(),2),i=s(t.getHours(),2),o=s(t.getMinutes(),2),a=s(t.getSeconds(),2),u=s(t.getMilliseconds(),3),c=t.getTimezoneOffset(),l=c<0?"+":"-",f=Math.floor(Math.abs(c)/60),h=Math.abs(c)%60;return e+"-"+n+"-"+r+"T"+i+":"+o+":"+a+"."+u+(l+s(f,2)+s(h,2))},f.prototype._updateDebounce=function(t){var e=t&&(t["retry-after"]||t["Retry-After"]),n=0;if(e){var r;try{r=parseInt(e,10)}catch(t){}if(r)n=Math.max(0,r);else{var i=Date.parse(e);if(i){var o=(new Date).valueOf();n=Math.max(0,i-o)/1e3+Math.floor(10*Math.random())}}}this._options.ANALYTICS_DEBOUNCE=Math.max(1e3*n,this._options.ANALYTICS_DEBOUNCE)},f.prototype._queueEvent=function(t){this._queuedEvents.length>=this._options.ANALYTICS_MAX_QUEUED_EVENTS&&this._queuedEvents.shift(),this._queuedEvents.push(t)},f.prototype._requeueEvents=function(t){this._queuedEvents=t.concat(this._queuedEvents),this._queuedEvents=a(this._queuedEvents,this._options.ANALYTICS_MAX_QUEUED_EVENTS)},f.prototype._sendAnalytics=function(t,e,n){var r=this;if(n=n||0,e&&this._queuedCallbacks.push(e),!this._isEnabled||0===this._queuedEvents.length){var a=this._queuedCallbacks;return this._queuedCallbacks=[],void(this._isEnabled?l(a,null,0):l(a,new Error("Analytics Disabled")))}var s=this._options.ANALYTICS_DEBOUNCE;if(t&&(s=0,clearTimeout(this._pendingSendAnalyticsTimeout),this._pendingSendAnalyticsTimeout=void 0),this._sendingEvents||this._pendingSendAnalyticsTimeout)return void this._log("Queued "+this._queuedEvents.length+" events to be sent.");var f=(new Date).valueOf();if(f-this._lastSendTime<s)return void(this._pendingSendAnalyticsTimeout=setTimeout(function(){r._pendingSendAnalyticsTimeout=void 0,r._sendAnalytics()},s));this._lastSendTime=f,this._sendingEvents=this._queuedEvents,this._sendingCallbacks=this._queuedCallbacks,this._queuedEvents=[],this._queuedCallbacks=[];var h=o(),d="["+h+"] ",p={events:this._sendingEvents},_=function(t){var e=r._queuedEvents.length,n=r._sendingEvents?r._sendingEvents.length:0;t?n>0&&(r._requeueEvents(r._sendingEvents),r._log(d+"Error sending "+n+" events: "+t)):r._log(d+"Success sending "+n+" events: "+JSON.stringify(r._sendingEvents)),delete r._sendingEvents;var i=r._sendingCallbacks;delete r._sendingCallbacks,t?i&&l(i,t):l(i,null,n),e>0&&r._sendAnalytics()},v=function(t,e){return r._updateDebounce(e),401===t&&0===n?(r._clearAccessToken(),r._requeueEvents(r._sendingEvents),delete r._sendingEvents,r._queuedCallbacks=r._sendingCallbacks.concat(r._queuedCallbacks),delete r._sendingCallbacks,r._log(d+"Access token is expired. Retry one more time."),void r._sendAnalytics(!0,void 0,n+1)):200!==t?void _(new Error("Unexpected Response: "+t)):void _()};this._getAccessToken(function(t,e){if(t)return void _(t);if(!(e&&0!==e.length||r._options.ALLOW_NO_TOKEN))return void _(new Error("No access token"));var n="https://"+r._getAnalyticsHost();if(r._log(d+"Sending analytics to "+n+"/ingest"),i()){var o={"x-api-key":r._options.ANALYTICS_API_KEY,"X-Product":r._options.ANALYTICS_X_PRODUCT,"X-Request-Id":h,"Content-Type":"application/json"};e&&(o.Authorization="Bearer "+e);var a={hostname:r._getAnalyticsHost(),port:443,path:"/ingest",method:"POST",headers:o};r._options.ANALYTICS_X_PRODUCT_LOCATION&&(a.headers["X-Product-Location"]=r._options.ANALYTICS_X_PRODUCT_LOCATION),r._getAgent(n,function(t,e){e&&e.agent?a.agent=e&&e.agent:u(a,e||{});var n=nodeRequire("https"),r=n.request(a,function(t){t&&c(t);var e=t&&t.statusCode,n=t&&t.headers;v(e,n)});r.once("error",function(t){_(t)}),r.end(JSON.stringify(p))})}else{var s=JSON.stringify(p);!function(t){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===this.readyState){var t=i.getAllResponseHeaders();v(this.status,t)}},i.onerror=function(t){_(new Error(t))},i.open("POST",n+"/ingest",!0),i.setRequestHeader("x-api-key",r._options.ANALYTICS_API_KEY),i.setRequestHeader("x-user-region",r._options.ANALYTICS_USER_REGION),i.setRequestHeader("Content-Type","application/json"),e&&i.setRequestHeader("Authorization","Bearer "+e),i.setRequestHeader("X-Product",r._options.ANALYTICS_X_PRODUCT),i.setRequestHeader("X-Product-Location",r._options.ANALYTICS_X_PRODUCT_LOCATION),i.setRequestHeader("X-Request-Id",h),i.send(t)}(s)}})},f.prototype.enable=function(t){this._isEnabled=t,t&&this._sendAnalytics(!0)},f.prototype.postEvent=function(t,e){var n=this._formatTimestamp(new Date);t[this._options.TIMESTAMP_PROPERTY_NAME]=n;var r={time:n,project:this._options.ANALYTICS_PROJECT,environment:this._getEnvironment(),ingesttype:this._options.ANALYTICS_INGEST_TYPE,data:t};this._queueEvent(r),this._sendAnalytics(!1,e)},f.prototype.flush=function(t,e){this._sendAnalytics(t,e)},f}.call(e,n,e,t))&&(t.exports=i)}).call(e,n(43))},,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=r(o),s=n(1),u=r(s),c=n(124),l=n(505),f=r(l),h=n(18),d=r(h),p=n(11),_=r(p),v=function(){function t(){(0,a.default)(this,t)}return(0,u.default)(t,null,[{key:"make",value:function(t){var e=t.attributes,n=t.events,r=t.blocks,o=t.init,a=t.dispose,s=d.default.attachBlockTemplates(r),u=s.children;if(!u)return _.default.EmptyTemplate;var l=null;return e&&(l=e.map(function(t){return{name:t.original||t.name,value:t.value||function(e){return t.get.call(e)}}})),n&&(l||(l=[]),n.forEach(function(t){l.push({name:"on-"+(t.original||t.name),value:t.value})})),_.default.make({render:function(t,e){var r=e.$_svg=document.createElementNS(c.SvgNS,"svg");t!==f.default&&(r.setAttribute("version","1.1"),r.setAttribute("xmlns",c.SvgNS),r.setAttributeNS(c.XlinkNS,"xlink",c.XlinkNS),r.setAttributeNS(c.XmlNS,"space","preserve"),i||(i=new f.default(t.scope)));var a=i.depth;i.depth=t.depth,o&&o(e,r),t.pushNode(r);var s=i,h=s.parentNode,d=s.nextNode;i.parentNode=r,i.nextNode=null;var p=i.pushScope(t.scope),_=e.$_view=u.make(i);if(_.$_parent=e,u.render(i,_),l){var v={$_view:e};n&&(r.$_view=e),e.$_svg_attributes=t.updateSpreadAttribute(r,l,v,null)}i.restoreScope(p),i.depth=a,i.parentNode=h,i.nextNode=d},reuse:function(t,e){o&&o(e,e.$_svg);var r=i.pushScope(t.scope);if(u.reuse(i,e.$_view),l){var a={$_view:e};n&&(e.$_svg.$_view=e),e.$_svg_attributes=t.updateSpreadAttribute(e.$_svg,l,a,e.$_svg_attributes)}i.restoreScope(r)},dispose:function(t,e){a&&a(e),e.$_svg_attributes&&(n&&(e.$_svg.$_view=null),e.$_svg_attributes=t.updateSpreadAttribute(e.$_svg,null,{$_view:e},e.$_svg_attributes)),u.dispose(i,e.$_view)},move:function(t,e){t.pushNode(e.$_svg)},firstChild:function(t,e){return e.$_svg},lastChild:function(t,e){return e.$_svg}})}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=new a.default(t,e,n),i=r.getDocument();return r._group_g=!1,r.makeNode=function(t){return i.createElementNS(s.SvgNS,t)},r.ensureAttr=function(t){var e=t.match(l);if(e){var n=s.SvgNamespaces[e[1]];if(n)return c.default.make(n,e[2])}return this.setAttr},r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(155),a=r(o),s=n(124),u=n(506),c=r(u),l=/^([^:]+):(.+)$/},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={make:function(t,e){return function(n,r,i){n.setAttributeNS(t,e,i)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t instanceof l.default&&(t.length,t=t.base),t?Array.isArray(t)?t:t[u.default]?(0,a.default)(t):t:null}Object.defineProperty(e,"__esModule",{value:!0});var o=n(102),a=r(o),s=n(136),u=r(s);e.readCollection=i;var c=n(119),l=r(c)},,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(4),d=r(h),p=n(21),_=r(p),v=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,d.default)(e,t),(0,c.default)(e,null,[{key:"makeConditionReader",value:function(t){return t&&t.getValue}}]),e}(_.default);v.placeholder="empty using",e.default=v},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i,o,a){e.horizontalThumb_interaction_binder=n,e.horizontalThumb_interaction_invalidate=r;var s=e.horizontalThumb_interaction_value;(o||s!==i)&&(e.horizontalThumb_interaction_value=i,e.horizontalThumb_interaction_state=t.attr._interaction(e.horizontalThumb,"interaction",i,e.horizontalThumb_interaction_state,k,t,a))}function o(t){return{name:"scrollbar",model:{type:"thumb",x:!0,y:0,track:t.horizontalTrack,thumb:t.horizontalThumb}}}function a(t,e,n,r,i,o){e.horizontalThumb_style$45height_binder=n,e.horizontalThumb_style$45height_invalidate=r;var a=e.horizontalThumb_style$45height_value;(o||a!==i)&&(e.horizontalThumb_style$45height_value=i,e.horizontalThumb_style$45height_state=t.attr._style$45height(e.horizontalThumb,"style-height",i,e.horizontalThumb_style$45height_state))}function s(t){return t.$_parent.$_parent.$_scope._this.horizontalThumbHeight}function u(t,e,n,r,i,o){e.horizontalThumb_style$45width_binder=n,e.horizontalThumb_style$45width_invalidate=r;var a=e.horizontalThumb_style$45width_value;(o||a!==i)&&(e.horizontalThumb_style$45width_value=i,e.horizontalThumb_style$45width_state=t.attr._style$45width(e.horizontalThumb,"style-width",i,e.horizontalThumb_style$45width_state))}function c(t){return t.$_parent.$_parent.$_scope._this.horizontalThumbWidth}function l(t,e,n,r,i,o){e.horizontalThumb_style$45transform_binder=n,e.horizontalThumb_style$45transform_invalidate=r;var a=e.horizontalThumb_style$45transform_value;(o||a!==i)&&(e.horizontalThumb_style$45transform_value=i,e.horizontalThumb_style$45transform_state=t.attr._style$45transform(e.horizontalThumb,"style-transform",i,e.horizontalThumb_style$45transform_state))}function f(t){return t.$_parent.$_parent.$_scope._this.horizontalThumbTransform}function h(t,e,n,r,i,o){e.horizontalThumb_class_binder=n,e.horizontalThumb_class_invalidate=r;var a=e.horizontalThumb_class_value;(o||a!==i)&&(e.horizontalThumb_class_value=i,e.horizontalThumb_class_state=t.attr._class(e.horizontalThumb,"class",i,e.horizontalThumb_class_state))}function d(t){return Re.default.thumb}function p(t,e,n,r,i,o,a){e.horizontalTrack_interaction_binder=n,e.horizontalTrack_interaction_invalidate=r;var s=e.horizontalTrack_interaction_value;(o||s!==i)&&(e.horizontalTrack_interaction_value=i,e.horizontalTrack_interaction_state=t.attr._interaction(e.horizontalTrack,"interaction",i,e.horizontalTrack_interaction_state,L,t,a))}function _(t){return{name:"scrollbar",model:{type:"track",x:!0,y:0,track:t.horizontalTrack}}}function v(t,e,n,r,i,o){e.horizontalTrack_style$45height_binder=n,e.horizontalTrack_style$45height_invalidate=r;var a=e.horizontalTrack_style$45height_value;(o||a!==i)&&(e.horizontalTrack_style$45height_value=i,e.horizontalTrack_style$45height_state=t.attr._style$45height(e.horizontalTrack,"style-height",i,e.horizontalTrack_style$45height_state))}function m(t){return t.$_parent.$_parent.$_scope._this.horizontalTrackHeight}function y(t,e,n,r,i,o){e.horizontalTrack_style$45width_binder=n,e.horizontalTrack_style$45width_invalidate=r;var a=e.horizontalTrack_style$45width_value;(o||a!==i)&&(e.horizontalTrack_style$45width_value=i,e.horizontalTrack_style$45width_state=t.attr._style$45width(e.horizontalTrack,"style-width",i,e.horizontalTrack_style$45width_state))}function g(t){return t.$_parent.$_parent.$_scope._this.horizontalTrackWidth}function b(t,e,n,r,i,o){e.horizontalTrack_style$45transform_binder=n,e.horizontalTrack_style$45transform_invalidate=r;var a=e.horizontalTrack_style$45transform_value;(o||a!==i)&&(e.horizontalTrack_style$45transform_value=i,e.horizontalTrack_style$45transform_state=t.attr._style$45transform(e.horizontalTrack,"style-transform",i,e.horizontalTrack_style$45transform_state))}function A(t){return t.$_parent.$_parent.$_scope._this.horizontalTrackTransform}function w(t,e,n,r,i,o){e.horizontalTrack_class_binder=n,e.horizontalTrack_class_invalidate=r;var a=e.horizontalTrack_class_value;(o||a!==i)&&(e.horizontalTrack_class_value=i,e.horizontalTrack_class_state=t.attr._class(e.horizontalTrack,"class",i,e.horizontalTrack_class_state))}function E(t){return Re.default.track}function C(t,e,n,r,i,o){e.div_class_binder=n,e.div_class_invalidate=r;var a=e.div_class_value;(o||a!==i)&&(e.div_class_value=i,e.div_class_state=t.attr._class(e.div,"class",i,e.div_class_state))}function S(t){return Re.default.scrollbar}function k(t){var e=this._jsx_data;e&&e.horizontalThumb_interaction_state.onEvent(e,e.horizontalThumb,t,e.horizontalThumb_interaction_value)}function L(t){var e=this._jsx_data;e&&e.horizontalTrack_interaction_state.onEvent(e,e.horizontalTrack,t,e.horizontalTrack_interaction_value)}function T(){var t=this._jsx_data;t&&t.$_parent.$_parent.$_scope._this.thumbHover()}function x(t,e,n,r,i,o,a){e.verticalThumb_interaction_binder=n,e.verticalThumb_interaction_invalidate=r;var s=e.verticalThumb_interaction_value;(o||s!==i)&&(e.verticalThumb_interaction_value=i,e.verticalThumb_interaction_state=t.attr._interaction(e.verticalThumb,"interaction",i,e.verticalThumb_interaction_state,J,t,a))}function R(t){return{name:"scrollbar",model:{type:"thumb",x:0,y:!0,track:t.verticalTrack,thumb:t.verticalThumb}}}function O(t,e,n,r,i,o){e.verticalThumb_style$45height_binder=n,e.verticalThumb_style$45height_invalidate=r;var a=e.verticalThumb_style$45height_value;(o||a!==i)&&(e.verticalThumb_style$45height_value=i,e.verticalThumb_style$45height_state=t.attr._style$45height(e.verticalThumb,"style-height",i,e.verticalThumb_style$45height_state))}function I(t){return t.$_parent.$_parent.$_scope._this.verticalThumbHeight}function D(t,e,n,r,i,o){e.verticalThumb_style$45width_binder=n,e.verticalThumb_style$45width_invalidate=r;var a=e.verticalThumb_style$45width_value;(o||a!==i)&&(e.verticalThumb_style$45width_value=i,e.verticalThumb_style$45width_state=t.attr._style$45width(e.verticalThumb,"style-width",i,e.verticalThumb_style$45width_state))}function N(t){return t.$_parent.$_parent.$_scope._this.verticalThumbWidth}function P(t,e,n,r,i,o){e.verticalThumb_style$45transform_binder=n,e.verticalThumb_style$45transform_invalidate=r;var a=e.verticalThumb_style$45transform_value;(o||a!==i)&&(e.verticalThumb_style$45transform_value=i,e.verticalThumb_style$45transform_state=t.attr._style$45transform(e.verticalThumb,"style-transform",i,e.verticalThumb_style$45transform_state))}function M(t){return t.$_parent.$_parent.$_scope._this.verticalThumbTransform}function j(t,e,n,r,i,o){e.verticalThumb_class_binder=n,e.verticalThumb_class_invalidate=r;var a=e.verticalThumb_class_value;(o||a!==i)&&(e.verticalThumb_class_value=i,e.verticalThumb_class_state=t.attr._class(e.verticalThumb,"class",i,e.verticalThumb_class_state))}function B(t){return Re.default.thumb}function F(t,e,n,r,i,o,a){e.verticalTrack_interaction_binder=n,e.verticalTrack_interaction_invalidate=r;var s=e.verticalTrack_interaction_value;(o||s!==i)&&(e.verticalTrack_interaction_value=i,e.verticalTrack_interaction_state=t.attr._interaction(e.verticalTrack,"interaction",i,e.verticalTrack_interaction_state,Q,t,a))}function U(t){return{name:"scrollbar",model:{type:"track",x:0,y:!0,track:t.verticalTrack}}}function $(t,e,n,r,i,o){e.verticalTrack_style$45height_binder=n,e.verticalTrack_style$45height_invalidate=r;var a=e.verticalTrack_style$45height_value;(o||a!==i)&&(e.verticalTrack_style$45height_value=i,e.verticalTrack_style$45height_state=t.attr._style$45height(e.verticalTrack,"style-height",i,e.verticalTrack_style$45height_state))}function V(t){return t.$_parent.$_parent.$_scope._this.verticalTrackHeight}function H(t,e,n,r,i,o){e.verticalTrack_style$45width_binder=n,e.verticalTrack_style$45width_invalidate=r;var a=e.verticalTrack_style$45width_value;(o||a!==i)&&(e.verticalTrack_style$45width_value=i,e.verticalTrack_style$45width_state=t.attr._style$45width(e.verticalTrack,"style-width",i,e.verticalTrack_style$45width_state))}function z(t){return t.$_parent.$_parent.$_scope._this.verticalTrackWidth}function Y(t,e,n,r,i,o){e.verticalTrack_style$45transform_binder=n,e.verticalTrack_style$45transform_invalidate=r;var a=e.verticalTrack_style$45transform_value;(o||a!==i)&&(e.verticalTrack_style$45transform_value=i,e.verticalTrack_style$45transform_state=t.attr._style$45transform(e.verticalTrack,"style-transform",i,e.verticalTrack_style$45transform_state))}function W(t){return t.$_parent.$_parent.$_scope._this.verticalTrackTransform}function q(t,e,n,r,i,o){e.verticalTrack_class_binder=n,e.verticalTrack_class_invalidate=r;var a=e.verticalTrack_class_value;(o||a!==i)&&(e.verticalTrack_class_value=i,e.verticalTrack_class_state=t.attr._class(e.verticalTrack,"class",i,e.verticalTrack_class_state))}function X(t){return Re.default.track}function G(t,e,n,r,i,o){e.div_class_binder=n,e.div_class_invalidate=r;var a=e.div_class_value;(o||a!==i)&&(e.div_class_value=i,e.div_class_state=t.attr._class(e.div,"class",i,e.div_class_state))}function K(t){return Re.default.scrollbar}function J(t){var e=this._jsx_data;e&&e.verticalThumb_interaction_state.onEvent(e,e.verticalThumb,t,e.verticalThumb_interaction_value)}function Q(t){var e=this._jsx_data;e&&e.verticalTrack_interaction_state.onEvent(e,e.verticalTrack,t,e.verticalTrack_interaction_value)}function Z(){var t=this._jsx_data;t&&t.$_parent.$_parent.$_scope._this.thumbHover()}function tt(t,e,n,r,i,o){e.div2_style$45transform_binder=n,e.div2_style$45transform_invalidate=r;var a=e.div2_style$45transform_value;(o||a!==i)&&(e.div2_style$45transform_value=i,e.div2_style$45transform_state=t.attr._style$45transform(e.div2,"style-transform",i,e.div2_style$45transform_state))}function et(t){return t.$_scope._this.scrollTransform}function nt(t,e,n,r,i,o){e.div2_class_binder=n,e.div2_class_invalidate=r;var a=e.div2_class_value;(o||a!==i)&&(e.div2_class_value=i,e.div2_class_state=t.attr._class(e.div2,"class",i,e.div2_class_state))}function rt(t){return Re.default.innerView}function it(t,e,n,r,i,o,a){e.div1_interaction_binder=n,e.div1_interaction_invalidate=r;var s=e.div1_interaction_value;(o||s!==i)&&(e.div1_interaction_value=i,e.div1_interaction_state=t.attr._interaction(e.div1,"interaction",i,e.div1_interaction_state,wt,t,a))}function ot(t){return{name:"scroll"}}function at(t,e,n,r,i,o){e.div1_style$45height_binder=n,e.div1_style$45height_invalidate=r;var a=e.div1_style$45height_value;(o||a!==i)&&(e.div1_style$45height_value=i,e.div1_style$45height_state=t.attr._style$45height(e.div1,"style-height",i,e.div1_style$45height_state))}function st(t){return t.$_scope._this.innerHeight}function ut(t,e,n,r,i,o){e.div1_style$45width_binder=n,e.div1_style$45width_invalidate=r;var a=e.div1_style$45width_value;(o||a!==i)&&(e.div1_style$45width_value=i,e.div1_style$45width_state=t.attr._style$45width(e.div1,"style-width",i,e.div1_style$45width_state))}function ct(t){return t.$_scope._this.innerWidth}function lt(t,e,n,r,i,o){e.div1_class_binder=n,e.div1_class_invalidate=r;var a=e.div1_class_value;(o||a!==i)&&(e.div1_class_value=i,e.div1_class_state=t.attr._class(e.div1,"class",i,e.div1_class_state))}function ft(t){return Re.default.overflowView}function ht(t,e,n,r,i,o){e.div_style_binder=n,e.div_style_invalidate=r;var a=e.div_style_value;(o||a!==i)&&(e.div_style_value=i,e.div_style_state=t.attr._style(e.div,"style",i,e.div_style_state))}function dt(t){return t.$_scope._this.style}function pt(t,e,n,r,i,o){e.div_class_binder2=n,e.div_class_invalidate2=r;var a=e.div_class_value2;(o||a!==i)&&(e.div_class_value2=i,e.div_class_state2=t.attr._class(e.div,"class",i,e.div_class_state2))}function _t(t){return(0,he.default)({},Re.default.scrollActive,t.$_scope._this.scrollActive)}function vt(t,e,n,r,i,o){e.div_class_binder1=n,e.div_class_invalidate1=r;var a=e.div_class_value1;(o||a!==i)&&(e.div_class_value1=i,e.div_class_state1=t.attr._class(e.div,"class",i,e.div_class_state1))}function mt(t){return t.$_scope._this.className}function yt(t,e,n,r,i,o){e.div_class_binder=n,e.div_class_invalidate=r;var a=e.div_class_value;(o||a!==i)&&(e.div_class_value=i,e.div_class_state=t.attr._class(e.div,"class",i,e.div_class_state))}function gt(t){return Re.default.outerView}function bt(t,e,n,r,i,o){e.div_binder=n,e.div_invalidate=r;var a=e.div_value1;(o||a!==i)&&(e.div_value1=i,e.div_content=t.renderContent(e.div_content,i))}function At(t){return t.$_scope._this.children}function wt(t){var e=this._jsx_data;e&&e.div1_interaction_state.onEvent(e,e.div1,t,e.div1_interaction_value)}function Et(t){var e=this._jsx_data;e&&e.$_scope._this.onMouseWheel(t)}function Ct(t){var e=this._jsx_data;e&&e.$_scope._this.onBlur(t)}function St(t){var e=this._jsx_data;e&&e.$_scope._this.onFocus(t)}function kt(t,e){t.$_scope._this.element=e}function Lt(t,e){return"translate3D("+t+"px, "+e+"px, 0)"}function Tt(t){return null!==t&&void 0!==t}Object.defineProperty(e,"__esModule",{value:!0});var xt,Rt,Ot=n(11),It=r(Ot),Dt=n(856),Nt=(r(Dt),n(15)),Pt=n(21),Mt=r(Pt),jt=n(2),Bt=r(jt),Ft=n(0),Ut=r(Ft),$t=n(1),Vt=r($t),Ht=n(3),zt=r(Ht),Yt=n(4),Wt=r(Yt),qt=n(5),Xt=r(qt),Gt=n(81),Kt=r(Gt),Jt=n(22),Qt=r(Jt),Zt=n(79),te=r(Zt),ee=n(7),ne=r(ee),re=n(25),ie=r(re),oe=n(9),ae=r(oe),se=n(18),ue=r(se),ce=n(10),le=r(ce),fe=n(42),he=r(fe),de=n(100),pe=r(de),_e=n(245),ve=r(_e),me=n(246),ye=r(me),ge=n(859),be=r(ge),Ae=n(861),we=r(Ae),Ee=n(862),Ce=r(Ee),Se=n(865),ke=r(Se),Le=n(960),Te=r(Le),xe=n(966),Re=r(xe),Oe=n(124),Ie={make:function(t){return Ie=It.default.make({render:function(t,e){var n=e.div=t.pushTemplateNode(Ue);kt(e,n),t.attachEvent(e.div,"focus",St),t.attachEvent(e.div,"blur",Ct),t.attachEvent(e.div,"wheel",Et),t.enterNode(n);var r=e.div1=t.pushTemplateNode(Fe);t.enterNode(r);var i=e.div2=t.pushTemplateNode(Fe);t.enterNode(i),t.runBinder(At,bt,e,!0),t.exitNode(i),t.exitNode(r),t.runBinder(gt,yt,e,!0),t.runBinder(mt,vt,e,!0),t.runBinder(_t,pt,e,!0),t.runBinder(dt,ht,e,!0),t.runBinder(ft,lt,e,!0),t.runBinder(ct,ut,e,!0),t.runBinder(st,at,e,!0),t.runBinder(ot,it,e,!0),t.runBinder(rt,nt,e,!0),t.runBinder(et,tt,e,!0);var o=e._if=Pe.make(t);o.$_parent=e,o.template.run(t,o);var a=e._if1=De.make(t);a.$_parent=e,a.template.run(t,a),t.exitNode(n)},dispose:function(t,e){e.div._jsx_data=null,e.div1_interaction_value=void 0,e.div1._jsx_data=null,t.removeSignals(e.div_binder,e.div_invalidate),e.div_content=t.disposeContent(e.div_content),e.div_value1=void 0,t.removeSignals(e.div_class_binder,e.div_class_invalidate),t.removeSignals(e.div_class_binder1,e.div_class_invalidate1),t.removeSignals(e.div_class_binder2,e.div_class_invalidate2),t.removeSignals(e.div_style_binder,e.div_style_invalidate),t.removeSignals(e.div1_class_binder,e.div1_class_invalidate),t.removeSignals(e.div1_style$45width_binder,e.div1_style$45width_invalidate),t.removeSignals(e.div1_style$45height_binder,e.div1_style$45height_invalidate),t.removeSignals(e.div1_interaction_binder,e.div1_interaction_invalidate),t.removeSignals(e.div2_class_binder,e.div2_class_invalidate),t.removeSignals(e.div2_style$45transform_binder,e.div2_style$45transform_invalidate),e._if.template.dispose(t,e._if),e._if1.template.dispose(t,e._if1),kt(e,null)},move:function(t,e){t.pushNode(e.div)},reuse:function(t,e){kt(e,e.div),t.runBinder(At,bt,e,!1),t.runBinder(gt,yt,e,!1),t.runBinder(mt,vt,e,!1),t.runBinder(_t,pt,e,!1),t.runBinder(dt,ht,e,!1),t.runBinder(ft,lt,e,!1),t.runBinder(ct,ut,e,!1),t.runBinder(st,at,e,!1),t.runBinder(ot,it,e,!1),t.runBinder(rt,nt,e,!1),t.runBinder(et,tt,e,!1),e._if.template.reuse(t,e._if),e._if1.template.reuse(t,e._if1)},init:function(t,e){e.div._jsx_data=e,e.div1._jsx_data=e},firstChild:function(t,e){return e.div},prepare:function(t){t.attr._tabindex||(t.attr._tabindex=t.ensureAttr("tabindex")),t.attr._class||(t.attr._class=t.ensureAttr("class")),t.attr._style||(t.attr._style=t.ensureAttr("style")),t.attr._style$45width||(t.attr._style$45width=t.ensureAttr("style-width")),t.attr._style$45height||(t.attr._style$45height=t.ensureAttr("style-height")),t.attr._interaction||(t.attr._interaction=t.ensureAttr("interaction")),t.attr._style$45transform||(t.attr._style$45transform=t.ensureAttr("style-transform"))}}),Ie.make(t)}},De={make:function(t){return De=t.makeComponent(Mt.default,{props:{getCondition:function(t){return t.$_parent.$_scope._this.horizontalScroll}},blocks:[{name:"children",template:It.default.make({render:function(t,e){var n=e.div=t.pushTemplateNode(Ne);t.attachEvent(e.div,"mouseover",T),t.enterNode(n);e.horizontalTrack=t.pushTemplateNode(je),e.horizontalThumb=t.pushTemplateNode(Me);t.exitNode(n),t.runBinder(S,C,e,!0),t.runBinder(E,w,e,!0),t.runBinder(A,b,e,!0),t.runBinder(g,y,e,!0),t.runBinder(m,v,e,!0),t.runBinder(_,p,e,!0),t.runBinder(d,h,e,!0),t.runBinder(f,l,e,!0),t.runBinder(c,u,e,!0),t.runBinder(s,a,e,!0),t.runBinder(o,i,e,!0)},dispose:function(t,e){e.div._jsx_data=null,e.horizontalTrack_interaction_value=void 0,e.horizontalTrack._jsx_data=null,e.horizontalThumb_interaction_value=void 0,e.horizontalThumb._jsx_data=null,t.removeSignals(e.div_class_binder,e.div_class_invalidate),t.removeSignals(e.horizontalTrack_class_binder,e.horizontalTrack_class_invalidate),t.removeSignals(e.horizontalTrack_style$45transform_binder,e.horizontalTrack_style$45transform_invalidate),t.removeSignals(e.horizontalTrack_style$45width_binder,e.horizontalTrack_style$45width_invalidate),t.removeSignals(e.horizontalTrack_style$45height_binder,e.horizontalTrack_style$45height_invalidate),t.removeSignals(e.horizontalTrack_interaction_binder,e.horizontalTrack_interaction_invalidate),t.removeSignals(e.horizontalThumb_class_binder,e.horizontalThumb_class_invalidate),t.removeSignals(e.horizontalThumb_style$45transform_binder,e.horizontalThumb_style$45transform_invalidate),t.removeSignals(e.horizontalThumb_style$45width_binder,e.horizontalThumb_style$45width_invalidate),t.removeSignals(e.horizontalThumb_style$45height_binder,e.horizontalThumb_style$45height_invalidate),t.removeSignals(e.horizontalThumb_interaction_binder,e.horizontalThumb_interaction_invalidate)},move:function(t,e){t.pushNode(e.div)},reuse:function(t,e){t.runBinder(S,C,e,!1),t.runBinder(E,w,e,!1),t.runBinder(A,b,e,!1),t.runBinder(g,y,e,!1),t.runBinder(m,v,e,!1),t.runBinder(_,p,e,!1),t.runBinder(d,h,e,!1),t.runBinder(f,l,e,!1),t.runBinder(c,u,e,!1),t.runBinder(s,a,e,!1),t.runBinder(o,i,e,!1)},init:function(t,e){e.div._jsx_data=e,e.horizontalTrack._jsx_data=e,e.horizontalThumb._jsx_data=e},firstChild:function(t,e){return e.div},prepare:function(t){t.attr._class||(t.attr._class=t.ensureAttr("class")),t.attr._style$45transform||(t.attr._style$45transform=t.ensureAttr("style-transform")),t.attr._style$45width||(t.attr._style$45width=t.ensureAttr("style-width")),t.attr._style$45height||(t.attr._style$45height=t.ensureAttr("style-height")),t.attr._interaction||(t.attr._interaction=t.ensureAttr("interaction"))}})}]}),De.make(t)}},Ne=(0,Nt.register)(function(t){var e=t.makeNode("div");return t.attr._class(e,"class","torq-scrollbar-horizontal"),e}),Pe={make:function(t){return Pe=t.makeComponent(Mt.default,{props:{getCondition:function(t){return t.$_parent.$_scope._this.verticalScroll}},blocks:[{name:"children",template:It.default.make({render:function(t,e){var n=e.div=t.pushTemplateNode(Be);t.attachEvent(e.div,"mouseover",Z),t.enterNode(n);e.verticalTrack=t.pushTemplateNode(je),e.verticalThumb=t.pushTemplateNode(Me);t.exitNode(n),t.runBinder(K,G,e,!0),t.runBinder(X,q,e,!0),t.runBinder(W,Y,e,!0),t.runBinder(z,H,e,!0),t.runBinder(V,$,e,!0),t.runBinder(U,F,e,!0),t.runBinder(B,j,e,!0),t.runBinder(M,P,e,!0),t.runBinder(N,D,e,!0),t.runBinder(I,O,e,!0),t.runBinder(R,x,e,!0)},dispose:function(t,e){e.div._jsx_data=null,e.verticalTrack_interaction_value=void 0,e.verticalTrack._jsx_data=null,e.verticalThumb_interaction_value=void 0,e.verticalThumb._jsx_data=null,t.removeSignals(e.div_class_binder,e.div_class_invalidate),t.removeSignals(e.verticalTrack_class_binder,e.verticalTrack_class_invalidate),t.removeSignals(e.verticalTrack_style$45transform_binder,e.verticalTrack_style$45transform_invalidate),t.removeSignals(e.verticalTrack_style$45width_binder,e.verticalTrack_style$45width_invalidate),t.removeSignals(e.verticalTrack_style$45height_binder,e.verticalTrack_style$45height_invalidate),t.removeSignals(e.verticalTrack_interaction_binder,e.verticalTrack_interaction_invalidate),t.removeSignals(e.verticalThumb_class_binder,e.verticalThumb_class_invalidate),t.removeSignals(e.verticalThumb_style$45transform_binder,e.verticalThumb_style$45transform_invalidate),t.removeSignals(e.verticalThumb_style$45width_binder,e.verticalThumb_style$45width_invalidate),t.removeSignals(e.verticalThumb_style$45height_binder,e.verticalThumb_style$45height_invalidate),t.removeSignals(e.verticalThumb_interaction_binder,e.verticalThumb_interaction_invalidate)},move:function(t,e){t.pushNode(e.div)},reuse:function(t,e){t.runBinder(K,G,e,!1),t.runBinder(X,q,e,!1),t.runBinder(W,Y,e,!1),t.runBinder(z,H,e,!1),t.runBinder(V,$,e,!1),t.runBinder(U,F,e,!1),t.runBinder(B,j,e,!1),t.runBinder(M,P,e,!1),t.runBinder(N,D,e,!1),t.runBinder(I,O,e,!1),t.runBinder(R,x,e,!1)},init:function(t,e){e.div._jsx_data=e,e.verticalTrack._jsx_data=e,e.verticalThumb._jsx_data=e},firstChild:function(t,e){return e.div},prepare:function(t){t.attr._class||(t.attr._class=t.ensureAttr("class")),t.attr._style$45transform||(t.attr._style$45transform=t.ensureAttr("style-transform")),t.attr._style$45width||(t.attr._style$45width=t.ensureAttr("style-width")),t.attr._style$45height||(t.attr._style$45height=t.ensureAttr("style-height")),t.attr._interaction||(t.attr._interaction=t.ensureAttr("interaction"))}})}]}),Pe.make(t)}},Me=(0,Nt.register)(function(t){var e=t.makeNode("div");return t.attr._class(e,"class","torq-scrollbar-thumb"),e}),je=(0,Nt.register)(function(t){var e=t.makeNode("div");return t.attr._class(e,"class","torq-scrollbar-track"),e}),Be=(0,Nt.register)(function(t){var e=t.makeNode("div");return t.attr._class(e,"class","torq-scrollbar-vertical"),e}),Fe=(0,Nt.register)(function(t){return t.makeNode("div")}),Ue=(0,Nt.register)(function(t){var e=t.makeNode("div");return t.attr._tabindex(e,"tabindex","1"),e}),$e=!!pe.default.navigator&&"MacIntel"!==pe.default.navigator.platform,Ve=40,He=(xt={},(0,he.default)(xt,0,1),(0,he.default)(xt,1,40),(0,he.default)(xt,2,400),xt);Rt=ue.default;var ze=function(t){function e(){(0,Ut.default)(this,e);var t=(0,zt.default)(this,(e.__proto__||(0,Bt.default)(e)).call(this));t.userEvent=!1,t.animation=t.link(new ke.default),t.autoScrollAnimation=t.link(new Te.default);var n=t.scope.touchMapper;return n||(n=t.scope.touchMapper=t.link(new ve.default(t.inputConfig,ye.default,t.allowHtmlDrag))),t.scrollInteraction=t.link(new Ce.default(n,t)),t.watch(function(){return t.style},t.updateSize),t.watch(function(){return t.className},t.updateSize),t.watch(function(){return t.verticalScroll},t.updateScroll),t.watch(function(){return t.horizontalScroll},t.updateScroll),t.watch(function(){return t.contentWidth},t.updateScroll),t.watch(function(){return t.contentHeight},t.updateScroll),t.watch(function(){return t.scrollBarSize},t.updateScroll),t.watch(function(){return t.scrollBarMargin},t.updateScroll),t.watch(function(){return t.scrollBarPadding},t.updateScroll),t.listenTo(t.autoScrollAnimation,"update",t.onAutoScrollUpdate),t.listenTo(t.animation,"update",t.onAnimationUpdate),t.scrollInfo&&t.scrollInfo.keyboardEnabled&&(t.keyboardManager=t.link(new be.default(t,we.default,t.keyHandlers)),t.keyboardMove=t.scrollInfo&&t.scrollInfo.keyboardMove?t.scrollInfo.keyboardMove:Ve),t}return(0,Wt.default)(e,t),(0,Vt.default)(e,[{key:"scrollKeyboardAnimated",value:function(t,e){this.animationEnabled?this.animateTo(t,e):this.scrollTo(t,e,!1,!0)}},{key:"animateTo",value:function(t,e){this.animation.scroll(this.displayScrollLeft,this.displayScrollTop,t,e,this.scrollInfo)}},{key:"onFocus",value:function(){this.focused=!0}},{key:"onBlur",value:function(){this.focused=!1}},{key:"updateAutoScroll",value:function(){var t=this.scope.touchMapper.touchManager.touches;if(1===t.length){var e=t.at(0).event,n=e.clientX,r=e.clientY;this.autoScrollAnimation.setCoords(n,r)}else this.autoScrollAnimation.clear()}},{key:"attached",value:function(){this.updateSize(),this.resizeLink=this.link((0,Oe.addEventListener)(window,"resize",this.updateSize)),this.focusOnAttach&&this.element.focus(),this.listenTo(this.scope.touchMapper.touchManager,"start",this.onStart)}},{key:"detached",value:function(){this.resizeLink&&(this.disposeLink(this.resizeLink),this.resizeLink=null)}},{key:"onAutoScrollUpdate",value:function(t){if(Tt(t.x)||Tt(t.y)){var e=this.displayScrollLeft,n=this.displayScrollTop;this.verticalScroll&&Tt(t.y)&&(n+=t.y),this.horizontalScroll&&Tt(t.x)&&(e+=t.x),this.scrollTo(e,n,!1,!0)}else if(Tt(t.velocityX)||Tt(t.velocityY)){var r={left:t.velocityX?t.velocityX:0,top:t.velocityY?t.velocityY:0};this.animation.start(this.displayScrollLeft,this.displayScrollTop,r)}}},{key:"updateSizeImpl",value:function(){this.element&&(this.viewWidth=this.element.clientWidth,this.viewHeight=this.element.clientHeight,this.updateScroll())}},{key:"onAnimationUpdate",value:function(t,e){this.request(t,e),this.updateScroll()}},{key:"updateScrollNow",value:function(){this.pauseScrolling||(this.displayScrollLeft=this.requestedScrollLeft=this.horizontalScroll?Math.min(Math.max(0,this.requestedScrollLeft),Math.max(0,this.contentWidth-this.innerWidth)):0,this.displayScrollTop=this.requestedScrollTop=this.verticalScroll?Math.min(Math.max(0,this.requestedScrollTop),Math.max(0,this.contentHeight-this.innerHeight)):0),this.updateBoundingClientRect(),this.trigger("scroll",this.userEvent),this.setupScrolling()}},{key:"request",value:function(t,e){this.directionLeft=e===this.requestedScrollTop?0:t>this.requestedScrollLeft?1:-1,this.directionTop=e===this.requestedScrollTop?0:e>this.requestedScrollTop?1:-1,this.requestedScrollLeft=t,this.requestedScrollTop=e}},{key:"scrollTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.userEvent=r,this.animation.stop(),t=this.horizontalScroll?Math.min(Math.max(0,t),Math.max(0,this.contentWidth-this.innerWidth)):0,e=this.verticalScroll?Math.min(Math.max(0,e),Math.max(0,this.contentHeight-this.innerHeight)):0,(this.requestedScrollLeft!==t||this.requestedScrollTop!==e)&&(this.request(t,e),n?this.updateScrollNow():this.updateScroll(),!0)}},{key:"stopScrolling",value:function(){this.pauseScrolling=!0}},{key:"restartScrolling",value:function(){this.pauseScrolling&&(this.pauseScrolling=!1,this.request(this.displayScrollLeft,this.displayScrollTop))}},{key:"setupScrolling",value:function(){this.scrolling=!0,this.removeScrolling()}},{key:"onMouseWheel",value:function(t){var e=this.animation.animationData;this.animation.stop();var n=this.scrollInfo,r=0,i=0,o=!1;if(void 0===t.deltaMode)o=!0,i=-t.wheelDelta/120,n&&(n.log="deltaMode=undefined, event.wheelDelta="+t.wheelDelta);else{var a=He[t.deltaMode];o=$e||0!==t.deltaMode,r=t.deltaX*a,i=t.deltaY*a,n&&(n.log="deltaMode="+t.deltaMode+", event.deltaX="+t.deltaX+" event.deltaY="+t.deltaY+" event.wheelDelta="+t.wheelDelta)}n&&("auto"!==n.animation&&(o="enabled"===n.animation),n.animationStatus=o),o&&(Math.abs(r)>100||Math.abs(i)>100)&&(r/=10,i/=10);var s,u,c=r<0?-1:1,l=i<0?-1:1;e?(s=e.finalLeft+r,u=e.finalTop+i):(s=this.requestedScrollLeft+r,u=this.requestedScrollTop+i);var f=!(c!==this.directionLeft&&0!==this.directionLeft||l!==this.directionTop&&0!==this.directionTop),h=this.horizontalScroll&&r&&s>=0&&s<=Math.max(0,this.contentWidth-this.innerWidth),d=this.verticalScroll&&i&&u>=0&&u<=Math.max(0,this.contentHeight-this.innerHeight);(!f||h||d)&&t.preventDefault(),this.directionLeft=c,this.directionTop=l,this.userEvent=!0,o?this.animation.scroll(this.requestedScrollLeft,this.requestedScrollTop,s,u,n):(this.request(s,u),this.updateScroll())}},{key:"onVerticalTrackMouseMove",value:function(t){if(t.buttons){t.preventDefault();var e=this.verticalTrackHeight,n=this.verticalThumbHeight,r=n/2;this.requestedScrollTop=Math.min(e-n,Math.max(0,t.offsetY-r))/(e-this.verticalThumbHeight)*(this.contentHeight-this.innerHeight),this.updateScroll()}}},{key:"onHorizontalTrackMouseMove",value:function(t){if(t.buttons){t.preventDefault();var e=this.horizontalTrackWidth,n=this.horizontalThumbWidth,r=n/2;this.request(Math.min(e-n,Math.max(0,t.offsetX-r))/(e-n)*(this.contentWidth-this.innerWidth),this.requestedScrollTop),this.updateScroll()}}},{key:"thumbHover",value:function(){this.trackHovered=!0,this.removeScrolling.cancel(),this.removeScrolling()}},{key:"render",value:function(){return{template:Ie,_this:this}}},{key:"animationEnabled",get:function(){return!!this.scrollInfo&&("keyboard"===this.scrollInfo.animation||"enabled"===this.scrollInfo.animation)}},{key:"keyHandlers",get:function(){var t=this;return{"move-down:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.requestedScrollTop+Ve))},"move-up:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.requestedScrollTop-Ve))},"meta-up:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,0))},"meta-down:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.contentHeight))},"page-down:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.requestedScrollTop+t.innerHeight))},"page-up:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.requestedScrollTop-t.innerHeight))},"home:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,0))},"end:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.displayScrollLeft,t.contentHeight))},"move-left:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.requestedScrollLeft-t.keyboardMove,t.displayScrollTop))},"move-right:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.requestedScrollLeft+t.keyboardMove,t.displayScrollTop))},"meta-left:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(0,t.displayScrollTop))},"meta-right:down":function(e){(t.focused||t.handleKeyboardGlobally)&&(e.stopPropagation(),e.preventDefault(),t.scrollKeyboardAnimated(t.contentWidth,t.displayScrollTop))}}}},{key:"innerWidth",get:function(){return this.viewWidth-(this.verticalScroll?this.scrollBarPadding:0)}},{key:"innerHeight",get:function(){return this.viewHeight-(this.horizontalScroll?this.scrollBarPadding:0)}},{key:"scrollTopAmount",get:function(){return this.requestedScrollTop-this.displayScrollTop}},{key:"scrollLeftAmount",get:function(){return this.requestedScrollLeft-this.displayScrollLeft}},{key:"scrollTransform",get:function(){return Lt(-this.displayScrollLeft,-this.displayScrollTop)}},{key:"verticalLeft",get:function(){return this.viewWidth-this.scrollBarSize-this.scrollBarMargin}},{key:"horizontalTop",get:function(){return this.viewHeight-this.scrollBarSize-this.scrollBarMargin}},{key:"verticalTrackTransform",get:function(){return Lt(this.verticalLeft,this.scrollBarMargin)}},{key:"verticalTrackWidth",get:function(){return this.scrollBarSize}},{key:"verticalTrackHeight",get:function(){var t=this.viewHeight-2*this.scrollBarMargin;return this.horizontalScroll&&(t-=this.scrollBarMargin+this.scrollBarSize),t}},{key:"horizontalTrackTransform",get:function(){return Lt(this.scrollBarMargin,this.horizontalTop)}},{key:"horizontalTrackWidth",get:function(){var t=this.viewWidth-2*this.scrollBarMargin;return this.verticalScroll&&(t-=this.scrollBarMargin+this.scrollBarSize),t}},{key:"horizontalTrackHeight",get:function(){return this.scrollBarSize}},{key:"verticalThumbTransform",get:function(){return Lt(this.verticalLeft,this.scrollBarMargin+(this.verticalTrackHeight-this.verticalThumbHeight)*this.displayScrollTop/(this.contentHeight-this.innerHeight))}},{key:"verticalThumbWidth",get:function(){return this.scrollBarSize}},{key:"verticalThumbHeight",get:function(){return Math.max(10,Math.min(1,Math.max(0,this.innerHeight/this.contentHeight))*this.verticalTrackHeight)}},{key:"horizontalThumbTransform",get:function(){return Lt(this.scrollBarMargin+(this.horizontalTrackWidth-this.horizontalThumbWidth)*this.displayScrollLeft/(this.contentWidth-this.innerWidth),this.horizontalTop)}},{key:"horizontalThumbWidth",get:function(){return Math.max(10,Math.min(1,Math.max(0,this.innerWidth/this.contentWidth))*this.horizontalTrackWidth)}},{key:"horizontalThumbHeight",get:function(){return this.scrollBarSize}},{key:"scrollActive",get:function(){return this.scrolling||this.trackHovered||this.scrollInteraction.active}}]),e}(Rt);ze=(0,Xt.default)(ze,{decorators:[(0,ae.default)((0,le.default)(null,{events:["scroll"],fork:!0}),t,"Scroll")],properties:[{name:"className",decorators:[(0,ie.default)("class")],kind:"property"},{name:"style",decorators:[(0,ie.default)()],kind:"property"},{name:"verticalScroll",decorators:[(0,ie.default)()],init:function(){return!0}},{name:"horizontalScroll",decorators:[(0,ie.default)()],init:function(){return!0}},{name:"scrollInfo",decorators:[(0,ie.default)()],init:function(){return{animation:!1,duration:100,friction:100,keyboardEnabled:!0,keyboardMove:Ve}}},{name:"handleKeyboardGlobally",decorators:[(0,ie.default)()],init:function(){return!1}},{name:"contentWidth",decorators:[(0,ie.default)()],init:function(){return 0}},{name:"contentHeight",decorators:[(0,ie.default)()],init:function(){return 0}},{name:"scrollBarSize",decorators:[(0,ie.default)()],init:function(){return 7}},{name:"scrollBarMargin",decorators:[(0,ie.default)()],init:function(){return 5}},{name:"scrollBarPadding",decorators:[(0,ie.default)()],init:function(){return 0}},{name:"viewWidth",decorators:[(0,ie.default)()],init:function(){return 0}},{name:"viewHeight",decorators:[(0,ie.default)()],init:function(){return 0}},{name:"inputConfig",decorators:[(0,ie.default)()],init:function(){return null}},{name:"focusOnAttach",decorators:[(0,ie.default)()],init:function(){return!0}},{name:"autoScroll",decorators:[(0,ie.default)()],init:function(){return!0}},{name:"autoScrollRegionSize",decorators:[(0,ie.default)()],init:function(){return 50}},{name:"autoScrollMinVelocity",decorators:[(0,ie.default)()],init:function(){return.5}},{name:"autoScrollMaxVelocity",decorators:[(0,ie.default)()],init:function(){return 2.5}},{name:"allowHtmlDrag",decorators:[(0,ie.default)()],init:function(){return!1}},{name:"requestedScrollLeft",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"requestedScrollTop",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"directionLeft",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"directionTop",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"displayScrollLeft",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"displayScrollTop",decorators:[(0,ne.default)()],init:function(){return 0}},{name:"scrolling",decorators:[(0,ne.default)()],init:function(){return!1}},{name:"trackHovered",decorators:[(0,ne.default)()],init:function(){return!1}},{name:"pauseScrolling",decorators:[(0,ne.default)()],init:function(){return!1}},{name:"offsetX",decorators:[(0,ne.default)()],kind:"property"},{name:"offsetY",decorators:[(0,ne.default)()],kind:"property"},{name:"removeScrolling",decorators:[(0,te.default)(1e3)],fn:function(){this.scrolling=!1,this.trackHovered=!1}},{name:"onStart",decorators:[(0,Qt.default)()],fn:function(){this.autoScroll&&!this.scrollInteraction.active&&(this.listenTo(this.scope.touchMapper.touchManager,"update",this.onUpdate),this.listenTo(this.scope.touchMapper.touchManager,"end",this.onEnd),this.autoScrollAnimation.start(this.element.getBoundingClientRect(),{autoScrollRegionSize:this.autoScrollRegionSize,minVelocity:this.autoScrollMinVelocity,maxVelocity:this.autoScrollMaxVelocity,verticalScroll:this.verticalScroll,horizontalScroll:this.horizontalScroll}),this.updateAutoScroll())}},{name:"onEnd",decorators:[(0,Qt.default)()],fn:function(){this.stopListening(this.scope.touchMapper.touchManager,"update",this.onUpdate),this.stopListening(this.scope.touchMapper.touchManager,"end",this.onEnd),this.autoScrollAnimation.stop()}},{name:"onUpdate",decorators:[(0,Qt.default)()],fn:function(){this.updateAutoScroll()}},{name:"updateSize",decorators:[(0,Kt.default)(101)],fn:function(){this.updateSizeImpl()}},{name:"updateScroll",decorators:[(0,Kt.default)()],fn:function(){this.updateScrollNow()}},{name:"updateBoundingClientRect",decorators:[(0,Kt.default)(15e3)],fn:function(){var t=this.element.getBoundingClientRect();this.offsetX=this.displayScrollLeft-t.left,this.offsetY=this.displayScrollTop-t.top}}]}),e.default=ze}).call(e,n(6)(t))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(0),o=r(i),a=n(1),s=r(a),u=n(155),c=function(){function t(e){(0,o.default)(this,t),this.touchMapper=e}return(0,s.default)(t,[{key:"onEvent",value:function(t,e,n,r){r&&this.touchMapper.pushState(r.name,n,r.model)}}]),t}(),l={onEvent:function(){}};(0,u.registerAttribute)("interaction",function(t,e,n,r,i,o,a){if(r&&!a)return r;var s=o.scope,u=s&&s.touchMapper;return u?(u.isDisposed&&console.warn("The TouchMapper placed on the scope is already disposed."),r||u.addNodeEvents(t,i),u._interactionState||(u._interactionState=new c(u))):(console.warn("You need to create a TouchMapper and place it on the scope."),l)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(7),g=r(y),b=n(98),A=r(b),w=function(t){function e(){var t,n,r,i;(0,s.default)(this,e);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=r=(0,f.default)(this,(t=e.__proto__||(0,o.default)(e)).call.apply(t,[this].concat(u))),r.timer_=null,i=n,(0,f.default)(r,i)}return(0,_.default)(e,t),(0,c.default)(e,[{key:"setTimeout",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var n=this;this.reset(),this.active=!0,this.timer_=setTimeout(function(){n.fired=!0,n.active=!1,t&&t()},e)})},{key:"reset",value:function(){this.fired=!1,this.active=!1,this.timer_&&(clearTimeout(this.timer_),this.timer_=null)}},{key:"dispose",value:function(){(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"dispose",this).call(this),this.reset()}}]),e}(A.default);w=(0,m.default)(w,{properties:[{name:"fired",decorators:[(0,g.default)()],init:function(){return!1}},{name:"active",decorators:[(0,g.default)()],init:function(){return!1}}]}),e.default=w},function(t,e,n){"use strict";function r(t,e){return Math.abs(t-e)<c}function i(t){return Math.abs(t)<c}function o(t,e,n){return Math.abs(t-e)<n}function a(t){return Math.round(1e3*t)/1e3}function s(t){return t*(Math.PI/180)}function u(t){return t*(180/Math.PI)}Object.defineProperty(e,"__esModule",{value:!0}),e.almostEqual=r,e.almostZero=i,e.almostEqualWithEpsilon=o,e.cssRound=a,e.toRadians=s,e.toDegrees=u;var c=5e-7},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),a=r(o),s=n(5),u=r(s),c=n(22),l=r(c),f=n(2),h=r(f),d=n(0),p=r(d),_=n(3),v=r(_),m=n(4),y=r(m),g=n(860),b=r(g),A=n(27),w=r(A),E=n(124),C=function(t){function e(){return(0,p.default)(this,e),(0,v.default)(this,(e.__proto__||(0,h.default)(e)).apply(this,arguments))}return(0,y.default)(e,t),e}(w.default);i=w.default;var S=function(t){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,p.default)(this,e);var a=(0,v.default)(this,(e.__proto__||(0,h.default)(e)).call(this));return a.ignoredInputElements=["input","textarea"],a.context=t,a.handlers=r,a.keyboardParser=new b.default(n),a.state=new C,a.install(i),a.ignoreInput=o,a}return(0,y.default)(e,t),(0,a.default)(e,[{key:"install",value:function(t){this.link((0,E.addEventListener)(t,"keydown",this.onKeyDown)),this.link((0,E.addEventListener)(t,"keypress",this.onKeyPress)),this.link((0,E.addEventListener)(t,"keyup",this.onKeyUp))}},{key:"triggerEvent",value:function(t,e){var n=this;if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||!this.ignoreInput||!document.activeElement||!(this.ignoredInputElements.indexOf(document.activeElement.tagName.toLowerCase())>=0)){var r=[],i={name:t,handlers:r,event:e};this.keyboardParser.matchKeyBinding(e,function(t){r.push({keyBindingName:t,handled:!1})}),this.trigger("before",i),r.forEach(function(r){var i=r.keyBindingName;r.handled=n.executeHandler(i+":"+t,i,e,t)||n.executeHandler(i,i,e,t)}),this.trigger("after",i)}}},{key:"executeHandler",value:function(t,e,n,r){if(!this.handlers.hasOwnProperty(t))return!1;var i=this.handlers[t];return"function"==typeof i?i.call(this.context,n,r):(this.state[e]="keyup"!==r,this.state.trigger(e)),!0}}]),e}(i);S=(0,u.default)(S,{properties:[{name:"onKeyDown",decorators:[(0,l.default)()],fn:function(t){this.triggerEvent("down",t)}},{name:"onKeyPress",decorators:[(0,l.default)()],fn:function(t){this.triggerEvent("press",t)}},{name:"onKeyUp",decorators:[(0,l.default)()],fn:function(t){this.triggerEvent("up",t)}}]}),e.default=S},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=[],n=!1;for(var r in v){var i=v[r],o=!1;"function"==typeof i?o=i(t):i===t.keyCode&&(n=!0,o=!0),o&&e.push(r)}return 91===t.keyCode||93===t.keyCode||n||e.push(String.fromCharCode(t.keyCode).toLowerCase()),e.join("+")}function o(t){return t.replace(/[^a-z0-9]/g,"\\$&")}function a(t){for(var e=t.split(/\s*\+\s*/),n=[],r=0;r<e.length;++r){var i=e[r].split(/\s*\|\s*/);i.length>1?n.push("("+i.map(o).join("|")+")"):n.push(o(i[0]))}return new RegExp("^"+n.join("\\+")+"$")}function s(t){return(0,_.default)(t).map(function(e){var n=t[e];return"object"===(void 0===n?"undefined":(0,d.default)(n))?{name:n.name,match:a(n.keys)}:{name:e,match:a(n)}})}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),c=r(u),l=n(1),f=r(l),h=n(36),d=r(h),p=n(66),_=r(p),v={shift:function(t){return t.shiftKey},alt:function(t){return t.altKey},ctrl:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},"[":219,"]":221,backspace:8,delete:46,"page-up":33,"page-down":34,end:35,home:36,"left-arrow":37,"up-arrow":38,"right-arrow":39,"down-arrow":40,plus:107,minus:109,equal:187,dash:189,space:32,escape:27,tab:9,enter:13},m=function(){function t(e){(0,c.default)(this,t),this.keys=s(e)}return(0,f.default)(t,[{key:"matchKeyBinding",value:function(t,e){for(var n=i(t),r=0;r<this.keys.length;++r){var o=this.keys[r];o.match.test(n)&&e(o.name)}}}]),t}();e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={copy:"meta|ctrl+c",open:"meta|ctrl+o",save:"meta|ctrl+s",space:"space",shift_save:"shift+meta|ctrl+s",png_save:"meta|ctrl+h",escape:"escape",enter:"enter",home:"home",end:"end","page-up":"page-up","page-down":"page-down","zoom-to-fit":"meta|ctrl+1","zoom-to-width":"meta|ctrl+2",undo:"meta|ctrl+z",redo:"shift+meta|ctrl+z",redo_windows:{name:"redo",keys:"meta|ctrl+y"},delete:"backspace|delete","bring-to-front":"meta|ctrl+]","send-to-back":"meta|ctrl+[","move-up":"up-arrow","alternate-move-up":"shift+up-arrow","meta-up":"meta|ctrl+up-arrow","meta-down":"meta|ctrl+down-arrow","meta-left":"meta|ctrl+left-arrow","meta-right":"meta|ctrl+right-arrow","move-down":"down-arrow","alternate-move-down":"shift+down-arrow","move-left":"left-arrow","alternate-move-left":"shift+left-arrow","move-right":"right-arrow","alternate-move-right":"shift+right-arrow"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=e[t];if(!r){var i=(0,g.getBoundingClientRect)(n),o=i.left,a=i.top,s=i.width,u=i.height;e[t]=r=y.default.create(o,a),e[t].width=s,e[t].height=u}return e.current.clone().scaleAndMove(r,-1)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(4),p=r(d),_=n(863),v=r(_),m=n(247),y=r(m),g=n(864),b=function(t){function e(t,n){(0,u.default)(this,e);var r=(0,h.default)(this,(e.__proto__||(0,a.default)(e)).call(this,t));return r.scroll=n,r}return(0,p.default)(e,t),(0,l.default)(e,[{key:"getScrollBarModel",value:function(t){return"scrollbar"===this.state.interactionName?t.model:null}},{key:"click",value:function(){this.active=!0,this.touch=this.touches.at(0),this.update()}},{key:"start",value:function(){this.scroll.animation.stop(),this.active=!0,this.startScrollLeft=this.scroll.requestedScrollLeft,this.startScrollTop=this.scroll.requestedScrollTop;var t=this.touch=this.touches.at(0),e=this.getScrollBarModel(t);e&&"thumb"===e.type&&(this.thumbOffset=i("thumbPosition",t,e.thumb))}},{key:"reset",value:function(){var t=this.getScrollBarModel(this.touch);t&&"background"!==t.type||this.scroll.animation.start(this.scroll.requestedScrollLeft,this.scroll.requestedScrollTop,this.touch.history.velocity),this.touch=null,this.active=!1}},{key:"update",value:function(){this.active&&this.applyTouch(this.touch)}},{key:"applyTouch",value:function(t){var e=this.getScrollBarModel(t),n=e?e.type:"background",r=this.scroll.requestedScrollLeft,o=this.scroll.requestedScrollTop;if("track"===n||"thumb"===n){var a=i("trackPosition",t,e.track);if(e.y){var s=this.scroll.verticalTrackHeight,u=this.scroll.verticalThumbHeight,c=s/t.trackPosition.height,l=a.top*c,f="track"===n?u/2:this.thumbOffset.top*c,h=s-u;o=h?Math.min(s-u,Math.max(0,l-f))*((this.scroll.contentHeight-this.scroll.innerHeight)/h):0}if(e.x){var d=this.scroll.horizontalTrackWidth,p=this.scroll.horizontalThumbWidth,_=d/t.trackPosition.width,v=a.left*_,m="track"===n?p/2:this.thumbOffset.left*_,y=d-p;r=y?Math.min(d-p,Math.max(0,v-m))*((this.scroll.contentWidth-this.scroll.innerWidth)/y):0}}else{var g=t.offset;r=this.startScrollLeft+g.left,o=this.startScrollTop+g.top}this.scroll.scrollTo(r,o,!1,!0)}},{key:"priority",get:function(){if(1!==this.touches.length)return!1;if("drag"!==this.state.eventState){var t=this.getScrollBarModel(this.touches.at(0));if(!t||"track"!==t.type)return!1}return 100}}]),e}(v.default);e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(7),g=r(y),b=n(27),A=r(b),w=n(245),E=r(w),C=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.default.instance;(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return n.mapper=t,t.pushInteraction(n),n}return(0,_.default)(e,t),(0,c.default)(e,[{key:"wait",value:function(t){this.mapper.wait(t)}},{key:"dispose",value:function(){(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"dispose",this).call(this),this.mapper.removeInteraction(this)}},{key:"touches",get:function(){return this.mapper.touchManager.touches}},{key:"state",get:function(){return this.mapper.state}},{key:"eventState",get:function(){return this.mapper.state.eventState}},{key:"waitTime",get:function(){return this.mapper.waitTime}}]),e}(A.default);C=(0,m.default)(C,{properties:[{name:"active",decorators:[(0,g.default)()],init:function(){return!1}}]}),e.default=C},function(t,e,n){"use strict";function r(t){return t.getBoundingClientRect()}function i(t){var e=t.ownerDocument.defaultView,n=e.innerWidth,r=e.innerHeight;return{left:0,top:0,right:n,width:n,bottom:r,height:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.getBoundingClientRect=r,e.getWindowRect=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(1),s=r(a),u=n(3),c=r(u),l=n(4),f=r(l),h=n(0),d=r(h),p=n(5),_=r(p),v=n(7),m=r(v),y=n(248),g=r(y),b=n(27),A=r(b),w=n(866),E=r(w),C=n(867),S=r(C),k=function t(e,n){(0,d.default)(this,t),this.left=e,this.top=n};k=(0,_.default)(k,{properties:[{name:"left",decorators:[(0,m.default)()],kind:"property"},{name:"top",decorators:[(0,m.default)()],kind:"property"}]});var L=function(t){function e(){(0,d.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return t.uiLoop=t.link(new g.default),t.frictionLeft=new E.default(5e-4),t.frictionTop=new E.default(5e-4),t.listenTo(t.uiLoop,"tick",t.tick),t}return(0,f.default)(e,t),(0,s.default)(e,[{key:"start",value:function(t,e,n){this.stop(),(n.left||n.top)&&(this.frictionLeft.set(t,1e3*n.left),this.frictionTop.set(e,1e3*n.top),this.uiLoop.start())}},{key:"scroll",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.stop();var a=this.animationData=new k(t,e);this.animation=this.link(new S.default),a.finalLeft=a.left=n,a.finalTop=a.top=r,this.animation.on("tick",function(){return i.trigger("update",a.left,a.top)}),this.animation.on("end",function(){return i.animationData=null}),this.animation.commit(o?o.duration:100)}},{key:"stop",value:function(){this.uiLoop.stop();var t=this.animation;t&&(t.reset(),this.disposeLink(t),this.animation=null)}},{key:"tick",value:function(){var t=this.frictionLeft.x(),e=this.frictionTop.x();this.done&&this.stop(),this.trigger("update",t,e)}},{key:"done",get:function(){return this.frictionLeft.done()&&this.frictionTop.done()}}]),e}(A.default);e.default=L},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=n(77),c=r(u),l=function(){function t(e){(0,o.default)(this,t),this._drag=e,this._dragLog=Math.log(e),this._x=0,this._v=0,this._startTime=0}return(0,s.default)(t,[{key:"set",value:function(t,e){this._x=t,this._v=e,this._startTime=(0,c.default)()}},{key:"x",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.default)(),e=t-this._startTime;return this._x+this._v*Math.pow(this._drag,e/1e3)/this._dragLog-this._v/this._dragLog}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.default)(),e=t-this._startTime;return this._v*Math.pow(this._drag,e/1e3)}},{key:"done",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.default)();return Math.abs(this.dx(t))<1}},{key:"reconfigure",value:function(t){var e=this.x(),n=this.dx();this._drag=t,this._dragLog=Math.log(t),this.set(e,n)}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(55),m=r(v),y=n(868),g=r(y),b=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return m.default.pushMutator(t),t}return(0,_.default)(e,t),(0,c.default)(e,[{key:"commit",value:function(t,n){return m.default.popMutator(this),(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"commit",this).call(this,t,n)}}]),e}(g.default);e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return t*n+(1-t)*e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(8),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(7),b=r(g),A=n(74),w=r(A),E=n(27),C=r(E),S=n(869),k=r(S),L=n(870),T=r(L),x=n(954),R=r(x),O=n(107),I=r(O),D=n(958),N=(r(D),n(959)),P=r(N),M=n(101),j=(r(M),function(t){function e(){(0,u.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,a.default)(e)).call(this));return t.resetTo="end",t.changesById={},t.timer=t.link(new k.default),t.listenTo(t.timer,"tick",t._update),t.listenTo(t.timer,"end",t.reset),t}return(0,v.default)(e,t),(0,l.default)(e,[{key:"computeChangeKey",value:function(t,e){return"_"+(0,w.default)(t)+":"+e}},{key:"canAnimate",value:function(t){return!!(0,P.default)(t)||!(!(0,I.default)(t)||!t.merge)}},{key:"animate",value:function(t,e){return(0,P.default)(e.start)?i(t,e.start,e.end):e.start.merge(t,e.end,e)}},{key:"record",value:function(t,e,n,r,i){if(this.canAnimate(n)&&this.canAnimate(r)){var o=this.computeChangeKey(t,e),a=this.changesById[o];return a?a.end=n:a=this.changesById[o]={object:t,property:e,initial:i||r,start:r,end:n},a}}},{key:"commit",value:function(t,e){if(!this.hasChanges)return void this.trigger("end");this.curve=e,this.trigger("start"),(0,R.default)(this.changesById,function(t){return t.object[t.property]=t.start}),this._startAnimation(t)}},{key:"revert",value:function(){var t=new e;return t.resetTo="initial",(0,R.default)(this.changesById,function(e){e.isNew&&t.record(e.object,e.property,e.start,e.end,e.initial)}),t}},{key:"snapshot",value:function(){var t=new e,n=this.resetTo;return(0,R.default)(this.changesById,function(e){return t.record(e.object,e.property,e[n],e.object[e.property],e.initial)}),t}},{key:"_startAnimation",value:function(t){++e.activeAnimations,this.active=!0,this.timer.start(t)}},{key:"_update",value:function(){var t=this,e=this.timer.percent;this.curve&&(e=this.curve(e)),(0,R.default)(this.changesById,function(n){return n.object[n.property]=t.animate(e,n)}),this.trigger("tick")}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.active){--e.activeAnimations,this.timer.stop();var n=this.changesById;if(this.active=!1,!t){var r=this.resetTo;(0,R.default)(n,function(t){return t.object[t.property]=t[r]})}this.isDisposed||this.trigger("end")}}},{key:"resetInitials",value:function(){(0,R.default)(this.changesById,function(t){return t.initial=t.object[t.property]})}},{key:"dispose",value:function(){(0,p.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"dispose",this).call(this),this.reset()}},{key:"hasChanges",get:function(){return(0,T.default)(this.changesById,function(t){return t.start!==t.end})}}]),e}(C.default));j=(0,y.default)(j,{properties:[{name:"activeAnimations",decorators:[(0,b.default)()],static:!0,init:function(){return 0}},{name:"active",decorators:[(0,b.default)()],init:function(){return!1}}]}),e.default=j},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(2),a=r(o),s=n(0),u=r(s),c=n(1),l=r(c),f=n(3),h=r(f),d=n(8),p=r(d),_=n(4),v=r(_),m=n(5),y=r(m),g=n(22),b=r(g),A=n(7),w=r(A),E=n(76),C=r(E),S=n(45),k=r(S),L=n(98),T=r(L),x=n(77),R=r(x);i=T.default;var O=function(t){function e(){return(0,u.default)(this,e),(0,h.default)(this,(e.__proto__||(0,a.default)(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,l.default)(e,[{key:"start",value:function(t){if(t<0)throw new Error("Invalid time interval "+t);var e=this.startedAt=this.now=(0,R.default)();this.stopAt=e+t,this.active||(this.active=!0,this.enqueue())}},{key:"dispose",value:function(){this.stop(),(0,p.default)(e.prototype.__proto__||(0,a.default)(e.prototype),"dispose",this).call(this)}},{key:"stop",value:function(){this.active=!1}},{key:"percent",get:function(){return(this.now-this.startedAt)/(this.stopAt-this.startedAt)}}]),e}(i);O=(0,y.default)(O,{properties:[{name:"active",decorators:[(0,w.default)()],init:function(){return!1}},{name:"startedAt",decorators:[(0,w.default)()],init:function(){return 0}},{name:"stopAt",decorators:[(0,w.default)()],init:function(){return 0}},{name:"now",decorators:[(0,w.default)()],init:function(){return 0}},{name:"enqueue",decorators:[(0,b.default)()],fn:function(){C.default.push(this.run)}},{name:"run",decorators:[(0,b.default)()],fn:function(){var t=(0,R.default)(),e=this.stopAt;!this.active||this.now>=e||(t=this.now=Math.min(e,t),k.default.trigger(this,"tick"),this.active&&t<e?C.default.after.push(this.enqueue):k.default.trigger(this,"end"))}}]}),e.default=O},function(t,e,n){function r(t,e,n){var r=s(t)?i:a;return n&&u(t,e,n)&&(e=void 0),r(t,o(e,3))}var i=n(249),o=n(871),a=n(948),s=n(47),u=n(953);t.exports=r},function(t,e,n){function r(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?s(t)?o(t[0],t[1]):i(t):u(t)}var i=n(872),o=n(935),a=n(264),s=n(47),u=n(945);t.exports=r},function(t,e,n){function r(t){var e=o(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}var i=n(873),o=n(934),a=n(260);t.exports=r},function(t,e,n){function r(t,e,n,r){var u=n.length,c=u,l=!r;if(null==t)return!c;for(t=Object(t);u--;){var f=n[u];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<c;){f=n[u];var h=f[0],d=t[h],p=f[1];if(l&&f[2]){if(void 0===d&&!(h in t))return!1}else{var _=new i;if(r)var v=r(d,p,h,t,e,_);if(!(void 0===v?o(p,d,a|s,r,_):v))return!1}}return!0}var i=n(250),o=n(254),a=1,s=2;t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var i=n(126),o=Array.prototype,a=o.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n(126);t.exports=r},function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=n(126);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=n(126);t.exports=r},function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=n(125);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var i=n(125),o=n(168),a=n(169),s=200;t.exports=r},function(t,e,n){function r(t){return!(!a(t)||o(t))&&(i(t)?p:c).test(s(t))}var i=n(251),o=n(887),a=n(107),s=n(253),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,h=l.toString,d=f.hasOwnProperty,p=RegExp("^"+h.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(127),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t){return!!o&&o in t}var i=n(888),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(50),i=r["__core-js_shared__"];t.exports=i},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(891),o=n(125),a=n(168);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(892),o=n(893),a=n(894),s=n(895),u=n(896);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(128);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=n(128),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=n(128),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=n(128),o="__lodash_hash_undefined__";t.exports=r},function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=n(129);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return i(this,t).get(t)}var i=n(129);t.exports=r},function(t,e,n){function r(t){return i(this,t).has(t)}var i=n(129);t.exports=r},function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=n(129);t.exports=r},function(t,e,n){function r(t,e,n,r,v,y){var g=c(t),b=c(e),A=g?p:u(t),w=b?p:u(e);A=A==d?_:A,w=w==d?_:w;var E=A==_,C=w==_,S=A==w;if(S&&l(t)){if(!l(e))return!1;g=!0,E=!1}if(S&&!E)return y||(y=new i),g||f(t)?o(t,e,n,r,v,y):a(t,e,A,n,r,v,y);if(!(n&h)){var k=E&&m.call(t,"__wrapped__"),L=C&&m.call(e,"__wrapped__");if(k||L){var T=k?t.value():t,x=L?e.value():e;return y||(y=new i),v(T,x,n,r,y)}}return!!S&&(y||(y=new i),s(t,e,n,r,v,y))}var i=n(250),o=n(255),a=n(907),s=n(911),u=n(929),c=n(47),l=n(257),f=n(258),h=1,d="[object Arguments]",p="[object Array]",_="[object Object]",v=Object.prototype,m=v.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n(169),o=n(904),a=n(905);r.prototype.add=r.prototype.push=o,r.prototype.has=a,t.exports=r},function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e){function n(t,e){return t.has(e)}t.exports=n},function(t,e,n){function r(t,e,n,r,i,E,S){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case A:return!(t.byteLength!=e.byteLength||!E(new o(t),new o(e)));case h:case d:case v:return a(+t,+e);case p:return t.name==e.name&&t.message==e.message;case m:case g:return t==e+"";case _:var k=u;case y:var L=r&l;if(k||(k=c),t.size!=e.size&&!L)return!1;var T=S.get(t);if(T)return T==e;r|=f,S.set(t,e);var x=s(k(t),k(e),r,i,E,S);return S.delete(t),x;case b:if(C)return C.call(t)==C.call(e)}return!1}var i=n(127),o=n(908),a=n(167),s=n(255),u=n(909),c=n(910),l=1,f=2,h="[object Boolean]",d="[object Date]",p="[object Error]",_="[object Map]",v="[object Number]",m="[object RegExp]",y="[object Set]",g="[object String]",b="[object Symbol]",A="[object ArrayBuffer]",w="[object DataView]",E=i?i.prototype:void 0,C=E?E.valueOf:void 0;t.exports=r},function(t,e,n){var r=n(50),i=r.Uint8Array;t.exports=i},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=n},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},function(t,e,n){function r(t,e,n,r,a,u){var c=n&o,l=i(t),f=l.length;if(f!=i(e).length&&!c)return!1;for(var h=f;h--;){var d=l[h];if(!(c?d in e:s.call(e,d)))return!1}var p=u.get(t);if(p&&u.get(e))return p==e;var _=!0;u.set(t,e),u.set(e,t);for(var v=c;++h<f;){d=l[h];var m=t[d],y=e[d];if(r)var g=c?r(y,m,d,e,t,u):r(m,y,d,t,e,u);if(!(void 0===g?m===y||a(m,y,n,r,u):g)){_=!1;break}v||(v="constructor"==d)}if(_&&!v){var b=t.constructor,A=e.constructor;b!=A&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof A&&A instanceof A)&&(_=!1)}return u.delete(t),u.delete(e),_}var i=n(912),o=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return i(t,a,o)}var i=n(913),o=n(915),a=n(170);t.exports=r},function(t,e,n){function r(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}var i=n(914),o=n(47);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}t.exports=n},function(t,e,n){var r=n(916),i=n(917),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return a.call(t,e)}))}:i;t.exports=u},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}t.exports=n},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){function r(t,e){var n=a(t),r=!n&&o(t),l=!n&&!r&&s(t),h=!n&&!r&&!l&&c(t),d=n||r||l||h,p=d?i(t.length,String):[],_=p.length;for(var v in t)!e&&!f.call(t,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,_))||p.push(v);return p}var i=n(919),o=n(256),a=n(47),s=n(257),u=n(171),c=n(258),l=Object.prototype,f=l.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(86),o=n(87),a="[object Arguments]";t.exports=r},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){return a(t)&&o(t.length)&&!!s[i(t)]}var i=n(86),o=n(172),a=n(87),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=r},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){(function(t){var r=n(252),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(e,n(6)(t))},function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=n(926),o=n(927),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){var r=n(928),i=r(Object.keys,Object);t.exports=i},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){var r=n(930),i=n(168),o=n(931),a=n(932),s=n(933),u=n(86),c=n(253),l=c(r),f=c(i),h=c(o),d=c(a),p=c(s),_=u;(r&&"[object DataView]"!=_(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=_(new i)||o&&"[object Promise]"!=_(o.resolve())||a&&"[object Set]"!=_(new a)||s&&"[object WeakMap]"!=_(new s))&&(_=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=_},function(t,e,n){var r=n(85),i=n(50),o=r(i,"DataView");t.exports=o},function(t,e,n){var r=n(85),i=n(50),o=r(i,"Promise");t.exports=o},function(t,e,n){var r=n(85),i=n(50),o=r(i,"Set");t.exports=o},function(t,e,n){var r=n(85),i=n(50),o=r(i,"WeakMap");t.exports=o},function(t,e,n){function r(t){for(var e=o(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,i(a)]}return e}var i=n(259),o=n(170);t.exports=r},function(t,e,n){function r(t,e){return s(t)&&u(e)?c(l(t),e):function(n){var r=o(n,t);return void 0===r&&r===e?a(n,t):i(e,r,f|h)}}var i=n(254),o=n(936),a=n(942),s=n(174),u=n(259),c=n(260),l=n(130),f=1,h=2;t.exports=r},function(t,e,n){function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}var i=n(261);t.exports=r},function(t,e,n){var r=n(938),i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(t){var e=[];return i.test(t)&&e.push(""),t.replace(o,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e});t.exports=s},function(t,e,n){function r(t){var e=i(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}var i=n(939),o=500;t.exports=r},function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n(169),o="Expected a function";r.Cache=i,t.exports=r},function(t,e,n){function r(t){if("string"==typeof t)return t;if(a(t))return o(t,r)+"";if(s(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=n(127),o=n(941),a=n(47),s=n(175),u=1/0,c=i?i.prototype:void 0,l=c?c.toString:void 0;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}t.exports=n},function(t,e,n){function r(t,e){return null!=t&&o(t,e,i)}var i=n(943),o=n(944);t.exports=r},function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},function(t,e,n){function r(t,e,n){e=i(e,t);for(var r=-1,l=e.length,f=!1;++r<l;){var h=c(e[r]);if(!(f=null!=t&&n(t,h)))break;t=t[h]}return f||++r!=l?f:!!(l=null==t?0:t.length)&&u(l)&&s(h,l)&&(a(t)||o(t))}var i=n(262),o=n(256),a=n(47),s=n(171),u=n(172),c=n(130);t.exports=r},function(t,e,n){function r(t){return a(t)?i(s(t)):o(t)}var i=n(946),o=n(947),a=n(174),s=n(130);t.exports=r},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e,n){function r(t){return function(e){return i(e,t)}}var i=n(261);t.exports=r},function(t,e,n){function r(t,e){var n;return i(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}var i=n(265);t.exports=r},function(t,e,n){function r(t,e){return t&&i(t,e,o)}var i=n(950),o=n(170);t.exports=r},function(t,e,n){var r=n(951),i=r();t.exports=i},function(t,e){function n(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==r(s[a],a,s););return n}}var i=n(173);t.exports=r},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n(167),o=n(173),a=n(171),s=n(107);t.exports=r},function(t,e,n){t.exports=n(955)},function(t,e,n){function r(t,e){return(s(t)?i:o)(t,a(e))}var i=n(956),o=n(265),a=n(957),s=n(47);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){function r(t){return"function"==typeof t?t:i}var i=n(264);t.exports=r},function(t,e,n){function r(t){var e=++o;return i(t)+e}var i=n(263),o=0;t.exports=r},function(t,e,n){function r(t){return"number"==typeof t||o(t)&&i(t)==a}var i=n(86),o=n(87),a="[object Number]";t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(961),o=r(i),a=n(2),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),h=n(3),d=r(h),p=n(4),_=r(p),v=n(248),m=r(v),y=n(27),g=r(y),b=n(965),A=r(b),w={autoScrollRegionSize:50,minVelocity:.5,maxVelocity:2.5,verticalScroll:!0,horizontalScroll:!1},E=function(t){function e(){(0,c.default)(this,e);var t=(0,d.default)(this,(e.__proto__||(0,s.default)(e)).call(this));return t.uiLoop=t.link(new m.default),t.velocity={x:0,y:0},t.listenTo(t.uiLoop,"tick",t.tick),t.averageVelocityX=new A.default(5),t.averageVelocityY=new A.default(5),t}return(0,_.default)(e,t),(0,f.default)(e,[{key:"start",value:function(t){this.bounds=t,this.options=w,this.uiLoop.start(),this.lastTickTime=Date.now()}},{key:"clear",value:function(){this.velocity={x:0,y:0}}},{key:"setCoords",value:function(t,e){if(!this.bounds||!this.options.horizontalScroll&&(t<this.bounds.left||t>this.bounds.right)||!this.options.verticalScroll&&(e<this.bounds.top||e>this.bounds.bottom))return void this.clear();var n=this.options.autoScrollRegionSize,r=this.bounds.left+n,i=this.bounds.right-n,a=this.bounds.top+n,s=this.bounds.bottom-n,u=void 0,c=void 0;t<r?u=r-t:t>i&&(u=i-t),e<a?c=a-e:e>s&&(c=s-e),this.velocity={x:0,y:0},u&&(this.velocity.x=Math.min(Math.abs(u),n)/n,this.velocity.x*=-(0,o.default)(u)),c&&(this.velocity.y=Math.min(Math.abs(c),n)/n,this.velocity.y*=-(0,o.default)(c))}},{key:"stop",value:function(){this.uiLoop.stop()}},{key:"tick",value:function(){var t=this.options.minVelocity,e=this.options.maxVelocity,n=Date.now(),r=n-this.lastTickTime;this.lastTickTime=n;var i=void 0,a=void 0,s={};0!==this.velocity.x?(i=Math.round(Math.max(Math.abs(this.velocity.x)*e,t)*r),i=Math.max(i,t),i*=(0,o.default)(this.velocity.x),s.x=i,this.averageVelocityX.addItem(this.velocity.x)):this.averageVelocityX.average&&(s.velocityX=this.averageVelocityX.average,this.averageVelocityX.clear()),0!==this.velocity.y?(a=Math.round(Math.max(Math.abs(this.velocity.y)*e,t)*r),a=Math.max(a,t),a*=(0,o.default)(this.velocity.y),s.y=a,this.averageVelocityY.addItem(this.velocity.y)):this.averageVelocityY.average&&(s.velocityY=this.averageVelocityY.average,this.averageVelocityY.clear()),this.trigger("update",s)}}]),e}(g.default);e.default=E},function(t,e,n){t.exports={default:n(962),__esModule:!0}},function(t,e,n){n(963),t.exports=n(16).Math.sign},function(t,e,n){var r=n(20);r(r.S,"Math",{sign:n(964)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=function(){function t(e){(0,o.default)(this,t),this.items=new Array(e),this.limit=e,this.clear()}return(0,s.default)(t,[{key:"addItem",value:function(t){void 0!==this.items[this.index]&&(this.sum-=this.items[this.index]),this.items[this.index]=t,this.sum+=t,this.index=(this.index+1)%this.limit,this.count=Math.min(this.count+1,this.limit)}},{key:"clear",value:function(){for(var t=0,e=this.items.length;t<e;t++)this.items[t]=void 0;this.count=0,this.index=0,this.sum=0}},{key:"average",get:function(){if(this.count>0)return this.sum/this.count}}]),t}();e.default=u},function(t,e){t.exports={outerView:"outerView_1vmMn",overflowView:"overflowView_2W9ti",innerView:"innerView_2paNU",track:"track_1bYSa",thumb:"thumb_MSh5I",scrollActive:"scrollActive_1zKE_",scrollbar:"scrollbar_28wtu"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(3),c=r(u),l=n(1),f=r(l),h=n(4),d=r(h),p=n(8),_=r(p),v=n(5),m=r(v),y=n(23),g=r(y),b=n(968),A=r(b),w=n(969),E=r(w),C=function(t){function e(t,n){(0,s.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return E.default.create(r,t,n),r}return(0,d.default)(e,t),(0,f.default)(e,[{key:"setNeedsLayout",value:function(){(0,_.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"setNeedsLayout",this).call(this),this.trigger("setChildNeedsLayout")}}]),(0,f.default)(e,[{key:"dispose",value:function(){E.default.dispose(this),(0,_.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"dispose",this).call(this)}}]),e}(A.default);C=(0,m.default)(C,{decorators:[(0,g.default)({type:"root"})]}),e.default=C},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(266),m=r(v),y=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,_.default)(e,t),(0,c.default)(e,[{key:"updateLayout",value:function(t,n){var r=this;this.width=0,this.height=0,this.forEach(function(e){e.parent=r,e.layout(r.left,r.top,t,n),r.width=Math.max(r.width,e.width),r.height=Math.max(r.height,e.height)}),(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"updateLayout",this).call(this,t,n)}}]),e}(m.default);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(970),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={create:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default,r=e.childrenBlocks&&e.childrenBlocks.children,o=e.scope,a=t.$_virtualFactory=new n(o,t),s=t.$_childView=r.make(a);s&&(s.$_parent=e.$_view,s.template.render(a,s))},dispose:function(t){var e=t.$_virtualFactory,n=t.$_childView;n&&(n.template.cache(e,n),n.$_parent=null,t.$_childView=null)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=new u.default(t,e,n);return r.ensureAttr=function(){return this.setAttr},r.makeCommentNode=function(t){return new l.default(t)},r.makeCustomNode=r.makeNode=function(t){return new h.default(t)},r.makeCustomNodeWithType=r.makeNodeWithType=function(){throw new Error("Virtual factory doesn't support the is attribute!")},r.makeTextNode=function(t){return new v.default(t)},r.setTextContent=function(t,e){if("text"===t.type)t.contents=e;else{for(;t.firstChild;)t.firstChild.dispose();e&&t.appendChild(new v.default(e))}},r.setNodeValue=function(t,e){a.default.assert("text"===t.type),t.contents=e},r.appendNode=function(t,e){t.appendChild(e)},r.insertBeforeNode=function(t,e){e.parentNode.insertBefore(t,e)},r.appendTextNode=function(t,e){t.appendChild(new v.default(e))},r.replaceNode=function(t,e){t.parentNode.replaceChild(t,e)},r.makeFragment=function(){return new p.default},r.removeNode=function(t){t.dispose()},r.setAttr=function(t,e,n){t[e]=n},r.removeAttr=function(t,e){t[e]=void 0},r.attachEvent=function(t,e,n){t.on(e,n)},r.detachEvent=function(t,e,n){t.off(e,n)},r.pushTextNode=function(t){var e=new v.default(t),n=this.parentNode,r=this.nextNode;return r?n.insertBefore(e,r):n.appendChild(e),e},r.pushTemplateNode=function(t){var e=m.templates[t](this),n=this.parentNode,r=this.nextNode;return r?n.insertBefore(e,r):n.appendChild(e),e},r.pushCommentNode=function(t){var e=new l.default(t),n=this.parentNode,r=this.nextNode;return r?n.insertBefore(e,r):n.appendChild(e),e},r.pushNode=function(t){var e=this.parentNode,n=this.nextNode;return n?e.insertBefore(t,n):e.appendChild(t),t},r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=n(101),a=r(o),s=n(214),u=r(s),c=n(971),l=r(c),f=n(972),h=r(f),d=n(973),p=r(d),_=n(974),v=r(_),m=n(15)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(7),g=r(y),b=n(23),A=r(b),w=n(108),E=r(w),C=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return n.contents=t,n}return(0,_.default)(e,t),(0,c.default)(e,[{key:"toJSON",value:function(){var t=(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"toJSON",this).call(this);return t.contents=this.contents,t}}]),e}(E.default);C=(0,m.default)(C,{decorators:[(0,A.default)({type:"comment"})],properties:[{name:"contents",decorators:[(0,g.default)()],kind:"property"}]}),e.default=C},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(7),g=r(y),b=n(23),A=r(b),w=n(108),E=r(w),C=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return n.name=t,n}return(0,_.default)(e,t),(0,c.default)(e,[{key:"toJSON",value:function(){var t=(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"toJSON",this).call(this);return t.name=this.name,t}}]),e}(E.default);C=(0,m.default)(C,{decorators:[(0,A.default)({type:"element"})],properties:[{name:"name",decorators:[(0,g.default)()],kind:"property"}]}),e.default=C},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(3),c=r(u),l=n(4),f=r(l),h=n(5),d=r(h),p=n(23),_=r(p),v=n(108),m=r(v),y=function(t){function e(){return(0,s.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,f.default)(e,t),e}(m.default);y=(0,d.default)(y,{decorators:[(0,_.default)({type:"fragment"})]}),e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(8),d=r(h),p=n(4),_=r(p),v=n(5),m=r(v),y=n(7),g=r(y),b=n(23),A=r(b),w=n(108),E=r(w),C=function(t){function e(t){(0,s.default)(this,e);var n=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return n.contents=t,n}return(0,_.default)(e,t),(0,c.default)(e,[{key:"toJSON",value:function(){var t=(0,d.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"toJSON",this).call(this);return t.contents=this.contents,t}},{key:"getXRayInfo",value:function(){return{type:"text",content:this.contents}}}]),e}(E.default);C=(0,m.default)(C,{decorators:[(0,A.default)({type:"text"})],properties:[{name:"contents",decorators:[(0,g.default)()],kind:"property"}]}),e.default=C},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(11),a=r(o),s=n(30),u=r(s),c=n(2),l=r(c),f=n(1),h=r(f),d=n(3),p=r(d),_=n(4),v=r(_),m=n(22),y=r(m),g=n(25),b=r(g),A=n(9),w=r(A),E=n(18),C=r(E),S=n(10),k=r(S),L=n(0),T=r(L),x=n(5),R=r(x),O=n(7),I=r(O),D=n(62),N=r(D),P=n(74),M=r(P),j={make:function(t){return j=t.makeComponent(u.default,{args:1,props:{getCollection:function(t){return t.$_scope._this.views}},blocks:[{name:"children",template:a.default.make({render:function(t,e){var n=e.itemView_base=e.$_parent.$_scope.itemView,r=e.itemView=B.make(t,n).make(t);r.$_parent=e,r.template.run(t,r)},dispose:function(t,e){e.itemView.template.dispose(t,e.itemView)},move:function(t,e){e.itemView.template.move(t,e.itemView)},reuse:function(t,e){var n=e.$_parent.$_scope.itemView;if(n!==e.itemView_base){e.itemView_base=n;var r=B.make(t,n).make(t);r.$_parent=e,t.replaceTemplate(e.itemView,r),e.itemView=r}else e.itemView.template.reuse(t,e.itemView)},firstChild:function(t,e){return e.itemView.template.firstChild(t,e.itemView)},lastChild:function(t,e){return e.itemView.template.lastChild(t,e.itemView)}})}]}),j.make(t)}},B={make:function(t,e){return B=C.default.makeDynamic({attributes:[{name:"virtualItem",get:function(){var t=this.$_view;if(t)return t.$_parent.v0.virtualItem},original:"virtual-item",set:function(t){var e=this.$_view;e&&(e.$_parent.v0.virtualItem=t)}}]}),B.make(t,e)}},F=function t(){(0,T.default)(this,t)};F=(0,R.default)(F,{properties:[{name:"virtualItem",decorators:[(0,I.default)()],init:function(){return null}}]}),i=C.default;var U=function(t){function e(){(0,T.default)(this,e);for(var t=(0,p.default)(this,(e.__proto__||(0,l.default)(e)).call(this)),n=new Array(t.capacity),r=0;r<n.length;++r)n[r]=new F;return t.views=new N.default(n),t.watchCollection(function(){return t.collection},t.updateVisibleViews),t}return(0,v.default)(e,t),(0,h.default)(e,[{key:"render",value:function(){var t=this.view;return{template:j,itemView:t,_this:this}}}]),e}(i);U=(0,R.default)(U,{decorators:[(0,w.default)((0,k.default)(null),t,"RecyclerView")],properties:[{name:"view",decorators:[(0,b.default)()],kind:"property"},{name:"collection",decorators:[(0,b.default)()],kind:"property"},{name:"capacity",decorators:[(0,b.default)()],init:function(){return 10}},{name:"updateVisibleViews",decorators:[(0,y.default)()],fn:function(t){if(t){for(var e=this.itemById||{},n={},r=this.views.length,i=new Array(r),o=0;o<r;++o)i[o]=!1;for(var a=[],s=0,u=t.length;s<u;++s){var c=t[s],l=(0,M.default)(c);if(e.hasOwnProperty(l)){var f=e[l];n[l]=f,i[f]=!0}else a.push(c)}for(var h=0,d=0,p=0,_=a.length;p<_;++p){for(var v=a[p],m=(0,M.default)(v);h<r&&i[h];++h);var y=void 0,g=void 0;h<r?(y=this.views.base[h],g=h,i[g]=!0):(++d,y=new F,g=this.views.length,this.views.push(y)),n[m]=g,y.virtualItem=v}if(!d)for(var b=0;b<r;++b)if(!i[b]){var A=this.views.base[b];A.virtualItem=null}this.itemById=n}}}]}),e.default=U}).call(e,n(6)(t))},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=this.length;n<r;n++){var i=this[n];if(t.call(e,i,n))return i}}function i(t,e,n){if(t)return(Array.prototype.find||r).call(t,e,n)}i.polyfill=function(){Array.prototype.find||(Array.prototype.find=r)},t.exports=i},,,,,,,function(t,e){t.exports={virtualScrollItem:"virtualScrollItem_36PdC"}},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(166),o=r(i),a=n(136),s=r(a),u=n(2),c=r(u),l=n(37),f=r(l),h=n(0),d=r(h),p=n(1),_=r(p),v=n(3),m=r(v),y=n(4),g=r(y),b=n(45),A=r(b),w=n(55),E=r(w),C=n(119),S=r(C),k=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f.default;(0,d.default)(this,e);var n=(0,m.default)(this,(e.__proto__||(0,c.default)(e)).call(this));if(t instanceof f.default)n.base=t;else{if("function"!=typeof t[s.default])throw new Error("ObservableSet expects either a Set object or an iterable object.");n.base=new f.default(t)}return n}return(0,g.default)(e,t),(0,_.default)(e,[{key:"size",get:function(){return E.default.active&&E.default.recordEvent(this,"change"),this.base.size}},{key:"length",get:function(){return this.size}}]),e}(S.default);e.default=k;for(var L=f.default.prototype,T=k.prototype,x=["add","clear","delete"],R=(0,o.default)(L),O=0,I=R.length;O<I;++O){var D=R[O];T.hasOwnProperty(D)||(T[D]=function(t,e){return e?function(){var e=t.apply(this.base,arguments);return A.default.trigger(this,"change"),e}:function(){return E.default.active&&E.default.recordEvent(this,"change"),t.apply(this.base,arguments)}}(L[D],-1!==x.indexOf(D)))}},,,,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(4),d=r(h),p=n(5),_=r(p),v=n(25),m=r(v),y=n(38),g=r(y),b=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return t.layoutAttributes(function(){return t.lazyWidth},function(){return t.lazyHeight}),t}return(0,d.default)(e,t),(0,c.default)(e,[{key:"expand",value:function(){return this.trigger("expand"),!0}},{key:"stopPendingItem",value:function(){this.trigger("stop")}},{key:"updateLayout",value:function(t,e){var n=this.lazyWidth,r=this.lazyHeight;this.width=-1===n?t:n,this.height=-1===r?e:r}}]),e}(g.default);b=(0,_.default)(b,{properties:[{name:"lazyWidth",decorators:[(0,m.default)()],init:function(){return-1}},{name:"lazyHeight",decorators:[(0,m.default)()],init:function(){return-1}}]}),e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(99),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=function(){function t(){var e=this;(0,s.default)(this,t),this.promise=new o.default(function(t,n){return e._deferredApi={resolve:t,reject:n}})}return(0,c.default)(t,[{key:"resolve",value:function(t){this._deferredApi.resolve(t)}},{key:"reject",value:function(t){this._deferredApi.reject(t)}}]),t}();e.default=l},function(t,e,n){"use strict";var r;r=function(){function t(t){this.getAspectRatio=t}return t.prototype.SHORT_THRESHOLD=.5,t.prototype.SNAP_POINTS=[[1,4,1],[1,3,1],[1,2,1.25],[2,3,1],[3,4,1]],t.prototype._calculateBadness=function(t,e,n,r){var i,o;return e<.1*t?1e3:(i=this._calculateDelta(t,e),o=e<t*this.SHORT_THRESHOLD,o&&(n?i*=r:i+=(t-e)/t),i)},t.prototype._calculateDelta=function(t,e){var n;return n=e-t,(n/=e<t?e:t)*n},t.prototype._calculateShortLastLinePenalty=function(t,e,n){var r,i,o,a,s,u,c,l;for(u=t.length,s=0,a=2*Math.ceil(e/n),i=o=0,l=Math.min(a,u-1);o<=l&&(r=t[u-1-i],!(this.getAspectRatio(r)*n>=e));i=o+=1);return(c=(i-s)/(a-s))*c},t.prototype.calculateBreaks=function(t,e,n,r){var i,o,a,s,u,c,l,f,h,d,p,_,v,m,y,g,b,A,w,E,C,S,k,L,T,x,R,O,I;for(S=.8*r,k=t.length,C=1.1*e,x=this._calculateShortLastLinePenalty(t,e,r),R=new Array(k),O=0,_=y=0,b=t.length;y<b;_=++y)o=t[_],i=this.getAspectRatio(o),O+=Math.max(S,Math.min(C,i*r)),R[_]=O;for(u=new Array(k),c=new Array(k),_=g=0,A=t.length;g<A;_=++g){for(o=t[_],v=_===k-1,0===_?(f=R[_],h=0):(f=R[_]-R[_-1],h=u[_-1]),h+=this._calculateBadness(e,f,v,x),d=_-1,a=e,m=E=_-2;E>=-1&&!((a-=n)<=0)&&(-1===m?f=R[_]:(_-m,f=R[_]-R[m]),!(_-m>=5&&2*a<f));m=E+=-1)s=0,m>-1&&(s+=u[m]),(s+=this._calculateBadness(a,f,v,x))<h&&(h=s,d=m);u[_]=h,c[_]=d}for(l=[],p=k-1;p>=0;)l.unshift(p),p=c[p];for(I=[],T=-1,L=0,w=l.length;L<w;L++)p=l[L],O=-1===T?R[p]:R[p]-R[T],I.push(O),T=p;return[l,I]},t.prototype.calculateRowLayout=function(t,e,n,r,i,o,a,s){var u,c,l,f,h,d,p,_,v,m,y,g,b,A,w,E,C,S,k,L,T,x,R,O,I,D,N,P,M,j,B,F,U,$,V,H,z,Y,W,q,X,G,K,J,Q,Z,tt,et,nt,rt,it,ot,at,st,ut;for(null!==s&&void 0!==s||(s=.05),u=this.SNAP_POINTS,M=.8*a,F=t.length,l=new Array(F),A=E=0,x=t.length;E<x;A=++E)f=t[A],l[A]=this.getAspectRatio(f);if(P=Math.min.apply(Math,l),N=Math.max.apply(Math,l),h=i-r-(F-1)*o,Z=h*this.SHORT_THRESHOLD,w=e<Z,P>.95*N&&(rt=F,w&&(d=e/F,B=Math.floor(h/d),B>=F&&(rt=this._calculateDelta(h,d*B)<this._calculateDelta(h,d*(B+1))?B:B+1),d*rt<Z&&(rt=0))),rt>0){for(st=new Array(F),b=h/rt,ut=r,A=C=0,Y=F-1;C<=Y;A=C+=1)at=Math.round(r+A*o+(A+1)*b)-ut,st[A]=at,ut+=at+o;rt===F&&(st[F-1]=i-(ut-at-o))}else if(w)for(st=new Array(F),A=D=0,R=t.length;D<R;A=++D)f=t[A],st[A]=Math.floor(this.getAspectRatio(f)*a);else{for(ot=new Array(F),at=0,A=$=0,O=l.length;$<O;A=++$)c=l[A],at+=Math.max(M,Math.min(c*a,1.1*n)),ot[A]=at;for(e<h?(it=M*F*.75,Q=(h-it)/(e-it)):(it=0,Q=h/e),p=s*n,_=-1,A=V=0,W=F-2;V<=W;A=V+=1)for(j=it/F*(A+1),m=r+j+A*o+Q*(ot[A]-j),H=0,I=u.length;H<I;H++)tt=u[H],U=tt[0],g=tt[1],y=tt[2],nt=Math.round(U/g*(n-(g-1)*o)+(U-1)*o),(et=Math.abs(m-nt)/y)<p&&(v=nt,p=et,_=A);if(_>=0)S=t.slice(0,_+1),X=t.slice(_+1),k=(v-r)/(i-r),G=(i-v)/(i-r),L=s*k*(2-k),K=s*G*(2-G),T=this.calculateRowLayout(S,ot[_],n,r,v,o,a,L),J=this.calculateRowLayout(X,ot[F-1]-ot[_],n,v+o,i,o,a,K),st=T.concat(J);else{for(st=new Array(F),ut=r,A=z=0,q=F-2;z<=q;A=z+=1)j=it/F*(A+1),at=Math.round(r+j+A*o+Q*(ot[A]-j))-ut,st[A]=at,ut+=at+o;st[F-1]=i-ut}}return st},t}(),t.exports=r},,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(3),c=r(u),l=n(4),f=r(l),h=n(21),d=r(h),p=function(t){function e(){return(0,s.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,f.default)(e,t),e}(d.default);p.placeholder="empty elseif",e.default=p},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(3),f=r(l),h=n(4),d=r(h),p=n(5),_=r(p),v=n(25),m=r(v),y=n(7),g=r(y),b=n(23),A=r(b),w=n(38),E=r(w),C=function(t){function e(){(0,s.default)(this,e);var t=(0,f.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return t.layoutAttributes(function(){return t.stickyWidth},function(){return t.stickyHeight}),t}return(0,d.default)(e,t),(0,c.default)(e,[{key:"updateLayout",value:function(t,e){var n=this.stickyWidth,r=this.stickyHeight;this.width=-1===n?t:n,this.height=-1===r?e:r}}]),e}(E.default);C=(0,_.default)(C,{decorators:[(0,A.default)({sticky:!0})],properties:[{name:"fixed",decorators:[(0,g.default)()],init:function(){return!1}},{name:"fixedLeft",decorators:[(0,g.default)()],init:function(){return 0}},{name:"fixedTop",decorators:[(0,g.default)()],init:function(){return 0}},{name:"stickyWidth",decorators:[(0,m.default)()],init:function(){return-1}},{name:"stickyHeight",decorators:[(0,m.default)()],init:function(){return-1}}]}),e.default=C}]);